# 请求方式

## 请求方式有什么区别?

### 依次请求, 失败后重试

这种请求方式和你不满意剧情、要求 AI 重新生成时做的一样:

- 向 AI 发送一次请求
- 如果 AI 回复里有变量更新命令, 则用来更新变量
- 如果没有, 则再尝试发送请求, 直到达到设定的 "请求次数"

### 同时请求多次

这种请求方式会**同时向 AI 发送指定数量的请求**:

- 同时向 AI 发送 "请求次数" 次请求
- 其中有一次 AI 回复里有变量更新命令, 则用来更新变量; 其他还没完成的请求将被中断

也就是说, 它能节省你的时间.

但同时发送那么多次请求, 显然会额外消耗 token. 为此, 针对 Claude 等有 token 缓存计费的模型, 你可以使用下面一种请求方式:

### 先请求一次, 失败后再同时请求多次

顾名思义, 它先向 AI 发送一次请求, 如果失败, 则再同时请求多次.

## 什么时候使用同时请求?

如果你的模型每分钟请求次数 (rpm) 足够, 建议使用 "同时请求多次" 或 "先请求一次, 失败后再同时请求多次".

## 同时请求会不会很浪费 token?

其实无论 "同时请求多次" 还是 "先请求一次, 失败后再同时请求多次" 一般都不会很浪费 token, 因为额外模型解析只会使用以下提示词:

- 名字里有 `[mvu_update]` 的世界书条目
- 名字里既没有 `[mvu_plot]` 也没有 `[mvu_update]` 的世界书条目
- **仅最后两楼消息**
- (如果勾选了 "发送预设") 预设里的提示词

游玩酒馆时, token 占用最多的是你的消息记录, 而额外模型解析只会使用最后两楼, 因此只要角色卡作者在世界书设计得足够合理, 批量请求就不会太浪费 token.
