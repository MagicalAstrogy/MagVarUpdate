# 额外模型解析方式

- 发送预设: 是否要把预设里的条目也发给额外模型
    - 开启: 额外模型将会被预设破限; 但是预设往往规定了写作任务, 因此额外模型可能会选择继续剧情而不是更新变量.
    - 关闭: 额外模型可能因为没有被破限而道歉.

- 使用函数调用: 一些渠道的模型支持函数调用
    - 开启: 额外模型将使用函数调用来更新变量, 不受预设的写作任务影响; 但很多渠道不支持函数调用.
    - 关闭: 额外模型会通过输出文本来更新变量, 可能受预设的写作任务影响而选择继续剧情而不是更新变量.

# 什么时候需要调整解析方式

默认情况下，更新变量的 llm 请求也会包含预设的内容，不过这有一定概率会因为预设强制指定剧情演绎的缘故，实际上在推进剧情的同时分析了变量，使得变量的更新结果实际上是属于未来的，与当前回复并不吻合。

如果发现了这种不吻合，在 sfw 的场合可以关闭
`发送预设`，避免预设对变量分析请求的影响。在 nsfw 的场合，也可以尝试开启
`使用函数调用`，来稳定覆盖掉预设中的任务。但是只有一部分模型/提供商/反代支持函数调用。需要支持的函数调用类型为
`required`。已知支持的模型至少包括：Claude 4+, Gemini 2.5 Pro, Deepseek
V3/V3.1(官方渠道，硅基流动等的不支持)。如果你使用的是上述模型，但是请求报错，建议换个渠道使用这些模型。
