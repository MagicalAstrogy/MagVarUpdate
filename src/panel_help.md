# 使用说明

## 选择你的变量更新方式

为了让剧情模型更专注于剧情，你可以选择变量更新的方式：

- **随AI输出**：名字中有 `mvu_update` 的条目将会正常发给 AI，因此 AI 将会在回复时输出变量更新分析及更新命令，进而更新变量。
- **额外模型解析**：名字中有 `mvu_update` 的条目不会发给 AI。在 AI 回复完成后，MVU 将会只使用名字中有 `mvu_update` 的条目调用额外模型专门解析变量更新。
  - **仅发送变量提示词**：只发送正文和 `mvu_update` 条目给额外模型，不发送预设——额外模型不会因为预设规定了写作任务而继续剧情，但可能因为没有预设而道歉。
  - **发送变量提示词及预设**：发送正文、`mvu_update` 条目和预设给额外模型——额外模型会被破限，但可能因为预设规定了写作任务而继续剧情。
  - **发送变量提示词及预设 (函数调用)**：发送正文、`mvu_update` 条目和预设给额外模型，并要求 AI 使用函数调用来更新变量——额外模型既被破限，又因为是要求函数调用而不会继续剧情；但很多渠道不支持函数调用。

除“随AI输出”以外的方式，只有在作者适配世界书后才能使用——但没适配也没关系——如果作者没有适配，则 MVU 依旧会使用“随AI输出”的方式更新变量。

## 适配世界书

你只需要拆分一下条目、给条目改一下名字就能让世界书适配其他变量更新方式。

具体地，MVU 变量框架的提示词分为：

- **变量列表**：让 AI 知道有什么变量，如 `{{get_message_variable::stat_data}}`、`<%= getvar('stat_data') _%>` 等。
- **变量更新规则**：让 AI 知道变量该如何更新，如`药物依赖度应该每分钟增加1点`等。
- **输出规则**：让 AI 知道该输出什么来表达变量发生变化，如提示词中要求输出的`<UpdateVariable>`块。

你需要做的，是给“变量更新规则”和“输出规则”条目*的名字添加 `mvu_update`，也就是改成：

- `变量列表`
- `[mvu_update]变量更新规则`
- `[mvu_update]输出规则`
