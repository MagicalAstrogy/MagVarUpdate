import * as __WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_compare_versions_esm_4fbc8a69__ from "https://testingcf.jsdelivr.net/npm/compare-versions/+esm";

import * as __WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_json5_esm_143ca249__ from "https://testingcf.jsdelivr.net/npm/json5/+esm";

import * as __WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_mathjs_esm_aec644b1__ from "https://testingcf.jsdelivr.net/npm/mathjs/+esm";

import * as __WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_pinia_esm_b723a504__ from "https://testingcf.jsdelivr.net/npm/pinia/+esm";

import * as __WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_toml_esm_005ece54__ from "https://testingcf.jsdelivr.net/npm/toml/+esm";

var __webpack_modules__ = {
  "./node_modules/ts-loader/index.js??clonedRuleSet-6!./node_modules/vue-loader/dist/index.js??ruleSet[1].rules[4].use[0]!./src/Panel.vue?vue&type=script&setup=true&lang=ts": 
  /*!*********************************************************************************************************************************************************************************!*\
  !*** ./node_modules/ts-loader/index.js??clonedRuleSet-6!./node_modules/vue-loader/dist/index.js??ruleSet[1].rules[4].use[0]!./src/Panel.vue?vue&type=script&setup=true&lang=ts ***!
  \*********************************************************************************************************************************************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval('{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vue */ "vue");\n/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(vue__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _button__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/button */ "./src/button.ts");\n/* harmony import */ var _settings__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/settings */ "./src/settings.ts");\n/* harmony import */ var pinia__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! pinia */ "pinia");\n\n\n\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (/*@__PURE__*/(0,vue__WEBPACK_IMPORTED_MODULE_0__.defineComponent)({\n    __name: \'Panel\',\n    setup(__props, { expose: __expose }) {\n        __expose();\n        const { settings } = (0,pinia__WEBPACK_IMPORTED_MODULE_3__.storeToRefs)((0,_settings__WEBPACK_IMPORTED_MODULE_2__.useSettingsStore)());\n        function showHelp() {\n            SillyTavern.callGenericPopup(`<p>为了让剧情模型更专注于剧情，你可以选择变量更新的方式：</p>\n        <ul>\n        <li><strong>随AI输出</strong>：名字中有 <code>[mvu_update]</code> 的条目将会正常发给 AI，因此 AI 将会在回复时输出变量更新分析及更新命令，进而更新变量。</li>\n        <li><strong>额外模型解析</strong>：名字中有 <code>[mvu_update]</code> 的条目不会发给 AI。在 AI 回复完成后，MVU 将会只使用名字中有 <code>[mvu_update]</code> 的条目调用额外模型专门解析变量更新。</li>\n        <li><strong>工具调用（待完成）</strong>：名字中有 <code>[mvu_update]</code> 的条目将作为工具调用的提示词发给 AI，因此 AI 将会通过工具调用来更新变量。</li>\n        </ul>\n        <hr/>\n        <p>如果要使用除<q>随AI输出</q>以外的方式，则需要作者适配世界书，添加带有 <code>[mvu_update]</code> 的条目；如果作者没有适配，则依旧会使用<q>随AI输出</q>的方式。<br>\n        具体地，MVU 变量框架的提示词分为：</p>\n        <ul>\n        <li><strong>变量列表</strong>：让 AI 知道有什么变量，如 <code>null</code>、<code>&lt;%= getvar(\'stat_data\') _%&gt;</code> 等。</li>\n        <li><strong>变量更新规则</strong>：让 AI 知道变量该如何更新，如<code>药物依赖度应该每分钟增加1点</code>等。</li>\n        <li><strong>输出规则</strong>：让 AI 知道该输出什么来表达变量发生变化，如提示词中要求输出的<code>&lt;UpdateVariable&gt;</code>块。</li>\n        </ul>\n        <p>作者需要做的，是给<q>变量更新规则</q>和<q>输出规则</q>条目的名字添加 <code>[mvu_update]</code>。</p>`, SillyTavern.POPUP_TYPE.TEXT, \'\', { allowHorizontalScrolling: true, leftAlign: true });\n        }\n        const __returned__ = { settings, showHelp, get buttons() { return _button__WEBPACK_IMPORTED_MODULE_1__.buttons; } };\n        Object.defineProperty(__returned__, \'__isScriptSetup\', { enumerable: false, value: true });\n        return __returned__;\n    }\n}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvdHMtbG9hZGVyL2luZGV4LmpzPz9jbG9uZWRSdWxlU2V0LTYhLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9kaXN0L2luZGV4LmpzPz9ydWxlU2V0WzFdLnJ1bGVzWzRdLnVzZVswXSEuL3NyYy9QYW5lbC52dWU/dnVlJnR5cGU9c2NyaXB0JnNldHVwPXRydWUmbGFuZz10cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBeUQ7QUN5R3ZCO0FBQ1c7QUFDVjtBRHJHbkMsOEVBQTRCLG9EQUFnQixDQUFDO0lBQzNDLE1BQU0sRUFBRSxPQUFPO0lBQ2YsS0FBSyxDQUFDLE9BQU8sRUFBRSxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUU7UUFDbkMsUUFBUSxFQUFFLENBQUM7UUNvR2IsTUFBTSxFQUFFLFFBQVEsRUFBRSxHQUFHLGtEQUFXLENBQUMsMkRBQWdCLEVBQUUsQ0FBQztRQUVwRCxTQUFTLFFBQVE7WUFDYixXQUFXLENBQUMsZ0JBQWdCLENBQ3hCOzs7Ozs7Ozs7Ozs7OztvRkFjNEUsRUFDNUUsV0FBVyxDQUFDLFVBQVUsQ0FBQyxJQUFJLEVBQzNCLEVBQUUsRUFDRixFQUFFLHdCQUF3QixFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFDLENBQ3JEO1FBQ0w7UURoR0EsTUFBTSxZQUFZLEdBQUcsRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLElBQUksT0FBTyxLQUFLLE9BQU8sNENBQU8sRUFBQyxDQUFDLEVBQUU7UUFDN0UsTUFBTSxDQUFDLGNBQWMsQ0FBQyxZQUFZLEVBQUUsaUJBQWlCLEVBQUUsRUFBRSxVQUFVLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsQ0FBQztRQUMxRixPQUFPLFlBQVk7SUFDbkIsQ0FBQztDQUVBLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90YXZlcm5faGVscGVyX3RlbXBsYXRlL3NyYy9QYW5lbC52dWUiLCJzcmM6Ly90YXZlcm5faGVscGVyX3RlbXBsYXRlL3NyYy9QYW5lbC52dWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGVmaW5lQ29tcG9uZW50IGFzIF9kZWZpbmVDb21wb25lbnQgfSBmcm9tICd2dWUnXG5pbXBvcnQgeyBidXR0b25zIH0gZnJvbSAnQC9idXR0b24nO1xuaW1wb3J0IHsgdXNlU2V0dGluZ3NTdG9yZSB9IGZyb20gJ0Avc2V0dGluZ3MnO1xuaW1wb3J0IHsgc3RvcmVUb1JlZnMgfSBmcm9tICdwaW5pYSc7XG5cblxuZXhwb3J0IGRlZmF1bHQgLypAX19QVVJFX18qL19kZWZpbmVDb21wb25lbnQoe1xuICBfX25hbWU6ICdQYW5lbCcsXG4gIHNldHVwKF9fcHJvcHMsIHsgZXhwb3NlOiBfX2V4cG9zZSB9KSB7XG4gIF9fZXhwb3NlKCk7XG5cbmNvbnN0IHsgc2V0dGluZ3MgfSA9IHN0b3JlVG9SZWZzKHVzZVNldHRpbmdzU3RvcmUoKSk7XG5cbmZ1bmN0aW9uIHNob3dIZWxwKCkge1xuICAgIFNpbGx5VGF2ZXJuLmNhbGxHZW5lcmljUG9wdXAoXG4gICAgICAgIGA8cD7kuLrkuoborqnliafmg4XmqKHlnovmm7TkuJPms6jkuo7liafmg4XvvIzkvaDlj6/ku6XpgInmi6nlj5jph4/mm7TmlrDnmoTmlrnlvI/vvJo8L3A+XG4gICAgICAgIDx1bD5cbiAgICAgICAgPGxpPjxzdHJvbmc+6ZqPQUnovpPlh7o8L3N0cm9uZz7vvJrlkI3lrZfkuK3mnIkgPGNvZGU+W212dV91cGRhdGVdPC9jb2RlPiDnmoTmnaHnm67lsIbkvJrmraPluLjlj5Hnu5kgQUnvvIzlm6DmraQgQUkg5bCG5Lya5Zyo5Zue5aSN5pe26L6T5Ye65Y+Y6YeP5pu05paw5YiG5p6Q5Y+K5pu05paw5ZG95Luk77yM6L+b6ICM5pu05paw5Y+Y6YeP44CCPC9saT5cbiAgICAgICAgPGxpPjxzdHJvbmc+6aKd5aSW5qih5Z6L6Kej5p6QPC9zdHJvbmc+77ya5ZCN5a2X5Lit5pyJIDxjb2RlPlttdnVfdXBkYXRlXTwvY29kZT4g55qE5p2h55uu5LiN5Lya5Y+R57uZIEFJ44CC5ZyoIEFJIOWbnuWkjeWujOaIkOWQju+8jE1WVSDlsIbkvJrlj6rkvb/nlKjlkI3lrZfkuK3mnIkgPGNvZGU+W212dV91cGRhdGVdPC9jb2RlPiDnmoTmnaHnm67osIPnlKjpop3lpJbmqKHlnovkuJPpl6jop6PmnpDlj5jph4/mm7TmlrDjgII8L2xpPlxuICAgICAgICA8bGk+PHN0cm9uZz7lt6XlhbfosIPnlKjvvIjlvoXlrozmiJDvvIk8L3N0cm9uZz7vvJrlkI3lrZfkuK3mnIkgPGNvZGU+W212dV91cGRhdGVdPC9jb2RlPiDnmoTmnaHnm67lsIbkvZzkuLrlt6XlhbfosIPnlKjnmoTmj5DnpLror43lj5Hnu5kgQUnvvIzlm6DmraQgQUkg5bCG5Lya6YCa6L+H5bel5YW36LCD55So5p2l5pu05paw5Y+Y6YeP44CCPC9saT5cbiAgICAgICAgPC91bD5cbiAgICAgICAgPGhyLz5cbiAgICAgICAgPHA+5aaC5p6c6KaB5L2/55So6ZmkPHE+6ZqPQUnovpPlh7o8L3E+5Lul5aSW55qE5pa55byP77yM5YiZ6ZyA6KaB5L2c6ICF6YCC6YWN5LiW55WM5Lmm77yM5re75Yqg5bim5pyJIDxjb2RlPlttdnVfdXBkYXRlXTwvY29kZT4g55qE5p2h55uu77yb5aaC5p6c5L2c6ICF5rKh5pyJ6YCC6YWN77yM5YiZ5L6d5pen5Lya5L2/55SoPHE+6ZqPQUnovpPlh7o8L3E+55qE5pa55byP44CCPGJyPlxuICAgICAgICDlhbfkvZPlnLDvvIxNVlUg5Y+Y6YeP5qGG5p6255qE5o+Q56S66K+N5YiG5Li677yaPC9wPlxuICAgICAgICA8dWw+XG4gICAgICAgIDxsaT48c3Ryb25nPuWPmOmHj+WIl+ihqDwvc3Ryb25nPu+8muiuqSBBSSDnn6XpgZPmnInku4DkuYjlj5jph4/vvIzlpoIgPGNvZGU+bnVsbDwvY29kZT7jgIE8Y29kZT4mbHQ7JT0gZ2V0dmFyKCdzdGF0X2RhdGEnKSBfJSZndDs8L2NvZGU+IOetieOAgjwvbGk+XG4gICAgICAgIDxsaT48c3Ryb25nPuWPmOmHj+abtOaWsOinhOWImTwvc3Ryb25nPu+8muiuqSBBSSDnn6XpgZPlj5jph4/or6XlpoLkvZXmm7TmlrDvvIzlpoI8Y29kZT7oja/niankvp3otZbluqblupTor6Xmr4/liIbpkp/lop7liqAx54K5PC9jb2RlPuetieOAgjwvbGk+XG4gICAgICAgIDxsaT48c3Ryb25nPui+k+WHuuinhOWImTwvc3Ryb25nPu+8muiuqSBBSSDnn6XpgZPor6XovpPlh7rku4DkuYjmnaXooajovr7lj5jph4/lj5HnlJ/lj5jljJbvvIzlpoLmj5DnpLror43kuK3opoHmsYLovpPlh7rnmoQ8Y29kZT4mbHQ7VXBkYXRlVmFyaWFibGUmZ3Q7PC9jb2RlPuWdl+OAgjwvbGk+XG4gICAgICAgIDwvdWw+XG4gICAgICAgIDxwPuS9nOiAhemcgOimgeWBmueahO+8jOaYr+e7mTxxPuWPmOmHj+abtOaWsOinhOWImTwvcT7lkow8cT7ovpPlh7rop4TliJk8L3E+5p2h55uu55qE5ZCN5a2X5re75YqgIDxjb2RlPlttdnVfdXBkYXRlXTwvY29kZT7jgII8L3A+YCxcbiAgICAgICAgU2lsbHlUYXZlcm4uUE9QVVBfVFlQRS5URVhULFxuICAgICAgICAnJyxcbiAgICAgICAgeyBhbGxvd0hvcml6b250YWxTY3JvbGxpbmc6IHRydWUsIGxlZnRBbGlnbjogdHJ1ZSB9XG4gICAgKTtcbn1cblxuY29uc3QgX19yZXR1cm5lZF9fID0geyBzZXR0aW5ncywgc2hvd0hlbHAsIGdldCBidXR0b25zKCkgeyByZXR1cm4gYnV0dG9ucyB9IH1cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShfX3JldHVybmVkX18sICdfX2lzU2NyaXB0U2V0dXAnLCB7IGVudW1lcmFibGU6IGZhbHNlLCB2YWx1ZTogdHJ1ZSB9KVxucmV0dXJuIF9fcmV0dXJuZWRfX1xufVxuXG59KSIsIjx0ZW1wbGF0ZT5cbiAgICA8ZGl2IGNsYXNzPVwiaW5saW5lLWRyYXdlclwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiaW5saW5lLWRyYXdlci10b2dnbGUgaW5saW5lLWRyYXdlci1oZWFkZXJcIj5cbiAgICAgICAgICAgIDxiPk1WVSDlj5jph4/moYbmnrY8L2I+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaW5saW5lLWRyYXdlci1pY29uIGZhLXNvbGlkIGZhLWNpcmNsZS1jaGV2cm9uLWRvd24gZG93blwiPjwvZGl2PlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8ZGl2IGNsYXNzPVwiaW5saW5lLWRyYXdlci1jb250ZW50XCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleC1jb250YWluZXIgZmxleEZsb3dDb2x1bW5cIj5cbiAgICAgICAgICAgICAgICA8ZGl2PjxzdHJvbmc+6YCa55+l6K6+572uPC9zdHJvbmc+PC9kaXY+XG4gICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwiY2hlY2tib3hfbGFiZWxcIiBmb3I9XCJtdnVfbm90aWZpY2F0aW9uX2Vycm9yXCI+XG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ9XCJtdnVfbm90aWZpY2F0aW9uX2Vycm9yXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHYtbW9kZWw9XCJzZXR0aW5ncy7pgJrnn6Uu5Y+Y6YeP5pu05paw5Ye66ZSZXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuPuWPmOmHj+abtOaWsOWHuumUmeaXtumAmuefpTwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDxociAvPlxuXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleC1jb250YWluZXIgZmxleEZsb3dDb2x1bW5cIj5cbiAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPuWPmOmHj+abtOaWsOaWueW8jzwvc3Ryb25nPlxuICAgICAgICAgICAgICAgICAgICA8aVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJmYS1zb2xpZCBmYS1jaXJjbGUtcXVlc3Rpb24gZmEtc20gbm90ZS1saW5rLXNwYW5cIlxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9XCJjdXJzb3I6IHBvaW50ZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgQGNsaWNrPVwic2hvd0hlbHBcIlxuICAgICAgICAgICAgICAgICAgICA+PC9pPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9XCJtdnVfdXBkYXRlX21ldGhvZFwiIHYtbW9kZWw9XCJzZXR0aW5ncy7mm7TmlrDmlrnlvI9cIiBjbGFzcz1cInRleHRfcG9sZVwiPlxuICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwi6ZqPQUnovpPlh7pcIj7pmo9BSei+k+WHujwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwi6aKd5aSW5qih5Z6L6Kej5p6QXCI+6aKd5aSW5qih5Z6L6Kej5p6QPC9vcHRpb24+XG4gICAgICAgICAgICAgICAgPC9zZWxlY3Q+XG5cbiAgICAgICAgICAgICAgICA8dGVtcGxhdGUgdi1pZj1cInNldHRpbmdzLuabtOaWsOaWueW8jyA9PT0gJ+mineWkluaooeWei+ino+aekCdcIj5cbiAgICAgICAgICAgICAgICAgICAgPHNlbGVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ9XCJtdnVfZXh0cmFfbW9kZWxfc291cmNlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHYtbW9kZWw9XCJzZXR0aW5ncy7pop3lpJbmqKHlnovop6PmnpDphY3nva4u5qih5Z6L5p2l5rqQXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwidGV4dF9wb2xlXCJcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIuS4juaPkuWktOebuOWQjFwiPuS4juaPkuWktOebuOWQjDwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIuiHquWumuS5iVwiPuiHquWumuS5iTwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD5cblxuICAgICAgICAgICAgICAgICAgICA8dGVtcGxhdGUgdi1pZj1cInNldHRpbmdzLumineWkluaooeWei+ino+aekOmFjee9ri7mqKHlnovmnaXmupAgPT09ICfoh6rlrprkuYknXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleC1jb250YWluZXIgZmxleEZsb3dDb2x1bW5cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwibXZ1X2FwaV91cmxcIj5BUEkg5Zyw5Z2APC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9XCJtdnVfYXBpX3VybFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYtbW9kZWw9XCJzZXR0aW5ncy7pop3lpJbmqKHlnovop6PmnpDphY3nva4uYXBp5Zyw5Z2AXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cInRleHRfcG9sZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiaHR0cDovL2xvY2FsaG9zdDoxMjM0L3YxXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4LWNvbnRhaW5lciBmbGV4Rmxvd0NvbHVtblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJtdnVfYXBpX2tleVwiPkFQSSDlr4bpkqU8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD1cIm12dV9hcGlfa2V5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi1tb2RlbD1cInNldHRpbmdzLumineWkluaooeWei+ino+aekOmFjee9ri7lr4bpkqVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwicGFzc3dvcmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cInRleHRfcG9sZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwi55WZ56m66KGo56S65peg6ZyA5a+G6ZKlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4LWNvbnRhaW5lciBmbGV4Rmxvd0NvbHVtblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJtdnVfbW9kZWxfbmFtZVwiPuaooeWei+WQjeensDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPVwibXZ1X21vZGVsX25hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2LW1vZGVsPVwic2V0dGluZ3Mu6aKd5aSW5qih5Z6L6Kej5p6Q6YWN572uLuaooeWei+WQjeensFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJ0ZXh0X3BvbGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cImdlbWluaS0yLjUtZmxhc2hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC90ZW1wbGF0ZT5cbiAgICAgICAgICAgICAgICA8L3RlbXBsYXRlPlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDxociAvPlxuXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleC1jb250YWluZXIgZmxleEZsb3dDb2x1bW5cIj5cbiAgICAgICAgICAgICAgICA8ZGl2PjxzdHJvbmc+5L+u5aSN5oyJ6ZKuPC9zdHJvbmc+PC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXgtY29udGFpbmVyIGZsZXhcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgdi1mb3I9XCJidXR0b24gaW4gYnV0dG9uc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICA6a2V5PVwiYnV0dG9uLm5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJtZW51X2J1dHRvbiBtZW51X2J1dHRvbl9pY29uIGludGVyYWN0YWJsZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJpbmRleD1cIjBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgcm9sZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICAgICAgICBAY2xpY2s9XCJidXR0b24uZnVuY3Rpb25cIlxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7eyBidXR0b24ubmFtZSB9fVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbjwvdGVtcGxhdGU+XG5cbjxzY3JpcHQgc2V0dXAgbGFuZz1cInRzXCI+XG5pbXBvcnQgeyBidXR0b25zIH0gZnJvbSAnQC9idXR0b24nO1xuaW1wb3J0IHsgdXNlU2V0dGluZ3NTdG9yZSB9IGZyb20gJ0Avc2V0dGluZ3MnO1xuaW1wb3J0IHsgc3RvcmVUb1JlZnMgfSBmcm9tICdwaW5pYSc7XG5cbmNvbnN0IHsgc2V0dGluZ3MgfSA9IHN0b3JlVG9SZWZzKHVzZVNldHRpbmdzU3RvcmUoKSk7XG5cbmZ1bmN0aW9uIHNob3dIZWxwKCkge1xuICAgIFNpbGx5VGF2ZXJuLmNhbGxHZW5lcmljUG9wdXAoXG4gICAgICAgIGA8cD7kuLrkuoborqnliafmg4XmqKHlnovmm7TkuJPms6jkuo7liafmg4XvvIzkvaDlj6/ku6XpgInmi6nlj5jph4/mm7TmlrDnmoTmlrnlvI/vvJo8L3A+XG4gICAgICAgIDx1bD5cbiAgICAgICAgPGxpPjxzdHJvbmc+6ZqPQUnovpPlh7o8L3N0cm9uZz7vvJrlkI3lrZfkuK3mnIkgPGNvZGU+W212dV91cGRhdGVdPC9jb2RlPiDnmoTmnaHnm67lsIbkvJrmraPluLjlj5Hnu5kgQUnvvIzlm6DmraQgQUkg5bCG5Lya5Zyo5Zue5aSN5pe26L6T5Ye65Y+Y6YeP5pu05paw5YiG5p6Q5Y+K5pu05paw5ZG95Luk77yM6L+b6ICM5pu05paw5Y+Y6YeP44CCPC9saT5cbiAgICAgICAgPGxpPjxzdHJvbmc+6aKd5aSW5qih5Z6L6Kej5p6QPC9zdHJvbmc+77ya5ZCN5a2X5Lit5pyJIDxjb2RlPlttdnVfdXBkYXRlXTwvY29kZT4g55qE5p2h55uu5LiN5Lya5Y+R57uZIEFJ44CC5ZyoIEFJIOWbnuWkjeWujOaIkOWQju+8jE1WVSDlsIbkvJrlj6rkvb/nlKjlkI3lrZfkuK3mnIkgPGNvZGU+W212dV91cGRhdGVdPC9jb2RlPiDnmoTmnaHnm67osIPnlKjpop3lpJbmqKHlnovkuJPpl6jop6PmnpDlj5jph4/mm7TmlrDjgII8L2xpPlxuICAgICAgICA8bGk+PHN0cm9uZz7lt6XlhbfosIPnlKjvvIjlvoXlrozmiJDvvIk8L3N0cm9uZz7vvJrlkI3lrZfkuK3mnIkgPGNvZGU+W212dV91cGRhdGVdPC9jb2RlPiDnmoTmnaHnm67lsIbkvZzkuLrlt6XlhbfosIPnlKjnmoTmj5DnpLror43lj5Hnu5kgQUnvvIzlm6DmraQgQUkg5bCG5Lya6YCa6L+H5bel5YW36LCD55So5p2l5pu05paw5Y+Y6YeP44CCPC9saT5cbiAgICAgICAgPC91bD5cbiAgICAgICAgPGhyLz5cbiAgICAgICAgPHA+5aaC5p6c6KaB5L2/55So6ZmkPHE+6ZqPQUnovpPlh7o8L3E+5Lul5aSW55qE5pa55byP77yM5YiZ6ZyA6KaB5L2c6ICF6YCC6YWN5LiW55WM5Lmm77yM5re75Yqg5bim5pyJIDxjb2RlPlttdnVfdXBkYXRlXTwvY29kZT4g55qE5p2h55uu77yb5aaC5p6c5L2c6ICF5rKh5pyJ6YCC6YWN77yM5YiZ5L6d5pen5Lya5L2/55SoPHE+6ZqPQUnovpPlh7o8L3E+55qE5pa55byP44CCPGJyPlxuICAgICAgICDlhbfkvZPlnLDvvIxNVlUg5Y+Y6YeP5qGG5p6255qE5o+Q56S66K+N5YiG5Li677yaPC9wPlxuICAgICAgICA8dWw+XG4gICAgICAgIDxsaT48c3Ryb25nPuWPmOmHj+WIl+ihqDwvc3Ryb25nPu+8muiuqSBBSSDnn6XpgZPmnInku4DkuYjlj5jph4/vvIzlpoIgPGNvZGU+bnVsbDwvY29kZT7jgIE8Y29kZT4mbHQ7JT0gZ2V0dmFyKCdzdGF0X2RhdGEnKSBfJSZndDs8L2NvZGU+IOetieOAgjwvbGk+XG4gICAgICAgIDxsaT48c3Ryb25nPuWPmOmHj+abtOaWsOinhOWImTwvc3Ryb25nPu+8muiuqSBBSSDnn6XpgZPlj5jph4/or6XlpoLkvZXmm7TmlrDvvIzlpoI8Y29kZT7oja/niankvp3otZbluqblupTor6Xmr4/liIbpkp/lop7liqAx54K5PC9jb2RlPuetieOAgjwvbGk+XG4gICAgICAgIDxsaT48c3Ryb25nPui+k+WHuuinhOWImTwvc3Ryb25nPu+8muiuqSBBSSDnn6XpgZPor6XovpPlh7rku4DkuYjmnaXooajovr7lj5jph4/lj5HnlJ/lj5jljJbvvIzlpoLmj5DnpLror43kuK3opoHmsYLovpPlh7rnmoQ8Y29kZT4mbHQ7VXBkYXRlVmFyaWFibGUmZ3Q7PC9jb2RlPuWdl+OAgjwvbGk+XG4gICAgICAgIDwvdWw+XG4gICAgICAgIDxwPuS9nOiAhemcgOimgeWBmueahO+8jOaYr+e7mTxxPuWPmOmHj+abtOaWsOinhOWImTwvcT7lkow8cT7ovpPlh7rop4TliJk8L3E+5p2h55uu55qE5ZCN5a2X5re75YqgIDxjb2RlPlttdnVfdXBkYXRlXTwvY29kZT7jgII8L3A+YCxcbiAgICAgICAgU2lsbHlUYXZlcm4uUE9QVVBfVFlQRS5URVhULFxuICAgICAgICAnJyxcbiAgICAgICAgeyBhbGxvd0hvcml6b250YWxTY3JvbGxpbmc6IHRydWUsIGxlZnRBbGlnbjogdHJ1ZSB9XG4gICAgKTtcbn1cbjwvc2NyaXB0PlxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/ts-loader/index.js??clonedRuleSet-6!./node_modules/vue-loader/dist/index.js??ruleSet[1].rules[4].use[0]!./src/Panel.vue?vue&type=script&setup=true&lang=ts\n\n}');
  },
  "./node_modules/ts-loader/index.js??clonedRuleSet-6!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[2]!./node_modules/vue-loader/dist/index.js??ruleSet[1].rules[4].use[0]!./src/Panel.vue?vue&type=template&id=789bc3db&ts=true": 
  /*!**********************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/ts-loader/index.js??clonedRuleSet-6!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[2]!./node_modules/vue-loader/dist/index.js??ruleSet[1].rules[4].use[0]!./src/Panel.vue?vue&type=template&id=789bc3db&ts=true ***!
  \**********************************************************************************************************************************************************************************************************************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval('{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   render: () => (/* binding */ render)\n/* harmony export */ });\n/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vue */ "vue");\n/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(vue__WEBPACK_IMPORTED_MODULE_0__);\n\nconst _hoisted_1 = { class: "inline-drawer" };\nconst _hoisted_2 = { class: "inline-drawer-content" };\nconst _hoisted_3 = { class: "flex-container flexFlowColumn" };\nconst _hoisted_4 = {\n    class: "checkbox_label",\n    for: "mvu_notification_error"\n};\nconst _hoisted_5 = { class: "flex-container flexFlowColumn" };\nconst _hoisted_6 = { class: "flex-container flexFlowColumn" };\nconst _hoisted_7 = { class: "flex-container flexFlowColumn" };\nconst _hoisted_8 = { class: "flex-container flexFlowColumn" };\nconst _hoisted_9 = { class: "flex-container flexFlowColumn" };\nconst _hoisted_10 = { class: "flex-container flex" };\nconst _hoisted_11 = ["onClick"];\nfunction render(_ctx, _cache, $props, $setup, $data, $options) {\n    return ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("div", _hoisted_1, [\n        _cache[17] || (_cache[17] = (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", { class: "inline-drawer-toggle inline-drawer-header" }, [\n            (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("b", null, "MVU 变量框架"),\n            (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", { class: "inline-drawer-icon fa-solid fa-circle-chevron-down down" })\n        ], -1 /* CACHED */)),\n        (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_2, [\n            (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_3, [\n                _cache[7] || (_cache[7] = (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", null, [\n                    (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("strong", null, "通知设置")\n                ], -1 /* CACHED */)),\n                (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("label", _hoisted_4, [\n                    (0,vue__WEBPACK_IMPORTED_MODULE_0__.withDirectives)((0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("input", {\n                        id: "mvu_notification_error",\n                        "onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => (($setup.settings.通知.变量更新出错) = $event)),\n                        type: "checkbox"\n                    }, null, 512 /* NEED_PATCH */), [\n                        [vue__WEBPACK_IMPORTED_MODULE_0__.vModelCheckbox, $setup.settings.通知.变量更新出错]\n                    ]),\n                    _cache[6] || (_cache[6] = (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("span", null, "变量更新出错时通知", -1 /* CACHED */))\n                ])\n            ]),\n            _cache[15] || (_cache[15] = (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("hr", null, null, -1 /* CACHED */)),\n            (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_5, [\n                (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", null, [\n                    _cache[8] || (_cache[8] = (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("strong", null, "变量更新方式", -1 /* CACHED */)),\n                    (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("i", {\n                        class: "fa-solid fa-circle-question fa-sm note-link-span",\n                        style: { "cursor": "pointer" },\n                        onClick: $setup.showHelp\n                    })\n                ]),\n                (0,vue__WEBPACK_IMPORTED_MODULE_0__.withDirectives)((0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("select", {\n                    id: "mvu_update_method",\n                    "onUpdate:modelValue": _cache[1] || (_cache[1] = ($event) => (($setup.settings.更新方式) = $event)),\n                    class: "text_pole"\n                }, [...(_cache[9] || (_cache[9] = [\n                        (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("option", { value: "随AI输出" }, "随AI输出", -1 /* CACHED */),\n                        (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("option", { value: "额外模型解析" }, "额外模型解析", -1 /* CACHED */)\n                    ]))], 512 /* NEED_PATCH */), [\n                    [vue__WEBPACK_IMPORTED_MODULE_0__.vModelSelect, $setup.settings.更新方式]\n                ]),\n                ($setup.settings.更新方式 === \'额外模型解析\')\n                    ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)(vue__WEBPACK_IMPORTED_MODULE_0__.Fragment, { key: 0 }, [\n                        (0,vue__WEBPACK_IMPORTED_MODULE_0__.withDirectives)((0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("select", {\n                            id: "mvu_extra_model_source",\n                            "onUpdate:modelValue": _cache[2] || (_cache[2] = ($event) => (($setup.settings.额外模型解析配置.模型来源) = $event)),\n                            class: "text_pole"\n                        }, [...(_cache[10] || (_cache[10] = [\n                                (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("option", { value: "与插头相同" }, "与插头相同", -1 /* CACHED */),\n                                (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("option", { value: "自定义" }, "自定义", -1 /* CACHED */)\n                            ]))], 512 /* NEED_PATCH */), [\n                            [vue__WEBPACK_IMPORTED_MODULE_0__.vModelSelect, $setup.settings.额外模型解析配置.模型来源]\n                        ]),\n                        ($setup.settings.额外模型解析配置.模型来源 === \'自定义\')\n                            ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)(vue__WEBPACK_IMPORTED_MODULE_0__.Fragment, { key: 0 }, [\n                                (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_6, [\n                                    _cache[11] || (_cache[11] = (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("label", { for: "mvu_api_url" }, "API 地址", -1 /* CACHED */)),\n                                    (0,vue__WEBPACK_IMPORTED_MODULE_0__.withDirectives)((0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("input", {\n                                        id: "mvu_api_url",\n                                        "onUpdate:modelValue": _cache[3] || (_cache[3] = ($event) => (($setup.settings.额外模型解析配置.api地址) = $event)),\n                                        type: "text",\n                                        class: "text_pole",\n                                        placeholder: "http://localhost:1234/v1"\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [vue__WEBPACK_IMPORTED_MODULE_0__.vModelText, $setup.settings.额外模型解析配置.api地址]\n                                    ])\n                                ]),\n                                (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_7, [\n                                    _cache[12] || (_cache[12] = (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("label", { for: "mvu_api_key" }, "API 密钥", -1 /* CACHED */)),\n                                    (0,vue__WEBPACK_IMPORTED_MODULE_0__.withDirectives)((0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("input", {\n                                        id: "mvu_api_key",\n                                        "onUpdate:modelValue": _cache[4] || (_cache[4] = ($event) => (($setup.settings.额外模型解析配置.密钥) = $event)),\n                                        type: "password",\n                                        class: "text_pole",\n                                        placeholder: "留空表示无需密钥"\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [vue__WEBPACK_IMPORTED_MODULE_0__.vModelText, $setup.settings.额外模型解析配置.密钥]\n                                    ])\n                                ]),\n                                (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_8, [\n                                    _cache[13] || (_cache[13] = (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("label", { for: "mvu_model_name" }, "模型名称", -1 /* CACHED */)),\n                                    (0,vue__WEBPACK_IMPORTED_MODULE_0__.withDirectives)((0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("input", {\n                                        id: "mvu_model_name",\n                                        "onUpdate:modelValue": _cache[5] || (_cache[5] = ($event) => (($setup.settings.额外模型解析配置.模型名称) = $event)),\n                                        type: "text",\n                                        class: "text_pole",\n                                        placeholder: "gemini-2.5-flash"\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [vue__WEBPACK_IMPORTED_MODULE_0__.vModelText, $setup.settings.额外模型解析配置.模型名称]\n                                    ])\n                                ])\n                            ], 64 /* STABLE_FRAGMENT */))\n                            : (0,vue__WEBPACK_IMPORTED_MODULE_0__.createCommentVNode)("v-if", true)\n                    ], 64 /* STABLE_FRAGMENT */))\n                    : (0,vue__WEBPACK_IMPORTED_MODULE_0__.createCommentVNode)("v-if", true)\n            ]),\n            _cache[16] || (_cache[16] = (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("hr", null, null, -1 /* CACHED */)),\n            (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_9, [\n                _cache[14] || (_cache[14] = (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", null, [\n                    (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("strong", null, "修复按钮")\n                ], -1 /* CACHED */)),\n                (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementVNode)("div", _hoisted_10, [\n                    ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(true), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)(vue__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, (0,vue__WEBPACK_IMPORTED_MODULE_0__.renderList)($setup.buttons, (button) => {\n                        return ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createElementBlock)("div", {\n                            key: button.name,\n                            class: "menu_button menu_button_icon interactable",\n                            tabindex: "0",\n                            role: "button",\n                            onClick: button.function\n                        }, (0,vue__WEBPACK_IMPORTED_MODULE_0__.toDisplayString)(button.name), 9 /* TEXT, PROPS */, _hoisted_11));\n                    }), 128 /* KEYED_FRAGMENT */))\n                ])\n            ])\n        ])\n    ]));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvdHMtbG9hZGVyL2luZGV4LmpzPz9jbG9uZWRSdWxlU2V0LTYhLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9kaXN0L3RlbXBsYXRlTG9hZGVyLmpzPz9ydWxlU2V0WzFdLnJ1bGVzWzJdIS4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvZGlzdC9pbmRleC5qcz8/cnVsZVNldFsxXS5ydWxlc1s0XS51c2VbMF0hLi9zcmMvUGFuZWwudnVlP3Z1ZSZ0eXBlPXRlbXBsYXRlJmlkPTc4OWJjM2RiJnRzPXRydWUiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXFZO0FBRXJZLE1BQU0sVUFBVSxHQUFHLEVDRFYsS0FBSyxFQUFDLGVBQWU7QURFOUIsTUFBTSxVQUFVLEdBQUcsRUNJTixLQUFLLEVBQUMsdUJBQXVCO0FESDFDLE1BQU0sVUFBVSxHQUFHLEVDSUYsS0FBSyxFQUFDLCtCQUErQjtBREh0RCxNQUFNLFVBQVUsR0FBRztJQ0tJLEtBQUssRUFBQyxnQkFBZ0I7SUFBQyxHQUFHLEVBQUMsd0JBQXdCO0NERnpFO0FBQ0QsTUFBTSxVQUFVLEdBQUcsRUNhRixLQUFLLEVBQUMsK0JBQStCO0FEWnRELE1BQU0sVUFBVSxHQUFHLEVDcUNVLEtBQUssRUFBQywrQkFBK0I7QURwQ2xFLE1BQU0sVUFBVSxHQUFHLEVDK0NVLEtBQUssRUFBQywrQkFBK0I7QUQ5Q2xFLE1BQU0sVUFBVSxHQUFHLEVDeURVLEtBQUssRUFBQywrQkFBK0I7QUR4RGxFLE1BQU0sVUFBVSxHQUFHLEVDd0VGLEtBQUssRUFBQywrQkFBK0I7QUR2RXRELE1BQU0sV0FBVyxHQUFHLEVDeUVDLEtBQUssRUFBQyxxQkFBcUI7QUR4RWhELE1BQU0sV0FBVyxHQUFHLENBQUMsU0FBUyxDQUFDO0FBRXhCLFNBQVMsTUFBTSxDQUFDLElBQVMsRUFBQyxNQUFXLEVBQUMsTUFBVyxFQUFDLE1BQVcsRUFBQyxLQUFVLEVBQUMsUUFBYTtJQUMzRixPQUFPLENBQUMsOENBQVUsRUFBRSxFQ2pCbEIs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LEdBQUcsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO2lCQUMvQixDQUFDO2FBQ0gsQ0FBQztTQUNILENBQUM7S0FDSCxDQUFDLENBQUM7QUFDTCxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS9zcmMvUGFuZWwudnVlPzhhZjgiLCJzcmM6Ly90YXZlcm5faGVscGVyX3RlbXBsYXRlL3NyYy9QYW5lbC52dWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlRWxlbWVudFZOb2RlIGFzIF9jcmVhdGVFbGVtZW50Vk5vZGUsIHZNb2RlbENoZWNrYm94IGFzIF92TW9kZWxDaGVja2JveCwgd2l0aERpcmVjdGl2ZXMgYXMgX3dpdGhEaXJlY3RpdmVzLCB2TW9kZWxTZWxlY3QgYXMgX3ZNb2RlbFNlbGVjdCwgdk1vZGVsVGV4dCBhcyBfdk1vZGVsVGV4dCwgRnJhZ21lbnQgYXMgX0ZyYWdtZW50LCBvcGVuQmxvY2sgYXMgX29wZW5CbG9jaywgY3JlYXRlRWxlbWVudEJsb2NrIGFzIF9jcmVhdGVFbGVtZW50QmxvY2ssIGNyZWF0ZUNvbW1lbnRWTm9kZSBhcyBfY3JlYXRlQ29tbWVudFZOb2RlLCByZW5kZXJMaXN0IGFzIF9yZW5kZXJMaXN0LCB0b0Rpc3BsYXlTdHJpbmcgYXMgX3RvRGlzcGxheVN0cmluZyB9IGZyb20gXCJ2dWVcIlxuXG5jb25zdCBfaG9pc3RlZF8xID0geyBjbGFzczogXCJpbmxpbmUtZHJhd2VyXCIgfVxuY29uc3QgX2hvaXN0ZWRfMiA9IHsgY2xhc3M6IFwiaW5saW5lLWRyYXdlci1jb250ZW50XCIgfVxuY29uc3QgX2hvaXN0ZWRfMyA9IHsgY2xhc3M6IFwiZmxleC1jb250YWluZXIgZmxleEZsb3dDb2x1bW5cIiB9XG5jb25zdCBfaG9pc3RlZF80ID0ge1xuICBjbGFzczogXCJjaGVja2JveF9sYWJlbFwiLFxuICBmb3I6IFwibXZ1X25vdGlmaWNhdGlvbl9lcnJvclwiXG59XG5jb25zdCBfaG9pc3RlZF81ID0geyBjbGFzczogXCJmbGV4LWNvbnRhaW5lciBmbGV4Rmxvd0NvbHVtblwiIH1cbmNvbnN0IF9ob2lzdGVkXzYgPSB7IGNsYXNzOiBcImZsZXgtY29udGFpbmVyIGZsZXhGbG93Q29sdW1uXCIgfVxuY29uc3QgX2hvaXN0ZWRfNyA9IHsgY2xhc3M6IFwiZmxleC1jb250YWluZXIgZmxleEZsb3dDb2x1bW5cIiB9XG5jb25zdCBfaG9pc3RlZF84ID0geyBjbGFzczogXCJmbGV4LWNvbnRhaW5lciBmbGV4Rmxvd0NvbHVtblwiIH1cbmNvbnN0IF9ob2lzdGVkXzkgPSB7IGNsYXNzOiBcImZsZXgtY29udGFpbmVyIGZsZXhGbG93Q29sdW1uXCIgfVxuY29uc3QgX2hvaXN0ZWRfMTAgPSB7IGNsYXNzOiBcImZsZXgtY29udGFpbmVyIGZsZXhcIiB9XG5jb25zdCBfaG9pc3RlZF8xMSA9IFtcIm9uQ2xpY2tcIl1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlcihfY3R4OiBhbnksX2NhY2hlOiBhbnksJHByb3BzOiBhbnksJHNldHVwOiBhbnksJGRhdGE6IGFueSwkb3B0aW9uczogYW55KSB7XG4gIHJldHVybiAoX29wZW5CbG9jaygpLCBfY3JlYXRlRWxlbWVudEJsb2NrKFwiZGl2XCIsIF9ob2lzdGVkXzEsIFtcbiAgICBfY2FjaGVbMTddIHx8IChfY2FjaGVbMTddID0gX2NyZWF0ZUVsZW1lbnRWTm9kZShcImRpdlwiLCB7IGNsYXNzOiBcImlubGluZS1kcmF3ZXItdG9nZ2xlIGlubGluZS1kcmF3ZXItaGVhZGVyXCIgfSwgW1xuICAgICAgX2NyZWF0ZUVsZW1lbnRWTm9kZShcImJcIiwgbnVsbCwgXCJNVlUg5Y+Y6YeP5qGG5p62XCIpLFxuICAgICAgX2NyZWF0ZUVsZW1lbnRWTm9kZShcImRpdlwiLCB7IGNsYXNzOiBcImlubGluZS1kcmF3ZXItaWNvbiBmYS1zb2xpZCBmYS1jaXJjbGUtY2hldnJvbi1kb3duIGRvd25cIiB9KVxuICAgIF0sIC0xIC8qIENBQ0hFRCAqLykpLFxuICAgIF9jcmVhdGVFbGVtZW50Vk5vZGUoXCJkaXZcIiwgX2hvaXN0ZWRfMiwgW1xuICAgICAgX2NyZWF0ZUVsZW1lbnRWTm9kZShcImRpdlwiLCBfaG9pc3RlZF8zLCBbXG4gICAgICAgIF9jYWNoZVs3XSB8fCAoX2NhY2hlWzddID0gX2NyZWF0ZUVsZW1lbnRWTm9kZShcImRpdlwiLCBudWxsLCBbXG4gICAgICAgICAgX2NyZWF0ZUVsZW1lbnRWTm9kZShcInN0cm9uZ1wiLCBudWxsLCBcIumAmuefpeiuvue9rlwiKVxuICAgICAgICBdLCAtMSAvKiBDQUNIRUQgKi8pKSxcbiAgICAgICAgX2NyZWF0ZUVsZW1lbnRWTm9kZShcImxhYmVsXCIsIF9ob2lzdGVkXzQsIFtcbiAgICAgICAgICBfd2l0aERpcmVjdGl2ZXMoX2NyZWF0ZUVsZW1lbnRWTm9kZShcImlucHV0XCIsIHtcbiAgICAgICAgICAgIGlkOiBcIm12dV9ub3RpZmljYXRpb25fZXJyb3JcIixcbiAgICAgICAgICAgIFwib25VcGRhdGU6bW9kZWxWYWx1ZVwiOiBfY2FjaGVbMF0gfHwgKF9jYWNoZVswXSA9ICgkZXZlbnQ6IGFueSkgPT4gKCgkc2V0dXAuc2V0dGluZ3Mu6YCa55+lLuWPmOmHj+abtOaWsOWHuumUmSkgPSAkZXZlbnQpKSxcbiAgICAgICAgICAgIHR5cGU6IFwiY2hlY2tib3hcIlxuICAgICAgICAgIH0sIG51bGwsIDUxMiAvKiBORUVEX1BBVENIICovKSwgW1xuICAgICAgICAgICAgW192TW9kZWxDaGVja2JveCwgJHNldHVwLnNldHRpbmdzLumAmuefpS7lj5jph4/mm7TmlrDlh7rplJldXG4gICAgICAgICAgXSksXG4gICAgICAgICAgX2NhY2hlWzZdIHx8IChfY2FjaGVbNl0gPSBfY3JlYXRlRWxlbWVudFZOb2RlKFwic3BhblwiLCBudWxsLCBcIuWPmOmHj+abtOaWsOWHuumUmeaXtumAmuefpVwiLCAtMSAvKiBDQUNIRUQgKi8pKVxuICAgICAgICBdKVxuICAgICAgXSksXG4gICAgICBfY2FjaGVbMTVdIHx8IChfY2FjaGVbMTVdID0gX2NyZWF0ZUVsZW1lbnRWTm9kZShcImhyXCIsIG51bGwsIG51bGwsIC0xIC8qIENBQ0hFRCAqLykpLFxuICAgICAgX2NyZWF0ZUVsZW1lbnRWTm9kZShcImRpdlwiLCBfaG9pc3RlZF81LCBbXG4gICAgICAgIF9jcmVhdGVFbGVtZW50Vk5vZGUoXCJkaXZcIiwgbnVsbCwgW1xuICAgICAgICAgIF9jYWNoZVs4XSB8fCAoX2NhY2hlWzhdID0gX2NyZWF0ZUVsZW1lbnRWTm9kZShcInN0cm9uZ1wiLCBudWxsLCBcIuWPmOmHj+abtOaWsOaWueW8j1wiLCAtMSAvKiBDQUNIRUQgKi8pKSxcbiAgICAgICAgICBfY3JlYXRlRWxlbWVudFZOb2RlKFwiaVwiLCB7XG4gICAgICAgICAgICBjbGFzczogXCJmYS1zb2xpZCBmYS1jaXJjbGUtcXVlc3Rpb24gZmEtc20gbm90ZS1saW5rLXNwYW5cIixcbiAgICAgICAgICAgIHN0eWxlOiB7XCJjdXJzb3JcIjpcInBvaW50ZXJcIn0sXG4gICAgICAgICAgICBvbkNsaWNrOiAkc2V0dXAuc2hvd0hlbHBcbiAgICAgICAgICB9KVxuICAgICAgICBdKSxcbiAgICAgICAgX3dpdGhEaXJlY3RpdmVzKF9jcmVhdGVFbGVtZW50Vk5vZGUoXCJzZWxlY3RcIiwge1xuICAgICAgICAgIGlkOiBcIm12dV91cGRhdGVfbWV0aG9kXCIsXG4gICAgICAgICAgXCJvblVwZGF0ZTptb2RlbFZhbHVlXCI6IF9jYWNoZVsxXSB8fCAoX2NhY2hlWzFdID0gKCRldmVudDogYW55KSA9PiAoKCRzZXR1cC5zZXR0aW5ncy7mm7TmlrDmlrnlvI8pID0gJGV2ZW50KSksXG4gICAgICAgICAgY2xhc3M6IFwidGV4dF9wb2xlXCJcbiAgICAgICAgfSwgWy4uLihfY2FjaGVbOV0gfHwgKF9jYWNoZVs5XSA9IFtcbiAgICAgICAgICBfY3JlYXRlRWxlbWVudFZOb2RlKFwib3B0aW9uXCIsIHsgdmFsdWU6IFwi6ZqPQUnovpPlh7pcIiB9LCBcIumaj0FJ6L6T5Ye6XCIsIC0xIC8qIENBQ0hFRCAqLyksXG4gICAgICAgICAgX2NyZWF0ZUVsZW1lbnRWTm9kZShcIm9wdGlvblwiLCB7IHZhbHVlOiBcIumineWkluaooeWei+ino+aekFwiIH0sIFwi6aKd5aSW5qih5Z6L6Kej5p6QXCIsIC0xIC8qIENBQ0hFRCAqLylcbiAgICAgICAgXSkpXSwgNTEyIC8qIE5FRURfUEFUQ0ggKi8pLCBbXG4gICAgICAgICAgW192TW9kZWxTZWxlY3QsICRzZXR1cC5zZXR0aW5ncy7mm7TmlrDmlrnlvI9dXG4gICAgICAgIF0pLFxuICAgICAgICAoJHNldHVwLnNldHRpbmdzLuabtOaWsOaWueW8jyA9PT0gJ+mineWkluaooeWei+ino+aekCcpXG4gICAgICAgICAgPyAoX29wZW5CbG9jaygpLCBfY3JlYXRlRWxlbWVudEJsb2NrKF9GcmFnbWVudCwgeyBrZXk6IDAgfSwgW1xuICAgICAgICAgICAgICBfd2l0aERpcmVjdGl2ZXMoX2NyZWF0ZUVsZW1lbnRWTm9kZShcInNlbGVjdFwiLCB7XG4gICAgICAgICAgICAgICAgaWQ6IFwibXZ1X2V4dHJhX21vZGVsX3NvdXJjZVwiLFxuICAgICAgICAgICAgICAgIFwib25VcGRhdGU6bW9kZWxWYWx1ZVwiOiBfY2FjaGVbMl0gfHwgKF9jYWNoZVsyXSA9ICgkZXZlbnQ6IGFueSkgPT4gKCgkc2V0dXAuc2V0dGluZ3Mu6aKd5aSW5qih5Z6L6Kej5p6Q6YWN572uLuaooeWei+adpea6kCkgPSAkZXZlbnQpKSxcbiAgICAgICAgICAgICAgICBjbGFzczogXCJ0ZXh0X3BvbGVcIlxuICAgICAgICAgICAgICB9LCBbLi4uKF9jYWNoZVsxMF0gfHwgKF9jYWNoZVsxMF0gPSBbXG4gICAgICAgICAgICAgICAgX2NyZWF0ZUVsZW1lbnRWTm9kZShcIm9wdGlvblwiLCB7IHZhbHVlOiBcIuS4juaPkuWktOebuOWQjFwiIH0sIFwi5LiO5o+S5aS055u45ZCMXCIsIC0xIC8qIENBQ0hFRCAqLyksXG4gICAgICAgICAgICAgICAgX2NyZWF0ZUVsZW1lbnRWTm9kZShcIm9wdGlvblwiLCB7IHZhbHVlOiBcIuiHquWumuS5iVwiIH0sIFwi6Ieq5a6a5LmJXCIsIC0xIC8qIENBQ0hFRCAqLylcbiAgICAgICAgICAgICAgXSkpXSwgNTEyIC8qIE5FRURfUEFUQ0ggKi8pLCBbXG4gICAgICAgICAgICAgICAgW192TW9kZWxTZWxlY3QsICRzZXR1cC5zZXR0aW5ncy7pop3lpJbmqKHlnovop6PmnpDphY3nva4u5qih5Z6L5p2l5rqQXVxuICAgICAgICAgICAgICBdKSxcbiAgICAgICAgICAgICAgKCRzZXR1cC5zZXR0aW5ncy7pop3lpJbmqKHlnovop6PmnpDphY3nva4u5qih5Z6L5p2l5rqQID09PSAn6Ieq5a6a5LmJJylcbiAgICAgICAgICAgICAgICA/IChfb3BlbkJsb2NrKCksIF9jcmVhdGVFbGVtZW50QmxvY2soX0ZyYWdtZW50LCB7IGtleTogMCB9LCBbXG4gICAgICAgICAgICAgICAgICAgIF9jcmVhdGVFbGVtZW50Vk5vZGUoXCJkaXZcIiwgX2hvaXN0ZWRfNiwgW1xuICAgICAgICAgICAgICAgICAgICAgIF9jYWNoZVsxMV0gfHwgKF9jYWNoZVsxMV0gPSBfY3JlYXRlRWxlbWVudFZOb2RlKFwibGFiZWxcIiwgeyBmb3I6IFwibXZ1X2FwaV91cmxcIiB9LCBcIkFQSSDlnLDlnYBcIiwgLTEgLyogQ0FDSEVEICovKSksXG4gICAgICAgICAgICAgICAgICAgICAgX3dpdGhEaXJlY3RpdmVzKF9jcmVhdGVFbGVtZW50Vk5vZGUoXCJpbnB1dFwiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogXCJtdnVfYXBpX3VybFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJvblVwZGF0ZTptb2RlbFZhbHVlXCI6IF9jYWNoZVszXSB8fCAoX2NhY2hlWzNdID0gKCRldmVudDogYW55KSA9PiAoKCRzZXR1cC5zZXR0aW5ncy7pop3lpJbmqKHlnovop6PmnpDphY3nva4uYXBp5Zyw5Z2AKSA9ICRldmVudCkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0ZXh0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzczogXCJ0ZXh0X3BvbGVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBcImh0dHA6Ly9sb2NhbGhvc3Q6MTIzNC92MVwiXG4gICAgICAgICAgICAgICAgICAgICAgfSwgbnVsbCwgNTEyIC8qIE5FRURfUEFUQ0ggKi8pLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICBbX3ZNb2RlbFRleHQsICRzZXR1cC5zZXR0aW5ncy7pop3lpJbmqKHlnovop6PmnpDphY3nva4uYXBp5Zyw5Z2AXVxuICAgICAgICAgICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICAgICAgICAgIF0pLFxuICAgICAgICAgICAgICAgICAgICBfY3JlYXRlRWxlbWVudFZOb2RlKFwiZGl2XCIsIF9ob2lzdGVkXzcsIFtcbiAgICAgICAgICAgICAgICAgICAgICBfY2FjaGVbMTJdIHx8IChfY2FjaGVbMTJdID0gX2NyZWF0ZUVsZW1lbnRWTm9kZShcImxhYmVsXCIsIHsgZm9yOiBcIm12dV9hcGlfa2V5XCIgfSwgXCJBUEkg5a+G6ZKlXCIsIC0xIC8qIENBQ0hFRCAqLykpLFxuICAgICAgICAgICAgICAgICAgICAgIF93aXRoRGlyZWN0aXZlcyhfY3JlYXRlRWxlbWVudFZOb2RlKFwiaW5wdXRcIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IFwibXZ1X2FwaV9rZXlcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwib25VcGRhdGU6bW9kZWxWYWx1ZVwiOiBfY2FjaGVbNF0gfHwgKF9jYWNoZVs0XSA9ICgkZXZlbnQ6IGFueSkgPT4gKCgkc2V0dXAuc2V0dGluZ3Mu6aKd5aSW5qih5Z6L6Kej5p6Q6YWN572uLuWvhumSpSkgPSAkZXZlbnQpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwicGFzc3dvcmRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzOiBcInRleHRfcG9sZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IFwi55WZ56m66KGo56S65peg6ZyA5a+G6ZKlXCJcbiAgICAgICAgICAgICAgICAgICAgICB9LCBudWxsLCA1MTIgLyogTkVFRF9QQVRDSCAqLyksIFtcbiAgICAgICAgICAgICAgICAgICAgICAgIFtfdk1vZGVsVGV4dCwgJHNldHVwLnNldHRpbmdzLumineWkluaooeWei+ino+aekOmFjee9ri7lr4bpkqVdXG4gICAgICAgICAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgICAgICAgICAgXSksXG4gICAgICAgICAgICAgICAgICAgIF9jcmVhdGVFbGVtZW50Vk5vZGUoXCJkaXZcIiwgX2hvaXN0ZWRfOCwgW1xuICAgICAgICAgICAgICAgICAgICAgIF9jYWNoZVsxM10gfHwgKF9jYWNoZVsxM10gPSBfY3JlYXRlRWxlbWVudFZOb2RlKFwibGFiZWxcIiwgeyBmb3I6IFwibXZ1X21vZGVsX25hbWVcIiB9LCBcIuaooeWei+WQjeensFwiLCAtMSAvKiBDQUNIRUQgKi8pKSxcbiAgICAgICAgICAgICAgICAgICAgICBfd2l0aERpcmVjdGl2ZXMoX2NyZWF0ZUVsZW1lbnRWTm9kZShcImlucHV0XCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBcIm12dV9tb2RlbF9uYW1lXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcIm9uVXBkYXRlOm1vZGVsVmFsdWVcIjogX2NhY2hlWzVdIHx8IChfY2FjaGVbNV0gPSAoJGV2ZW50OiBhbnkpID0+ICgoJHNldHVwLnNldHRpbmdzLumineWkluaooeWei+ino+aekOmFjee9ri7mqKHlnovlkI3np7ApID0gJGV2ZW50KSksXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInRleHRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzOiBcInRleHRfcG9sZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IFwiZ2VtaW5pLTIuNS1mbGFzaFwiXG4gICAgICAgICAgICAgICAgICAgICAgfSwgbnVsbCwgNTEyIC8qIE5FRURfUEFUQ0ggKi8pLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICBbX3ZNb2RlbFRleHQsICRzZXR1cC5zZXR0aW5ncy7pop3lpJbmqKHlnovop6PmnpDphY3nva4u5qih5Z6L5ZCN56ewXVxuICAgICAgICAgICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICAgICAgICBdLCA2NCAvKiBTVEFCTEVfRlJBR01FTlQgKi8pKVxuICAgICAgICAgICAgICAgIDogX2NyZWF0ZUNvbW1lbnRWTm9kZShcInYtaWZcIiwgdHJ1ZSlcbiAgICAgICAgICAgIF0sIDY0IC8qIFNUQUJMRV9GUkFHTUVOVCAqLykpXG4gICAgICAgICAgOiBfY3JlYXRlQ29tbWVudFZOb2RlKFwidi1pZlwiLCB0cnVlKVxuICAgICAgXSksXG4gICAgICBfY2FjaGVbMTZdIHx8IChfY2FjaGVbMTZdID0gX2NyZWF0ZUVsZW1lbnRWTm9kZShcImhyXCIsIG51bGwsIG51bGwsIC0xIC8qIENBQ0hFRCAqLykpLFxuICAgICAgX2NyZWF0ZUVsZW1lbnRWTm9kZShcImRpdlwiLCBfaG9pc3RlZF85LCBbXG4gICAgICAgIF9jYWNoZVsxNF0gfHwgKF9jYWNoZVsxNF0gPSBfY3JlYXRlRWxlbWVudFZOb2RlKFwiZGl2XCIsIG51bGwsIFtcbiAgICAgICAgICBfY3JlYXRlRWxlbWVudFZOb2RlKFwic3Ryb25nXCIsIG51bGwsIFwi5L+u5aSN5oyJ6ZKuXCIpXG4gICAgICAgIF0sIC0xIC8qIENBQ0hFRCAqLykpLFxuICAgICAgICBfY3JlYXRlRWxlbWVudFZOb2RlKFwiZGl2XCIsIF9ob2lzdGVkXzEwLCBbXG4gICAgICAgICAgKF9vcGVuQmxvY2sodHJ1ZSksIF9jcmVhdGVFbGVtZW50QmxvY2soX0ZyYWdtZW50LCBudWxsLCBfcmVuZGVyTGlzdCgkc2V0dXAuYnV0dG9ucywgKGJ1dHRvbikgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIChfb3BlbkJsb2NrKCksIF9jcmVhdGVFbGVtZW50QmxvY2soXCJkaXZcIiwge1xuICAgICAgICAgICAgICBrZXk6IGJ1dHRvbi5uYW1lLFxuICAgICAgICAgICAgICBjbGFzczogXCJtZW51X2J1dHRvbiBtZW51X2J1dHRvbl9pY29uIGludGVyYWN0YWJsZVwiLFxuICAgICAgICAgICAgICB0YWJpbmRleDogXCIwXCIsXG4gICAgICAgICAgICAgIHJvbGU6IFwiYnV0dG9uXCIsXG4gICAgICAgICAgICAgIG9uQ2xpY2s6IGJ1dHRvbi5mdW5jdGlvblxuICAgICAgICAgICAgfSwgX3RvRGlzcGxheVN0cmluZyhidXR0b24ubmFtZSksIDkgLyogVEVYVCwgUFJPUFMgKi8sIF9ob2lzdGVkXzExKSlcbiAgICAgICAgICB9KSwgMTI4IC8qIEtFWUVEX0ZSQUdNRU5UICovKSlcbiAgICAgICAgXSlcbiAgICAgIF0pXG4gICAgXSlcbiAgXSkpXG59IiwiPHRlbXBsYXRlPlxuICAgIDxkaXYgY2xhc3M9XCJpbmxpbmUtZHJhd2VyXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJpbmxpbmUtZHJhd2VyLXRvZ2dsZSBpbmxpbmUtZHJhd2VyLWhlYWRlclwiPlxuICAgICAgICAgICAgPGI+TVZVIOWPmOmHj+ahhuaetjwvYj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbmxpbmUtZHJhd2VyLWljb24gZmEtc29saWQgZmEtY2lyY2xlLWNoZXZyb24tZG93biBkb3duXCI+PC9kaXY+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxkaXYgY2xhc3M9XCJpbmxpbmUtZHJhd2VyLWNvbnRlbnRcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4LWNvbnRhaW5lciBmbGV4Rmxvd0NvbHVtblwiPlxuICAgICAgICAgICAgICAgIDxkaXY+PHN0cm9uZz7pgJrnn6Xorr7nva48L3N0cm9uZz48L2Rpdj5cbiAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJjaGVja2JveF9sYWJlbFwiIGZvcj1cIm12dV9ub3RpZmljYXRpb25fZXJyb3JcIj5cbiAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICBpZD1cIm12dV9ub3RpZmljYXRpb25fZXJyb3JcIlxuICAgICAgICAgICAgICAgICAgICAgICAgdi1tb2RlbD1cInNldHRpbmdzLumAmuefpS7lj5jph4/mm7TmlrDlh7rplJlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cImNoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+5Y+Y6YeP5pu05paw5Ye66ZSZ5pe26YCa55+lPC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgPGhyIC8+XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4LWNvbnRhaW5lciBmbGV4Rmxvd0NvbHVtblwiPlxuICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgIDxzdHJvbmc+5Y+Y6YeP5pu05paw5pa55byPPC9zdHJvbmc+XG4gICAgICAgICAgICAgICAgICAgIDxpXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImZhLXNvbGlkIGZhLWNpcmNsZS1xdWVzdGlvbiBmYS1zbSBub3RlLWxpbmstc3BhblwiXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT1cImN1cnNvcjogcG9pbnRlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICBAY2xpY2s9XCJzaG93SGVscFwiXG4gICAgICAgICAgICAgICAgICAgID48L2k+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPHNlbGVjdCBpZD1cIm12dV91cGRhdGVfbWV0aG9kXCIgdi1tb2RlbD1cInNldHRpbmdzLuabtOaWsOaWueW8j1wiIGNsYXNzPVwidGV4dF9wb2xlXCI+XG4gICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCLpmo9BSei+k+WHulwiPumaj0FJ6L6T5Ye6PC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCLpop3lpJbmqKHlnovop6PmnpBcIj7pop3lpJbmqKHlnovop6PmnpA8L29wdGlvbj5cbiAgICAgICAgICAgICAgICA8L3NlbGVjdD5cblxuICAgICAgICAgICAgICAgIDx0ZW1wbGF0ZSB2LWlmPVwic2V0dGluZ3Mu5pu05paw5pa55byPID09PSAn6aKd5aSW5qih5Z6L6Kej5p6QJ1wiPlxuICAgICAgICAgICAgICAgICAgICA8c2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICBpZD1cIm12dV9leHRyYV9tb2RlbF9zb3VyY2VcIlxuICAgICAgICAgICAgICAgICAgICAgICAgdi1tb2RlbD1cInNldHRpbmdzLumineWkluaooeWei+ino+aekOmFjee9ri7mqKHlnovmnaXmupBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJ0ZXh0X3BvbGVcIlxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwi5LiO5o+S5aS055u45ZCMXCI+5LiO5o+S5aS055u45ZCMPC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwi6Ieq5a6a5LmJXCI+6Ieq5a6a5LmJPC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxuXG4gICAgICAgICAgICAgICAgICAgIDx0ZW1wbGF0ZSB2LWlmPVwic2V0dGluZ3Mu6aKd5aSW5qih5Z6L6Kej5p6Q6YWN572uLuaooeWei+adpea6kCA9PT0gJ+iHquWumuS5iSdcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4LWNvbnRhaW5lciBmbGV4Rmxvd0NvbHVtblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJtdnVfYXBpX3VybFwiPkFQSSDlnLDlnYA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD1cIm12dV9hcGlfdXJsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi1tb2RlbD1cInNldHRpbmdzLumineWkluaooeWei+ino+aekOmFjee9ri5hcGnlnLDlnYBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwidGV4dF9wb2xlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJodHRwOi8vbG9jYWxob3N0OjEyMzQvdjFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXgtY29udGFpbmVyIGZsZXhGbG93Q29sdW1uXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cIm12dV9hcGlfa2V5XCI+QVBJIOWvhumSpTwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPVwibXZ1X2FwaV9rZXlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2LW1vZGVsPVwic2V0dGluZ3Mu6aKd5aSW5qih5Z6L6Kej5p6Q6YWN572uLuWvhumSpVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJwYXNzd29yZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwidGV4dF9wb2xlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCLnlZnnqbrooajnpLrml6DpnIDlr4bpkqVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXgtY29udGFpbmVyIGZsZXhGbG93Q29sdW1uXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cIm12dV9tb2RlbF9uYW1lXCI+5qih5Z6L5ZCN56ewPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9XCJtdnVfbW9kZWxfbmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYtbW9kZWw9XCJzZXR0aW5ncy7pop3lpJbmqKHlnovop6PmnpDphY3nva4u5qih5Z6L5ZCN56ewXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cInRleHRfcG9sZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiZ2VtaW5pLTIuNS1mbGFzaFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L3RlbXBsYXRlPlxuICAgICAgICAgICAgICAgIDwvdGVtcGxhdGU+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgPGhyIC8+XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4LWNvbnRhaW5lciBmbGV4Rmxvd0NvbHVtblwiPlxuICAgICAgICAgICAgICAgIDxkaXY+PHN0cm9uZz7kv67lpI3mjInpkq48L3N0cm9uZz48L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleC1jb250YWluZXIgZmxleFwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICB2LWZvcj1cImJ1dHRvbiBpbiBidXR0b25zXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIDprZXk9XCJidXR0b24ubmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cIm1lbnVfYnV0dG9uIG1lbnVfYnV0dG9uX2ljb24gaW50ZXJhY3RhYmxlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmluZGV4PVwiMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICByb2xlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIEBjbGljaz1cImJ1dHRvbi5mdW5jdGlvblwiXG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIHt7IGJ1dHRvbi5uYW1lIH19XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuPC90ZW1wbGF0ZT5cblxuPHNjcmlwdCBzZXR1cCBsYW5nPVwidHNcIj5cbmltcG9ydCB7IGJ1dHRvbnMgfSBmcm9tICdAL2J1dHRvbic7XG5pbXBvcnQgeyB1c2VTZXR0aW5nc1N0b3JlIH0gZnJvbSAnQC9zZXR0aW5ncyc7XG5pbXBvcnQgeyBzdG9yZVRvUmVmcyB9IGZyb20gJ3BpbmlhJztcblxuY29uc3QgeyBzZXR0aW5ncyB9ID0gc3RvcmVUb1JlZnModXNlU2V0dGluZ3NTdG9yZSgpKTtcblxuZnVuY3Rpb24gc2hvd0hlbHAoKSB7XG4gICAgU2lsbHlUYXZlcm4uY2FsbEdlbmVyaWNQb3B1cChcbiAgICAgICAgYDxwPuS4uuS6huiuqeWJp+aDheaooeWei+abtOS4k+azqOS6juWJp+aDhe+8jOS9oOWPr+S7pemAieaLqeWPmOmHj+abtOaWsOeahOaWueW8j++8mjwvcD5cbiAgICAgICAgPHVsPlxuICAgICAgICA8bGk+PHN0cm9uZz7pmo9BSei+k+WHujwvc3Ryb25nPu+8muWQjeWtl+S4reaciSA8Y29kZT5bbXZ1X3VwZGF0ZV08L2NvZGU+IOeahOadoeebruWwhuS8muato+W4uOWPkee7mSBBSe+8jOWboOatpCBBSSDlsIbkvJrlnKjlm57lpI3ml7bovpPlh7rlj5jph4/mm7TmlrDliIbmnpDlj4rmm7TmlrDlkb3ku6TvvIzov5vogIzmm7TmlrDlj5jph4/jgII8L2xpPlxuICAgICAgICA8bGk+PHN0cm9uZz7pop3lpJbmqKHlnovop6PmnpA8L3N0cm9uZz7vvJrlkI3lrZfkuK3mnIkgPGNvZGU+W212dV91cGRhdGVdPC9jb2RlPiDnmoTmnaHnm67kuI3kvJrlj5Hnu5kgQUnjgILlnKggQUkg5Zue5aSN5a6M5oiQ5ZCO77yMTVZVIOWwhuS8muWPquS9v+eUqOWQjeWtl+S4reaciSA8Y29kZT5bbXZ1X3VwZGF0ZV08L2NvZGU+IOeahOadoeebruiwg+eUqOmineWkluaooeWei+S4k+mXqOino+aekOWPmOmHj+abtOaWsOOAgjwvbGk+XG4gICAgICAgIDxsaT48c3Ryb25nPuW3peWFt+iwg+eUqO+8iOW+heWujOaIkO+8iTwvc3Ryb25nPu+8muWQjeWtl+S4reaciSA8Y29kZT5bbXZ1X3VwZGF0ZV08L2NvZGU+IOeahOadoeebruWwhuS9nOS4uuW3peWFt+iwg+eUqOeahOaPkOekuuivjeWPkee7mSBBSe+8jOWboOatpCBBSSDlsIbkvJrpgJrov4flt6XlhbfosIPnlKjmnaXmm7TmlrDlj5jph4/jgII8L2xpPlxuICAgICAgICA8L3VsPlxuICAgICAgICA8aHIvPlxuICAgICAgICA8cD7lpoLmnpzopoHkvb/nlKjpmaQ8cT7pmo9BSei+k+WHujwvcT7ku6XlpJbnmoTmlrnlvI/vvIzliJnpnIDopoHkvZzogIXpgILphY3kuJbnlYzkuabvvIzmt7vliqDluKbmnIkgPGNvZGU+W212dV91cGRhdGVdPC9jb2RlPiDnmoTmnaHnm67vvJvlpoLmnpzkvZzogIXmsqHmnInpgILphY3vvIzliJnkvp3ml6fkvJrkvb/nlKg8cT7pmo9BSei+k+WHujwvcT7nmoTmlrnlvI/jgII8YnI+XG4gICAgICAgIOWFt+S9k+WcsO+8jE1WVSDlj5jph4/moYbmnrbnmoTmj5DnpLror43liIbkuLrvvJo8L3A+XG4gICAgICAgIDx1bD5cbiAgICAgICAgPGxpPjxzdHJvbmc+5Y+Y6YeP5YiX6KGoPC9zdHJvbmc+77ya6K6pIEFJIOefpemBk+acieS7gOS5iOWPmOmHj++8jOWmgiA8Y29kZT5udWxsPC9jb2RlPuOAgTxjb2RlPiZsdDslPSBnZXR2YXIoJ3N0YXRfZGF0YScpIF8lJmd0OzwvY29kZT4g562J44CCPC9saT5cbiAgICAgICAgPGxpPjxzdHJvbmc+5Y+Y6YeP5pu05paw6KeE5YiZPC9zdHJvbmc+77ya6K6pIEFJIOefpemBk+WPmOmHj+ivpeWmguS9leabtOaWsO+8jOWmgjxjb2RlPuiNr+eJqeS+nei1luW6puW6lOivpeavj+WIhumSn+WinuWKoDHngrk8L2NvZGU+562J44CCPC9saT5cbiAgICAgICAgPGxpPjxzdHJvbmc+6L6T5Ye66KeE5YiZPC9zdHJvbmc+77ya6K6pIEFJIOefpemBk+ivpei+k+WHuuS7gOS5iOadpeihqOi+vuWPmOmHj+WPkeeUn+WPmOWMlu+8jOWmguaPkOekuuivjeS4reimgeaxgui+k+WHuueahDxjb2RlPiZsdDtVcGRhdGVWYXJpYWJsZSZndDs8L2NvZGU+5Z2X44CCPC9saT5cbiAgICAgICAgPC91bD5cbiAgICAgICAgPHA+5L2c6ICF6ZyA6KaB5YGa55qE77yM5piv57uZPHE+5Y+Y6YeP5pu05paw6KeE5YiZPC9xPuWSjDxxPui+k+WHuuinhOWImTwvcT7mnaHnm67nmoTlkI3lrZfmt7vliqAgPGNvZGU+W212dV91cGRhdGVdPC9jb2RlPuOAgjwvcD5gLFxuICAgICAgICBTaWxseVRhdmVybi5QT1BVUF9UWVBFLlRFWFQsXG4gICAgICAgICcnLFxuICAgICAgICB7IGFsbG93SG9yaXpvbnRhbFNjcm9sbGluZzogdHJ1ZSwgbGVmdEFsaWduOiB0cnVlIH1cbiAgICApO1xufVxuPC9zY3JpcHQ+XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/ts-loader/index.js??clonedRuleSet-6!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[2]!./node_modules/vue-loader/dist/index.js??ruleSet[1].rules[4].use[0]!./src/Panel.vue?vue&type=template&id=789bc3db&ts=true\n\n}');
  },
  "./node_modules/vue-loader/dist/exportHelper.js": 
  /*!******************************************************!*\
  !*** ./node_modules/vue-loader/dist/exportHelper.js ***!
  \******************************************************/ (__unused_webpack_module, exports) => {
    eval('{\nObject.defineProperty(exports, "__esModule", ({ value: true }));\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports["default"] = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9kaXN0L2V4cG9ydEhlbHBlci5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RDtBQUNBO0FBQ0Esa0JBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbInNyYzovL3RhdmVybl9oZWxwZXJfdGVtcGxhdGUvbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvZGlzdC9leHBvcnRIZWxwZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4vLyBydW50aW1lIGhlbHBlciBmb3Igc2V0dGluZyBwcm9wZXJ0aWVzIG9uIGNvbXBvbmVudHNcbi8vIGluIGEgdHJlZS1zaGFrYWJsZSB3YXlcbmV4cG9ydHMuZGVmYXVsdCA9IChzZmMsIHByb3BzKSA9PiB7XG4gICAgY29uc3QgdGFyZ2V0ID0gc2ZjLl9fdmNjT3B0cyB8fCBzZmM7XG4gICAgZm9yIChjb25zdCBba2V5LCB2YWxdIG9mIHByb3BzKSB7XG4gICAgICAgIHRhcmdldFtrZXldID0gdmFsO1xuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0O1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/vue-loader/dist/exportHelper.js\n\n}');
  },
  "./src/Panel.vue": 
  /*!***********************!*\
  !*** ./src/Panel.vue ***!
  \***********************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval('{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Panel_vue_vue_type_template_id_789bc3db_ts_true__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Panel.vue?vue&type=template&id=789bc3db&ts=true */ "./src/Panel.vue?vue&type=template&id=789bc3db&ts=true");\n/* harmony import */ var _Panel_vue_vue_type_script_setup_true_lang_ts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Panel.vue?vue&type=script&setup=true&lang=ts */ "./src/Panel.vue?vue&type=script&setup=true&lang=ts");\n/* harmony import */ var _node_modules_vue_loader_dist_exportHelper_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../node_modules/vue-loader/dist/exportHelper.js */ "./node_modules/vue-loader/dist/exportHelper.js");\n\n\n\n\n;\nconst __exports__ = /*#__PURE__*/(0,_node_modules_vue_loader_dist_exportHelper_js__WEBPACK_IMPORTED_MODULE_2__["default"])(_Panel_vue_vue_type_script_setup_true_lang_ts__WEBPACK_IMPORTED_MODULE_1__["default"], [[\'render\',_Panel_vue_vue_type_template_id_789bc3db_ts_true__WEBPACK_IMPORTED_MODULE_0__.render],[\'__file\',"src/Panel.vue"]])\n/* hot reload */\nif (false) // removed by dead control flow\n{}\n\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (__exports__);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvUGFuZWwudnVlIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBMEU7QUFDUDtBQUNMOztBQUU5RCxDQUE2RTtBQUM3RSxpQ0FBaUMseUZBQWUsQ0FBQyxxRkFBTSxhQUFhLG9GQUFNO0FBQzFFO0FBQ0EsSUFBSSxLQUFVLEVBQUU7QUFBQSxFQVlmOzs7QUFHRCxpRUFBZSxXIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS9zcmMvUGFuZWwudnVlPzhhYjIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcmVuZGVyIH0gZnJvbSBcIi4vUGFuZWwudnVlP3Z1ZSZ0eXBlPXRlbXBsYXRlJmlkPTc4OWJjM2RiJnRzPXRydWVcIlxuaW1wb3J0IHNjcmlwdCBmcm9tIFwiLi9QYW5lbC52dWU/dnVlJnR5cGU9c2NyaXB0JnNldHVwPXRydWUmbGFuZz10c1wiXG5leHBvcnQgKiBmcm9tIFwiLi9QYW5lbC52dWU/dnVlJnR5cGU9c2NyaXB0JnNldHVwPXRydWUmbGFuZz10c1wiXG5cbmltcG9ydCBleHBvcnRDb21wb25lbnQgZnJvbSBcIi4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2Rpc3QvZXhwb3J0SGVscGVyLmpzXCJcbmNvbnN0IF9fZXhwb3J0c19fID0gLyojX19QVVJFX18qL2V4cG9ydENvbXBvbmVudChzY3JpcHQsIFtbJ3JlbmRlcicscmVuZGVyXSxbJ19fZmlsZScsXCJzcmMvUGFuZWwudnVlXCJdXSlcbi8qIGhvdCByZWxvYWQgKi9cbmlmIChtb2R1bGUuaG90KSB7XG4gIF9fZXhwb3J0c19fLl9faG1ySWQgPSBcIjc4OWJjM2RiXCJcbiAgY29uc3QgYXBpID0gX19WVUVfSE1SX1JVTlRJTUVfX1xuICBtb2R1bGUuaG90LmFjY2VwdCgpXG4gIGlmICghYXBpLmNyZWF0ZVJlY29yZCgnNzg5YmMzZGInLCBfX2V4cG9ydHNfXykpIHtcbiAgICBhcGkucmVsb2FkKCc3ODliYzNkYicsIF9fZXhwb3J0c19fKVxuICB9XG4gIFxuICBtb2R1bGUuaG90LmFjY2VwdChcIi4vUGFuZWwudnVlP3Z1ZSZ0eXBlPXRlbXBsYXRlJmlkPTc4OWJjM2RiJnRzPXRydWVcIiwgKCkgPT4ge1xuICAgIGFwaS5yZXJlbmRlcignNzg5YmMzZGInLCByZW5kZXIpXG4gIH0pXG5cbn1cblxuXG5leHBvcnQgZGVmYXVsdCBfX2V4cG9ydHNfXyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/Panel.vue\n\n}');
  },
  "./src/Panel.vue?vue&type=script&setup=true&lang=ts": 
  /*!**********************************************************!*\
  !*** ./src/Panel.vue?vue&type=script&setup=true&lang=ts ***!
  \**********************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval('{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* reexport safe */ _node_modules_ts_loader_index_js_clonedRuleSet_6_node_modules_vue_loader_dist_index_js_ruleSet_1_rules_4_use_0_Panel_vue_vue_type_script_setup_true_lang_ts__WEBPACK_IMPORTED_MODULE_0__["default"])\n/* harmony export */ });\n/* harmony import */ var _node_modules_ts_loader_index_js_clonedRuleSet_6_node_modules_vue_loader_dist_index_js_ruleSet_1_rules_4_use_0_Panel_vue_vue_type_script_setup_true_lang_ts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../node_modules/ts-loader/index.js??clonedRuleSet-6!../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[4].use[0]!./Panel.vue?vue&type=script&setup=true&lang=ts */ "./node_modules/ts-loader/index.js??clonedRuleSet-6!./node_modules/vue-loader/dist/index.js??ruleSet[1].rules[4].use[0]!./src/Panel.vue?vue&type=script&setup=true&lang=ts");\n //# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvUGFuZWwudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZzZXR1cD10cnVlJmxhbmc9dHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBb00iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90YXZlcm5faGVscGVyX3RlbXBsYXRlL3NyYy9QYW5lbC52dWU/MzZlOCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgeyBkZWZhdWx0IH0gZnJvbSBcIi0hLi4vbm9kZV9tb2R1bGVzL3RzLWxvYWRlci9pbmRleC5qcz8/Y2xvbmVkUnVsZVNldC02IS4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2Rpc3QvaW5kZXguanM/P3J1bGVTZXRbMV0ucnVsZXNbNF0udXNlWzBdIS4vUGFuZWwudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZzZXR1cD10cnVlJmxhbmc9dHNcIjsgZXhwb3J0ICogZnJvbSBcIi0hLi4vbm9kZV9tb2R1bGVzL3RzLWxvYWRlci9pbmRleC5qcz8/Y2xvbmVkUnVsZVNldC02IS4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2Rpc3QvaW5kZXguanM/P3J1bGVTZXRbMV0ucnVsZXNbNF0udXNlWzBdIS4vUGFuZWwudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZzZXR1cD10cnVlJmxhbmc9dHNcIiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/Panel.vue?vue&type=script&setup=true&lang=ts\n\n}');
  },
  "./src/Panel.vue?vue&type=template&id=789bc3db&ts=true": 
  /*!*************************************************************!*\
  !*** ./src/Panel.vue?vue&type=template&id=789bc3db&ts=true ***!
  \*************************************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    __webpack_require__.r(__webpack_exports__);
    __webpack_require__.d(__webpack_exports__, {
      render: () => _node_modules_ts_loader_index_js_clonedRuleSet_6_node_modules_vue_loader_dist_templateLoader_js_ruleSet_1_rules_2_node_modules_vue_loader_dist_index_js_ruleSet_1_rules_4_use_0_Panel_vue_vue_type_template_id_789bc3db_ts_true__WEBPACK_IMPORTED_MODULE_0__.render
    });
    var _node_modules_ts_loader_index_js_clonedRuleSet_6_node_modules_vue_loader_dist_templateLoader_js_ruleSet_1_rules_2_node_modules_vue_loader_dist_index_js_ruleSet_1_rules_4_use_0_Panel_vue_vue_type_template_id_789bc3db_ts_true__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../node_modules/ts-loader/index.js??clonedRuleSet-6!../node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[2]!../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[4].use[0]!./Panel.vue?vue&type=template&id=789bc3db&ts=true */ "./node_modules/ts-loader/index.js??clonedRuleSet-6!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[2]!./node_modules/vue-loader/dist/index.js??ruleSet[1].rules[4].use[0]!./src/Panel.vue?vue&type=template&id=789bc3db&ts=true");
  },
  "./src/button.ts": 
  /*!***********************!*\
  !*** ./src/button.ts ***!
  \***********************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buttons: () => (/* binding */ buttons),\n/* harmony export */   registerButtons: () => (/* binding */ registerButtons)\n/* harmony export */ });\n/* harmony import */ var _function__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/function */ \"./src/function.ts\");\n/* harmony import */ var _schema__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/schema */ \"./src/schema.ts\");\n/* harmony import */ var _update_descriptions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/update_descriptions */ \"./src/update_descriptions.ts\");\n/* harmony import */ var _variable_init__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/variable_init */ \"./src/variable_init.ts\");\n\n\n\n\nconst buttons = [\n    {\n        name: '重新处理变量',\n        function: async () => {\n            const last_msg = getLastMessageId();\n            if (last_msg < 1)\n                return;\n            if (SillyTavern.chat.length === 0)\n                return;\n            await updateVariablesWith(variables => {\n                _.unset(variables, `stat_data`);\n                _.unset(variables, `delta_data`);\n                _.unset(variables, `display_data`);\n                _.unset(variables, `schema`);\n                return variables;\n            }, { type: 'message', message_id: last_msg });\n            //重新处理变量\n            await (0,_function__WEBPACK_IMPORTED_MODULE_0__.handleVariablesInMessage)(getLastMessageId());\n        },\n    },\n    {\n        name: '重新读取初始变量',\n        function: async () => {\n            // 1. 创建一个新的空 GameData 并加载 InitVar 数据\n            const latest_init_data = (0,_variable_init__WEBPACK_IMPORTED_MODULE_3__.createEmptyGameData)();\n            try {\n                const hasInitData = await (0,_variable_init__WEBPACK_IMPORTED_MODULE_3__.loadInitVarData)(latest_init_data);\n                if (!hasInitData) {\n                    console.error('没有找到 InitVar 数据');\n                    toastr.error('没有找到 InitVar 数据', '', { timeOut: 3000 });\n                    return;\n                }\n            }\n            catch (e) {\n                console.error('加载 InitVar 数据失败:', e);\n                return;\n            }\n            await (0,_schema__WEBPACK_IMPORTED_MODULE_1__.reconcileAndApplySchema)(latest_init_data);\n            (0,_schema__WEBPACK_IMPORTED_MODULE_1__.cleanUpMetadata)(latest_init_data.stat_data);\n            // 2. 从最新楼层获取最新变量\n            const message_id = getLastMessageId();\n            if (message_id < 0) {\n                console.error('没有找到消息');\n                toastr.error('没有找到消息', '', { timeOut: 3000 });\n                return;\n            }\n            const latest_msg_data = await (0,_function__WEBPACK_IMPORTED_MODULE_0__.getLastValidVariable)(message_id);\n            if (!_.has(latest_msg_data, 'stat_data')) {\n                console.error('最新消息中没有找到 stat_data');\n                toastr.error('最新消息中没有 stat_data', '', { timeOut: 3000 });\n                return;\n            }\n            // 3. 产生新变量，以 latest_init_data 为基础，合并入 latest_msg_data 的内容\n            //此处 latest_init_data 内不存在复杂类型，因此可以采用 structuredClone\n            const merged_data = { stat_data: undefined, schema: undefined };\n            merged_data.stat_data = _.merge({}, latest_init_data.stat_data, latest_msg_data.stat_data);\n            merged_data.schema = _.merge({}, latest_msg_data.schema, latest_init_data.schema);\n            merged_data.initialized_lorebooks = _.merge({}, latest_init_data.initialized_lorebooks, latest_msg_data.initialized_lorebooks);\n            merged_data.display_data = structuredClone(merged_data.stat_data);\n            merged_data.delta_data = latest_msg_data.delta_data;\n            // 4-5. 遍历并更新描述字段\n            (0,_update_descriptions__WEBPACK_IMPORTED_MODULE_2__.updateDescriptions)('', latest_init_data.stat_data, latest_msg_data.stat_data, merged_data.stat_data);\n            //应用\n            await (0,_schema__WEBPACK_IMPORTED_MODULE_1__.reconcileAndApplySchema)(merged_data);\n            (0,_schema__WEBPACK_IMPORTED_MODULE_1__.cleanUpMetadata)(merged_data.stat_data);\n            // 6. 更新变量到最新消息\n            await replaceVariables(merged_data, { type: 'message', message_id: message_id });\n            // @ts-expect-error 该函数可用\n            await setChatMessage({}, message_id);\n            await replaceVariables(merged_data, { type: 'chat' });\n            console.info('InitVar更新完成');\n            toastr.success('InitVar描述已更新', '', { timeOut: 3000 });\n        },\n    },\n    {\n        name: '清除旧楼层变量',\n        function: async () => {\n            const result = (await SillyTavern.callGenericPopup('<h4>清除旧楼层变量信息以减小聊天文件大小避免手机崩溃</h4>请填写要保留变量信息的楼层数 (如 10 为保留最后 10 层)<br><strong>注意: 你将不能正常回退游玩到没保留变量信息的楼层</strong>', SillyTavern.POPUP_TYPE.INPUT, '10'));\n            if (!result) {\n                return;\n            }\n            const depth = parseInt(result);\n            if (isNaN(depth)) {\n                toastr.error(`请输入有效的楼层数, 你输入的是 '${result}'`, '清理旧楼层变量失败');\n                return;\n            }\n            SillyTavern.chat.slice(0, -depth).forEach(chat_message => {\n                if (chat_message.variables === undefined) {\n                    return;\n                }\n                chat_message.variables = _.range(0, chat_message.swipes?.length ?? 1).map(i => {\n                    if (chat_message?.variables?.[i] === undefined) {\n                        return {};\n                    }\n                    return _.omit(chat_message.variables[i], `stat_data`, `display_data`, `delta_data`, `schema`);\n                });\n            });\n            SillyTavern.saveChat().then(() => toastr.success(`已清理旧变量, 保留了最后 ${depth} 层的变量`, '清理旧楼层变量成功'));\n        },\n    },\n];\nfunction registerButtons() {\n    appendInexistentScriptButtons(buttons.map(b => ({ name: b.name, visible: false })));\n    buttons.forEach(b => {\n        eventOn(getButtonEvent(b.name), b.function);\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU8sRUFBRSxDQUFDO29CQUNkLENBQUM7b0JBQ0QsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUNULFlBQVksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEVBQ3pCLFdBQVcsRUFDWCxjQUFjLEVBQ2QsWUFBWSxFQUNaLFFBQVEsQ0FDWCxDQUFDO2dCQUNOLENBQUMsQ0FBQyxDQUFDO1lBQ1AsQ0FBQyxDQUFDLENBQUM7WUFDSCxXQUFXLENBQUMsUUFBUSxFQUFFLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUM3QixNQUFNLENBQUMsT0FBTyxDQUFDLGlCQUFpQixLQUFLLE9BQU8sRUFBRSxXQUFXLENBQUMsQ0FDN0QsQ0FBQztRQUNOLENBQUM7S0FDSjtDQUNKLENBQUM7QUFFSyxTQUFTLGVBQWU7SUFDM0IsNkJBQTZCLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDcEYsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRTtRQUNoQixPQUFPLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDaEQsQ0FBQyxDQUFDLENBQUM7QUFDUCxDQUFDIiwic291cmNlcyI6WyJzcmM6Ly90YXZlcm5faGVscGVyX3RlbXBsYXRlL3NyYy9idXR0b24udHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0TGFzdFZhbGlkVmFyaWFibGUsIGhhbmRsZVZhcmlhYmxlc0luTWVzc2FnZSB9IGZyb20gJ0AvZnVuY3Rpb24nO1xyXG5pbXBvcnQgeyBjbGVhblVwTWV0YWRhdGEsIHJlY29uY2lsZUFuZEFwcGx5U2NoZW1hIH0gZnJvbSAnQC9zY2hlbWEnO1xyXG5pbXBvcnQgeyB1cGRhdGVEZXNjcmlwdGlvbnMgfSBmcm9tICdAL3VwZGF0ZV9kZXNjcmlwdGlvbnMnO1xyXG5pbXBvcnQgeyBNdnVEYXRhIH0gZnJvbSAnQC92YXJpYWJsZV9kZWYnO1xyXG5pbXBvcnQgeyBjcmVhdGVFbXB0eUdhbWVEYXRhLCBsb2FkSW5pdFZhckRhdGEgfSBmcm9tICdAL3ZhcmlhYmxlX2luaXQnO1xyXG5cclxuaW50ZXJmYWNlIEJ1dHRvbiB7XHJcbiAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICBmdW5jdGlvbjogKCgpID0+IHZvaWQpIHwgKCgpID0+IFByb21pc2U8dm9pZD4pO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgYnV0dG9uczogQnV0dG9uW10gPSBbXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogJ+mHjeaWsOWkhOeQhuWPmOmHjycsXHJcbiAgICAgICAgZnVuY3Rpb246IGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbGFzdF9tc2cgPSBnZXRMYXN0TWVzc2FnZUlkKCk7XHJcbiAgICAgICAgICAgIGlmIChsYXN0X21zZyA8IDEpIHJldHVybjtcclxuICAgICAgICAgICAgaWYgKFNpbGx5VGF2ZXJuLmNoYXQubGVuZ3RoID09PSAwKSByZXR1cm47XHJcbiAgICAgICAgICAgIGF3YWl0IHVwZGF0ZVZhcmlhYmxlc1dpdGgoXHJcbiAgICAgICAgICAgICAgICB2YXJpYWJsZXMgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIF8udW5zZXQodmFyaWFibGVzLCBgc3RhdF9kYXRhYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy51bnNldCh2YXJpYWJsZXMsIGBkZWx0YV9kYXRhYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy51bnNldCh2YXJpYWJsZXMsIGBkaXNwbGF5X2RhdGFgKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnVuc2V0KHZhcmlhYmxlcywgYHNjaGVtYWApO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2YXJpYWJsZXM7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgeyB0eXBlOiAnbWVzc2FnZScsIG1lc3NhZ2VfaWQ6IGxhc3RfbXNnIH1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgLy/ph43mlrDlpITnkIblj5jph49cclxuICAgICAgICAgICAgYXdhaXQgaGFuZGxlVmFyaWFibGVzSW5NZXNzYWdlKGdldExhc3RNZXNzYWdlSWQoKSk7XHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogJ+mHjeaWsOivu+WPluWIneWni+WPmOmHjycsXHJcbiAgICAgICAgZnVuY3Rpb246IGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgLy8gMS4g5Yib5bu65LiA5Liq5paw55qE56m6IEdhbWVEYXRhIOW5tuWKoOi9vSBJbml0VmFyIOaVsOaNrlxyXG4gICAgICAgICAgICBjb25zdCBsYXRlc3RfaW5pdF9kYXRhID0gY3JlYXRlRW1wdHlHYW1lRGF0YSgpO1xyXG5cclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGhhc0luaXREYXRhID0gYXdhaXQgbG9hZEluaXRWYXJEYXRhKGxhdGVzdF9pbml0X2RhdGEpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFoYXNJbml0RGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+ayoeacieaJvuWIsCBJbml0VmFyIOaVsOaNricpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRvYXN0ci5lcnJvcign5rKh5pyJ5om+5YiwIEluaXRWYXIg5pWw5o2uJywgJycsIHsgdGltZU91dDogMzAwMCB9KTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+WKoOi9vSBJbml0VmFyIOaVsOaNruWksei0pTonLCBlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhd2FpdCByZWNvbmNpbGVBbmRBcHBseVNjaGVtYShsYXRlc3RfaW5pdF9kYXRhKTtcclxuXHJcbiAgICAgICAgICAgIGNsZWFuVXBNZXRhZGF0YShsYXRlc3RfaW5pdF9kYXRhLnN0YXRfZGF0YSk7XHJcblxyXG4gICAgICAgICAgICAvLyAyLiDku47mnIDmlrDmpbzlsYLojrflj5bmnIDmlrDlj5jph49cclxuICAgICAgICAgICAgY29uc3QgbWVzc2FnZV9pZCA9IGdldExhc3RNZXNzYWdlSWQoKTtcclxuICAgICAgICAgICAgaWYgKG1lc3NhZ2VfaWQgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCfmsqHmnInmib7liLDmtojmga8nKTtcclxuICAgICAgICAgICAgICAgIHRvYXN0ci5lcnJvcign5rKh5pyJ5om+5Yiw5raI5oGvJywgJycsIHsgdGltZU91dDogMzAwMCB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgbGF0ZXN0X21zZ19kYXRhID0gYXdhaXQgZ2V0TGFzdFZhbGlkVmFyaWFibGUobWVzc2FnZV9pZCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIV8uaGFzKGxhdGVzdF9tc2dfZGF0YSwgJ3N0YXRfZGF0YScpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCfmnIDmlrDmtojmga/kuK3msqHmnInmib7liLAgc3RhdF9kYXRhJyk7XHJcbiAgICAgICAgICAgICAgICB0b2FzdHIuZXJyb3IoJ+acgOaWsOa2iOaBr+S4reayoeaciSBzdGF0X2RhdGEnLCAnJywgeyB0aW1lT3V0OiAzMDAwIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyAzLiDkuqfnlJ/mlrDlj5jph4/vvIzku6UgbGF0ZXN0X2luaXRfZGF0YSDkuLrln7rnoYDvvIzlkIjlubblhaUgbGF0ZXN0X21zZ19kYXRhIOeahOWGheWuuVxyXG4gICAgICAgICAgICAvL+atpOWkhCBsYXRlc3RfaW5pdF9kYXRhIOWGheS4jeWtmOWcqOWkjeadguexu+Wei++8jOWboOatpOWPr+S7pemHh+eUqCBzdHJ1Y3R1cmVkQ2xvbmVcclxuICAgICAgICAgICAgY29uc3QgbWVyZ2VkX2RhdGE6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7IHN0YXRfZGF0YTogdW5kZWZpbmVkLCBzY2hlbWE6IHVuZGVmaW5lZCB9O1xyXG4gICAgICAgICAgICBtZXJnZWRfZGF0YS5zdGF0X2RhdGEgPSBfLm1lcmdlKFxyXG4gICAgICAgICAgICAgICAge30sXHJcbiAgICAgICAgICAgICAgICBsYXRlc3RfaW5pdF9kYXRhLnN0YXRfZGF0YSxcclxuICAgICAgICAgICAgICAgIGxhdGVzdF9tc2dfZGF0YS5zdGF0X2RhdGFcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgbWVyZ2VkX2RhdGEuc2NoZW1hID0gXy5tZXJnZSh7fSwgbGF0ZXN0X21zZ19kYXRhLnNjaGVtYSwgbGF0ZXN0X2luaXRfZGF0YS5zY2hlbWEpO1xyXG4gICAgICAgICAgICBtZXJnZWRfZGF0YS5pbml0aWFsaXplZF9sb3JlYm9va3MgPSBfLm1lcmdlKFxyXG4gICAgICAgICAgICAgICAge30sXHJcbiAgICAgICAgICAgICAgICBsYXRlc3RfaW5pdF9kYXRhLmluaXRpYWxpemVkX2xvcmVib29rcyxcclxuICAgICAgICAgICAgICAgIGxhdGVzdF9tc2dfZGF0YS5pbml0aWFsaXplZF9sb3JlYm9va3NcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgbWVyZ2VkX2RhdGEuZGlzcGxheV9kYXRhID0gc3RydWN0dXJlZENsb25lKG1lcmdlZF9kYXRhLnN0YXRfZGF0YSk7XHJcbiAgICAgICAgICAgIG1lcmdlZF9kYXRhLmRlbHRhX2RhdGEgPSBsYXRlc3RfbXNnX2RhdGEuZGVsdGFfZGF0YTtcclxuXHJcbiAgICAgICAgICAgIC8vIDQtNS4g6YGN5Y6G5bm25pu05paw5o+P6L+w5a2X5q61XHJcbiAgICAgICAgICAgIHVwZGF0ZURlc2NyaXB0aW9ucyhcclxuICAgICAgICAgICAgICAgICcnLFxyXG4gICAgICAgICAgICAgICAgbGF0ZXN0X2luaXRfZGF0YS5zdGF0X2RhdGEsXHJcbiAgICAgICAgICAgICAgICBsYXRlc3RfbXNnX2RhdGEuc3RhdF9kYXRhLFxyXG4gICAgICAgICAgICAgICAgbWVyZ2VkX2RhdGEuc3RhdF9kYXRhXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAvL+W6lOeUqFxyXG4gICAgICAgICAgICBhd2FpdCByZWNvbmNpbGVBbmRBcHBseVNjaGVtYShtZXJnZWRfZGF0YSBhcyBNdnVEYXRhKTtcclxuXHJcbiAgICAgICAgICAgIGNsZWFuVXBNZXRhZGF0YShtZXJnZWRfZGF0YS5zdGF0X2RhdGEpO1xyXG5cclxuICAgICAgICAgICAgLy8gNi4g5pu05paw5Y+Y6YeP5Yiw5pyA5paw5raI5oGvXHJcbiAgICAgICAgICAgIGF3YWl0IHJlcGxhY2VWYXJpYWJsZXMobWVyZ2VkX2RhdGEsIHsgdHlwZTogJ21lc3NhZ2UnLCBtZXNzYWdlX2lkOiBtZXNzYWdlX2lkIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciDor6Xlh73mlbDlj6/nlKhcclxuICAgICAgICAgICAgYXdhaXQgc2V0Q2hhdE1lc3NhZ2Uoe30sIG1lc3NhZ2VfaWQpO1xyXG5cclxuICAgICAgICAgICAgYXdhaXQgcmVwbGFjZVZhcmlhYmxlcyhtZXJnZWRfZGF0YSwgeyB0eXBlOiAnY2hhdCcgfSk7XHJcblxyXG4gICAgICAgICAgICBjb25zb2xlLmluZm8oJ0luaXRWYXLmm7TmlrDlrozmiJAnKTtcclxuICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MoJ0luaXRWYXLmj4/ov7Dlt7Lmm7TmlrAnLCAnJywgeyB0aW1lT3V0OiAzMDAwIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIG5hbWU6ICfmuIXpmaTml6fmpbzlsYLlj5jph48nLFxyXG4gICAgICAgIGZ1bmN0aW9uOiBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IChhd2FpdCBTaWxseVRhdmVybi5jYWxsR2VuZXJpY1BvcHVwKFxyXG4gICAgICAgICAgICAgICAgJzxoND7muIXpmaTml6fmpbzlsYLlj5jph4/kv6Hmga/ku6Xlh4/lsI/ogYrlpKnmlofku7blpKflsI/pgb/lhY3miYvmnLrltKnmuoM8L2g0Puivt+Whq+WGmeimgeS/neeVmeWPmOmHj+S/oeaBr+eahOalvOWxguaVsCAo5aaCIDEwIOS4uuS/neeVmeacgOWQjiAxMCDlsYIpPGJyPjxzdHJvbmc+5rOo5oSPOiDkvaDlsIbkuI3og73mraPluLjlm57pgIDmuLjnjqnliLDmsqHkv53nlZnlj5jph4/kv6Hmga/nmoTmpbzlsYI8L3N0cm9uZz4nLFxyXG4gICAgICAgICAgICAgICAgU2lsbHlUYXZlcm4uUE9QVVBfVFlQRS5JTlBVVCxcclxuICAgICAgICAgICAgICAgICcxMCdcclxuICAgICAgICAgICAgKSkgYXMgc3RyaW5nIHwgdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICBpZiAoIXJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IGRlcHRoID0gcGFyc2VJbnQocmVzdWx0KTtcclxuICAgICAgICAgICAgaWYgKGlzTmFOKGRlcHRoKSkge1xyXG4gICAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKGDor7fovpPlhaXmnInmlYjnmoTmpbzlsYLmlbAsIOS9oOi+k+WFpeeahOaYryAnJHtyZXN1bHR9J2AsICfmuIXnkIbml6fmpbzlsYLlj5jph4/lpLHotKUnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBTaWxseVRhdmVybi5jaGF0LnNsaWNlKDAsIC1kZXB0aCkuZm9yRWFjaChjaGF0X21lc3NhZ2UgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNoYXRfbWVzc2FnZS52YXJpYWJsZXMgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNoYXRfbWVzc2FnZS52YXJpYWJsZXMgPSBfLnJhbmdlKDAsIGNoYXRfbWVzc2FnZS5zd2lwZXM/Lmxlbmd0aCA/PyAxKS5tYXAoaSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoYXRfbWVzc2FnZT8udmFyaWFibGVzPy5baV0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge307XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfLm9taXQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYXRfbWVzc2FnZS52YXJpYWJsZXNbaV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGBzdGF0X2RhdGFgLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBgZGlzcGxheV9kYXRhYCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYGRlbHRhX2RhdGFgLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBgc2NoZW1hYFxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIFNpbGx5VGF2ZXJuLnNhdmVDaGF0KCkudGhlbigoKSA9PlxyXG4gICAgICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MoYOW3sua4heeQhuaXp+WPmOmHjywg5L+d55WZ5LqG5pyA5ZCOICR7ZGVwdGh9IOWxgueahOWPmOmHj2AsICfmuIXnkIbml6fmpbzlsYLlj5jph4/miJDlip8nKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0sXHJcbiAgICB9LFxyXG5dO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyQnV0dG9ucygpIHtcclxuICAgIGFwcGVuZEluZXhpc3RlbnRTY3JpcHRCdXR0b25zKGJ1dHRvbnMubWFwKGIgPT4gKHsgbmFtZTogYi5uYW1lLCB2aXNpYmxlOiBmYWxzZSB9KSkpO1xyXG4gICAgYnV0dG9ucy5mb3JFYWNoKGIgPT4ge1xyXG4gICAgICAgIGV2ZW50T24oZ2V0QnV0dG9uRXZlbnQoYi5uYW1lKSwgYi5mdW5jdGlvbik7XHJcbiAgICB9KTtcclxufVxyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/button.ts\n\n}");
  },
  "./src/export_globals.ts": 
  /*!*******************************!*\
  !*** ./src/export_globals.ts ***!
  \*******************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   exportGlobals: () => (/* binding */ exportGlobals)\n/* harmony export */ });\n/* harmony import */ var _function__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/function */ \"./src/function.ts\");\n/* harmony import */ var _variable_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/variable_def */ \"./src/variable_def.ts\");\n/* harmony import */ var _variable_init__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/variable_init */ \"./src/variable_init.ts\");\n\n\n\nfunction createMVU() {\n    const mvu = {\n        /**\n         * 变量事件常量集合\n         * 包含三个核心事件，用于监听和响应变量系统的不同更新阶段\n         *\n         * @property {string} SINGLE_VARIABLE_UPDATED - 'mag_variable_updated'\n         * 单个变量更新时触发的事件\n         * - 事件值: 'mag_variable_updated'\n         * - 回调签名: (stat_data: Record<string, any>, path: string, oldValue: any, newValue: any) => void\n         *   - stat_data: 完整的状态数据对象\n         *   - path: 被更新的变量路径（如 'player.health' 或 'items[0].name'）\n         *   - oldValue: 更新前的值\n         *   - newValue: 更新后的新值\n         * - 触发条件: 当通过 setMvuVariable / _.set 语句更新一个变量之后， 会触发这个事件\n         * - 典型用途:\n         *   - 实现变量间的联动逻辑（如等级提升时自动增加属性）\n         *   - 如果某个变量不符合更新条件，则拒绝这次更新。\n         *\n         * @property {string} VARIABLE_UPDATE_STARTED - 'mag_variable_update_started'\n         * 批量变量更新开始时触发的事件\n         * - 事件值: 'mag_variable_update_started'\n         * - 回调签名: (variables: MvuData, out_is_updated: boolean) => void\n         *   - variables: 包含 stat_data、display_data、delta_data 的完整数据对象\n         *   - out_is_updated: 弃用\n         * - 触发时机: parseMessage 或 LLM消息回复结束 开始解析命令之前\n         * - 典型用途:\n         *   - 保存更新前的状态快照\n         *   - 初始化批处理所需的临时数据结构\n         *\n         * @property {string} VARIABLE_UPDATE_ENDED - 'mag_variable_update_ended'\n         * 批量变量更新结束时触发的事件\n         * - 事件值: 'mag_variable_update_ended'\n         * - 回调签名: (variables: MvuData, out_is_updated: boolean) => void\n         *   - variables: 更新完成后的完整数据对象\n         *     - variables.stat_data: 最新的状态数据\n         *     - variables.display_data: 包含变化描述的显示数据\n         *     - variables.delta_data: 仅包含本次更新变化的数据\n         * - 触发时机: parseMessage 或 LLM消息回复结束 完成所有命令的处理后\n         * - 典型用途:\n         *   - 对变量的值进行回滚\n         *   - 根据变量的变更更新事件触发、变量取值（如日替后更新每日任务等）\n         *\n         * @example\n         * // 1. 监听单个变量更新 - 实现变量联动\n         * eventOn(Mvu.events.SINGLE_VARIABLE_UPDATED, (stat_data, path, oldValue, newValue) => {\n         *   console.log(`[变量更新] ${path}: ${oldValue} -> ${newValue}`);\n         *\n         *   // 等级提升时的连锁反应\n         *   if (path === 'player.level' && newValue > oldValue) {\n         *     const levelUp = newValue - oldValue;\n         *     // 每级增加10点生命上限\n         *     const newMaxHealth = stat_data.player.maxHealth + (levelUp * 10);\n         *     Mvu.setMvuVariable(stat_data, 'player.maxHealth', newMaxHealth, {\n         *       reason: `升级奖励(+${levelUp}级)`\n         *     });\n         *   }\n         *\n         *   // 生命值降到0时触发死亡\n         *   if (path === 'player.health' && newValue <= 0 && oldValue > 0) {\n         *     Mvu.setMvuVariable(mvuData, 'player.status', 'dead', {\n         *       reason: '生命值耗尽',\n         *       is_recursive: true  // 允许因此再次触发 events\n         *     });\n         *   }\n         * });\n         *\n         * // 2. 监听批量更新开始 - 准备UI和状态\n         * var value_snapshot = undefined;\n         * eventOn(Mvu.events.VARIABLE_UPDATE_STARTED, (variables, out_is_updated) => {\n         *   console.log('[批量更新] 开始处理变量更新...');\n         *\n         *   // 保存老值\n         *   value_snapshot = variables.stat_data.世界线变更度;\n         * });\n         *\n         * // 3. 监听批量更新结束 - 完成后处理\n         * eventOn(Mvu.events.VARIABLE_UPDATE_ENDED, (variables, out_is_updated) => {\n         *   console.log('[批量更新] 完成，是否有更新:', out_is_updated);\n         *   //使用老值覆盖，禁止llm 更新\n         *   Mvu.setMvuVariable(variables.stat_data, '世界线变更都', value_snapshot);\n         * });\n         *\n         */\n        events: _variable_def__WEBPACK_IMPORTED_MODULE_1__.variable_events,\n        /**\n         * 解析包含变量更新命令的消息\n         * @param message - 包含 _.set() 命令的消息字符串\n         * @param old_data - 当前的 MvuData 状态\n         * @returns 如果有变量被更新则返回新的 MvuData，否则返回 undefined\n         * @example\n         * const newData = await Mvu.parseMessage(`\n         *   _.set('player.health', 100, 80);//受到伤害\n         *   _.set('player.position', \"城镇\", \"森林\");//移动\n         * `, currentData);\n         */\n        parseMessage: async function (message, old_data) {\n            const variableData = {\n                old_variables: old_data,\n            };\n            await (0,_function__WEBPACK_IMPORTED_MODULE_0__.handleVariablesInCallback)(message, variableData);\n            return variableData.new_variables;\n        },\n        /**\n         * 获取指定作用域的 MvuData\n         * @param options - 变量选项，指定获取哪个作用域的变量（chat/message/global等）\n         * @returns MvuData 对象\n         * @example\n         * const chatData = Mvu.getMvuData({ type: 'chat' });\n         * const messageData = Mvu.getMvuData({ type: 'message', message_id: 'latest' });\n         */\n        getMvuData: function (options) {\n            const result = getVariables(options);\n            return result;\n        },\n        /**\n         * 替换指定作用域的 MvuData\n         * @param mvu_data - 要设置的新 MvuData\n         * @param options - 变量选项，指定替换哪个作用域的变量\n         * @example\n         * await Mvu.replaceMvuData(newData, { type: 'chat' });\n         */\n        replaceMvuData: async function (mvu_data, options) {\n            await replaceVariables(mvu_data, options);\n        },\n        /**\n         * 获取当前消息的 MvuData\n         * @returns 当前消息的 MvuData 对象\n         * @example\n         * const currentData = Mvu.getCurrentMvuData();\n         */\n        getCurrentMvuData: function () {\n            const variables = getVariables({ type: 'message', message_id: getCurrentMessageId() });\n            return variables;\n        },\n        /**\n         * 替换当前消息的 MvuData\n         * @param mvu_data - 要设置的新 MvuData\n         * @example\n         * await Mvu.replaceCurrentMvuData(updatedData);\n         */\n        replaceCurrentMvuData: async function (mvu_data) {\n            await replaceVariables(mvu_data, {\n                type: 'message',\n                message_id: getCurrentMessageId(),\n            });\n        },\n        /**\n         * 重新加载初始变量数据\n         * @param mvu_data - 要重新加载初始数据的 MvuData 对象\n         * @returns 是否加载成功\n         * @example\n         * const success = await Mvu.reloadInitVar(mvuData);\n         */\n        reloadInitVar: async function (mvu_data) {\n            return await (0,_variable_init__WEBPACK_IMPORTED_MODULE_2__.loadInitVarData)(mvu_data);\n        },\n        /**\n         * 设置单个变量的值\n         * @param mvu_data - 要更新的 MvuData 对象\n         * @param path - 变量路径，支持嵌套路径如 \"player.health\" 或数组索引 \"items[0]\"\n         * @param new_value - 新值\n         * @param options - 可选参数\n         * @param options.reason - 更新原因，会显示在 display_data 中\n         * @param options.is_recursive - 是否触发 mag_variable_updated 事件，默认 false\n         * @returns 更新是否成功\n         * @example\n         * // 简单更新\n         * await Mvu.setMvuVariable(data, 'player.health', 80);\n         *\n         * // 带原因的更新\n         * await Mvu.setMvuVariable(data, 'player.health', 80, { reason: '受到伤害' });\n         *\n         * // 触发事件的更新\n         * await Mvu.setMvuVariable(data, 'player.level', 2, {\n         *   reason: '升级',\n         *   is_recursive: true\n         * });\n         *\n         */\n        setMvuVariable: async function (mvu_data, path, new_value, { reason = '', is_recursive = false } = {}) {\n            return await (0,_function__WEBPACK_IMPORTED_MODULE_0__.updateVariable)(mvu_data.stat_data, path, new_value, reason, is_recursive);\n        },\n        /**\n         * 获取变量的值\n         * @param mvu_data - MvuData 对象\n         * @param path - 变量路径，支持嵌套路径\n         * @param options - 可选参数\n         * @param options.category - 从哪个数据类别获取：'stat'(默认)/'display'/'delta'\n         * @param options.default_value - 当路径不存在时返回的默认值\n         * @returns 变量值。如果是 ValueWithDescription 类型，返回第一个元素（实际值）\n         * @example\n         * // 获取 stat_data 中的值\n         * const health = Mvu.getMvuVariable(data, 'player.health');\n         *\n         * // 获取 display_data 中的显示值\n         * const healthDisplay = Mvu.getMvuVariable(data, 'player.health', {\n         *   category: 'display'\n         * });\n         *\n         * // 带默认值\n         * const score = Mvu.getMvuVariable(data, 'player.score', {\n         *   default_value: 0\n         * });\n         */\n        getMvuVariable: function (mvu_data, path, { category = 'stat', default_value = undefined, } = {}) {\n            let data;\n            switch (category) {\n                case 'stat':\n                    data = mvu_data.stat_data;\n                    break;\n                case 'display':\n                    data = mvu_data.display_data;\n                    break;\n                case 'delta':\n                    data = mvu_data.delta_data;\n                    break;\n            }\n            const value = _.get(data, path, default_value);\n            /* 如果是 VWD，取第一个元素 */\n            if ((0,_variable_def__WEBPACK_IMPORTED_MODULE_1__.isValueWithDescription)(value)) {\n                return value[0];\n            }\n            /* 否则直接返回值本身 */\n            return value;\n        },\n        /**\n         * 获取指定类别的完整数据记录\n         * @param mvu_data - MvuData 对象\n         * @param category - 数据类别：'stat'/'display'/'delta'\n         * @returns 对应类别的完整数据记录对象\n         * @example\n         * // 获取所有状态数据\n         * const allStatData = Mvu.getRecordFromMvuData(data, 'stat');\n         *\n         * // 获取所有显示数据\n         * const allDisplayData = Mvu.getRecordFromMvuData(data, 'display');\n         *\n         * // 获取所有增量数据\n         * const allDeltaData = Mvu.getRecordFromMvuData(data, 'delta');\n         *\n         * @note 通常用于 LLM 准备 foreach 数据时使用\n         */\n        getRecordFromMvuData: function (mvu_data, category) {\n            return (0,_variable_def__WEBPACK_IMPORTED_MODULE_1__.extractRecord)(category, mvu_data);\n        },\n    };\n    return mvu;\n}\nfunction exportGlobals() {\n    const mvu = createMVU();\n    _.set(window, 'Mvu', mvu);\n    _.set(window.parent, 'Mvu', mvu);\n    eventEmit('global_Mvu_initialized');\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SSxxRUFBc0IsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDO2dCQUNoQyxPQUFPLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNwQixDQUFDO1lBRUQsZUFBZTtZQUNmLE9BQU8sS0FBSyxDQUFDO1FBQ2pCLENBQUM7UUFFRDs7Ozs7Ozs7Ozs7Ozs7OztXQWdCRztRQUNILG9CQUFvQixFQUFFLFVBQ2xCLFFBQWlCLEVBQ2pCLFFBQXNDO1lBRXRDLE9BQU8sNERBQWEsQ0FBQyxRQUFRLEVBQUUsUUFBUSxDQUFDLENBQUM7UUFDN0MsQ0FBQztLQUNKLENBQUM7SUFDRixPQUFPLEdBQUcsQ0FBQztBQUNmLENBQUM7QUFNTSxTQUFTLGFBQWE7SUFDekIsTUFBTSxHQUFHLEdBQUcsU0FBUyxFQUFFLENBQUM7SUFDeEIsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUUsS0FBSyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBQzFCLENBQUMsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxLQUFLLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDakMsU0FBUyxDQUFDLHdCQUF3QixDQUFDLENBQUM7QUFDeEMsQ0FBQyIsInNvdXJjZXMiOlsic3JjOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS9zcmMvZXhwb3J0X2dsb2JhbHMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaGFuZGxlVmFyaWFibGVzSW5DYWxsYmFjaywgdXBkYXRlVmFyaWFibGUgfSBmcm9tICdAL2Z1bmN0aW9uJztcbmltcG9ydCB7XG4gICAgZXh0cmFjdFJlY29yZCxcbiAgICBpc1ZhbHVlV2l0aERlc2NyaXB0aW9uLFxuICAgIE12dURhdGEsXG4gICAgdmFyaWFibGVfZXZlbnRzLFxuICAgIFZhcmlhYmxlRGF0YSxcbn0gZnJvbSAnQC92YXJpYWJsZV9kZWYnO1xuaW1wb3J0IHsgbG9hZEluaXRWYXJEYXRhIH0gZnJvbSAnQC92YXJpYWJsZV9pbml0JztcblxuZnVuY3Rpb24gY3JlYXRlTVZVKCkge1xuICAgIGNvbnN0IG12dSA9IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIOWPmOmHj+S6i+S7tuW4uOmHj+mbhuWQiFxuICAgICAgICAgKiDljIXlkKvkuInkuKrmoLjlv4Pkuovku7bvvIznlKjkuo7nm5HlkKzlkozlk43lupTlj5jph4/ns7vnu5/nmoTkuI3lkIzmm7TmlrDpmLbmrrVcbiAgICAgICAgICpcbiAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd9IFNJTkdMRV9WQVJJQUJMRV9VUERBVEVEIC0gJ21hZ192YXJpYWJsZV91cGRhdGVkJ1xuICAgICAgICAgKiDljZXkuKrlj5jph4/mm7TmlrDml7bop6blj5HnmoTkuovku7ZcbiAgICAgICAgICogLSDkuovku7blgLw6ICdtYWdfdmFyaWFibGVfdXBkYXRlZCdcbiAgICAgICAgICogLSDlm57osIPnrb7lkI06IChzdGF0X2RhdGE6IFJlY29yZDxzdHJpbmcsIGFueT4sIHBhdGg6IHN0cmluZywgb2xkVmFsdWU6IGFueSwgbmV3VmFsdWU6IGFueSkgPT4gdm9pZFxuICAgICAgICAgKiAgIC0gc3RhdF9kYXRhOiDlrozmlbTnmoTnirbmgIHmlbDmja7lr7nosaFcbiAgICAgICAgICogICAtIHBhdGg6IOiiq+abtOaWsOeahOWPmOmHj+i3r+W+hO+8iOWmgiAncGxheWVyLmhlYWx0aCcg5oiWICdpdGVtc1swXS5uYW1lJ++8iVxuICAgICAgICAgKiAgIC0gb2xkVmFsdWU6IOabtOaWsOWJjeeahOWAvFxuICAgICAgICAgKiAgIC0gbmV3VmFsdWU6IOabtOaWsOWQjueahOaWsOWAvFxuICAgICAgICAgKiAtIOinpuWPkeadoeS7tjog5b2T6YCa6L+HIHNldE12dVZhcmlhYmxlIC8gXy5zZXQg6K+t5Y+l5pu05paw5LiA5Liq5Y+Y6YeP5LmL5ZCO77yMIOS8muinpuWPkei/meS4quS6i+S7tlxuICAgICAgICAgKiAtIOWFuOWei+eUqOmAlDpcbiAgICAgICAgICogICAtIOWunueOsOWPmOmHj+mXtOeahOiBlOWKqOmAu+i+ke+8iOWmguetiee6p+aPkOWNh+aXtuiHquWKqOWinuWKoOWxnuaAp++8iVxuICAgICAgICAgKiAgIC0g5aaC5p6c5p+Q5Liq5Y+Y6YeP5LiN56ym5ZCI5pu05paw5p2h5Lu277yM5YiZ5ouS57ud6L+Z5qyh5pu05paw44CCXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBWQVJJQUJMRV9VUERBVEVfU1RBUlRFRCAtICdtYWdfdmFyaWFibGVfdXBkYXRlX3N0YXJ0ZWQnXG4gICAgICAgICAqIOaJuemHj+WPmOmHj+abtOaWsOW8gOWni+aXtuinpuWPkeeahOS6i+S7tlxuICAgICAgICAgKiAtIOS6i+S7tuWAvDogJ21hZ192YXJpYWJsZV91cGRhdGVfc3RhcnRlZCdcbiAgICAgICAgICogLSDlm57osIPnrb7lkI06ICh2YXJpYWJsZXM6IE12dURhdGEsIG91dF9pc191cGRhdGVkOiBib29sZWFuKSA9PiB2b2lkXG4gICAgICAgICAqICAgLSB2YXJpYWJsZXM6IOWMheWQqyBzdGF0X2RhdGHjgIFkaXNwbGF5X2RhdGHjgIFkZWx0YV9kYXRhIOeahOWujOaVtOaVsOaNruWvueixoVxuICAgICAgICAgKiAgIC0gb3V0X2lzX3VwZGF0ZWQ6IOW8g+eUqFxuICAgICAgICAgKiAtIOinpuWPkeaXtuacujogcGFyc2VNZXNzYWdlIOaIliBMTE3mtojmga/lm57lpI3nu5PmnZ8g5byA5aeL6Kej5p6Q5ZG95Luk5LmL5YmNXG4gICAgICAgICAqIC0g5YW45Z6L55So6YCUOlxuICAgICAgICAgKiAgIC0g5L+d5a2Y5pu05paw5YmN55qE54q25oCB5b+r54WnXG4gICAgICAgICAqICAgLSDliJ3lp4vljJbmibnlpITnkIbmiYDpnIDnmoTkuLTml7bmlbDmja7nu5PmnoRcbiAgICAgICAgICpcbiAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd9IFZBUklBQkxFX1VQREFURV9FTkRFRCAtICdtYWdfdmFyaWFibGVfdXBkYXRlX2VuZGVkJ1xuICAgICAgICAgKiDmibnph4/lj5jph4/mm7TmlrDnu5PmnZ/ml7bop6blj5HnmoTkuovku7ZcbiAgICAgICAgICogLSDkuovku7blgLw6ICdtYWdfdmFyaWFibGVfdXBkYXRlX2VuZGVkJ1xuICAgICAgICAgKiAtIOWbnuiwg+etvuWQjTogKHZhcmlhYmxlczogTXZ1RGF0YSwgb3V0X2lzX3VwZGF0ZWQ6IGJvb2xlYW4pID0+IHZvaWRcbiAgICAgICAgICogICAtIHZhcmlhYmxlczog5pu05paw5a6M5oiQ5ZCO55qE5a6M5pW05pWw5o2u5a+56LGhXG4gICAgICAgICAqICAgICAtIHZhcmlhYmxlcy5zdGF0X2RhdGE6IOacgOaWsOeahOeKtuaAgeaVsOaNrlxuICAgICAgICAgKiAgICAgLSB2YXJpYWJsZXMuZGlzcGxheV9kYXRhOiDljIXlkKvlj5jljJbmj4/ov7DnmoTmmL7npLrmlbDmja5cbiAgICAgICAgICogICAgIC0gdmFyaWFibGVzLmRlbHRhX2RhdGE6IOS7heWMheWQq+acrOasoeabtOaWsOWPmOWMlueahOaVsOaNrlxuICAgICAgICAgKiAtIOinpuWPkeaXtuacujogcGFyc2VNZXNzYWdlIOaIliBMTE3mtojmga/lm57lpI3nu5PmnZ8g5a6M5oiQ5omA5pyJ5ZG95Luk55qE5aSE55CG5ZCOXG4gICAgICAgICAqIC0g5YW45Z6L55So6YCUOlxuICAgICAgICAgKiAgIC0g5a+55Y+Y6YeP55qE5YC86L+b6KGM5Zue5ruaXG4gICAgICAgICAqICAgLSDmoLnmja7lj5jph4/nmoTlj5jmm7Tmm7TmlrDkuovku7bop6blj5HjgIHlj5jph4/lj5blgLzvvIjlpoLml6Xmm7/lkI7mm7TmlrDmr4/ml6Xku7vliqHnrYnvvIlcbiAgICAgICAgICpcbiAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICogLy8gMS4g55uR5ZCs5Y2V5Liq5Y+Y6YeP5pu05pawIC0g5a6e546w5Y+Y6YeP6IGU5YqoXG4gICAgICAgICAqIGV2ZW50T24oTXZ1LmV2ZW50cy5TSU5HTEVfVkFSSUFCTEVfVVBEQVRFRCwgKHN0YXRfZGF0YSwgcGF0aCwgb2xkVmFsdWUsIG5ld1ZhbHVlKSA9PiB7XG4gICAgICAgICAqICAgY29uc29sZS5sb2coYFvlj5jph4/mm7TmlrBdICR7cGF0aH06ICR7b2xkVmFsdWV9IC0+ICR7bmV3VmFsdWV9YCk7XG4gICAgICAgICAqXG4gICAgICAgICAqICAgLy8g562J57qn5o+Q5Y2H5pe255qE6L+e6ZSB5Y+N5bqUXG4gICAgICAgICAqICAgaWYgKHBhdGggPT09ICdwbGF5ZXIubGV2ZWwnICYmIG5ld1ZhbHVlID4gb2xkVmFsdWUpIHtcbiAgICAgICAgICogICAgIGNvbnN0IGxldmVsVXAgPSBuZXdWYWx1ZSAtIG9sZFZhbHVlO1xuICAgICAgICAgKiAgICAgLy8g5q+P57qn5aKe5YqgMTDngrnnlJ/lkb3kuIrpmZBcbiAgICAgICAgICogICAgIGNvbnN0IG5ld01heEhlYWx0aCA9IHN0YXRfZGF0YS5wbGF5ZXIubWF4SGVhbHRoICsgKGxldmVsVXAgKiAxMCk7XG4gICAgICAgICAqICAgICBNdnUuc2V0TXZ1VmFyaWFibGUoc3RhdF9kYXRhLCAncGxheWVyLm1heEhlYWx0aCcsIG5ld01heEhlYWx0aCwge1xuICAgICAgICAgKiAgICAgICByZWFzb246IGDljYfnuqflpZblirEoKyR7bGV2ZWxVcH3nuqcpYFxuICAgICAgICAgKiAgICAgfSk7XG4gICAgICAgICAqICAgfVxuICAgICAgICAgKlxuICAgICAgICAgKiAgIC8vIOeUn+WRveWAvOmZjeWIsDDml7bop6blj5HmrbvkuqFcbiAgICAgICAgICogICBpZiAocGF0aCA9PT0gJ3BsYXllci5oZWFsdGgnICYmIG5ld1ZhbHVlIDw9IDAgJiYgb2xkVmFsdWUgPiAwKSB7XG4gICAgICAgICAqICAgICBNdnUuc2V0TXZ1VmFyaWFibGUobXZ1RGF0YSwgJ3BsYXllci5zdGF0dXMnLCAnZGVhZCcsIHtcbiAgICAgICAgICogICAgICAgcmVhc29uOiAn55Sf5ZG95YC86ICX5bC9JyxcbiAgICAgICAgICogICAgICAgaXNfcmVjdXJzaXZlOiB0cnVlICAvLyDlhYHorrjlm6DmraTlho3mrKHop6blj5EgZXZlbnRzXG4gICAgICAgICAqICAgICB9KTtcbiAgICAgICAgICogICB9XG4gICAgICAgICAqIH0pO1xuICAgICAgICAgKlxuICAgICAgICAgKiAvLyAyLiDnm5HlkKzmibnph4/mm7TmlrDlvIDlp4sgLSDlh4blpIdVSeWSjOeKtuaAgVxuICAgICAgICAgKiB2YXIgdmFsdWVfc25hcHNob3QgPSB1bmRlZmluZWQ7XG4gICAgICAgICAqIGV2ZW50T24oTXZ1LmV2ZW50cy5WQVJJQUJMRV9VUERBVEVfU1RBUlRFRCwgKHZhcmlhYmxlcywgb3V0X2lzX3VwZGF0ZWQpID0+IHtcbiAgICAgICAgICogICBjb25zb2xlLmxvZygnW+aJuemHj+abtOaWsF0g5byA5aeL5aSE55CG5Y+Y6YeP5pu05pawLi4uJyk7XG4gICAgICAgICAqXG4gICAgICAgICAqICAgLy8g5L+d5a2Y6ICB5YC8XG4gICAgICAgICAqICAgdmFsdWVfc25hcHNob3QgPSB2YXJpYWJsZXMuc3RhdF9kYXRhLuS4lueVjOe6v+WPmOabtOW6pjtcbiAgICAgICAgICogfSk7XG4gICAgICAgICAqXG4gICAgICAgICAqIC8vIDMuIOebkeWQrOaJuemHj+abtOaWsOe7k+adnyAtIOWujOaIkOWQjuWkhOeQhlxuICAgICAgICAgKiBldmVudE9uKE12dS5ldmVudHMuVkFSSUFCTEVfVVBEQVRFX0VOREVELCAodmFyaWFibGVzLCBvdXRfaXNfdXBkYXRlZCkgPT4ge1xuICAgICAgICAgKiAgIGNvbnNvbGUubG9nKCdb5om56YeP5pu05pawXSDlrozmiJDvvIzmmK/lkKbmnInmm7TmlrA6Jywgb3V0X2lzX3VwZGF0ZWQpO1xuICAgICAgICAgKiAgIC8v5L2/55So6ICB5YC86KaG55uW77yM56aB5q2ibGxtIOabtOaWsFxuICAgICAgICAgKiAgIE12dS5zZXRNdnVWYXJpYWJsZSh2YXJpYWJsZXMuc3RhdF9kYXRhLCAn5LiW55WM57q/5Y+Y5pu06YO9JywgdmFsdWVfc25hcHNob3QpO1xuICAgICAgICAgKiB9KTtcbiAgICAgICAgICpcbiAgICAgICAgICovXG4gICAgICAgIGV2ZW50czogdmFyaWFibGVfZXZlbnRzLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiDop6PmnpDljIXlkKvlj5jph4/mm7TmlrDlkb3ku6TnmoTmtojmga9cbiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgLSDljIXlkKsgXy5zZXQoKSDlkb3ku6TnmoTmtojmga/lrZfnrKbkuLJcbiAgICAgICAgICogQHBhcmFtIG9sZF9kYXRhIC0g5b2T5YmN55qEIE12dURhdGEg54q25oCBXG4gICAgICAgICAqIEByZXR1cm5zIOWmguaenOacieWPmOmHj+iiq+abtOaWsOWImei/lOWbnuaWsOeahCBNdnVEYXRh77yM5ZCm5YiZ6L+U5ZueIHVuZGVmaW5lZFxuICAgICAgICAgKiBAZXhhbXBsZVxuICAgICAgICAgKiBjb25zdCBuZXdEYXRhID0gYXdhaXQgTXZ1LnBhcnNlTWVzc2FnZShgXG4gICAgICAgICAqICAgXy5zZXQoJ3BsYXllci5oZWFsdGgnLCAxMDAsIDgwKTsvL+WPl+WIsOS8pOWus1xuICAgICAgICAgKiAgIF8uc2V0KCdwbGF5ZXIucG9zaXRpb24nLCBcIuWfjumVh1wiLCBcIuajruael1wiKTsvL+enu+WKqFxuICAgICAgICAgKiBgLCBjdXJyZW50RGF0YSk7XG4gICAgICAgICAqL1xuICAgICAgICBwYXJzZU1lc3NhZ2U6IGFzeW5jIGZ1bmN0aW9uIChcbiAgICAgICAgICAgIG1lc3NhZ2U6IHN0cmluZyxcbiAgICAgICAgICAgIG9sZF9kYXRhOiBNdnVEYXRhXG4gICAgICAgICk6IFByb21pc2U8TXZ1RGF0YSB8IHVuZGVmaW5lZD4ge1xuICAgICAgICAgICAgY29uc3QgdmFyaWFibGVEYXRhOiBWYXJpYWJsZURhdGEgPSB7XG4gICAgICAgICAgICAgICAgb2xkX3ZhcmlhYmxlczogb2xkX2RhdGEsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgYXdhaXQgaGFuZGxlVmFyaWFibGVzSW5DYWxsYmFjayhtZXNzYWdlLCB2YXJpYWJsZURhdGEpO1xuICAgICAgICAgICAgcmV0dXJuIHZhcmlhYmxlRGF0YS5uZXdfdmFyaWFibGVzO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiDojrflj5bmjIflrprkvZznlKjln5/nmoQgTXZ1RGF0YVxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIOWPmOmHj+mAiemhue+8jOaMh+WumuiOt+WPluWTquS4quS9nOeUqOWfn+eahOWPmOmHj++8iGNoYXQvbWVzc2FnZS9nbG9iYWznrYnvvIlcbiAgICAgICAgICogQHJldHVybnMgTXZ1RGF0YSDlr7nosaFcbiAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICogY29uc3QgY2hhdERhdGEgPSBNdnUuZ2V0TXZ1RGF0YSh7IHR5cGU6ICdjaGF0JyB9KTtcbiAgICAgICAgICogY29uc3QgbWVzc2FnZURhdGEgPSBNdnUuZ2V0TXZ1RGF0YSh7IHR5cGU6ICdtZXNzYWdlJywgbWVzc2FnZV9pZDogJ2xhdGVzdCcgfSk7XG4gICAgICAgICAqL1xuICAgICAgICBnZXRNdnVEYXRhOiBmdW5jdGlvbiAob3B0aW9uczogVmFyaWFibGVPcHRpb24pOiBNdnVEYXRhIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGdldFZhcmlhYmxlcyhvcHRpb25zKTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQgYXMgTXZ1RGF0YTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICog5pu/5o2i5oyH5a6a5L2c55So5Z+f55qEIE12dURhdGFcbiAgICAgICAgICogQHBhcmFtIG12dV9kYXRhIC0g6KaB6K6+572u55qE5pawIE12dURhdGFcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnMgLSDlj5jph4/pgInpobnvvIzmjIflrprmm7/mjaLlk6rkuKrkvZznlKjln5/nmoTlj5jph49cbiAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICogYXdhaXQgTXZ1LnJlcGxhY2VNdnVEYXRhKG5ld0RhdGEsIHsgdHlwZTogJ2NoYXQnIH0pO1xuICAgICAgICAgKi9cbiAgICAgICAgcmVwbGFjZU12dURhdGE6IGFzeW5jIGZ1bmN0aW9uIChtdnVfZGF0YTogTXZ1RGF0YSwgb3B0aW9uczogVmFyaWFibGVPcHRpb24pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgICAgIGF3YWl0IHJlcGxhY2VWYXJpYWJsZXMobXZ1X2RhdGEsIG9wdGlvbnMpO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiDojrflj5blvZPliY3mtojmga/nmoQgTXZ1RGF0YVxuICAgICAgICAgKiBAcmV0dXJucyDlvZPliY3mtojmga/nmoQgTXZ1RGF0YSDlr7nosaFcbiAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICogY29uc3QgY3VycmVudERhdGEgPSBNdnUuZ2V0Q3VycmVudE12dURhdGEoKTtcbiAgICAgICAgICovXG4gICAgICAgIGdldEN1cnJlbnRNdnVEYXRhOiBmdW5jdGlvbiAoKTogTXZ1RGF0YSB7XG4gICAgICAgICAgICBjb25zdCB2YXJpYWJsZXMgPSBnZXRWYXJpYWJsZXMoeyB0eXBlOiAnbWVzc2FnZScsIG1lc3NhZ2VfaWQ6IGdldEN1cnJlbnRNZXNzYWdlSWQoKSB9KTtcbiAgICAgICAgICAgIHJldHVybiB2YXJpYWJsZXMgYXMgTXZ1RGF0YTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICog5pu/5o2i5b2T5YmN5raI5oGv55qEIE12dURhdGFcbiAgICAgICAgICogQHBhcmFtIG12dV9kYXRhIC0g6KaB6K6+572u55qE5pawIE12dURhdGFcbiAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICogYXdhaXQgTXZ1LnJlcGxhY2VDdXJyZW50TXZ1RGF0YSh1cGRhdGVkRGF0YSk7XG4gICAgICAgICAqL1xuICAgICAgICByZXBsYWNlQ3VycmVudE12dURhdGE6IGFzeW5jIGZ1bmN0aW9uIChtdnVfZGF0YTogTXZ1RGF0YSk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICAgICAgYXdhaXQgcmVwbGFjZVZhcmlhYmxlcyhtdnVfZGF0YSwge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdtZXNzYWdlJyxcbiAgICAgICAgICAgICAgICBtZXNzYWdlX2lkOiBnZXRDdXJyZW50TWVzc2FnZUlkKCksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICog6YeN5paw5Yqg6L295Yid5aeL5Y+Y6YeP5pWw5o2uXG4gICAgICAgICAqIEBwYXJhbSBtdnVfZGF0YSAtIOimgemHjeaWsOWKoOi9veWIneWni+aVsOaNrueahCBNdnVEYXRhIOWvueixoVxuICAgICAgICAgKiBAcmV0dXJucyDmmK/lkKbliqDovb3miJDlip9cbiAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICogY29uc3Qgc3VjY2VzcyA9IGF3YWl0IE12dS5yZWxvYWRJbml0VmFyKG12dURhdGEpO1xuICAgICAgICAgKi9cbiAgICAgICAgcmVsb2FkSW5pdFZhcjogYXN5bmMgZnVuY3Rpb24gKG12dV9kYXRhOiBNdnVEYXRhKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgbG9hZEluaXRWYXJEYXRhKG12dV9kYXRhKTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICog6K6+572u5Y2V5Liq5Y+Y6YeP55qE5YC8XG4gICAgICAgICAqIEBwYXJhbSBtdnVfZGF0YSAtIOimgeabtOaWsOeahCBNdnVEYXRhIOWvueixoVxuICAgICAgICAgKiBAcGFyYW0gcGF0aCAtIOWPmOmHj+i3r+W+hO+8jOaUr+aMgeW1jOWll+i3r+W+hOWmgiBcInBsYXllci5oZWFsdGhcIiDmiJbmlbDnu4TntKLlvJUgXCJpdGVtc1swXVwiXG4gICAgICAgICAqIEBwYXJhbSBuZXdfdmFsdWUgLSDmlrDlgLxcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnMgLSDlj6/pgInlj4LmlbBcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnMucmVhc29uIC0g5pu05paw5Y6f5Zug77yM5Lya5pi+56S65ZyoIGRpc3BsYXlfZGF0YSDkuK1cbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnMuaXNfcmVjdXJzaXZlIC0g5piv5ZCm6Kem5Y+RIG1hZ192YXJpYWJsZV91cGRhdGVkIOS6i+S7tu+8jOm7mOiupCBmYWxzZVxuICAgICAgICAgKiBAcmV0dXJucyDmm7TmlrDmmK/lkKbmiJDlip9cbiAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICogLy8g566A5Y2V5pu05pawXG4gICAgICAgICAqIGF3YWl0IE12dS5zZXRNdnVWYXJpYWJsZShkYXRhLCAncGxheWVyLmhlYWx0aCcsIDgwKTtcbiAgICAgICAgICpcbiAgICAgICAgICogLy8g5bim5Y6f5Zug55qE5pu05pawXG4gICAgICAgICAqIGF3YWl0IE12dS5zZXRNdnVWYXJpYWJsZShkYXRhLCAncGxheWVyLmhlYWx0aCcsIDgwLCB7IHJlYXNvbjogJ+WPl+WIsOS8pOWusycgfSk7XG4gICAgICAgICAqXG4gICAgICAgICAqIC8vIOinpuWPkeS6i+S7tueahOabtOaWsFxuICAgICAgICAgKiBhd2FpdCBNdnUuc2V0TXZ1VmFyaWFibGUoZGF0YSwgJ3BsYXllci5sZXZlbCcsIDIsIHtcbiAgICAgICAgICogICByZWFzb246ICfljYfnuqcnLFxuICAgICAgICAgKiAgIGlzX3JlY3Vyc2l2ZTogdHJ1ZVxuICAgICAgICAgKiB9KTtcbiAgICAgICAgICpcbiAgICAgICAgICovXG4gICAgICAgIHNldE12dVZhcmlhYmxlOiBhc3luYyBmdW5jdGlvbiAoXG4gICAgICAgICAgICBtdnVfZGF0YTogTXZ1RGF0YSxcbiAgICAgICAgICAgIHBhdGg6IHN0cmluZyxcbiAgICAgICAgICAgIG5ld192YWx1ZTogYW55LFxuICAgICAgICAgICAgeyByZWFzb24gPSAnJywgaXNfcmVjdXJzaXZlID0gZmFsc2UgfTogeyByZWFzb24/OiBzdHJpbmc7IGlzX3JlY3Vyc2l2ZT86IGJvb2xlYW4gfSA9IHt9XG4gICAgICAgICk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHVwZGF0ZVZhcmlhYmxlKG12dV9kYXRhLnN0YXRfZGF0YSwgcGF0aCwgbmV3X3ZhbHVlLCByZWFzb24sIGlzX3JlY3Vyc2l2ZSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIOiOt+WPluWPmOmHj+eahOWAvFxuICAgICAgICAgKiBAcGFyYW0gbXZ1X2RhdGEgLSBNdnVEYXRhIOWvueixoVxuICAgICAgICAgKiBAcGFyYW0gcGF0aCAtIOWPmOmHj+i3r+W+hO+8jOaUr+aMgeW1jOWll+i3r+W+hFxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIOWPr+mAieWPguaVsFxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9ucy5jYXRlZ29yeSAtIOS7juWTquS4quaVsOaNruexu+WIq+iOt+WPlu+8midzdGF0Jyjpu5jorqQpLydkaXNwbGF5Jy8nZGVsdGEnXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25zLmRlZmF1bHRfdmFsdWUgLSDlvZPot6/lvoTkuI3lrZjlnKjml7bov5Tlm57nmoTpu5jorqTlgLxcbiAgICAgICAgICogQHJldHVybnMg5Y+Y6YeP5YC844CC5aaC5p6c5pivIFZhbHVlV2l0aERlc2NyaXB0aW9uIOexu+Wei++8jOi/lOWbnuesrOS4gOS4quWFg+e0oO+8iOWunumZheWAvO+8iVxuICAgICAgICAgKiBAZXhhbXBsZVxuICAgICAgICAgKiAvLyDojrflj5Ygc3RhdF9kYXRhIOS4reeahOWAvFxuICAgICAgICAgKiBjb25zdCBoZWFsdGggPSBNdnUuZ2V0TXZ1VmFyaWFibGUoZGF0YSwgJ3BsYXllci5oZWFsdGgnKTtcbiAgICAgICAgICpcbiAgICAgICAgICogLy8g6I635Y+WIGRpc3BsYXlfZGF0YSDkuK3nmoTmmL7npLrlgLxcbiAgICAgICAgICogY29uc3QgaGVhbHRoRGlzcGxheSA9IE12dS5nZXRNdnVWYXJpYWJsZShkYXRhLCAncGxheWVyLmhlYWx0aCcsIHtcbiAgICAgICAgICogICBjYXRlZ29yeTogJ2Rpc3BsYXknXG4gICAgICAgICAqIH0pO1xuICAgICAgICAgKlxuICAgICAgICAgKiAvLyDluKbpu5jorqTlgLxcbiAgICAgICAgICogY29uc3Qgc2NvcmUgPSBNdnUuZ2V0TXZ1VmFyaWFibGUoZGF0YSwgJ3BsYXllci5zY29yZScsIHtcbiAgICAgICAgICogICBkZWZhdWx0X3ZhbHVlOiAwXG4gICAgICAgICAqIH0pO1xuICAgICAgICAgKi9cbiAgICAgICAgZ2V0TXZ1VmFyaWFibGU6IGZ1bmN0aW9uIChcbiAgICAgICAgICAgIG12dV9kYXRhOiBNdnVEYXRhLFxuICAgICAgICAgICAgcGF0aDogc3RyaW5nLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNhdGVnb3J5ID0gJ3N0YXQnLFxuICAgICAgICAgICAgICAgIGRlZmF1bHRfdmFsdWUgPSB1bmRlZmluZWQsXG4gICAgICAgICAgICB9OiB7IGNhdGVnb3J5PzogJ3N0YXQnIHwgJ2Rpc3BsYXknIHwgJ2RlbHRhJzsgZGVmYXVsdF92YWx1ZT86IGFueSB9ID0ge31cbiAgICAgICAgKTogYW55IHtcbiAgICAgICAgICAgIGxldCBkYXRhOiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuICAgICAgICAgICAgc3dpdGNoIChjYXRlZ29yeSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ3N0YXQnOlxuICAgICAgICAgICAgICAgICAgICBkYXRhID0gbXZ1X2RhdGEuc3RhdF9kYXRhO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdkaXNwbGF5JzpcbiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IG12dV9kYXRhLmRpc3BsYXlfZGF0YSE7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2RlbHRhJzpcbiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IG12dV9kYXRhLmRlbHRhX2RhdGEhO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBfLmdldChkYXRhLCBwYXRoLCBkZWZhdWx0X3ZhbHVlKTtcblxuICAgICAgICAgICAgLyog5aaC5p6c5pivIFZXRO+8jOWPluesrOS4gOS4quWFg+e0oCAqL1xuICAgICAgICAgICAgaWYgKGlzVmFsdWVXaXRoRGVzY3JpcHRpb24odmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlWzBdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKiDlkKbliJnnm7TmjqXov5Tlm57lgLzmnKzouqsgKi9cbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICog6I635Y+W5oyH5a6a57G75Yir55qE5a6M5pW05pWw5o2u6K6w5b2VXG4gICAgICAgICAqIEBwYXJhbSBtdnVfZGF0YSAtIE12dURhdGEg5a+56LGhXG4gICAgICAgICAqIEBwYXJhbSBjYXRlZ29yeSAtIOaVsOaNruexu+WIq++8midzdGF0Jy8nZGlzcGxheScvJ2RlbHRhJ1xuICAgICAgICAgKiBAcmV0dXJucyDlr7nlupTnsbvliKvnmoTlrozmlbTmlbDmja7orrDlvZXlr7nosaFcbiAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICogLy8g6I635Y+W5omA5pyJ54q25oCB5pWw5o2uXG4gICAgICAgICAqIGNvbnN0IGFsbFN0YXREYXRhID0gTXZ1LmdldFJlY29yZEZyb21NdnVEYXRhKGRhdGEsICdzdGF0Jyk7XG4gICAgICAgICAqXG4gICAgICAgICAqIC8vIOiOt+WPluaJgOacieaYvuekuuaVsOaNrlxuICAgICAgICAgKiBjb25zdCBhbGxEaXNwbGF5RGF0YSA9IE12dS5nZXRSZWNvcmRGcm9tTXZ1RGF0YShkYXRhLCAnZGlzcGxheScpO1xuICAgICAgICAgKlxuICAgICAgICAgKiAvLyDojrflj5bmiYDmnInlop7ph4/mlbDmja5cbiAgICAgICAgICogY29uc3QgYWxsRGVsdGFEYXRhID0gTXZ1LmdldFJlY29yZEZyb21NdnVEYXRhKGRhdGEsICdkZWx0YScpO1xuICAgICAgICAgKlxuICAgICAgICAgKiBAbm90ZSDpgJrluLjnlKjkuo4gTExNIOWHhuWkhyBmb3JlYWNoIOaVsOaNruaXtuS9v+eUqFxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0UmVjb3JkRnJvbU12dURhdGE6IGZ1bmN0aW9uIChcbiAgICAgICAgICAgIG12dV9kYXRhOiBNdnVEYXRhLFxuICAgICAgICAgICAgY2F0ZWdvcnk6ICdzdGF0JyB8ICdkaXNwbGF5JyB8ICdkZWx0YSdcbiAgICAgICAgKTogUmVjb3JkPHN0cmluZywgYW55PiB7XG4gICAgICAgICAgICByZXR1cm4gZXh0cmFjdFJlY29yZChjYXRlZ29yeSwgbXZ1X2RhdGEpO1xuICAgICAgICB9LFxuICAgIH07XG4gICAgcmV0dXJuIG12dTtcbn1cblxuZXhwb3J0IHR5cGUgTVZVID0gUmV0dXJuVHlwZTx0eXBlb2YgY3JlYXRlTVZVPjtcblxuZXhwb3J0IHR5cGUgTXZ1ID0gTVZVO1xuXG5leHBvcnQgZnVuY3Rpb24gZXhwb3J0R2xvYmFscygpIHtcbiAgICBjb25zdCBtdnUgPSBjcmVhdGVNVlUoKTtcbiAgICBfLnNldCh3aW5kb3csICdNdnUnLCBtdnUpO1xuICAgIF8uc2V0KHdpbmRvdy5wYXJlbnQsICdNdnUnLCBtdnUpO1xuICAgIGV2ZW50RW1pdCgnZ2xvYmFsX012dV9pbml0aWFsaXplZCcpO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/export_globals.ts\n\n}");
  },
  "./src/function.ts": 
  /*!*************************!*\
  !*** ./src/function.ts ***!
  \*************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   applyTemplate: () => (/* binding */ applyTemplate),\n/* harmony export */   extractCommands: () => (/* binding */ extractCommands),\n/* harmony export */   getLastValidVariable: () => (/* binding */ getLastValidVariable),\n/* harmony export */   handleVariablesInCallback: () => (/* binding */ handleVariablesInCallback),\n/* harmony export */   handleVariablesInMessage: () => (/* binding */ handleVariablesInMessage),\n/* harmony export */   parseCommandValue: () => (/* binding */ parseCommandValue),\n/* harmony export */   parseParameters: () => (/* binding */ parseParameters),\n/* harmony export */   trimQuotesAndBackslashes: () => (/* binding */ trimQuotesAndBackslashes),\n/* harmony export */   updateVariable: () => (/* binding */ updateVariable),\n/* harmony export */   updateVariables: () => (/* binding */ updateVariables)\n/* harmony export */ });\n/* harmony import */ var _variable_def__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/variable_def */ \"./src/variable_def.ts\");\n/* harmony import */ var mathjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! mathjs */ \"mathjs\");\n/* harmony import */ var _schema__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/schema */ \"./src/schema.ts\");\n/* harmony import */ var _settings__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/settings */ \"./src/settings.ts\");\n\n\n\n\nfunction trimQuotesAndBackslashes(str) {\n    if (!_.isString(str))\n        return str;\n    // Regular expression to match backslashes and quotes (including backticks) at the beginning and end\n    return str.replace(/^[\\\\\"'` ]*(.*?)[\\\\\"'` ]*$/, '$1');\n}\n/**\n * 应用模板到值上，值的属性优先级高于模板\n * @param value 要应用模板的值\n * @param template 模板 (TemplateType | undefined)\n * @param strict_array_cast 是否开启严格模式，开启后不允许 primitive type -> [primitive type] 的隐式转换\n * @param array_merge_concat 指明数组的 合并 行为是指 覆盖 还是 拼接，默认拼接。\n * @returns 合并后的值\n */\nfunction applyTemplate(value, template, strict_array_cast = false, array_merge_concat = true) {\n    // 如果没有模板，直接返回原值\n    if (!template) {\n        return value;\n    }\n    // 检查类型是否匹配\n    const value_is_object = _.isObject(value) && !Array.isArray(value) && !_.isDate(value);\n    const value_is_array = Array.isArray(value);\n    const template_is_array = Array.isArray(template);\n    if (value_is_object && !template_is_array) {\n        // value 是对象，template 是 StatData（对象）\n        // 先应用模板，再应用值，确保值的优先级更高\n        return _.merge({}, template, value);\n    }\n    else if (value_is_array && template_is_array) {\n        // 都是数组，进行合并\n        if (array_merge_concat)\n            return _.concat(value, template);\n        return _.merge([], template, value);\n    }\n    else if (((value_is_object || value_is_array) && template_is_array !== value_is_array) ||\n        (!value_is_object && !value_is_array && _.isObject(template) && !Array.isArray(template))) {\n        // 类型不匹配\n        console.error(`Template type mismatch: template is ${template_is_array ? 'array' : 'object'}, but value is ${value_is_array ? 'array' : 'object'}. Skipping template merge.`);\n        return value;\n    }\n    else if (!value_is_object && !value_is_array && template_is_array) {\n        // 特殊情况：值是原始类型（字面量），模板是数组\n        // 当作 [value] 进行数组的合并\n        if (strict_array_cast)\n            //严格模式不提供 primitive type -> [primitive type] 的转换\n            return value;\n        if (array_merge_concat)\n            return _.concat([value], template);\n        return _.merge([], template, [value]);\n    }\n    else {\n        // 其他情况：值是原始类型，模板不是数组，不应用模板\n        return value;\n    }\n}\n// 一个更安全的、用于解析命令中值的辅助函数\n// 它会尝试将字符串解析为 JSON, 布尔值, null, 数字, 或数学表达式\nfunction parseCommandValue(valStr) {\n    if (typeof valStr !== 'string')\n        return valStr;\n    const trimmed = valStr.trim();\n    // 检查布尔值/null/undefined\n    if (trimmed === 'true')\n        return true;\n    if (trimmed === 'false')\n        return false;\n    if (trimmed === 'null')\n        return null;\n    if (trimmed === 'undefined')\n        return undefined;\n    try {\n        // 如果字符串能被 JSON.parse 解析，说明它是一个标准格式，直接返回解析结果\n        return JSON.parse(trimmed);\n    }\n    catch (e) {\n        // Handle JavaScript array or object literals\n        if ((trimmed.startsWith('{') && trimmed.endsWith('}')) ||\n            (trimmed.startsWith('[') && trimmed.endsWith(']'))) {\n            try {\n                // Safely evaluate literals using a function constructor\n                const result = new Function(`return ${trimmed};`)();\n                if (_.isObject(result) || Array.isArray(result)) {\n                    return result;\n                }\n            }\n            catch (err) {\n                // 如果解析失败，说明它可能是一个未加引号的字符串或数学表达式，继续往下走\n            }\n        }\n    }\n    // 如果代码走到这里，说明 trimmed 是一个未加引号的字符串，例如：\n    // 'hello_world', '10 + 2', 'sqrt(16)'\n    try {\n        // 创建一个 scope 对象，将多种数学库/对象注入到 mathjs 的执行环境中，\n        // 以便统一处理不同风格的数学表达式。\n        const scope = {\n            // 支持 JavaScript 标准的 Math 对象 (e.g., Math.sqrt(), Math.PI)\n            Math: Math,\n            // 支持 Python 风格的 math 库用法 (e.g., math.sqrt(), math.pi)，\n            // 这在 LLM 生成的代码中很常见。\n            // 'math' 是我们导入的 mathjs 库本身。\n            math: mathjs__WEBPACK_IMPORTED_MODULE_1__,\n        };\n        // 尝试使用 mathjs 进行数学求值\n        // math.evaluate 对于无法识别为表达式的纯字符串会抛出错误\n        const result = mathjs__WEBPACK_IMPORTED_MODULE_1__.evaluate(trimmed, scope);\n        // 如果结果是 mathjs 的复数或矩阵对象，则将其转换为字符串表示形式\n        if (mathjs__WEBPACK_IMPORTED_MODULE_1__.isComplex(result) || mathjs__WEBPACK_IMPORTED_MODULE_1__.isMatrix(result)) {\n            return result.toString();\n        }\n        // 避免将单个单词的字符串（mathjs可能将其识别为符号）作为 undefined 返回\n        if (result === undefined && !/^[a-zA-Z_]+$/.test(trimmed)) {\n            return trimmed; // 如果是 undefined 但不是一个简单的符号名，则可能是解析错误\n        }\n        if (result !== undefined) {\n            // 使用 toPrecision 来处理浮点数精度造成的误差问题\n            return parseFloat(result.toPrecision(12));\n        }\n    }\n    catch (err) {\n        // 如果 math.evaluate 失败，说明它不是一个有效的表达式，\n        // 那么它就是一个普通的未加引号的字符串。\n    }\n    // 实验性功能，暂不启用\n    // 尝试将字符串解析为日期对象，用于传入_.add直接以毫秒数更新时间，如 `_.add('当前时间', 10 * 60 * 1000);`\n    // 此检查用于识别日期字符串（例如 \"2024-01-01T12:00:00Z\"）\n    // `isNaN(Number(trimmed))`确保纯数字字符串（如 \"12345\"）不会被错误地解析为日期\n    /*\n    if (isNaN(Number(trimmed))) {\n        const potentialDate = new Date(trimQuotesAndBackslashes(trimmed));\n        if (!isNaN(potentialDate.getTime())) {\n            return potentialDate;\n        }\n    }\n    */\n    try {\n        // 尝试 YAML.parse\n        return YAML.parse(trimmed);\n    }\n    catch (e) {\n        /* empty */\n    }\n    // 最终，返回这个去除了首尾引号的字符串\n    return trimQuotesAndBackslashes(valStr);\n}\n/**\n * 从输入文本中提取所有 _.set() 调用\n *\n * 问题背景：\n * 原本使用正则表达式 /_\\.set\\(([\\s\\S]*?)\\);/ 来匹配，但这种非贪婪匹配会在遇到\n * 嵌套的 ); 时提前结束。例如：\n * _.set('path', [\"text with _.set('inner',null);//comment\"], []);\n * 会在 \"comment\") 处错误地结束匹配\n *\n * 解决方案：\n * 使用状态机方法，通过计数括号配对来准确找到 _.set() 调用的结束位置\n */\n// 将 extractSetCommands 扩展为 extractCommands 以支持多种命令\nfunction extractCommands(inputText) {\n    const results = [];\n    let i = 0;\n    while (i < inputText.length) {\n        // 循环处理整个输入文本，直到找不到更多命令\n        // 使用正则匹配 _.set(、_.assign(、_.remove( 或 _.add(，重构后支持多种命令\n        const setMatch = inputText\n            .substring(i)\n            .match(/_\\.(set|insert|assign|remove|unset|delete|add)\\(/);\n        if (!setMatch || setMatch.index === undefined) {\n            // 没有找到匹配的命令，退出循环，防止无限循环\n            break;\n        }\n        // 提取命令类型（set、assign、remove 或 add），并计算命令的起始位置\n        const commandType = setMatch[1];\n        const setStart = i + setMatch.index;\n        // 计算开括号位置，用于后续提取参数\n        const openParen = setStart + setMatch[0].length;\n        // 使用 findMatchingCloseParen 查找匹配的闭括号，解决原正则匹配在嵌套结构（如 _.set('path', ['inner);'])）中提前结束的问题\n        const closeParen = findMatchingCloseParen(inputText, openParen);\n        if (closeParen === -1) {\n            // 找不到闭括号，说明命令格式错误\n            // 跳过此无效命令，并从开括号后继续搜索，以防无限循环\n            i = openParen; // 从开括号后继续搜索\n            continue; // 继续 while 循环，寻找下一个命令\n        }\n        // 检查闭括号后是否紧跟分号，确保命令语法完整，防止误解析字符串中的类似结构\n        let endPos = closeParen + 1;\n        if (endPos >= inputText.length || inputText[endPos] !== ';') {\n            // 没有分号，命令无效，跳到闭括号后继续搜索，避免误解析\n            i = closeParen + 1;\n            continue;\n        }\n        endPos++; // 包含分号，更新命令结束位置\n        // 提取可能的注释（// 开头），用于记录命令的 reason\n        let comment = '';\n        const potentialComment = inputText.substring(endPos).match(/^\\s*\\/\\/(.*)/);\n        if (potentialComment) {\n            // 提取注释内容并去除首尾空格，更新结束位置\n            comment = potentialComment[1].trim();\n            endPos += potentialComment[0].length;\n        }\n        // 提取完整命令字符串，用于返回结果中的 fullMatch 字段，便于追踪原始内容\n        const fullMatch = inputText.substring(setStart, endPos);\n        // 提取参数字符串，位于开括号和闭括号之间\n        const paramsString = inputText.substring(openParen, closeParen);\n        // 使用 parseParameters 解析参数，支持嵌套结构（如数组、对象）\n        const params = parseParameters(paramsString);\n        // 验证命令有效性，根据命令类型检查参数数量，防止无效命令进入结果\n        let isValid = false;\n        if (commandType === 'set' && params.length >= 2)\n            isValid = true; // _.set 至少需要路径和值\n        else if (commandType === 'assign' && params.length >= 2)\n            isValid = true; // _.assign 支持两种参数格式\n        else if (commandType === 'insert' && params.length >= 2)\n            isValid = true; // _.insert 支持两种参数格式\n        else if (commandType === 'remove' && params.length >= 1)\n            isValid = true; // _.remove 至少需要路径\n        else if (commandType === 'unset' && params.length >= 1)\n            isValid = true; // _.unset 至少需要路径\n        else if (commandType === 'delete' && params.length >= 1)\n            isValid = true; // _.delete 至少需要路径\n        else if (commandType === 'add' && /*params.length === 1 || */ params.length === 2)\n            isValid = true; // _.add 需要1个或2个参数\n        if (isValid) {\n            // 命令有效，添加到结果列表，包含命令类型、完整匹配、参数和注释\n            results.push({ command: commandType, fullMatch, args: params, reason: comment });\n        }\n        // 更新搜索索引到命令末尾，继续查找下一个命令\n        i = endPos;\n    }\n    // 返回所有解析出的有效命令\n    return results;\n}\n/**\n * 辅助函数：找到匹配的闭括号\n *\n * 算法说明：\n * 1. 使用括号计数器，遇到 ( 加1，遇到 ) 减1\n * 2. 当计数器归零时，找到了匹配的闭括号\n * 3. 重要：忽略引号内的括号，避免字符串内容干扰匹配\n *\n * @param str 要搜索的字符串\n * @param startPos 开始括号的位置\n * @returns 匹配的闭括号位置，如果找不到返回 -1\n */\nfunction findMatchingCloseParen(str, startPos) {\n    let parenCount = 1; // 从1开始，因为已经有一个开括号\n    let inQuote = false;\n    let quoteChar = '';\n    for (let i = startPos; i < str.length; i++) {\n        const char = str[i];\n        const prevChar = i > 0 ? str[i - 1] : '';\n        // 处理引号状态\n        // 支持三种引号：双引号、单引号和反引号（模板字符串）\n        // 注意：需要检查前一个字符不是反斜杠，以正确处理转义的引号\n        if ((char === '\"' || char === \"'\" || char === '`') && prevChar !== '\\\\') {\n            if (!inQuote) {\n                inQuote = true;\n                quoteChar = char;\n            }\n            else if (char === quoteChar) {\n                inQuote = false;\n            }\n        }\n        // 只在不在引号内时计算括号\n        // 这确保了像 \"text with )\" 这样的字符串不会影响括号匹配\n        if (!inQuote) {\n            if (char === '(') {\n                parenCount++;\n            }\n            else if (char === ')') {\n                parenCount--;\n                if (parenCount === 0) {\n                    return i;\n                }\n            }\n        }\n    }\n    return -1; // 没有找到匹配的闭括号\n}\n// 解析参数字符串，处理嵌套结构\n// 增加了对圆括号的层级计数。\nfunction parseParameters(paramsString) {\n    const params = [];\n    let currentParam = '';\n    let inQuote = false;\n    let quoteChar = '';\n    let bracketCount = 0;\n    let braceCount = 0;\n    let parenCount = 0;\n    for (let i = 0; i < paramsString.length; i++) {\n        const char = paramsString[i];\n        // 处理引号（包括反引号）\n        if ((char === '\"' || char === \"'\" || char === '`') &&\n            (i === 0 || paramsString[i - 1] !== '\\\\')) {\n            if (!inQuote) {\n                inQuote = true;\n                quoteChar = char;\n            }\n            else if (char === quoteChar) {\n                inQuote = false;\n            }\n        }\n        if (!inQuote) {\n            // 处理圆括号 (函数调用、数学运算等)\n            if (char === '(')\n                parenCount++;\n            if (char === ')')\n                parenCount--;\n            // 处理方括号 (数组)\n            if (char === '[')\n                bracketCount++;\n            if (char === ']')\n                bracketCount--;\n            // 处理花括号 (对象)\n            if (char === '{')\n                braceCount++;\n            if (char === '}')\n                braceCount--;\n        }\n        // 处理参数分隔符\n        // 现在只有当所有括号都匹配闭合时，逗号才被视为分隔符\n        if (char === ',' &&\n            !inQuote &&\n            parenCount === 0 &&\n            bracketCount === 0 &&\n            braceCount === 0) {\n            params.push(currentParam.trim());\n            currentParam = '';\n            continue;\n        }\n        currentParam += char;\n    }\n    // 添加最后一个参数\n    if (currentParam.trim()) {\n        params.push(currentParam.trim());\n    }\n    return params;\n}\nasync function getLastValidVariable(message_id) {\n    return (structuredClone(_(SillyTavern.chat)\n        .slice(0, message_id + 1)\n        .map(chat_message => _.get(chat_message, ['variables', chat_message.swipe_id ?? 0]))\n        .findLast(variables => _.has(variables, 'stat_data'))) ?? getVariables());\n}\nfunction pathFix(path) {\n    const segments = [];\n    let currentSegment = '';\n    let inQuotes = false;\n    let quoteChar = '';\n    for (let i = 0; i < path.length; i++) {\n        const char = path[i];\n        // Handle quotes\n        if ((char === '\"' || char === \"'\") && (i === 0 || path[i - 1] !== '\\\\')) {\n            if (!inQuotes) {\n                inQuotes = true;\n                quoteChar = char;\n            }\n            else if (char === quoteChar) {\n                inQuotes = false;\n            }\n            else {\n                currentSegment += char;\n            }\n        }\n        else if (char === '.' && !inQuotes) {\n            segments.push(currentSegment);\n            currentSegment = '';\n        }\n        else {\n            currentSegment += char;\n        }\n    }\n    if (currentSegment) {\n        segments.push(currentSegment);\n    }\n    return segments.join('.');\n}\n/**\n * MVU 风格的变量更新操作，同时会更新 display_data/delta_data\n * @param stat_data 当前的变量状态，来源应当是 mag_variable_updated 回调中提供的 stat_data。其他来源则不会修改 display_data 等。\n * @param path 要更改的变量路径\n * @param new_value 新值\n * @param reason 修改原因（可选，默认为空）\n * @param is_recursive 此次修改是否允许触发 mag_variable_updated 回调（默认不允许）\n */\nasync function updateVariable(stat_data, path, new_value, reason = '', is_recursive = false) {\n    const display_data = stat_data.$internal?.display_data;\n    const delta_data = stat_data.$internal?.delta_data;\n    if (_.has(stat_data, path)) {\n        const currentValue = _.get(stat_data, path);\n        if (Array.isArray(currentValue) && currentValue.length === 2) {\n            //VWD 处理\n            const oldValue = _.cloneDeep(currentValue[0]);\n            currentValue[0] = new_value;\n            _.set(stat_data, path, currentValue);\n            const reason_str = reason ? `(${reason})` : '';\n            const display_str = `${trimQuotesAndBackslashes(JSON.stringify(oldValue))}->${trimQuotesAndBackslashes(JSON.stringify(new_value))} ${reason_str}`;\n            if (display_data)\n                _.set(display_data, path, display_str);\n            if (delta_data)\n                _.set(delta_data, path, display_str);\n            console.info(`Set '${path}' to '${trimQuotesAndBackslashes(JSON.stringify(new_value))}' ${reason_str}`);\n            if (is_recursive)\n                await eventEmit(_variable_def__WEBPACK_IMPORTED_MODULE_0__.variable_events.SINGLE_VARIABLE_UPDATED, stat_data, path, oldValue, new_value);\n            return true;\n        }\n        else {\n            const oldValue = _.cloneDeep(currentValue);\n            _.set(stat_data, path, new_value);\n            const reason_str = reason ? `(${reason})` : '';\n            const stringNewValue = trimQuotesAndBackslashes(JSON.stringify(new_value));\n            const display_str = `${trimQuotesAndBackslashes(JSON.stringify(oldValue))}->${stringNewValue} ${reason_str}`;\n            if (display_data)\n                _.set(display_data, path, display_str);\n            if (delta_data)\n                _.set(delta_data, path, display_str);\n            console.info(`Set '${path}' to '${stringNewValue}' ${reason_str}`);\n            if (is_recursive)\n                await eventEmit(_variable_def__WEBPACK_IMPORTED_MODULE_0__.variable_events.SINGLE_VARIABLE_UPDATED, stat_data, path, oldValue, new_value);\n            return true;\n        }\n    }\n    return false;\n}\n// 重构 updateVariables 以处理更多命令\nasync function updateVariables(current_message_content, variables) {\n    const out_is_modifed = false;\n    // 深拷贝变量对象，生成状态快照，用于记录显示数据\n    const out_status = _.cloneDeep(variables);\n    // 初始化增量状态对象，记录变化详情\n    const delta_status = { stat_data: {} };\n    // 重构新增：统一处理宏替换，确保命令中的宏（如 ${variable}）被替换，提升一致性\n    const processed_message_content = substitudeMacros(current_message_content);\n    // 使用重构后的 extractCommands 提取所有命令\n    const commands = extractCommands(processed_message_content);\n    // 触发变量更新开始事件，通知外部系统\n    variables.stat_data.$internal = {\n        display_data: out_status.stat_data,\n        delta_data: delta_status.stat_data || {},\n    };\n    await eventEmit(_variable_def__WEBPACK_IMPORTED_MODULE_0__.variable_events.VARIABLE_UPDATE_STARTED, variables);\n    let variable_modified = false;\n    let error_info;\n    let current_command;\n    const outError = function (message) {\n        console.warn(message);\n        error_info = {\n            error_last: message,\n            error_command: current_command,\n        };\n    };\n    const schema = variables.schema; // 获取 schema，可能为 undefined\n    const strict_template = schema?.strictTemplate ?? false;\n    const concat_template_array = schema?.concatTemplateArray ?? true;\n    const strict_set = schema?.strictSet ?? false;\n    for (const command of commands) {\n        // 遍历所有命令，逐一处理\n        // 修正路径格式，去除首尾引号和反斜杠，确保路径有效\n        const path = pathFix(trimQuotesAndBackslashes(command.args[0]));\n        // 生成原因字符串，用于日志和显示\n        const reason_str = command.reason ? `(${command.reason})` : '';\n        let display_str = ''; // 初始化显示字符串，记录操作详情\n        current_command = command;\n        switch (command.command // 根据命令类型执行不同操作\n        ) {\n            case 'set': {\n                // _.has 检查，确保路径存在\n                if (!_.has(variables.stat_data, path)) {\n                    outError(`Path '${path}' does not exist in stat_data, skipping set command ${reason_str}`);\n                    continue;\n                }\n                // 获取路径上的旧值，可能为 undefined（路径不存在）\n                let oldValue = _.get(variables.stat_data, path);\n                // 支持两种格式：_.set(path, newValue) 或 _.set(path, oldValue, newValue)\n                const newValueStr = command.args.length >= 3 ? command.args[2] : command.args[1];\n                // 解析新值，支持字符串、数字、布尔值、JSON 对象等\n                let newValue = parseCommandValue(newValueStr);\n                // 在写入前，将 Date 对象序列化为 ISO 字符串\n                if (newValue instanceof Date) {\n                    newValue = newValue.toISOString();\n                }\n                let isPathVWD = false;\n                if (!strict_set &&\n                    Array.isArray(oldValue) &&\n                    oldValue.length === 2 &&\n                    typeof oldValue[1] === 'string' &&\n                    !Array.isArray(oldValue[0])) {\n                    // 处理 ValueWithDescription<T> 类型，更新数组第一个元素\n                    // 仅当旧值为数字且新值不为 null 时，才强制转换为数字\n                    // 这允许将数字字段设置为 null (例如角色死亡后好感度变为 null)\n                    const oldValueCopy = _.cloneDeep(oldValue[0]);\n                    oldValue[0] =\n                        typeof oldValue[0] === 'number' && newValue !== null\n                            ? Number(newValue)\n                            : newValue;\n                    oldValue = oldValueCopy;\n                    isPathVWD = true;\n                }\n                else if (typeof oldValue === 'number' && newValue !== null) {\n                    _.set(variables.stat_data, path, Number(newValue));\n                }\n                else {\n                    // 其他情况直接设置新值，支持任意类型\n                    _.set(variables.stat_data, path, newValue);\n                }\n                // 获取最终设置的新值，用于日志和事件\n                let finalNewValue = _.get(variables.stat_data, path);\n                (0,_variable_def__WEBPACK_IMPORTED_MODULE_0__.assertVWD)(isPathVWD, finalNewValue);\n                if (isPathVWD) {\n                    finalNewValue = finalNewValue[0];\n                }\n                // 检查是否为 ValueWithDescription 类型，以优化显示\n                const isStrict = !strict_set;\n                if (isStrict &&\n                    (0,_variable_def__WEBPACK_IMPORTED_MODULE_0__.isValueWithDescriptionStatData)(oldValue) &&\n                    Array.isArray(finalNewValue)) {\n                    // 如果是 ValueWithDescription，只显示值的变化\n                    display_str = `${trimQuotesAndBackslashes(JSON.stringify(oldValue[0]))}->${trimQuotesAndBackslashes(JSON.stringify(finalNewValue[0]))} ${reason_str}`;\n                }\n                else {\n                    // 否则，按常规显示\n                    display_str = `${trimQuotesAndBackslashes(JSON.stringify(oldValue))}->${trimQuotesAndBackslashes(JSON.stringify(finalNewValue))} ${reason_str}`;\n                }\n                variable_modified = true; // 标记变量已修改\n                // 记录操作日志，便于调试\n                console.info(`Set '${path}' to '${JSON.stringify(finalNewValue)}' ${reason_str}`);\n                // 触发单变量更新事件，通知外部系统\n                await eventEmit(_variable_def__WEBPACK_IMPORTED_MODULE_0__.variable_events.SINGLE_VARIABLE_UPDATED, variables.stat_data, path, oldValue, finalNewValue);\n                break;\n            }\n            case 'insert':\n            case 'assign': {\n                // 检查目标路径是否指向一个集合（数组或对象）\n                // 如果路径已存在且其值为原始类型（字符串、数字等），则跳过此命令，以防止结构污染\n                const targetPath = path;\n                // 统一获取目标值和目标Schema，优雅地处理根路径\n                const existingValue = targetPath === ''\n                    ? variables.stat_data\n                    : _.get(variables.stat_data, targetPath);\n                const targetSchema = (0,_schema__WEBPACK_IMPORTED_MODULE_2__.getSchemaForPath)(schema, targetPath);\n                // 验证1：目标是否为原始类型？如果是，则无法插入。\n                if (existingValue !== null &&\n                    !Array.isArray(existingValue) &&\n                    !_.isObject(existingValue)) {\n                    outError(`Cannot assign into path '${targetPath}' because it holds a primitive value (${typeof existingValue}). Operation skipped. ${reason_str}`);\n                    continue;\n                }\n                // 验证2：Schema 规则\n                if (targetSchema) {\n                    if (targetSchema.type === 'object' && targetSchema.extensible === false) {\n                        if (command.args.length === 2) {\n                            // 合并\n                            outError(`SCHEMA VIOLATION: Cannot merge data into non-extensible object at path '${targetPath}'. ${reason_str}`);\n                            continue;\n                        }\n                        if (command.args.length >= 3) {\n                            // 插入键\n                            const newKey = String(parseCommandValue(command.args[1]));\n                            if (!_.has(targetSchema.properties, newKey)) {\n                                outError(`SCHEMA VIOLATION: Cannot assign new key '${newKey}' into non-extensible object at path '${targetPath}'. ${reason_str}`);\n                                continue;\n                            }\n                        }\n                    }\n                    else if (targetSchema.type === 'array' &&\n                        (targetSchema.extensible === false || targetSchema.extensible === undefined)) {\n                        outError(`SCHEMA VIOLATION: Cannot assign elements into non-extensible array at path '${targetPath}'. ${reason_str}`);\n                        continue;\n                    }\n                }\n                else if (\n                // 增加 targetPath !== '' 条件，防止对根路径进行父路径检查\n                targetPath !== '' &&\n                    !_.get(variables.stat_data, _.toPath(targetPath).slice(0, -1).join('.'))) {\n                    // 验证3：如果要插入到新路径，确保其父路径存在且可扩展\n                    outError(`Cannot assign into non-existent path '${targetPath}' without an extensible parent. ${reason_str}`);\n                    continue;\n                }\n                // --- 所有验证通过，现在可以安全执行 ---\n                // 深拷贝旧值，防止直接修改影响后续比较\n                const oldValue = _.cloneDeep(_.get(variables.stat_data, path));\n                let successful = false; // 标记插入是否成功\n                if (command.args.length === 2) {\n                    // _.assign('path.to.array', value)\n                    // 解析插入值，支持复杂类型\n                    let valueToAssign = parseCommandValue(command.args[1]);\n                    // 在写入前，将 Date 对象（或数组中的Date）序列化\n                    if (valueToAssign instanceof Date) {\n                        valueToAssign = valueToAssign.toISOString();\n                    }\n                    else if (Array.isArray(valueToAssign)) {\n                        valueToAssign = valueToAssign.map(item => item instanceof Date ? item.toISOString() : item);\n                    }\n                    // 获取目标集合，可能为数组或对象\n                    let collection = targetPath === '' ? variables.stat_data : _.get(variables.stat_data, path);\n                    // 如果目标不存在，初始化为空数组或对象\n                    if (!Array.isArray(collection) && !_.isObject(collection)) {\n                        collection = Array.isArray(valueToAssign) ? [] : {};\n                        _.set(variables.stat_data, path, collection);\n                    }\n                    if (Array.isArray(collection)) {\n                        // 目标是数组，追加元素\n                        // 检查是否有模板并应用\n                        const template = targetSchema && (0,_variable_def__WEBPACK_IMPORTED_MODULE_0__.isArraySchema)(targetSchema)\n                            ? targetSchema.template\n                            : undefined;\n                        valueToAssign = applyTemplate(valueToAssign, template, strict_template, concat_template_array);\n                        collection.push(valueToAssign);\n                        display_str = `ASSIGNED ${JSON.stringify(valueToAssign)} into array '${path}' ${reason_str}`;\n                        successful = true;\n                    }\n                    else if (_.isObject(collection)) {\n                        // 目标是对象，合并属性\n                        // 注意：对象合并时不应用模板，因为无法明确确定增加的元素\n                        // 模板只在明确添加单个新属性时应用（如使用三参数的 assign）\n                        if (_.isObject(valueToAssign) && !Array.isArray(valueToAssign)) {\n                            _.merge(collection, valueToAssign);\n                            display_str = `MERGED object ${JSON.stringify(valueToAssign)} into object '${path}' ${reason_str}`;\n                            successful = true;\n                        }\n                        else {\n                            // 不支持将数组或非对象合并到对象，记录错误\n                            outError(`Cannot merge ${Array.isArray(valueToAssign) ? 'array' : 'non-object'} into object at '${path}'`);\n                            continue;\n                        }\n                    }\n                }\n                else if (command.args.length >= 3) {\n                    // _.assign('path', key/index, value)\n                    // 解析插入值和键/索引\n                    let valueToAssign = parseCommandValue(command.args[2]);\n                    const keyOrIndex = parseCommandValue(command.args[1]);\n                    // 在写入前，将 Date 对象（或数组中的Date）序列化\n                    if (valueToAssign instanceof Date) {\n                        valueToAssign = valueToAssign.toISOString();\n                    }\n                    else if (Array.isArray(valueToAssign)) {\n                        valueToAssign = valueToAssign.map(item => item instanceof Date ? item.toISOString() : item);\n                    }\n                    let collection = targetPath === '' ? variables.stat_data : _.get(variables.stat_data, path);\n                    // 获取模板\n                    const template = targetSchema &&\n                        ((0,_variable_def__WEBPACK_IMPORTED_MODULE_0__.isArraySchema)(targetSchema) || (0,_variable_def__WEBPACK_IMPORTED_MODULE_0__.isObjectSchema)(targetSchema))\n                        ? targetSchema.template\n                        : undefined;\n                    if (Array.isArray(collection) && typeof keyOrIndex === 'number') {\n                        // 目标是数组且索引是数字，插入到指定位置\n                        valueToAssign = applyTemplate(valueToAssign, template, strict_template, concat_template_array);\n                        collection.splice(keyOrIndex, 0, valueToAssign);\n                        display_str = `ASSIGNED ${JSON.stringify(valueToAssign)} into '${path}' at index ${keyOrIndex} ${reason_str}`;\n                        successful = true;\n                    }\n                    else if (_.isObject(collection)) {\n                        // 目标是对象，设置指定键\n                        // _.set(collection, String(keyOrIndex), valueToAssign);\n                        // 对单个属性值应用模板\n                        valueToAssign = applyTemplate(valueToAssign, template, strict_template, concat_template_array);\n                        collection[String(keyOrIndex)] = valueToAssign;\n                        display_str = `ASSIGNED key '${keyOrIndex}' with value ${JSON.stringify(valueToAssign)} into object '${path}' ${reason_str}`;\n                        successful = true;\n                    }\n                    else {\n                        // 目标不存在，创建新对象并插入\n                        collection = {};\n                        _.set(variables.stat_data, path, collection);\n                        /*\n                        _.set(\n                            collection as Record<string, unknown>,\n                            String(keyOrIndex),\n                            valueToAssign\n                        );\n                        */\n                        // 对新属性值应用模板\n                        valueToAssign = applyTemplate(valueToAssign, template, strict_template, concat_template_array);\n                        collection[String(keyOrIndex)] = valueToAssign;\n                        display_str = `CREATED object at '${path}' and ASSIGNED key '${keyOrIndex}' ${reason_str}`;\n                        successful = true;\n                    }\n                }\n                if (successful) {\n                    // 插入成功，获取新值并触发事件\n                    const newValue = _.get(variables.stat_data, path);\n                    variable_modified = true;\n                    console.info(display_str);\n                    await eventEmit(_variable_def__WEBPACK_IMPORTED_MODULE_0__.variable_events.SINGLE_VARIABLE_UPDATED, variables.stat_data, path, oldValue, newValue);\n                    try {\n                        //对新应用的 template 立刻处理模板。\n                        const currentDataClone = structuredClone(newValue);\n                        const newSchema = (0,_schema__WEBPACK_IMPORTED_MODULE_2__.generateSchema)(currentDataClone, targetSchema);\n                        _.merge(targetSchema, newSchema);\n                        (0,_schema__WEBPACK_IMPORTED_MODULE_2__.cleanUpMetadata)(newValue);\n                    }\n                    catch (error) {\n                        // 应用失败，记录错误并继续处理下一命令\n                        if (error instanceof Error) {\n                            outError(`Failed to resolve template meta at '${path}', '${error.message}'`);\n                        }\n                        else {\n                            outError(`Failed to resolve template meta at '${path}', '${error}'`);\n                        }\n                    }\n                }\n                else {\n                    // 插入失败，记录错误并继续处理下一命令\n                    outError(`Invalid arguments for _.assign on path '${path}'`);\n                    continue;\n                }\n                break;\n            }\n            case 'unset':\n            case 'delete':\n            case 'remove': {\n                // 验证路径存在，防止无效删除\n                if (!_.has(variables.stat_data, path)) {\n                    outError(`undefined Path: ${path} in _.remove command`);\n                    continue;\n                }\n                // --- 模式校验开始 ---\n                let containerPath = path;\n                let keyOrIndexToRemove;\n                if (command.args.length > 1) {\n                    // _.remove('path', key_or_index)\n                    keyOrIndexToRemove = parseCommandValue(command.args[1]);\n                    // 如果 key 是字符串，需要去除可能存在的引号\n                    if (typeof keyOrIndexToRemove === 'string') {\n                        keyOrIndexToRemove = trimQuotesAndBackslashes(keyOrIndexToRemove);\n                    }\n                }\n                else {\n                    // _.remove('path.to.key[index]')\n                    const pathParts = _.toPath(path);\n                    const lastPart = pathParts.pop();\n                    if (lastPart) {\n                        keyOrIndexToRemove = /^\\d+$/.test(lastPart) ? Number(lastPart) : lastPart;\n                        containerPath = pathParts.join('.');\n                    }\n                }\n                if (keyOrIndexToRemove === undefined) {\n                    outError(`Could not determine target for deletion for command on path '${path}' ${reason_str}`);\n                    continue;\n                }\n                // 只有当容器路径不是根路径（即不为空）时，才检查其是否存在\n                if (containerPath !== '' && !_.has(variables.stat_data, containerPath)) {\n                    outError(`Cannot remove from non-existent path '${containerPath}'. ${reason_str}`);\n                    continue;\n                }\n                const containerSchema = (0,_schema__WEBPACK_IMPORTED_MODULE_2__.getSchemaForPath)(schema, containerPath);\n                if (containerSchema) {\n                    if (containerSchema.type === 'array') {\n                        if (containerSchema.extensible !== true) {\n                            outError(`SCHEMA VIOLATION: Cannot remove element from non-extensible array at path '${containerPath}'. ${reason_str}`);\n                            continue;\n                        }\n                    }\n                    else if (containerSchema.type === 'object') {\n                        const keyString = String(keyOrIndexToRemove);\n                        if (_.has(containerSchema.properties, keyString) &&\n                            containerSchema.properties[keyString].required === true) {\n                            outError(`SCHEMA VIOLATION: Cannot remove required key '${keyString}' from path '${containerPath}'. ${reason_str}`);\n                            continue;\n                        }\n                    }\n                }\n                // --- 所有验证通过，现在可以安全执行 ---\n                // 解析删除目标，可能是值或索引\n                const targetToRemove = command.args.length > 1 ? parseCommandValue(command.args[1]) : undefined;\n                let itemRemoved = false; // 标记是否删除成功\n                if (targetToRemove === undefined) {\n                    // _.remove('path.to.key')\n                    // 删除整个路径\n                    const oldValue = _.get(variables.stat_data, path);\n                    _.unset(variables.stat_data, path);\n                    display_str = `REMOVED path '${path}' ${reason_str}`;\n                    itemRemoved = true;\n                    await eventEmit(_variable_def__WEBPACK_IMPORTED_MODULE_0__.variable_events.SINGLE_VARIABLE_UPDATED, variables.stat_data, path, oldValue, undefined);\n                }\n                else {\n                    // _.remove('path.to.array', value_or_index)\n                    const collection = _.get(variables.stat_data, path);\n                    // 当从一个集合中删除元素时，必须确保目标路径确实是一个集合\n                    // 如果目标是原始值（例如字符串），则无法执行删除操作\n                    if (!Array.isArray(collection) && !_.isObject(collection)) {\n                        outError(`Cannot remove from path '${path}' because it is not an array or object. Skipping command. ${reason_str}`);\n                        continue;\n                    }\n                    if (Array.isArray(collection)) {\n                        // 目标是数组，删除指定元素\n                        const originalArray = _.cloneDeep(collection);\n                        let indexToRemove = -1;\n                        if (typeof targetToRemove === 'number') {\n                            indexToRemove = targetToRemove;\n                        }\n                        else {\n                            indexToRemove = collection.findIndex(item => _.isEqual(item, targetToRemove));\n                        }\n                        if (indexToRemove >= 0 && indexToRemove < collection.length) {\n                            collection.splice(indexToRemove, 1);\n                            itemRemoved = true;\n                            display_str = `REMOVED item from '${path}' ${reason_str}`;\n                            await eventEmit(_variable_def__WEBPACK_IMPORTED_MODULE_0__.variable_events.SINGLE_VARIABLE_UPDATED, variables.stat_data, path, originalArray, collection);\n                        }\n                    }\n                    else if (_.isObject(collection)) {\n                        if (typeof targetToRemove === 'number') {\n                            // 目标是对象，按索引删除键\n                            const keys = Object.keys(collection);\n                            const index = targetToRemove;\n                            if (index >= 0 && index < keys.length) {\n                                const keyToRemove = keys[index];\n                                _.unset(collection, keyToRemove);\n                                itemRemoved = true;\n                                display_str = `REMOVED ${index + 1}th entry ('${keyToRemove}') from object '${path}' ${reason_str}`;\n                            }\n                        }\n                        else {\n                            // 目标是对象，按键名删除\n                            const keyToRemove = String(targetToRemove);\n                            if (_.has(collection, keyToRemove)) {\n                                // _.unset(collection, keyToRemove);\n                                delete collection[keyToRemove];\n                                itemRemoved = true;\n                                display_str = `REMOVED key '${keyToRemove}' from object '${path}' ${reason_str}`;\n                            }\n                        }\n                    }\n                }\n                if (itemRemoved) {\n                    // 删除成功，更新状态并记录日志\n                    variable_modified = true;\n                    console.info(display_str);\n                }\n                else {\n                    // 删除失败，记录警告并继续\n                    outError(`Failed to execute remove on '${path}'`);\n                    continue;\n                }\n                break;\n            }\n            case 'add': {\n                // 验证路径存在\n                if (!_.has(variables.stat_data, path)) {\n                    outError(`Path '${path}' does not exist in stat_data, skipping add command ${reason_str}`);\n                    continue;\n                }\n                // 获取当前值\n                const initialValue = _.cloneDeep(_.get(variables.stat_data, path));\n                const oldValue = _.get(variables.stat_data, path);\n                let valueToAdd = oldValue;\n                const isVWD = (0,_variable_def__WEBPACK_IMPORTED_MODULE_0__.isValueWithDescriptionStatData)(oldValue) && typeof oldValue[0] !== 'object';\n                if (isVWD) {\n                    (0,_variable_def__WEBPACK_IMPORTED_MODULE_0__.assertVWD)(isVWD, oldValue);\n                    valueToAdd = oldValue[0]; // 对 ValueWithDescription 类型，操作其第一个元素\n                }\n                // console.warn(valueToAdd);\n                // 尝试将当前值解析为 Date 对象，无论其原始类型是 Date 还是字符串\n                let potentialDate = null;\n                if (valueToAdd instanceof Date) {\n                    potentialDate = valueToAdd;\n                }\n                else if (typeof valueToAdd === 'string') {\n                    const parsedDate = new Date(valueToAdd);\n                    // 确保它是一个有效的日期，并且不是一个可以被 `new Date` 解析的纯数字字符串\n                    if (!isNaN(parsedDate.getTime()) && isNaN(Number(valueToAdd))) {\n                        potentialDate = parsedDate;\n                    }\n                }\n                if (command.args.length === 2) {\n                    // 双参数：调整数值或日期\n                    const delta = parseCommandValue(command.args[1]);\n                    // 处理 Date 类型\n                    if (potentialDate) {\n                        if (typeof delta !== 'number') {\n                            outError(`Delta '${command.args[1]}' for Date operation is not a number, skipping add command ${reason_str}`);\n                            continue;\n                        }\n                        // delta 是毫秒数，更新时间\n                        const newDate = new Date(potentialDate.getTime() + delta);\n                        // 总是将更新后的 Date 对象转换为 ISO 字符串再存回去\n                        const finalValueToSet = newDate.toISOString();\n                        if (isVWD) {\n                            (0,_variable_def__WEBPACK_IMPORTED_MODULE_0__.assertVWD)(isVWD, oldValue);\n                            oldValue[0] = finalValueToSet;\n                            _.set(variables.stat_data, path, oldValue);\n                        }\n                        else {\n                            _.set(variables.stat_data, path, finalValueToSet);\n                        }\n                        const finalNewValue = _.get(variables.stat_data, path);\n                        if (isVWD) {\n                            display_str = `${JSON.stringify(initialValue[0])}->${JSON.stringify(finalNewValue[0])} ${reason_str}`;\n                        }\n                        else {\n                            display_str = `${JSON.stringify(initialValue)}->${JSON.stringify(finalNewValue)} ${reason_str}`;\n                        }\n                        variable_modified = true;\n                        console.info(`ADDED date '${path}' from '${potentialDate.toISOString()}' to '${newDate.toISOString()}' by delta '${delta}'ms ${reason_str}`);\n                        await eventEmit(_variable_def__WEBPACK_IMPORTED_MODULE_0__.variable_events.SINGLE_VARIABLE_UPDATED, variables.stat_data, path, initialValue, finalNewValue);\n                    }\n                    else if (typeof valueToAdd === 'number') {\n                        // 原有的处理 number 类型的逻辑\n                        if (typeof delta !== 'number') {\n                            outError(`Delta '${command.args[1]}' is not a number, skipping add command ${reason_str}`);\n                            continue;\n                        }\n                        let newValue = valueToAdd + delta;\n                        newValue = parseFloat(newValue.toPrecision(12)); // 避免浮点数精度误差\n                        if (isVWD) {\n                            oldValue[0] = newValue; // Update the first element\n                            _.set(variables.stat_data, path, oldValue);\n                        }\n                        else {\n                            _.set(variables.stat_data, path, newValue);\n                        }\n                        const finalNewValue = _.get(variables.stat_data, path);\n                        if (isVWD) {\n                            display_str = `${JSON.stringify(initialValue[0])}->${JSON.stringify(finalNewValue[0])} ${reason_str}`;\n                        }\n                        else {\n                            display_str = `${JSON.stringify(initialValue)}->${JSON.stringify(finalNewValue)} ${reason_str}`;\n                        }\n                        variable_modified = true;\n                        console.info(`ADDED number '${path}' from '${valueToAdd}' to '${newValue}' by delta '${delta}' ${reason_str}`);\n                        await eventEmit(_variable_def__WEBPACK_IMPORTED_MODULE_0__.variable_events.SINGLE_VARIABLE_UPDATED, variables.stat_data, path, initialValue, finalNewValue);\n                    }\n                    else {\n                        // 如果值不是可识别的类型（日期、数字），则跳过\n                        outError(`Path '${path}' value is not a date or number; skipping add command ${reason_str}`);\n                        continue;\n                    }\n                }\n                else {\n                    outError(`Invalid number of arguments for _.add on path '${path}' ${reason_str}`);\n                    continue;\n                }\n                break;\n            }\n        }\n        if (display_str) {\n            // 更新状态和增量数据，记录操作详情\n            _.set(out_status.stat_data, path, display_str);\n            _.set(delta_status.stat_data, path, display_str);\n        }\n    }\n    // 更新变量的显示和增量数据\n    variables.display_data = out_status.stat_data;\n    variables.delta_data = delta_status.stat_data;\n    // 触发变量更新结束事件\n    await eventEmit(_variable_def__WEBPACK_IMPORTED_MODULE_0__.variable_events.VARIABLE_UPDATE_ENDED, variables);\n    //在结束事件中也可能设置变量\n    delete variables.stat_data.$internal;\n    // 在所有命令执行完毕后，如果数据有任何变动，则执行一次 Schema 调和\n    if (variable_modified) {\n        (0,_schema__WEBPACK_IMPORTED_MODULE_2__.reconcileAndApplySchema)(variables);\n    }\n    if (error_info && (0,_settings__WEBPACK_IMPORTED_MODULE_3__.useSettingsStore)().settings.通知.变量更新出错) {\n        const base_command = error_info.error_command.fullMatch;\n        if (typeof toastr !== 'undefined')\n            toastr.warning(`最近错误: ${error_info.error_last}`, `发生变量更新错误，可能需要重Roll:${base_command}`, { timeOut: 6000 });\n    }\n    // 返回是否修改了变量\n    return variable_modified || out_is_modifed;\n}\nasync function handleVariablesInMessage(message_id) {\n    const chat_message = getChatMessages(message_id).at(-1);\n    if (!chat_message) {\n        return;\n    }\n    let message_content = chat_message.message;\n    if (message_content.length < 5)\n        //MESSAGE_RECEIVED会递交一个 \"...\" 的消息\n        return;\n    const request_message_id = message_id === 0 ? 0 : message_id - 1;\n    const variables = await getLastValidVariable(request_message_id);\n    if (!_.has(variables, 'stat_data')) {\n        console.error(`cannot found stat_data for ${request_message_id}`);\n        return;\n    }\n    const has_variable_modified = await updateVariables(message_content, variables);\n    const updater = (data) => {\n        data.stat_data = variables.stat_data;\n        data.display_data = variables.display_data;\n        data.delta_data = variables.delta_data;\n        data.initialized_lorebooks = variables.initialized_lorebooks;\n        if (variables.schema !== undefined) {\n            data.schema = variables.schema;\n        }\n        else {\n            delete data.schema;\n        }\n        return data;\n    };\n    if (has_variable_modified) {\n        await updateVariablesWith(updater, { type: 'chat' });\n    }\n    await updateVariablesWith(updater, { type: 'message', message_id: message_id });\n    if (chat_message.role !== 'user') {\n        if (!message_content.includes('<StatusPlaceHolderImpl/>')) {\n            message_content += '\\n\\n<StatusPlaceHolderImpl/>';\n        }\n        await setChatMessages([\n            {\n                message_id: message_id,\n                message: message_content,\n            },\n        ], {\n            refresh: 'affected',\n        });\n    }\n}\nasync function handleVariablesInCallback(message_content, in_out_variable_info) {\n    if (in_out_variable_info.old_variables === undefined) {\n        return;\n    }\n    in_out_variable_info.new_variables = _.cloneDeep(in_out_variable_info.old_variables);\n    const variables = in_out_variable_info.new_variables;\n    const modified = await updateVariables(message_content, variables);\n    //如果没有修改，则不产生 newVariable\n    if (!modified)\n        delete in_out_variable_info.new_variables;\n    return;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDLGFBQWEsQ0FBQyxDQUFDO0lBQ3JGLE1BQU0sU0FBUyxHQUFHLG9CQUFvQixDQUFDLGFBQWEsQ0FBQztJQUVyRCxNQUFNLFFBQVEsR0FBRyxNQUFNLGVBQWUsQ0FBQyxlQUFlLEVBQUUsU0FBUyxDQUFDLENBQUM7SUFDbkUseUJBQXlCO0lBQ3pCLElBQUksQ0FBQyxRQUFRO1FBQUUsT0FBTyxvQkFBb0IsQ0FBQyxhQUFhLENBQUM7SUFDekQsT0FBTztBQUNYLENBQUMiLCJzb3VyY2VzIjpbInNyYzovL3RhdmVybl9oZWxwZXJfdGVtcGxhdGUvc3JjL2Z1bmN0aW9uLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XHJcbiAgICB2YXJpYWJsZV9ldmVudHMsXHJcbiAgICBWYXJpYWJsZURhdGEsXHJcbiAgICBNdnVEYXRhLFxyXG4gICAgVGVtcGxhdGVUeXBlLFxyXG4gICAgYXNzZXJ0VldELFxyXG4gICAgaXNBcnJheVNjaGVtYSxcclxuICAgIGlzT2JqZWN0U2NoZW1hLFxyXG4gICAgaXNWYWx1ZVdpdGhEZXNjcmlwdGlvblN0YXREYXRhLFxyXG59IGZyb20gJ0AvdmFyaWFibGVfZGVmJztcclxuaW1wb3J0ICogYXMgbWF0aCBmcm9tICdtYXRoanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIGNsZWFuVXBNZXRhZGF0YSxcclxuICAgIGdlbmVyYXRlU2NoZW1hLFxyXG4gICAgZ2V0U2NoZW1hRm9yUGF0aCxcclxuICAgIHJlY29uY2lsZUFuZEFwcGx5U2NoZW1hLFxyXG59IGZyb20gJ0Avc2NoZW1hJztcclxuaW1wb3J0IHsgdXNlU2V0dGluZ3NTdG9yZSB9IGZyb20gJ0Avc2V0dGluZ3MnO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHRyaW1RdW90ZXNBbmRCYWNrc2xhc2hlcyhzdHI6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICBpZiAoIV8uaXNTdHJpbmcoc3RyKSkgcmV0dXJuIHN0cjtcclxuICAgIC8vIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBiYWNrc2xhc2hlcyBhbmQgcXVvdGVzIChpbmNsdWRpbmcgYmFja3RpY2tzKSBhdCB0aGUgYmVnaW5uaW5nIGFuZCBlbmRcclxuICAgIHJldHVybiBzdHIucmVwbGFjZSgvXltcXFxcXCInYCBdKiguKj8pW1xcXFxcIidgIF0qJC8sICckMScpO1xyXG59XHJcblxyXG4vKipcclxuICog5bqU55So5qih5p2/5Yiw5YC85LiK77yM5YC855qE5bGe5oCn5LyY5YWI57qn6auY5LqO5qih5p2/XHJcbiAqIEBwYXJhbSB2YWx1ZSDopoHlupTnlKjmqKHmnb/nmoTlgLxcclxuICogQHBhcmFtIHRlbXBsYXRlIOaooeadvyAoVGVtcGxhdGVUeXBlIHwgdW5kZWZpbmVkKVxyXG4gKiBAcGFyYW0gc3RyaWN0X2FycmF5X2Nhc3Qg5piv5ZCm5byA5ZCv5Lil5qC85qih5byP77yM5byA5ZCv5ZCO5LiN5YWB6K64IHByaW1pdGl2ZSB0eXBlIC0+IFtwcmltaXRpdmUgdHlwZV0g55qE6ZqQ5byP6L2s5o2iXHJcbiAqIEBwYXJhbSBhcnJheV9tZXJnZV9jb25jYXQg5oyH5piO5pWw57uE55qEIOWQiOW5tiDooYzkuLrmmK/mjIcg6KaG55uWIOi/mOaYryDmi7zmjqXvvIzpu5jorqTmi7zmjqXjgIJcclxuICogQHJldHVybnMg5ZCI5bm25ZCO55qE5YC8XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gYXBwbHlUZW1wbGF0ZShcclxuICAgIHZhbHVlOiBhbnksXHJcbiAgICB0ZW1wbGF0ZTogVGVtcGxhdGVUeXBlIHwgdW5kZWZpbmVkLFxyXG4gICAgc3RyaWN0X2FycmF5X2Nhc3Q6IGJvb2xlYW4gPSBmYWxzZSxcclxuICAgIGFycmF5X21lcmdlX2NvbmNhdDogYm9vbGVhbiA9IHRydWVcclxuKTogYW55IHtcclxuICAgIC8vIOWmguaenOayoeacieaooeadv++8jOebtOaOpei/lOWbnuWOn+WAvFxyXG4gICAgaWYgKCF0ZW1wbGF0ZSkge1xyXG4gICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDmo4Dmn6XnsbvlnovmmK/lkKbljLnphY1cclxuICAgIGNvbnN0IHZhbHVlX2lzX29iamVjdCA9IF8uaXNPYmplY3QodmFsdWUpICYmICFBcnJheS5pc0FycmF5KHZhbHVlKSAmJiAhXy5pc0RhdGUodmFsdWUpO1xyXG4gICAgY29uc3QgdmFsdWVfaXNfYXJyYXkgPSBBcnJheS5pc0FycmF5KHZhbHVlKTtcclxuICAgIGNvbnN0IHRlbXBsYXRlX2lzX2FycmF5ID0gQXJyYXkuaXNBcnJheSh0ZW1wbGF0ZSk7XHJcblxyXG4gICAgaWYgKHZhbHVlX2lzX29iamVjdCAmJiAhdGVtcGxhdGVfaXNfYXJyYXkpIHtcclxuICAgICAgICAvLyB2YWx1ZSDmmK/lr7nosaHvvIx0ZW1wbGF0ZSDmmK8gU3RhdERhdGHvvIjlr7nosaHvvIlcclxuICAgICAgICAvLyDlhYjlupTnlKjmqKHmnb/vvIzlho3lupTnlKjlgLzvvIznoa7kv53lgLznmoTkvJjlhYjnuqfmm7Tpq5hcclxuICAgICAgICByZXR1cm4gXy5tZXJnZSh7fSwgdGVtcGxhdGUsIHZhbHVlKTtcclxuICAgIH0gZWxzZSBpZiAodmFsdWVfaXNfYXJyYXkgJiYgdGVtcGxhdGVfaXNfYXJyYXkpIHtcclxuICAgICAgICAvLyDpg73mmK/mlbDnu4TvvIzov5vooYzlkIjlubZcclxuICAgICAgICBpZiAoYXJyYXlfbWVyZ2VfY29uY2F0KSByZXR1cm4gXy5jb25jYXQodmFsdWUsIHRlbXBsYXRlKTtcclxuICAgICAgICByZXR1cm4gXy5tZXJnZShbXSwgdGVtcGxhdGUsIHZhbHVlKTtcclxuICAgIH0gZWxzZSBpZiAoXHJcbiAgICAgICAgKCh2YWx1ZV9pc19vYmplY3QgfHwgdmFsdWVfaXNfYXJyYXkpICYmIHRlbXBsYXRlX2lzX2FycmF5ICE9PSB2YWx1ZV9pc19hcnJheSkgfHxcclxuICAgICAgICAoIXZhbHVlX2lzX29iamVjdCAmJiAhdmFsdWVfaXNfYXJyYXkgJiYgXy5pc09iamVjdCh0ZW1wbGF0ZSkgJiYgIUFycmF5LmlzQXJyYXkodGVtcGxhdGUpKVxyXG4gICAgKSB7XHJcbiAgICAgICAgLy8g57G75Z6L5LiN5Yy56YWNXHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcclxuICAgICAgICAgICAgYFRlbXBsYXRlIHR5cGUgbWlzbWF0Y2g6IHRlbXBsYXRlIGlzICR7dGVtcGxhdGVfaXNfYXJyYXkgPyAnYXJyYXknIDogJ29iamVjdCd9LCBidXQgdmFsdWUgaXMgJHt2YWx1ZV9pc19hcnJheSA/ICdhcnJheScgOiAnb2JqZWN0J30uIFNraXBwaW5nIHRlbXBsYXRlIG1lcmdlLmBcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgIH0gZWxzZSBpZiAoIXZhbHVlX2lzX29iamVjdCAmJiAhdmFsdWVfaXNfYXJyYXkgJiYgdGVtcGxhdGVfaXNfYXJyYXkpIHtcclxuICAgICAgICAvLyDnibnmrormg4XlhrXvvJrlgLzmmK/ljp/lp4vnsbvlnovvvIjlrZfpnaLph4/vvInvvIzmqKHmnb/mmK/mlbDnu4RcclxuICAgICAgICAvLyDlvZPkvZwgW3ZhbHVlXSDov5vooYzmlbDnu4TnmoTlkIjlubZcclxuICAgICAgICBpZiAoc3RyaWN0X2FycmF5X2Nhc3QpXHJcbiAgICAgICAgICAgIC8v5Lil5qC85qih5byP5LiN5o+Q5L6bIHByaW1pdGl2ZSB0eXBlIC0+IFtwcmltaXRpdmUgdHlwZV0g55qE6L2s5o2iXHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICBpZiAoYXJyYXlfbWVyZ2VfY29uY2F0KSByZXR1cm4gXy5jb25jYXQoW3ZhbHVlXSwgdGVtcGxhdGUpO1xyXG4gICAgICAgIHJldHVybiBfLm1lcmdlKFtdLCB0ZW1wbGF0ZSwgW3ZhbHVlXSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIOWFtuS7luaDheWGte+8muWAvOaYr+WOn+Wni+exu+Wei++8jOaooeadv+S4jeaYr+aVsOe7hO+8jOS4jeW6lOeUqOaooeadv1xyXG4gICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgIH1cclxufVxyXG5cclxuLy8g5LiA5Liq5pu05a6J5YWo55qE44CB55So5LqO6Kej5p6Q5ZG95Luk5Lit5YC855qE6L6F5Yqp5Ye95pWwXHJcbi8vIOWug+S8muWwneivleWwhuWtl+espuS4suino+aekOS4uiBKU09OLCDluIPlsJTlgLwsIG51bGwsIOaVsOWtlywg5oiW5pWw5a2m6KGo6L6+5byPXHJcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUNvbW1hbmRWYWx1ZSh2YWxTdHI6IHN0cmluZyk6IGFueSB7XHJcbiAgICBpZiAodHlwZW9mIHZhbFN0ciAhPT0gJ3N0cmluZycpIHJldHVybiB2YWxTdHI7XHJcbiAgICBjb25zdCB0cmltbWVkID0gdmFsU3RyLnRyaW0oKTtcclxuXHJcbiAgICAvLyDmo4Dmn6XluIPlsJTlgLwvbnVsbC91bmRlZmluZWRcclxuICAgIGlmICh0cmltbWVkID09PSAndHJ1ZScpIHJldHVybiB0cnVlO1xyXG4gICAgaWYgKHRyaW1tZWQgPT09ICdmYWxzZScpIHJldHVybiBmYWxzZTtcclxuICAgIGlmICh0cmltbWVkID09PSAnbnVsbCcpIHJldHVybiBudWxsO1xyXG4gICAgaWYgKHRyaW1tZWQgPT09ICd1bmRlZmluZWQnKSByZXR1cm4gdW5kZWZpbmVkO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgLy8g5aaC5p6c5a2X56ym5Liy6IO96KKrIEpTT04ucGFyc2Ug6Kej5p6Q77yM6K+05piO5a6D5piv5LiA5Liq5qCH5YeG5qC85byP77yM55u05o6l6L+U5Zue6Kej5p6Q57uT5p6cXHJcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UodHJpbW1lZCk7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgLy8gSGFuZGxlIEphdmFTY3JpcHQgYXJyYXkgb3Igb2JqZWN0IGxpdGVyYWxzXHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAodHJpbW1lZC5zdGFydHNXaXRoKCd7JykgJiYgdHJpbW1lZC5lbmRzV2l0aCgnfScpKSB8fFxyXG4gICAgICAgICAgICAodHJpbW1lZC5zdGFydHNXaXRoKCdbJykgJiYgdHJpbW1lZC5lbmRzV2l0aCgnXScpKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgLy8gU2FmZWx5IGV2YWx1YXRlIGxpdGVyYWxzIHVzaW5nIGEgZnVuY3Rpb24gY29uc3RydWN0b3JcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBGdW5jdGlvbihgcmV0dXJuICR7dHJpbW1lZH07YCkoKTtcclxuICAgICAgICAgICAgICAgIGlmIChfLmlzT2JqZWN0KHJlc3VsdCkgfHwgQXJyYXkuaXNBcnJheShyZXN1bHQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAvLyDlpoLmnpzop6PmnpDlpLHotKXvvIzor7TmmI7lroPlj6/og73mmK/kuIDkuKrmnKrliqDlvJXlj7fnmoTlrZfnrKbkuLLmiJbmlbDlrabooajovr7lvI/vvIznu6fnu63lvoDkuIvotbBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyDlpoLmnpzku6PnoIHotbDliLDov5nph4zvvIzor7TmmI4gdHJpbW1lZCDmmK/kuIDkuKrmnKrliqDlvJXlj7fnmoTlrZfnrKbkuLLvvIzkvovlpoLvvJpcclxuICAgIC8vICdoZWxsb193b3JsZCcsICcxMCArIDInLCAnc3FydCgxNiknXHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICAvLyDliJvlu7rkuIDkuKogc2NvcGUg5a+56LGh77yM5bCG5aSa56eN5pWw5a2m5bqTL+WvueixoeazqOWFpeWIsCBtYXRoanMg55qE5omn6KGM546v5aKD5Lit77yMXHJcbiAgICAgICAgLy8g5Lul5L6/57uf5LiA5aSE55CG5LiN5ZCM6aOO5qC855qE5pWw5a2m6KGo6L6+5byP44CCXHJcbiAgICAgICAgY29uc3Qgc2NvcGUgPSB7XHJcbiAgICAgICAgICAgIC8vIOaUr+aMgSBKYXZhU2NyaXB0IOagh+WHhueahCBNYXRoIOWvueixoSAoZS5nLiwgTWF0aC5zcXJ0KCksIE1hdGguUEkpXHJcbiAgICAgICAgICAgIE1hdGg6IE1hdGgsXHJcbiAgICAgICAgICAgIC8vIOaUr+aMgSBQeXRob24g6aOO5qC855qEIG1hdGgg5bqT55So5rOVIChlLmcuLCBtYXRoLnNxcnQoKSwgbWF0aC5waSnvvIxcclxuICAgICAgICAgICAgLy8g6L+Z5ZyoIExMTSDnlJ/miJDnmoTku6PnoIHkuK3lvojluLjop4HjgIJcclxuICAgICAgICAgICAgLy8gJ21hdGgnIOaYr+aIkeS7rOWvvOWFpeeahCBtYXRoanMg5bqT5pys6Lqr44CCXHJcbiAgICAgICAgICAgIG1hdGg6IG1hdGgsXHJcbiAgICAgICAgfTtcclxuICAgICAgICAvLyDlsJ3or5Xkvb/nlKggbWF0aGpzIOi/m+ihjOaVsOWtpuaxguWAvFxyXG4gICAgICAgIC8vIG1hdGguZXZhbHVhdGUg5a+55LqO5peg5rOV6K+G5Yir5Li66KGo6L6+5byP55qE57qv5a2X56ym5Liy5Lya5oqb5Ye66ZSZ6K+vXHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbWF0aC5ldmFsdWF0ZSh0cmltbWVkLCBzY29wZSk7XHJcbiAgICAgICAgLy8g5aaC5p6c57uT5p6c5pivIG1hdGhqcyDnmoTlpI3mlbDmiJbnn6npmLXlr7nosaHvvIzliJnlsIblhbbovazmjaLkuLrlrZfnrKbkuLLooajnpLrlvaLlvI9cclxuICAgICAgICBpZiAobWF0aC5pc0NvbXBsZXgocmVzdWx0KSB8fCBtYXRoLmlzTWF0cml4KHJlc3VsdCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC50b1N0cmluZygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDpgb/lhY3lsIbljZXkuKrljZXor43nmoTlrZfnrKbkuLLvvIhtYXRoanPlj6/og73lsIblhbbor4bliKvkuLrnrKblj7fvvInkvZzkuLogdW5kZWZpbmVkIOi/lOWbnlxyXG4gICAgICAgIGlmIChyZXN1bHQgPT09IHVuZGVmaW5lZCAmJiAhL15bYS16QS1aX10rJC8udGVzdCh0cmltbWVkKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJpbW1lZDsgLy8g5aaC5p6c5pivIHVuZGVmaW5lZCDkvYbkuI3mmK/kuIDkuKrnroDljZXnmoTnrKblj7flkI3vvIzliJnlj6/og73mmK/op6PmnpDplJnor69cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJlc3VsdCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIC8vIOS9v+eUqCB0b1ByZWNpc2lvbiDmnaXlpITnkIbmta7ngrnmlbDnsr7luqbpgKDmiJDnmoTor6/lt67pl67pophcclxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQocmVzdWx0LnRvUHJlY2lzaW9uKDEyKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgLy8g5aaC5p6cIG1hdGguZXZhbHVhdGUg5aSx6LSl77yM6K+05piO5a6D5LiN5piv5LiA5Liq5pyJ5pWI55qE6KGo6L6+5byP77yMXHJcbiAgICAgICAgLy8g6YKj5LmI5a6D5bCx5piv5LiA5Liq5pmu6YCa55qE5pyq5Yqg5byV5Y+355qE5a2X56ym5Liy44CCXHJcbiAgICB9XHJcblxyXG4gICAgLy8g5a6e6aqM5oCn5Yqf6IO977yM5pqC5LiN5ZCv55SoXHJcbiAgICAvLyDlsJ3or5XlsIblrZfnrKbkuLLop6PmnpDkuLrml6XmnJ/lr7nosaHvvIznlKjkuo7kvKDlhaVfLmFkZOebtOaOpeS7peavq+enkuaVsOabtOaWsOaXtumXtO+8jOWmgiBgXy5hZGQoJ+W9k+WJjeaXtumXtCcsIDEwICogNjAgKiAxMDAwKTtgXHJcbiAgICAvLyDmraTmo4Dmn6XnlKjkuo7or4bliKvml6XmnJ/lrZfnrKbkuLLvvIjkvovlpoIgXCIyMDI0LTAxLTAxVDEyOjAwOjAwWlwi77yJXHJcbiAgICAvLyBgaXNOYU4oTnVtYmVyKHRyaW1tZWQpKWDnoa7kv53nuq/mlbDlrZflrZfnrKbkuLLvvIjlpoIgXCIxMjM0NVwi77yJ5LiN5Lya6KKr6ZSZ6K+v5Zyw6Kej5p6Q5Li65pel5pyfXHJcbiAgICAvKlxyXG4gICAgaWYgKGlzTmFOKE51bWJlcih0cmltbWVkKSkpIHtcclxuICAgICAgICBjb25zdCBwb3RlbnRpYWxEYXRlID0gbmV3IERhdGUodHJpbVF1b3Rlc0FuZEJhY2tzbGFzaGVzKHRyaW1tZWQpKTtcclxuICAgICAgICBpZiAoIWlzTmFOKHBvdGVudGlhbERhdGUuZ2V0VGltZSgpKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcG90ZW50aWFsRGF0ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAqL1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgLy8g5bCd6K+VIFlBTUwucGFyc2VcclxuICAgICAgICByZXR1cm4gWUFNTC5wYXJzZSh0cmltbWVkKTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAvKiBlbXB0eSAqL1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOacgOe7iO+8jOi/lOWbnui/meS4quWOu+mZpOS6hummluWwvuW8leWPt+eahOWtl+espuS4slxyXG4gICAgcmV0dXJuIHRyaW1RdW90ZXNBbmRCYWNrc2xhc2hlcyh2YWxTdHIpO1xyXG59XHJcblxyXG4vKipcclxuICogVHlwZSBkZWZpbml0aW9uIGZvciBDb21tYW5kTmFtZXMgcmVwcmVzZW50aW5nIGEgc2V0IG9mIHZhbGlkIGNvbW1hbmQgc3RyaW5ncy5cclxuICpcclxuICogVGhpcyB0eXBlIGlzIHVzZWQgdG8gZGVmaW5lIGEgZmluaXRlIGFuZCBzcGVjaWZpYyBzZXQgb2YgY29tbWFuZCBzdHJpbmcgdmFsdWVzXHJcbiAqIHRoYXQgbWF5IGJlIHVzZWQgaW4gb3BlcmF0aW9ucyBvciBmdW5jdGlvbnMgcmVxdWlyaW5nIHByZWRlZmluZWQgY29tbWFuZCBuYW1lcy5cclxuICpcclxuICogVGhlIGFsbG93ZWQgY29tbWFuZCBuYW1lcyBhcmU6XHJcbiAqIC0gJ3NldCc6IFJlcHJlc2VudHMgYSBjb21tYW5kIHRvIHNldCBhIHZhbHVlLlxyXG4gKiAtICdpbnNlcnQnOiBBbGlhcyBvZiAnYXNzaWduJ1xyXG4gKiAtICdhc3NpZ24nOiBSZXByZXNlbnRzIGEgY29tbWFuZCB0byBhc3NpZ24gYSB2YWx1ZSBvciByZWZlcmVuY2UuXHJcbiAqIC0gJ3JlbW92ZSc6IFJlcHJlc2VudHMgYSBjb21tYW5kIHRvIHJlbW92ZSBhbiBpdGVtIG9yIGRhdGEuXHJcbiAqIC0gJ2FkZCc6IFJlcHJlc2VudHMgYSBjb21tYW5kIHRvIGFkZCBhbiBpdGVtIG9yIGRhdGEuXHJcbiAqL1xyXG50eXBlIENvbW1hbmROYW1lcyA9ICdzZXQnIHwgJ2luc2VydCcgfCAnYXNzaWduJyB8ICdyZW1vdmUnIHwgJ3Vuc2V0JyB8ICdkZWxldGUnIHwgJ2FkZCc7XHJcblxyXG4vKipcclxuICog5LuO5aSn5a2X56ym5Liy5Lit5o+Q5Y+W5omA5pyJIC5zZXQoJHtwYXRofSwgJHtuZXdfdmFsdWV9KTsvLyR7cmVhc29ufSDmoLzlvI/nmoTmqKHlvI9cclxuICog5bm26Kej5p6Q5Ye65q+P5Liq5Yy56YWN6aG555qE6Lev5b6E44CB5paw5YC85ZKM5Y6f5Zug6YOo5YiGXHJcbiAqL1xyXG4vLyDmjqXlj6PlrprkuYnvvJrnlKjkuo7nu5/kuIDkuI3lkIzlkb3ku6TnmoTnu5PmnoRcclxuLy8g5paw5aKe77yaQ29tbWFuZCDmjqXlj6PvvIzmr5QgU2V0Q29tbWFuZCDmm7TpgJrnlKhcclxuaW50ZXJmYWNlIENvbW1hbmQge1xyXG4gICAgY29tbWFuZDogQ29tbWFuZE5hbWVzO1xyXG4gICAgZnVsbE1hdGNoOiBzdHJpbmc7XHJcbiAgICBhcmdzOiBzdHJpbmdbXTtcclxuICAgIHJlYXNvbjogc3RyaW5nO1xyXG59XHJcblxyXG4vKipcclxuICog5LuO6L6T5YWl5paH5pys5Lit5o+Q5Y+W5omA5pyJIF8uc2V0KCkg6LCD55SoXHJcbiAqXHJcbiAqIOmXrumimOiDjOaZr++8mlxyXG4gKiDljp/mnKzkvb/nlKjmraPliJnooajovr7lvI8gL19cXC5zZXRcXCgoW1xcc1xcU10qPylcXCk7LyDmnaXljLnphY3vvIzkvYbov5nnp43pnZ7otKrlqarljLnphY3kvJrlnKjpgYfliLBcclxuICog5bWM5aWX55qEICk7IOaXtuaPkOWJjee7k+adn+OAguS+i+Wmgu+8mlxyXG4gKiBfLnNldCgncGF0aCcsIFtcInRleHQgd2l0aCBfLnNldCgnaW5uZXInLG51bGwpOy8vY29tbWVudFwiXSwgW10pO1xyXG4gKiDkvJrlnKggXCJjb21tZW50XCIpIOWkhOmUmeivr+WcsOe7k+adn+WMuemFjVxyXG4gKlxyXG4gKiDop6PlhrPmlrnmoYjvvJpcclxuICog5L2/55So54q25oCB5py65pa55rOV77yM6YCa6L+H6K6h5pWw5ous5Y+36YWN5a+55p2l5YeG56Gu5om+5YiwIF8uc2V0KCkg6LCD55So55qE57uT5p2f5L2N572uXHJcbiAqL1xyXG4vLyDlsIYgZXh0cmFjdFNldENvbW1hbmRzIOaJqeWxleS4uiBleHRyYWN0Q29tbWFuZHMg5Lul5pSv5oyB5aSa56eN5ZG95LukXHJcbmV4cG9ydCBmdW5jdGlvbiBleHRyYWN0Q29tbWFuZHMoaW5wdXRUZXh0OiBzdHJpbmcpOiBDb21tYW5kW10ge1xyXG4gICAgY29uc3QgcmVzdWx0czogQ29tbWFuZFtdID0gW107XHJcbiAgICBsZXQgaSA9IDA7XHJcblxyXG4gICAgd2hpbGUgKGkgPCBpbnB1dFRleHQubGVuZ3RoKSB7XHJcbiAgICAgICAgLy8g5b6q546v5aSE55CG5pW05Liq6L6T5YWl5paH5pys77yM55u05Yiw5om+5LiN5Yiw5pu05aSa5ZG95LukXHJcbiAgICAgICAgLy8g5L2/55So5q2j5YiZ5Yy56YWNIF8uc2V0KOOAgV8uYXNzaWduKOOAgV8ucmVtb3ZlKCDmiJYgXy5hZGQo77yM6YeN5p6E5ZCO5pSv5oyB5aSa56eN5ZG95LukXHJcbiAgICAgICAgY29uc3Qgc2V0TWF0Y2ggPSBpbnB1dFRleHRcclxuICAgICAgICAgICAgLnN1YnN0cmluZyhpKVxyXG4gICAgICAgICAgICAubWF0Y2goL19cXC4oc2V0fGluc2VydHxhc3NpZ258cmVtb3ZlfHVuc2V0fGRlbGV0ZXxhZGQpXFwoLyk7XHJcbiAgICAgICAgaWYgKCFzZXRNYXRjaCB8fCBzZXRNYXRjaC5pbmRleCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIC8vIOayoeacieaJvuWIsOWMuemFjeeahOWRveS7pO+8jOmAgOWHuuW+queOr++8jOmYsuatouaXoOmZkOW+queOr1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOaPkOWPluWRveS7pOexu+Wei++8iHNldOOAgWFzc2lnbuOAgXJlbW92ZSDmiJYgYWRk77yJ77yM5bm26K6h566X5ZG95Luk55qE6LW35aeL5L2N572uXHJcbiAgICAgICAgY29uc3QgY29tbWFuZFR5cGUgPSBzZXRNYXRjaFsxXSBhcyBDb21tYW5kTmFtZXM7XHJcbiAgICAgICAgY29uc3Qgc2V0U3RhcnQgPSBpICsgc2V0TWF0Y2guaW5kZXg7XHJcbiAgICAgICAgLy8g6K6h566X5byA5ous5Y+35L2N572u77yM55So5LqO5ZCO57ut5o+Q5Y+W5Y+C5pWwXHJcbiAgICAgICAgY29uc3Qgb3BlblBhcmVuID0gc2V0U3RhcnQgKyBzZXRNYXRjaFswXS5sZW5ndGg7XHJcblxyXG4gICAgICAgIC8vIOS9v+eUqCBmaW5kTWF0Y2hpbmdDbG9zZVBhcmVuIOafpeaJvuWMuemFjeeahOmXreaLrOWPt++8jOino+WGs+WOn+ato+WImeWMuemFjeWcqOW1jOWll+e7k+aehO+8iOWmgiBfLnNldCgncGF0aCcsIFsnaW5uZXIpOyddKe+8ieS4reaPkOWJjee7k+adn+eahOmXrumimFxyXG4gICAgICAgIGNvbnN0IGNsb3NlUGFyZW4gPSBmaW5kTWF0Y2hpbmdDbG9zZVBhcmVuKGlucHV0VGV4dCwgb3BlblBhcmVuKTtcclxuICAgICAgICBpZiAoY2xvc2VQYXJlbiA9PT0gLTEpIHtcclxuICAgICAgICAgICAgLy8g5om+5LiN5Yiw6Zet5ous5Y+377yM6K+05piO5ZG95Luk5qC85byP6ZSZ6K+vXHJcbiAgICAgICAgICAgIC8vIOi3s+i/h+atpOaXoOaViOWRveS7pO+8jOW5tuS7juW8gOaLrOWPt+WQjue7p+e7reaQnOe0ou+8jOS7pemYsuaXoOmZkOW+queOr1xyXG4gICAgICAgICAgICBpID0gb3BlblBhcmVuOyAvLyDku47lvIDmi6zlj7flkI7nu6fnu63mkJzntKJcclxuICAgICAgICAgICAgY29udGludWU7IC8vIOe7p+e7rSB3aGlsZSDlvqrnjq/vvIzlr7vmib7kuIvkuIDkuKrlkb3ku6RcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOajgOafpemXreaLrOWPt+WQjuaYr+WQpue0p+i3n+WIhuWPt++8jOehruS/neWRveS7pOivreazleWujOaVtO+8jOmYsuatouivr+ino+aekOWtl+espuS4suS4reeahOexu+S8vOe7k+aehFxyXG4gICAgICAgIGxldCBlbmRQb3MgPSBjbG9zZVBhcmVuICsgMTtcclxuICAgICAgICBpZiAoZW5kUG9zID49IGlucHV0VGV4dC5sZW5ndGggfHwgaW5wdXRUZXh0W2VuZFBvc10gIT09ICc7Jykge1xyXG4gICAgICAgICAgICAvLyDmsqHmnInliIblj7fvvIzlkb3ku6Tml6DmlYjvvIzot7PliLDpl63mi6zlj7flkI7nu6fnu63mkJzntKLvvIzpgb/lhY3or6/op6PmnpBcclxuICAgICAgICAgICAgaSA9IGNsb3NlUGFyZW4gKyAxO1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZW5kUG9zKys7IC8vIOWMheWQq+WIhuWPt++8jOabtOaWsOWRveS7pOe7k+adn+S9jee9rlxyXG5cclxuICAgICAgICAvLyDmj5Dlj5blj6/og73nmoTms6jph4rvvIgvLyDlvIDlpLTvvInvvIznlKjkuo7orrDlvZXlkb3ku6TnmoQgcmVhc29uXHJcbiAgICAgICAgbGV0IGNvbW1lbnQgPSAnJztcclxuICAgICAgICBjb25zdCBwb3RlbnRpYWxDb21tZW50ID0gaW5wdXRUZXh0LnN1YnN0cmluZyhlbmRQb3MpLm1hdGNoKC9eXFxzKlxcL1xcLyguKikvKTtcclxuICAgICAgICBpZiAocG90ZW50aWFsQ29tbWVudCkge1xyXG4gICAgICAgICAgICAvLyDmj5Dlj5bms6jph4rlhoXlrrnlubbljrvpmaTpppblsL7nqbrmoLzvvIzmm7TmlrDnu5PmnZ/kvY3nva5cclxuICAgICAgICAgICAgY29tbWVudCA9IHBvdGVudGlhbENvbW1lbnRbMV0udHJpbSgpO1xyXG4gICAgICAgICAgICBlbmRQb3MgKz0gcG90ZW50aWFsQ29tbWVudFswXS5sZW5ndGg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDmj5Dlj5blrozmlbTlkb3ku6TlrZfnrKbkuLLvvIznlKjkuo7ov5Tlm57nu5PmnpzkuK3nmoQgZnVsbE1hdGNoIOWtl+aute+8jOS+v+S6jui/vei4quWOn+Wni+WGheWuuVxyXG4gICAgICAgIGNvbnN0IGZ1bGxNYXRjaCA9IGlucHV0VGV4dC5zdWJzdHJpbmcoc2V0U3RhcnQsIGVuZFBvcyk7XHJcbiAgICAgICAgLy8g5o+Q5Y+W5Y+C5pWw5a2X56ym5Liy77yM5L2N5LqO5byA5ous5Y+35ZKM6Zet5ous5Y+35LmL6Ze0XHJcbiAgICAgICAgY29uc3QgcGFyYW1zU3RyaW5nID0gaW5wdXRUZXh0LnN1YnN0cmluZyhvcGVuUGFyZW4sIGNsb3NlUGFyZW4pO1xyXG4gICAgICAgIC8vIOS9v+eUqCBwYXJzZVBhcmFtZXRlcnMg6Kej5p6Q5Y+C5pWw77yM5pSv5oyB5bWM5aWX57uT5p6E77yI5aaC5pWw57uE44CB5a+56LGh77yJXHJcbiAgICAgICAgY29uc3QgcGFyYW1zID0gcGFyc2VQYXJhbWV0ZXJzKHBhcmFtc1N0cmluZyk7XHJcblxyXG4gICAgICAgIC8vIOmqjOivgeWRveS7pOacieaViOaAp++8jOagueaNruWRveS7pOexu+Wei+ajgOafpeWPguaVsOaVsOmHj++8jOmYsuatouaXoOaViOWRveS7pOi/m+WFpee7k+aenFxyXG4gICAgICAgIGxldCBpc1ZhbGlkID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKGNvbW1hbmRUeXBlID09PSAnc2V0JyAmJiBwYXJhbXMubGVuZ3RoID49IDIpXHJcbiAgICAgICAgICAgIGlzVmFsaWQgPSB0cnVlOyAvLyBfLnNldCDoh7PlsJHpnIDopoHot6/lvoTlkozlgLxcclxuICAgICAgICBlbHNlIGlmIChjb21tYW5kVHlwZSA9PT0gJ2Fzc2lnbicgJiYgcGFyYW1zLmxlbmd0aCA+PSAyKVxyXG4gICAgICAgICAgICBpc1ZhbGlkID0gdHJ1ZTsgLy8gXy5hc3NpZ24g5pSv5oyB5Lik56eN5Y+C5pWw5qC85byPXHJcbiAgICAgICAgZWxzZSBpZiAoY29tbWFuZFR5cGUgPT09ICdpbnNlcnQnICYmIHBhcmFtcy5sZW5ndGggPj0gMilcclxuICAgICAgICAgICAgaXNWYWxpZCA9IHRydWU7IC8vIF8uaW5zZXJ0IOaUr+aMgeS4pOenjeWPguaVsOagvOW8j1xyXG4gICAgICAgIGVsc2UgaWYgKGNvbW1hbmRUeXBlID09PSAncmVtb3ZlJyAmJiBwYXJhbXMubGVuZ3RoID49IDEpXHJcbiAgICAgICAgICAgIGlzVmFsaWQgPSB0cnVlOyAvLyBfLnJlbW92ZSDoh7PlsJHpnIDopoHot6/lvoRcclxuICAgICAgICBlbHNlIGlmIChjb21tYW5kVHlwZSA9PT0gJ3Vuc2V0JyAmJiBwYXJhbXMubGVuZ3RoID49IDEpXHJcbiAgICAgICAgICAgIGlzVmFsaWQgPSB0cnVlOyAvLyBfLnVuc2V0IOiHs+WwkemcgOimgei3r+W+hFxyXG4gICAgICAgIGVsc2UgaWYgKGNvbW1hbmRUeXBlID09PSAnZGVsZXRlJyAmJiBwYXJhbXMubGVuZ3RoID49IDEpXHJcbiAgICAgICAgICAgIGlzVmFsaWQgPSB0cnVlOyAvLyBfLmRlbGV0ZSDoh7PlsJHpnIDopoHot6/lvoRcclxuICAgICAgICBlbHNlIGlmIChjb21tYW5kVHlwZSA9PT0gJ2FkZCcgJiYgLypwYXJhbXMubGVuZ3RoID09PSAxIHx8ICovIHBhcmFtcy5sZW5ndGggPT09IDIpXHJcbiAgICAgICAgICAgIGlzVmFsaWQgPSB0cnVlOyAvLyBfLmFkZCDpnIDopoEx5Liq5oiWMuS4quWPguaVsFxyXG5cclxuICAgICAgICBpZiAoaXNWYWxpZCkge1xyXG4gICAgICAgICAgICAvLyDlkb3ku6TmnInmlYjvvIzmt7vliqDliLDnu5PmnpzliJfooajvvIzljIXlkKvlkb3ku6TnsbvlnovjgIHlrozmlbTljLnphY3jgIHlj4LmlbDlkozms6jph4pcclxuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHsgY29tbWFuZDogY29tbWFuZFR5cGUsIGZ1bGxNYXRjaCwgYXJnczogcGFyYW1zLCByZWFzb246IGNvbW1lbnQgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDmm7TmlrDmkJzntKLntKLlvJXliLDlkb3ku6TmnKvlsL7vvIznu6fnu63mn6Xmib7kuIvkuIDkuKrlkb3ku6RcclxuICAgICAgICBpID0gZW5kUG9zO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOi/lOWbnuaJgOacieino+aekOWHuueahOacieaViOWRveS7pFxyXG4gICAgcmV0dXJuIHJlc3VsdHM7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDovoXliqnlh73mlbDvvJrmib7liLDljLnphY3nmoTpl63mi6zlj7dcclxuICpcclxuICog566X5rOV6K+05piO77yaXHJcbiAqIDEuIOS9v+eUqOaLrOWPt+iuoeaVsOWZqO+8jOmBh+WIsCAoIOWKoDHvvIzpgYfliLAgKSDlh48xXHJcbiAqIDIuIOW9k+iuoeaVsOWZqOW9kumbtuaXtu+8jOaJvuWIsOS6huWMuemFjeeahOmXreaLrOWPt1xyXG4gKiAzLiDph43opoHvvJrlv73nlaXlvJXlj7flhoXnmoTmi6zlj7fvvIzpgb/lhY3lrZfnrKbkuLLlhoXlrrnlubLmibDljLnphY1cclxuICpcclxuICogQHBhcmFtIHN0ciDopoHmkJzntKLnmoTlrZfnrKbkuLJcclxuICogQHBhcmFtIHN0YXJ0UG9zIOW8gOWni+aLrOWPt+eahOS9jee9rlxyXG4gKiBAcmV0dXJucyDljLnphY3nmoTpl63mi6zlj7fkvY3nva7vvIzlpoLmnpzmib7kuI3liLDov5Tlm54gLTFcclxuICovXHJcbmZ1bmN0aW9uIGZpbmRNYXRjaGluZ0Nsb3NlUGFyZW4oc3RyOiBzdHJpbmcsIHN0YXJ0UG9zOiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgbGV0IHBhcmVuQ291bnQgPSAxOyAvLyDku44x5byA5aeL77yM5Zug5Li65bey57uP5pyJ5LiA5Liq5byA5ous5Y+3XHJcbiAgICBsZXQgaW5RdW90ZSA9IGZhbHNlO1xyXG4gICAgbGV0IHF1b3RlQ2hhciA9ICcnO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSBzdGFydFBvczsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IGNoYXIgPSBzdHJbaV07XHJcbiAgICAgICAgY29uc3QgcHJldkNoYXIgPSBpID4gMCA/IHN0cltpIC0gMV0gOiAnJztcclxuXHJcbiAgICAgICAgLy8g5aSE55CG5byV5Y+354q25oCBXHJcbiAgICAgICAgLy8g5pSv5oyB5LiJ56eN5byV5Y+377ya5Y+M5byV5Y+344CB5Y2V5byV5Y+35ZKM5Y+N5byV5Y+377yI5qih5p2/5a2X56ym5Liy77yJXHJcbiAgICAgICAgLy8g5rOo5oSP77ya6ZyA6KaB5qOA5p+l5YmN5LiA5Liq5a2X56ym5LiN5piv5Y+N5pac5p2g77yM5Lul5q2j56Gu5aSE55CG6L2s5LmJ55qE5byV5Y+3XHJcbiAgICAgICAgaWYgKChjaGFyID09PSAnXCInIHx8IGNoYXIgPT09IFwiJ1wiIHx8IGNoYXIgPT09ICdgJykgJiYgcHJldkNoYXIgIT09ICdcXFxcJykge1xyXG4gICAgICAgICAgICBpZiAoIWluUXVvdGUpIHtcclxuICAgICAgICAgICAgICAgIGluUXVvdGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcXVvdGVDaGFyID0gY2hhcjtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChjaGFyID09PSBxdW90ZUNoYXIpIHtcclxuICAgICAgICAgICAgICAgIGluUXVvdGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8g5Y+q5Zyo5LiN5Zyo5byV5Y+35YaF5pe26K6h566X5ous5Y+3XHJcbiAgICAgICAgLy8g6L+Z56Gu5L+d5LqG5YOPIFwidGV4dCB3aXRoIClcIiDov5nmoLfnmoTlrZfnrKbkuLLkuI3kvJrlvbHlk43mi6zlj7fljLnphY1cclxuICAgICAgICBpZiAoIWluUXVvdGUpIHtcclxuICAgICAgICAgICAgaWYgKGNoYXIgPT09ICcoJykge1xyXG4gICAgICAgICAgICAgICAgcGFyZW5Db3VudCsrO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNoYXIgPT09ICcpJykge1xyXG4gICAgICAgICAgICAgICAgcGFyZW5Db3VudC0tO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBhcmVuQ291bnQgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gLTE7IC8vIOayoeacieaJvuWIsOWMuemFjeeahOmXreaLrOWPt1xyXG59XHJcblxyXG4vLyDop6PmnpDlj4LmlbDlrZfnrKbkuLLvvIzlpITnkIbltYzlpZfnu5PmnoRcclxuLy8g5aKe5Yqg5LqG5a+55ZyG5ous5Y+355qE5bGC57qn6K6h5pWw44CCXHJcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVBhcmFtZXRlcnMocGFyYW1zU3RyaW5nOiBzdHJpbmcpOiBzdHJpbmdbXSB7XHJcbiAgICBjb25zdCBwYXJhbXM6IHN0cmluZ1tdID0gW107XHJcbiAgICBsZXQgY3VycmVudFBhcmFtID0gJyc7XHJcbiAgICBsZXQgaW5RdW90ZSA9IGZhbHNlO1xyXG4gICAgbGV0IHF1b3RlQ2hhciA9ICcnO1xyXG4gICAgbGV0IGJyYWNrZXRDb3VudCA9IDA7XHJcbiAgICBsZXQgYnJhY2VDb3VudCA9IDA7XHJcbiAgICBsZXQgcGFyZW5Db3VudCA9IDA7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJhbXNTdHJpbmcubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBjaGFyID0gcGFyYW1zU3RyaW5nW2ldO1xyXG5cclxuICAgICAgICAvLyDlpITnkIblvJXlj7fvvIjljIXmi6zlj43lvJXlj7fvvIlcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIChjaGFyID09PSAnXCInIHx8IGNoYXIgPT09IFwiJ1wiIHx8IGNoYXIgPT09ICdgJykgJiZcclxuICAgICAgICAgICAgKGkgPT09IDAgfHwgcGFyYW1zU3RyaW5nW2kgLSAxXSAhPT0gJ1xcXFwnKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICBpZiAoIWluUXVvdGUpIHtcclxuICAgICAgICAgICAgICAgIGluUXVvdGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcXVvdGVDaGFyID0gY2hhcjtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChjaGFyID09PSBxdW90ZUNoYXIpIHtcclxuICAgICAgICAgICAgICAgIGluUXVvdGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFpblF1b3RlKSB7XHJcbiAgICAgICAgICAgIC8vIOWkhOeQhuWchuaLrOWPtyAo5Ye95pWw6LCD55So44CB5pWw5a2m6L+Q566X562JKVxyXG4gICAgICAgICAgICBpZiAoY2hhciA9PT0gJygnKSBwYXJlbkNvdW50Kys7XHJcbiAgICAgICAgICAgIGlmIChjaGFyID09PSAnKScpIHBhcmVuQ291bnQtLTtcclxuXHJcbiAgICAgICAgICAgIC8vIOWkhOeQhuaWueaLrOWPtyAo5pWw57uEKVxyXG4gICAgICAgICAgICBpZiAoY2hhciA9PT0gJ1snKSBicmFja2V0Q291bnQrKztcclxuICAgICAgICAgICAgaWYgKGNoYXIgPT09ICddJykgYnJhY2tldENvdW50LS07XHJcblxyXG4gICAgICAgICAgICAvLyDlpITnkIboirHmi6zlj7cgKOWvueixoSlcclxuICAgICAgICAgICAgaWYgKGNoYXIgPT09ICd7JykgYnJhY2VDb3VudCsrO1xyXG4gICAgICAgICAgICBpZiAoY2hhciA9PT0gJ30nKSBicmFjZUNvdW50LS07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOWkhOeQhuWPguaVsOWIhumalOesplxyXG4gICAgICAgIC8vIOeOsOWcqOWPquacieW9k+aJgOacieaLrOWPt+mDveWMuemFjemXreWQiOaXtu+8jOmAl+WPt+aJjeiiq+inhuS4uuWIhumalOesplxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgY2hhciA9PT0gJywnICYmXHJcbiAgICAgICAgICAgICFpblF1b3RlICYmXHJcbiAgICAgICAgICAgIHBhcmVuQ291bnQgPT09IDAgJiZcclxuICAgICAgICAgICAgYnJhY2tldENvdW50ID09PSAwICYmXHJcbiAgICAgICAgICAgIGJyYWNlQ291bnQgPT09IDBcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgcGFyYW1zLnB1c2goY3VycmVudFBhcmFtLnRyaW0oKSk7XHJcbiAgICAgICAgICAgIGN1cnJlbnRQYXJhbSA9ICcnO1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGN1cnJlbnRQYXJhbSArPSBjaGFyO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOa3u+WKoOacgOWQjuS4gOS4quWPguaVsFxyXG4gICAgaWYgKGN1cnJlbnRQYXJhbS50cmltKCkpIHtcclxuICAgICAgICBwYXJhbXMucHVzaChjdXJyZW50UGFyYW0udHJpbSgpKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcGFyYW1zO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0TGFzdFZhbGlkVmFyaWFibGUobWVzc2FnZV9pZDogbnVtYmVyKTogUHJvbWlzZTxNdnVEYXRhPiB7XHJcbiAgICByZXR1cm4gKHN0cnVjdHVyZWRDbG9uZShcclxuICAgICAgICBfKFNpbGx5VGF2ZXJuLmNoYXQpXHJcbiAgICAgICAgICAgIC5zbGljZSgwLCBtZXNzYWdlX2lkICsgMSlcclxuICAgICAgICAgICAgLm1hcChjaGF0X21lc3NhZ2UgPT4gXy5nZXQoY2hhdF9tZXNzYWdlLCBbJ3ZhcmlhYmxlcycsIGNoYXRfbWVzc2FnZS5zd2lwZV9pZCA/PyAwXSkpXHJcbiAgICAgICAgICAgIC5maW5kTGFzdCh2YXJpYWJsZXMgPT4gXy5oYXModmFyaWFibGVzLCAnc3RhdF9kYXRhJykpXHJcbiAgICApID8/IGdldFZhcmlhYmxlcygpKSBhcyBNdnVEYXRhO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwYXRoRml4KHBhdGg6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICBjb25zdCBzZWdtZW50cyA9IFtdO1xyXG4gICAgbGV0IGN1cnJlbnRTZWdtZW50ID0gJyc7XHJcbiAgICBsZXQgaW5RdW90ZXMgPSBmYWxzZTtcclxuICAgIGxldCBxdW90ZUNoYXIgPSAnJztcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhdGgubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBjaGFyID0gcGF0aFtpXTtcclxuXHJcbiAgICAgICAgLy8gSGFuZGxlIHF1b3Rlc1xyXG4gICAgICAgIGlmICgoY2hhciA9PT0gJ1wiJyB8fCBjaGFyID09PSBcIidcIikgJiYgKGkgPT09IDAgfHwgcGF0aFtpIC0gMV0gIT09ICdcXFxcJykpIHtcclxuICAgICAgICAgICAgaWYgKCFpblF1b3Rlcykge1xyXG4gICAgICAgICAgICAgICAgaW5RdW90ZXMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcXVvdGVDaGFyID0gY2hhcjtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChjaGFyID09PSBxdW90ZUNoYXIpIHtcclxuICAgICAgICAgICAgICAgIGluUXVvdGVzID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50U2VnbWVudCArPSBjaGFyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChjaGFyID09PSAnLicgJiYgIWluUXVvdGVzKSB7XHJcbiAgICAgICAgICAgIHNlZ21lbnRzLnB1c2goY3VycmVudFNlZ21lbnQpO1xyXG4gICAgICAgICAgICBjdXJyZW50U2VnbWVudCA9ICcnO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnRTZWdtZW50ICs9IGNoYXI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChjdXJyZW50U2VnbWVudCkge1xyXG4gICAgICAgIHNlZ21lbnRzLnB1c2goY3VycmVudFNlZ21lbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBzZWdtZW50cy5qb2luKCcuJyk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBNVlUg6aOO5qC855qE5Y+Y6YeP5pu05paw5pON5L2c77yM5ZCM5pe25Lya5pu05pawIGRpc3BsYXlfZGF0YS9kZWx0YV9kYXRhXHJcbiAqIEBwYXJhbSBzdGF0X2RhdGEg5b2T5YmN55qE5Y+Y6YeP54q25oCB77yM5p2l5rqQ5bqU5b2T5pivIG1hZ192YXJpYWJsZV91cGRhdGVkIOWbnuiwg+S4reaPkOS+m+eahCBzdGF0X2RhdGHjgILlhbbku5bmnaXmupDliJnkuI3kvJrkv67mlLkgZGlzcGxheV9kYXRhIOetieOAglxyXG4gKiBAcGFyYW0gcGF0aCDopoHmm7TmlLnnmoTlj5jph4/ot6/lvoRcclxuICogQHBhcmFtIG5ld192YWx1ZSDmlrDlgLxcclxuICogQHBhcmFtIHJlYXNvbiDkv67mlLnljp/lm6DvvIjlj6/pgInvvIzpu5jorqTkuLrnqbrvvIlcclxuICogQHBhcmFtIGlzX3JlY3Vyc2l2ZSDmraTmrKHkv67mlLnmmK/lkKblhYHorrjop6blj5EgbWFnX3ZhcmlhYmxlX3VwZGF0ZWQg5Zue6LCD77yI6buY6K6k5LiN5YWB6K6477yJXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlVmFyaWFibGUoXHJcbiAgICBzdGF0X2RhdGE6IFJlY29yZDxzdHJpbmcsIGFueT4sXHJcbiAgICBwYXRoOiBzdHJpbmcsXHJcbiAgICBuZXdfdmFsdWU6IGFueSxcclxuICAgIHJlYXNvbjogc3RyaW5nID0gJycsXHJcbiAgICBpc19yZWN1cnNpdmU6IGJvb2xlYW4gPSBmYWxzZVxyXG4pOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgIGNvbnN0IGRpc3BsYXlfZGF0YSA9IHN0YXRfZGF0YS4kaW50ZXJuYWw/LmRpc3BsYXlfZGF0YTtcclxuICAgIGNvbnN0IGRlbHRhX2RhdGEgPSBzdGF0X2RhdGEuJGludGVybmFsPy5kZWx0YV9kYXRhO1xyXG4gICAgaWYgKF8uaGFzKHN0YXRfZGF0YSwgcGF0aCkpIHtcclxuICAgICAgICBjb25zdCBjdXJyZW50VmFsdWUgPSBfLmdldChzdGF0X2RhdGEsIHBhdGgpO1xyXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGN1cnJlbnRWYWx1ZSkgJiYgY3VycmVudFZhbHVlLmxlbmd0aCA9PT0gMikge1xyXG4gICAgICAgICAgICAvL1ZXRCDlpITnkIZcclxuICAgICAgICAgICAgY29uc3Qgb2xkVmFsdWUgPSBfLmNsb25lRGVlcChjdXJyZW50VmFsdWVbMF0pO1xyXG4gICAgICAgICAgICBjdXJyZW50VmFsdWVbMF0gPSBuZXdfdmFsdWU7XHJcbiAgICAgICAgICAgIF8uc2V0KHN0YXRfZGF0YSwgcGF0aCwgY3VycmVudFZhbHVlKTtcclxuICAgICAgICAgICAgY29uc3QgcmVhc29uX3N0ciA9IHJlYXNvbiA/IGAoJHtyZWFzb259KWAgOiAnJztcclxuICAgICAgICAgICAgY29uc3QgZGlzcGxheV9zdHIgPSBgJHt0cmltUXVvdGVzQW5kQmFja3NsYXNoZXMoSlNPTi5zdHJpbmdpZnkob2xkVmFsdWUpKX0tPiR7dHJpbVF1b3Rlc0FuZEJhY2tzbGFzaGVzKEpTT04uc3RyaW5naWZ5KG5ld192YWx1ZSkpfSAke3JlYXNvbl9zdHJ9YDtcclxuICAgICAgICAgICAgaWYgKGRpc3BsYXlfZGF0YSkgXy5zZXQoZGlzcGxheV9kYXRhLCBwYXRoLCBkaXNwbGF5X3N0cik7XHJcbiAgICAgICAgICAgIGlmIChkZWx0YV9kYXRhKSBfLnNldChkZWx0YV9kYXRhLCBwYXRoLCBkaXNwbGF5X3N0cik7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuaW5mbyhcclxuICAgICAgICAgICAgICAgIGBTZXQgJyR7cGF0aH0nIHRvICcke3RyaW1RdW90ZXNBbmRCYWNrc2xhc2hlcyhKU09OLnN0cmluZ2lmeShuZXdfdmFsdWUpKX0nICR7cmVhc29uX3N0cn1gXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGlmIChpc19yZWN1cnNpdmUpXHJcbiAgICAgICAgICAgICAgICBhd2FpdCBldmVudEVtaXQoXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVfZXZlbnRzLlNJTkdMRV9WQVJJQUJMRV9VUERBVEVELFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXRfZGF0YSxcclxuICAgICAgICAgICAgICAgICAgICBwYXRoLFxyXG4gICAgICAgICAgICAgICAgICAgIG9sZFZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgIG5ld192YWx1ZVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3Qgb2xkVmFsdWUgPSBfLmNsb25lRGVlcChjdXJyZW50VmFsdWUpO1xyXG4gICAgICAgICAgICBfLnNldChzdGF0X2RhdGEsIHBhdGgsIG5ld192YWx1ZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlYXNvbl9zdHIgPSByZWFzb24gPyBgKCR7cmVhc29ufSlgIDogJyc7XHJcbiAgICAgICAgICAgIGNvbnN0IHN0cmluZ05ld1ZhbHVlID0gdHJpbVF1b3Rlc0FuZEJhY2tzbGFzaGVzKEpTT04uc3RyaW5naWZ5KG5ld192YWx1ZSkpO1xyXG4gICAgICAgICAgICBjb25zdCBkaXNwbGF5X3N0ciA9IGAke3RyaW1RdW90ZXNBbmRCYWNrc2xhc2hlcyhKU09OLnN0cmluZ2lmeShvbGRWYWx1ZSkpfS0+JHtzdHJpbmdOZXdWYWx1ZX0gJHtyZWFzb25fc3RyfWA7XHJcbiAgICAgICAgICAgIGlmIChkaXNwbGF5X2RhdGEpIF8uc2V0KGRpc3BsYXlfZGF0YSwgcGF0aCwgZGlzcGxheV9zdHIpO1xyXG4gICAgICAgICAgICBpZiAoZGVsdGFfZGF0YSkgXy5zZXQoZGVsdGFfZGF0YSwgcGF0aCwgZGlzcGxheV9zdHIpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmluZm8oYFNldCAnJHtwYXRofScgdG8gJyR7c3RyaW5nTmV3VmFsdWV9JyAke3JlYXNvbl9zdHJ9YCk7XHJcbiAgICAgICAgICAgIGlmIChpc19yZWN1cnNpdmUpXHJcbiAgICAgICAgICAgICAgICBhd2FpdCBldmVudEVtaXQoXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVfZXZlbnRzLlNJTkdMRV9WQVJJQUJMRV9VUERBVEVELFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXRfZGF0YSxcclxuICAgICAgICAgICAgICAgICAgICBwYXRoLFxyXG4gICAgICAgICAgICAgICAgICAgIG9sZFZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgIG5ld192YWx1ZVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59XHJcblxyXG50eXBlIEVycm9ySW5mbyA9IHtcclxuICAgIGVycm9yX2xhc3Q6IHN0cmluZztcclxuICAgIGVycm9yX2NvbW1hbmQ6IENvbW1hbmQ7XHJcbn07XHJcblxyXG4vLyDph43mnoQgdXBkYXRlVmFyaWFibGVzIOS7peWkhOeQhuabtOWkmuWRveS7pFxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlVmFyaWFibGVzKFxyXG4gICAgY3VycmVudF9tZXNzYWdlX2NvbnRlbnQ6IHN0cmluZyxcclxuICAgIHZhcmlhYmxlczogTXZ1RGF0YVxyXG4pOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgIGNvbnN0IG91dF9pc19tb2RpZmVkID0gZmFsc2U7XHJcbiAgICAvLyDmt7Hmi7fotJ3lj5jph4/lr7nosaHvvIznlJ/miJDnirbmgIHlv6vnhafvvIznlKjkuo7orrDlvZXmmL7npLrmlbDmja5cclxuICAgIGNvbnN0IG91dF9zdGF0dXM6IE12dURhdGEgPSBfLmNsb25lRGVlcCh2YXJpYWJsZXMpO1xyXG4gICAgLy8g5Yid5aeL5YyW5aKe6YeP54q25oCB5a+56LGh77yM6K6w5b2V5Y+Y5YyW6K+m5oOFXHJcbiAgICBjb25zdCBkZWx0YV9zdGF0dXM6IFBhcnRpYWw8TXZ1RGF0YT4gPSB7IHN0YXRfZGF0YToge30gfTtcclxuXHJcbiAgICAvLyDph43mnoTmlrDlop7vvJrnu5/kuIDlpITnkIblro/mm7/mjaLvvIznoa7kv53lkb3ku6TkuK3nmoTlro/vvIjlpoIgJHt2YXJpYWJsZX3vvInooqvmm7/mjaLvvIzmj5DljYfkuIDoh7TmgKdcclxuICAgIGNvbnN0IHByb2Nlc3NlZF9tZXNzYWdlX2NvbnRlbnQgPSBzdWJzdGl0dWRlTWFjcm9zKGN1cnJlbnRfbWVzc2FnZV9jb250ZW50KTtcclxuXHJcbiAgICAvLyDkvb/nlKjph43mnoTlkI7nmoQgZXh0cmFjdENvbW1hbmRzIOaPkOWPluaJgOacieWRveS7pFxyXG4gICAgY29uc3QgY29tbWFuZHMgPSBleHRyYWN0Q29tbWFuZHMocHJvY2Vzc2VkX21lc3NhZ2VfY29udGVudCk7XHJcbiAgICAvLyDop6blj5Hlj5jph4/mm7TmlrDlvIDlp4vkuovku7bvvIzpgJrnn6XlpJbpg6jns7vnu59cclxuICAgIHZhcmlhYmxlcy5zdGF0X2RhdGEuJGludGVybmFsID0ge1xyXG4gICAgICAgIGRpc3BsYXlfZGF0YTogb3V0X3N0YXR1cy5zdGF0X2RhdGEsXHJcbiAgICAgICAgZGVsdGFfZGF0YTogZGVsdGFfc3RhdHVzLnN0YXRfZGF0YSB8fCB7fSxcclxuICAgIH07XHJcbiAgICBhd2FpdCBldmVudEVtaXQodmFyaWFibGVfZXZlbnRzLlZBUklBQkxFX1VQREFURV9TVEFSVEVELCB2YXJpYWJsZXMpO1xyXG4gICAgbGV0IHZhcmlhYmxlX21vZGlmaWVkID0gZmFsc2U7XHJcblxyXG4gICAgbGV0IGVycm9yX2luZm86IEVycm9ySW5mbyB8IHVuZGVmaW5lZDtcclxuICAgIGxldCBjdXJyZW50X2NvbW1hbmQ6IENvbW1hbmQgfCB1bmRlZmluZWQ7XHJcbiAgICBjb25zdCBvdXRFcnJvciA9IGZ1bmN0aW9uIChtZXNzYWdlOiBzdHJpbmcpIHtcclxuICAgICAgICBjb25zb2xlLndhcm4obWVzc2FnZSk7XHJcbiAgICAgICAgZXJyb3JfaW5mbyA9IHtcclxuICAgICAgICAgICAgZXJyb3JfbGFzdDogbWVzc2FnZSxcclxuICAgICAgICAgICAgZXJyb3JfY29tbWFuZDogY3VycmVudF9jb21tYW5kISxcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBzY2hlbWEgPSB2YXJpYWJsZXMuc2NoZW1hOyAvLyDojrflj5Ygc2NoZW1h77yM5Y+v6IO95Li6IHVuZGVmaW5lZFxyXG4gICAgY29uc3Qgc3RyaWN0X3RlbXBsYXRlID0gc2NoZW1hPy5zdHJpY3RUZW1wbGF0ZSA/PyBmYWxzZTtcclxuICAgIGNvbnN0IGNvbmNhdF90ZW1wbGF0ZV9hcnJheSA9IHNjaGVtYT8uY29uY2F0VGVtcGxhdGVBcnJheSA/PyB0cnVlO1xyXG4gICAgY29uc3Qgc3RyaWN0X3NldCA9IHNjaGVtYT8uc3RyaWN0U2V0ID8/IGZhbHNlO1xyXG5cclxuICAgIGZvciAoY29uc3QgY29tbWFuZCBvZiBjb21tYW5kcykge1xyXG4gICAgICAgIC8vIOmBjeWOhuaJgOacieWRveS7pO+8jOmAkOS4gOWkhOeQhlxyXG4gICAgICAgIC8vIOS/ruato+i3r+W+hOagvOW8j++8jOWOu+mZpOmmluWwvuW8leWPt+WSjOWPjeaWnOadoO+8jOehruS/nei3r+W+hOacieaViFxyXG4gICAgICAgIGNvbnN0IHBhdGggPSBwYXRoRml4KHRyaW1RdW90ZXNBbmRCYWNrc2xhc2hlcyhjb21tYW5kLmFyZ3NbMF0pKTtcclxuICAgICAgICAvLyDnlJ/miJDljp/lm6DlrZfnrKbkuLLvvIznlKjkuo7ml6Xlv5flkozmmL7npLpcclxuICAgICAgICBjb25zdCByZWFzb25fc3RyID0gY29tbWFuZC5yZWFzb24gPyBgKCR7Y29tbWFuZC5yZWFzb259KWAgOiAnJztcclxuICAgICAgICBsZXQgZGlzcGxheV9zdHIgPSAnJzsgLy8g5Yid5aeL5YyW5pi+56S65a2X56ym5Liy77yM6K6w5b2V5pON5L2c6K+m5oOFXHJcbiAgICAgICAgY3VycmVudF9jb21tYW5kID0gY29tbWFuZDtcclxuXHJcbiAgICAgICAgc3dpdGNoIChcclxuICAgICAgICAgICAgY29tbWFuZC5jb21tYW5kIC8vIOagueaNruWRveS7pOexu+Wei+aJp+ihjOS4jeWQjOaTjeS9nFxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICBjYXNlICdzZXQnOiB7XHJcbiAgICAgICAgICAgICAgICAvLyBfLmhhcyDmo4Dmn6XvvIznoa7kv53ot6/lvoTlrZjlnKhcclxuICAgICAgICAgICAgICAgIGlmICghXy5oYXModmFyaWFibGVzLnN0YXRfZGF0YSwgcGF0aCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBvdXRFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgYFBhdGggJyR7cGF0aH0nIGRvZXMgbm90IGV4aXN0IGluIHN0YXRfZGF0YSwgc2tpcHBpbmcgc2V0IGNvbW1hbmQgJHtyZWFzb25fc3RyfWBcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIOiOt+WPlui3r+W+hOS4iueahOaXp+WAvO+8jOWPr+iDveS4uiB1bmRlZmluZWTvvIjot6/lvoTkuI3lrZjlnKjvvIlcclxuICAgICAgICAgICAgICAgIGxldCBvbGRWYWx1ZSA9IF8uZ2V0KHZhcmlhYmxlcy5zdGF0X2RhdGEsIHBhdGgpO1xyXG4gICAgICAgICAgICAgICAgLy8g5pSv5oyB5Lik56eN5qC85byP77yaXy5zZXQocGF0aCwgbmV3VmFsdWUpIOaIliBfLnNldChwYXRoLCBvbGRWYWx1ZSwgbmV3VmFsdWUpXHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdWYWx1ZVN0ciA9IGNvbW1hbmQuYXJncy5sZW5ndGggPj0gMyA/IGNvbW1hbmQuYXJnc1syXSA6IGNvbW1hbmQuYXJnc1sxXTtcclxuICAgICAgICAgICAgICAgIC8vIOino+aekOaWsOWAvO+8jOaUr+aMgeWtl+espuS4suOAgeaVsOWtl+OAgeW4g+WwlOWAvOOAgUpTT04g5a+56LGh562JXHJcbiAgICAgICAgICAgICAgICBsZXQgbmV3VmFsdWUgPSBwYXJzZUNvbW1hbmRWYWx1ZShuZXdWYWx1ZVN0cik7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8g5Zyo5YaZ5YWl5YmN77yM5bCGIERhdGUg5a+56LGh5bqP5YiX5YyW5Li6IElTTyDlrZfnrKbkuLJcclxuICAgICAgICAgICAgICAgIGlmIChuZXdWYWx1ZSBpbnN0YW5jZW9mIERhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZSA9IG5ld1ZhbHVlLnRvSVNPU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBsZXQgaXNQYXRoVldEID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgICAgICFzdHJpY3Rfc2V0ICYmXHJcbiAgICAgICAgICAgICAgICAgICAgQXJyYXkuaXNBcnJheShvbGRWYWx1ZSkgJiZcclxuICAgICAgICAgICAgICAgICAgICBvbGRWYWx1ZS5sZW5ndGggPT09IDIgJiZcclxuICAgICAgICAgICAgICAgICAgICB0eXBlb2Ygb2xkVmFsdWVbMV0gPT09ICdzdHJpbmcnICYmXHJcbiAgICAgICAgICAgICAgICAgICAgIUFycmF5LmlzQXJyYXkob2xkVmFsdWVbMF0pXHJcbiAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyDlpITnkIYgVmFsdWVXaXRoRGVzY3JpcHRpb248VD4g57G75Z6L77yM5pu05paw5pWw57uE56ys5LiA5Liq5YWD57SgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5LuF5b2T5pen5YC85Li65pWw5a2X5LiU5paw5YC85LiN5Li6IG51bGwg5pe277yM5omN5by65Yi26L2s5o2i5Li65pWw5a2XXHJcbiAgICAgICAgICAgICAgICAgICAgLy8g6L+Z5YWB6K645bCG5pWw5a2X5a2X5q616K6+572u5Li6IG51bGwgKOS+i+WmguinkuiJsuatu+S6oeWQjuWlveaEn+W6puWPmOS4uiBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9sZFZhbHVlQ29weSA9IF8uY2xvbmVEZWVwKG9sZFZhbHVlWzBdKTtcclxuICAgICAgICAgICAgICAgICAgICBvbGRWYWx1ZVswXSA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVvZiBvbGRWYWx1ZVswXSA9PT0gJ251bWJlcicgJiYgbmV3VmFsdWUgIT09IG51bGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gTnVtYmVyKG5ld1ZhbHVlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBuZXdWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBvbGRWYWx1ZSA9IG9sZFZhbHVlQ29weTtcclxuICAgICAgICAgICAgICAgICAgICBpc1BhdGhWV0QgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygb2xkVmFsdWUgPT09ICdudW1iZXInICYmIG5ld1ZhbHVlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgXy5zZXQodmFyaWFibGVzLnN0YXRfZGF0YSwgcGF0aCwgTnVtYmVyKG5ld1ZhbHVlKSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOWFtuS7luaDheWGteebtOaOpeiuvue9ruaWsOWAvO+8jOaUr+aMgeS7u+aEj+exu+Wei1xyXG4gICAgICAgICAgICAgICAgICAgIF8uc2V0KHZhcmlhYmxlcy5zdGF0X2RhdGEsIHBhdGgsIG5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyDojrflj5bmnIDnu4jorr7nva7nmoTmlrDlgLzvvIznlKjkuo7ml6Xlv5flkozkuovku7ZcclxuICAgICAgICAgICAgICAgIGxldCBmaW5hbE5ld1ZhbHVlID0gXy5nZXQodmFyaWFibGVzLnN0YXRfZGF0YSwgcGF0aCk7XHJcblxyXG4gICAgICAgICAgICAgICAgYXNzZXJ0VldEKGlzUGF0aFZXRCwgZmluYWxOZXdWYWx1ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGlzUGF0aFZXRCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZpbmFsTmV3VmFsdWUgPSBmaW5hbE5ld1ZhbHVlWzBdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIOajgOafpeaYr+WQpuS4uiBWYWx1ZVdpdGhEZXNjcmlwdGlvbiDnsbvlnovvvIzku6XkvJjljJbmmL7npLpcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlzU3RyaWN0ID0gIXN0cmljdF9zZXQ7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgICAgIGlzU3RyaWN0ICYmXHJcbiAgICAgICAgICAgICAgICAgICAgaXNWYWx1ZVdpdGhEZXNjcmlwdGlvblN0YXREYXRhKG9sZFZhbHVlKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgIEFycmF5LmlzQXJyYXkoZmluYWxOZXdWYWx1ZSlcclxuICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOWmguaenOaYryBWYWx1ZVdpdGhEZXNjcmlwdGlvbu+8jOWPquaYvuekuuWAvOeahOWPmOWMllxyXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXlfc3RyID0gYCR7dHJpbVF1b3Rlc0FuZEJhY2tzbGFzaGVzKEpTT04uc3RyaW5naWZ5KG9sZFZhbHVlWzBdKSl9LT4ke3RyaW1RdW90ZXNBbmRCYWNrc2xhc2hlcyhKU09OLnN0cmluZ2lmeShmaW5hbE5ld1ZhbHVlWzBdKSl9ICR7cmVhc29uX3N0cn1gO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyDlkKbliJnvvIzmjInluLjop4TmmL7npLpcclxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5X3N0ciA9IGAke3RyaW1RdW90ZXNBbmRCYWNrc2xhc2hlcyhKU09OLnN0cmluZ2lmeShvbGRWYWx1ZSkpfS0+JHt0cmltUXVvdGVzQW5kQmFja3NsYXNoZXMoSlNPTi5zdHJpbmdpZnkoZmluYWxOZXdWYWx1ZSkpfSAke3JlYXNvbl9zdHJ9YDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXJpYWJsZV9tb2RpZmllZCA9IHRydWU7IC8vIOagh+iusOWPmOmHj+W3suS/ruaUuVxyXG4gICAgICAgICAgICAgICAgLy8g6K6w5b2V5pON5L2c5pel5b+X77yM5L6/5LqO6LCD6K+VXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmluZm8oYFNldCAnJHtwYXRofScgdG8gJyR7SlNPTi5zdHJpbmdpZnkoZmluYWxOZXdWYWx1ZSl9JyAke3JlYXNvbl9zdHJ9YCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8g6Kem5Y+R5Y2V5Y+Y6YeP5pu05paw5LqL5Lu277yM6YCa55+l5aSW6YOo57O757ufXHJcbiAgICAgICAgICAgICAgICBhd2FpdCBldmVudEVtaXQoXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVfZXZlbnRzLlNJTkdMRV9WQVJJQUJMRV9VUERBVEVELFxyXG4gICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlcy5zdGF0X2RhdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgcGF0aCxcclxuICAgICAgICAgICAgICAgICAgICBvbGRWYWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICBmaW5hbE5ld1ZhbHVlXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNhc2UgJ2luc2VydCc6XHJcbiAgICAgICAgICAgIGNhc2UgJ2Fzc2lnbic6IHtcclxuICAgICAgICAgICAgICAgIC8vIOajgOafpeebruagh+i3r+W+hOaYr+WQpuaMh+WQkeS4gOS4qumbhuWQiO+8iOaVsOe7hOaIluWvueixoe+8iVxyXG4gICAgICAgICAgICAgICAgLy8g5aaC5p6c6Lev5b6E5bey5a2Y5Zyo5LiU5YW25YC85Li65Y6f5aeL57G75Z6L77yI5a2X56ym5Liy44CB5pWw5a2X562J77yJ77yM5YiZ6Lez6L+H5q2k5ZG95Luk77yM5Lul6Ziy5q2i57uT5p6E5rGh5p+TXHJcbiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRQYXRoID0gcGF0aDtcclxuICAgICAgICAgICAgICAgIC8vIOe7n+S4gOiOt+WPluebruagh+WAvOWSjOebruagh1NjaGVtYe+8jOS8mOmbheWcsOWkhOeQhuaguei3r+W+hFxyXG4gICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdWYWx1ZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0UGF0aCA9PT0gJydcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyB2YXJpYWJsZXMuc3RhdF9kYXRhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogXy5nZXQodmFyaWFibGVzLnN0YXRfZGF0YSwgdGFyZ2V0UGF0aCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRTY2hlbWEgPSBnZXRTY2hlbWFGb3JQYXRoKHNjaGVtYSwgdGFyZ2V0UGF0aCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8g6aqM6K+BMe+8muebruagh+aYr+WQpuS4uuWOn+Wni+exu+Wei++8n+WmguaenOaYr++8jOWImeaXoOazleaPkuWFpeOAglxyXG4gICAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nVmFsdWUgIT09IG51bGwgJiZcclxuICAgICAgICAgICAgICAgICAgICAhQXJyYXkuaXNBcnJheShleGlzdGluZ1ZhbHVlKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICFfLmlzT2JqZWN0KGV4aXN0aW5nVmFsdWUpXHJcbiAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgICBvdXRFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgYENhbm5vdCBhc3NpZ24gaW50byBwYXRoICcke3RhcmdldFBhdGh9JyBiZWNhdXNlIGl0IGhvbGRzIGEgcHJpbWl0aXZlIHZhbHVlICgke3R5cGVvZiBleGlzdGluZ1ZhbHVlfSkuIE9wZXJhdGlvbiBza2lwcGVkLiAke3JlYXNvbl9zdHJ9YFxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8g6aqM6K+BMu+8mlNjaGVtYSDop4TliJlcclxuICAgICAgICAgICAgICAgIGlmICh0YXJnZXRTY2hlbWEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0U2NoZW1hLnR5cGUgPT09ICdvYmplY3QnICYmIHRhcmdldFNjaGVtYS5leHRlbnNpYmxlID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29tbWFuZC5hcmdzLmxlbmd0aCA9PT0gMikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5ZCI5bm2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgU0NIRU1BIFZJT0xBVElPTjogQ2Fubm90IG1lcmdlIGRhdGEgaW50byBub24tZXh0ZW5zaWJsZSBvYmplY3QgYXQgcGF0aCAnJHt0YXJnZXRQYXRofScuICR7cmVhc29uX3N0cn1gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbW1hbmQuYXJncy5sZW5ndGggPj0gMykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5o+S5YWl6ZSuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdLZXkgPSBTdHJpbmcocGFyc2VDb21tYW5kVmFsdWUoY29tbWFuZC5hcmdzWzFdKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIV8uaGFzKHRhcmdldFNjaGVtYS5wcm9wZXJ0aWVzLCBuZXdLZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0RXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBTQ0hFTUEgVklPTEFUSU9OOiBDYW5ub3QgYXNzaWduIG5ldyBrZXkgJyR7bmV3S2V5fScgaW50byBub24tZXh0ZW5zaWJsZSBvYmplY3QgYXQgcGF0aCAnJHt0YXJnZXRQYXRofScuICR7cmVhc29uX3N0cn1gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFNjaGVtYS50eXBlID09PSAnYXJyYXknICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICh0YXJnZXRTY2hlbWEuZXh0ZW5zaWJsZSA9PT0gZmFsc2UgfHwgdGFyZ2V0U2NoZW1hLmV4dGVuc2libGUgPT09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0RXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgU0NIRU1BIFZJT0xBVElPTjogQ2Fubm90IGFzc2lnbiBlbGVtZW50cyBpbnRvIG5vbi1leHRlbnNpYmxlIGFycmF5IGF0IHBhdGggJyR7dGFyZ2V0UGF0aH0nLiAke3JlYXNvbl9zdHJ9YFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOWinuWKoCB0YXJnZXRQYXRoICE9PSAnJyDmnaHku7bvvIzpmLLmraLlr7nmoLnot6/lvoTov5vooYzniLbot6/lvoTmo4Dmn6VcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRQYXRoICE9PSAnJyAmJlxyXG4gICAgICAgICAgICAgICAgICAgICFfLmdldCh2YXJpYWJsZXMuc3RhdF9kYXRhLCBfLnRvUGF0aCh0YXJnZXRQYXRoKS5zbGljZSgwLCAtMSkuam9pbignLicpKVxyXG4gICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g6aqM6K+BM++8muWmguaenOimgeaPkuWFpeWIsOaWsOi3r+W+hO+8jOehruS/neWFtueItui3r+W+hOWtmOWcqOS4lOWPr+aJqeWxlVxyXG4gICAgICAgICAgICAgICAgICAgIG91dEVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBgQ2Fubm90IGFzc2lnbiBpbnRvIG5vbi1leGlzdGVudCBwYXRoICcke3RhcmdldFBhdGh9JyB3aXRob3V0IGFuIGV4dGVuc2libGUgcGFyZW50LiAke3JlYXNvbl9zdHJ9YFxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyAtLS0g5omA5pyJ6aqM6K+B6YCa6L+H77yM546w5Zyo5Y+v5Lul5a6J5YWo5omn6KGMIC0tLVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIOa3seaLt+i0neaXp+WAvO+8jOmYsuatouebtOaOpeS/ruaUueW9seWTjeWQjue7reavlOi+g1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb2xkVmFsdWUgPSBfLmNsb25lRGVlcChfLmdldCh2YXJpYWJsZXMuc3RhdF9kYXRhLCBwYXRoKSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgc3VjY2Vzc2Z1bCA9IGZhbHNlOyAvLyDmoIforrDmj5LlhaXmmK/lkKbmiJDlip9cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoY29tbWFuZC5hcmdzLmxlbmd0aCA9PT0gMikge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIF8uYXNzaWduKCdwYXRoLnRvLmFycmF5JywgdmFsdWUpXHJcbiAgICAgICAgICAgICAgICAgICAgLy8g6Kej5p6Q5o+S5YWl5YC877yM5pSv5oyB5aSN5p2C57G75Z6LXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHZhbHVlVG9Bc3NpZ24gPSBwYXJzZUNvbW1hbmRWYWx1ZShjb21tYW5kLmFyZ3NbMV0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyDlnKjlhpnlhaXliY3vvIzlsIYgRGF0ZSDlr7nosaHvvIjmiJbmlbDnu4TkuK3nmoREYXRl77yJ5bqP5YiX5YyWXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlVG9Bc3NpZ24gaW5zdGFuY2VvZiBEYXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlVG9Bc3NpZ24gPSB2YWx1ZVRvQXNzaWduLnRvSVNPU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHZhbHVlVG9Bc3NpZ24pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlVG9Bc3NpZ24gPSB2YWx1ZVRvQXNzaWduLm1hcChpdGVtID0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtIGluc3RhbmNlb2YgRGF0ZSA/IGl0ZW0udG9JU09TdHJpbmcoKSA6IGl0ZW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOiOt+WPluebruagh+mbhuWQiO+8jOWPr+iDveS4uuaVsOe7hOaIluWvueixoVxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBjb2xsZWN0aW9uID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0UGF0aCA9PT0gJycgPyB2YXJpYWJsZXMuc3RhdF9kYXRhIDogXy5nZXQodmFyaWFibGVzLnN0YXRfZGF0YSwgcGF0aCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOWmguaenOebruagh+S4jeWtmOWcqO+8jOWIneWni+WMluS4uuepuuaVsOe7hOaIluWvueixoVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShjb2xsZWN0aW9uKSAmJiAhXy5pc09iamVjdChjb2xsZWN0aW9uKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uID0gQXJyYXkuaXNBcnJheSh2YWx1ZVRvQXNzaWduKSA/IFtdIDoge307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF8uc2V0KHZhcmlhYmxlcy5zdGF0X2RhdGEsIHBhdGgsIGNvbGxlY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoY29sbGVjdGlvbikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g55uu5qCH5piv5pWw57uE77yM6L+95Yqg5YWD57SgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOajgOafpeaYr+WQpuacieaooeadv+W5tuW6lOeUqFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRTY2hlbWEgJiYgaXNBcnJheVNjaGVtYSh0YXJnZXRTY2hlbWEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0YXJnZXRTY2hlbWEudGVtcGxhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVUb0Fzc2lnbiA9IGFwcGx5VGVtcGxhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZVRvQXNzaWduLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJpY3RfdGVtcGxhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25jYXRfdGVtcGxhdGVfYXJyYXlcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvbi5wdXNoKHZhbHVlVG9Bc3NpZ24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5X3N0ciA9IGBBU1NJR05FRCAke0pTT04uc3RyaW5naWZ5KHZhbHVlVG9Bc3NpZ24pfSBpbnRvIGFycmF5ICcke3BhdGh9JyAke3JlYXNvbl9zdHJ9YDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2Vzc2Z1bCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChfLmlzT2JqZWN0KGNvbGxlY3Rpb24pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOebruagh+aYr+Wvueixoe+8jOWQiOW5tuWxnuaAp1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDms6jmhI/vvJrlr7nosaHlkIjlubbml7bkuI3lupTnlKjmqKHmnb/vvIzlm6DkuLrml6Dms5XmmI7noa7noa7lrprlop7liqDnmoTlhYPntKBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5qih5p2/5Y+q5Zyo5piO56Gu5re75Yqg5Y2V5Liq5paw5bGe5oCn5pe25bqU55So77yI5aaC5L2/55So5LiJ5Y+C5pWw55qEIGFzc2lnbu+8iVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXy5pc09iamVjdCh2YWx1ZVRvQXNzaWduKSAmJiAhQXJyYXkuaXNBcnJheSh2YWx1ZVRvQXNzaWduKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXy5tZXJnZShjb2xsZWN0aW9uLCB2YWx1ZVRvQXNzaWduKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlfc3RyID0gYE1FUkdFRCBvYmplY3QgJHtKU09OLnN0cmluZ2lmeSh2YWx1ZVRvQXNzaWduKX0gaW50byBvYmplY3QgJyR7cGF0aH0nICR7cmVhc29uX3N0cn1gO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2Vzc2Z1bCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDkuI3mlK/mjIHlsIbmlbDnu4TmiJbpnZ7lr7nosaHlkIjlubbliLDlr7nosaHvvIzorrDlvZXplJnor69cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dEVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBDYW5ub3QgbWVyZ2UgJHtBcnJheS5pc0FycmF5KHZhbHVlVG9Bc3NpZ24pID8gJ2FycmF5JyA6ICdub24tb2JqZWN0J30gaW50byBvYmplY3QgYXQgJyR7cGF0aH0nYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjb21tYW5kLmFyZ3MubGVuZ3RoID49IDMpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBfLmFzc2lnbigncGF0aCcsIGtleS9pbmRleCwgdmFsdWUpXHJcbiAgICAgICAgICAgICAgICAgICAgLy8g6Kej5p6Q5o+S5YWl5YC85ZKM6ZSuL+e0ouW8lVxyXG4gICAgICAgICAgICAgICAgICAgIGxldCB2YWx1ZVRvQXNzaWduID0gcGFyc2VDb21tYW5kVmFsdWUoY29tbWFuZC5hcmdzWzJdKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBrZXlPckluZGV4ID0gcGFyc2VDb21tYW5kVmFsdWUoY29tbWFuZC5hcmdzWzFdKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5Zyo5YaZ5YWl5YmN77yM5bCGIERhdGUg5a+56LGh77yI5oiW5pWw57uE5Lit55qERGF0Ze+8ieW6j+WIl+WMllxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZVRvQXNzaWduIGluc3RhbmNlb2YgRGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZVRvQXNzaWduID0gdmFsdWVUb0Fzc2lnbi50b0lTT1N0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZVRvQXNzaWduKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZVRvQXNzaWduID0gdmFsdWVUb0Fzc2lnbi5tYXAoaXRlbSA9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbSBpbnN0YW5jZW9mIERhdGUgPyBpdGVtLnRvSVNPU3RyaW5nKCkgOiBpdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgY29sbGVjdGlvbiA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFBhdGggPT09ICcnID8gdmFyaWFibGVzLnN0YXRfZGF0YSA6IF8uZ2V0KHZhcmlhYmxlcy5zdGF0X2RhdGEsIHBhdGgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyDojrflj5bmqKHmnb9cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFNjaGVtYSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoaXNBcnJheVNjaGVtYSh0YXJnZXRTY2hlbWEpIHx8IGlzT2JqZWN0U2NoZW1hKHRhcmdldFNjaGVtYSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRhcmdldFNjaGVtYS50ZW1wbGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGNvbGxlY3Rpb24pICYmIHR5cGVvZiBrZXlPckluZGV4ID09PSAnbnVtYmVyJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDnm67moIfmmK/mlbDnu4TkuJTntKLlvJXmmK/mlbDlrZfvvIzmj5LlhaXliLDmjIflrprkvY3nva5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVUb0Fzc2lnbiA9IGFwcGx5VGVtcGxhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZVRvQXNzaWduLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJpY3RfdGVtcGxhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25jYXRfdGVtcGxhdGVfYXJyYXlcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvbi5zcGxpY2Uoa2V5T3JJbmRleCwgMCwgdmFsdWVUb0Fzc2lnbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlfc3RyID0gYEFTU0lHTkVEICR7SlNPTi5zdHJpbmdpZnkodmFsdWVUb0Fzc2lnbil9IGludG8gJyR7cGF0aH0nIGF0IGluZGV4ICR7a2V5T3JJbmRleH0gJHtyZWFzb25fc3RyfWA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3NmdWwgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXy5pc09iamVjdChjb2xsZWN0aW9uKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDnm67moIfmmK/lr7nosaHvvIzorr7nva7mjIflrprplK5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXy5zZXQoY29sbGVjdGlvbiwgU3RyaW5nKGtleU9ySW5kZXgpLCB2YWx1ZVRvQXNzaWduKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5a+55Y2V5Liq5bGe5oCn5YC85bqU55So5qih5p2/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlVG9Bc3NpZ24gPSBhcHBseVRlbXBsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVUb0Fzc2lnbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyaWN0X3RlbXBsYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uY2F0X3RlbXBsYXRlX2FycmF5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChjb2xsZWN0aW9uIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+KVtTdHJpbmcoa2V5T3JJbmRleCldID0gdmFsdWVUb0Fzc2lnbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheV9zdHIgPSBgQVNTSUdORUQga2V5ICcke2tleU9ySW5kZXh9JyB3aXRoIHZhbHVlICR7SlNPTi5zdHJpbmdpZnkodmFsdWVUb0Fzc2lnbil9IGludG8gb2JqZWN0ICcke3BhdGh9JyAke3JlYXNvbl9zdHJ9YDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2Vzc2Z1bCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g55uu5qCH5LiN5a2Y5Zyo77yM5Yib5bu65paw5a+56LGh5bm25o+S5YWlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb24gPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXy5zZXQodmFyaWFibGVzLnN0YXRfZGF0YSwgcGF0aCwgY29sbGVjdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF8uc2V0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvbiBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyhrZXlPckluZGV4KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlVG9Bc3NpZ25cclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5a+55paw5bGe5oCn5YC85bqU55So5qih5p2/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlVG9Bc3NpZ24gPSBhcHBseVRlbXBsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVUb0Fzc2lnbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyaWN0X3RlbXBsYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uY2F0X3RlbXBsYXRlX2FycmF5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChjb2xsZWN0aW9uIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+KVtTdHJpbmcoa2V5T3JJbmRleCldID0gdmFsdWVUb0Fzc2lnbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheV9zdHIgPSBgQ1JFQVRFRCBvYmplY3QgYXQgJyR7cGF0aH0nIGFuZCBBU1NJR05FRCBrZXkgJyR7a2V5T3JJbmRleH0nICR7cmVhc29uX3N0cn1gO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzZnVsID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHN1Y2Nlc3NmdWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyDmj5LlhaXmiJDlip/vvIzojrflj5bmlrDlgLzlubbop6blj5Hkuovku7ZcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdWYWx1ZSA9IF8uZ2V0KHZhcmlhYmxlcy5zdGF0X2RhdGEsIHBhdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlX21vZGlmaWVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmluZm8oZGlzcGxheV9zdHIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGV2ZW50RW1pdChcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVfZXZlbnRzLlNJTkdMRV9WQVJJQUJMRV9VUERBVEVELFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZXMuc3RhdF9kYXRhLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbGRWYWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWVcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8v5a+55paw5bqU55So55qEIHRlbXBsYXRlIOeri+WIu+WkhOeQhuaooeadv+OAglxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50RGF0YUNsb25lID0gc3RydWN0dXJlZENsb25lKG5ld1ZhbHVlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1NjaGVtYSA9IGdlbmVyYXRlU2NoZW1hKGN1cnJlbnREYXRhQ2xvbmUsIHRhcmdldFNjaGVtYSEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfLm1lcmdlKHRhcmdldFNjaGVtYSwgbmV3U2NoZW1hKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYW5VcE1ldGFkYXRhKG5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDlupTnlKjlpLHotKXvvIzorrDlvZXplJnor6/lubbnu6fnu63lpITnkIbkuIvkuIDlkb3ku6RcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dEVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBGYWlsZWQgdG8gcmVzb2x2ZSB0ZW1wbGF0ZSBtZXRhIGF0ICcke3BhdGh9JywgJyR7ZXJyb3IubWVzc2FnZX0nYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dEVycm9yKGBGYWlsZWQgdG8gcmVzb2x2ZSB0ZW1wbGF0ZSBtZXRhIGF0ICcke3BhdGh9JywgJyR7ZXJyb3J9J2ApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyDmj5LlhaXlpLHotKXvvIzorrDlvZXplJnor6/lubbnu6fnu63lpITnkIbkuIvkuIDlkb3ku6RcclxuICAgICAgICAgICAgICAgICAgICBvdXRFcnJvcihgSW52YWxpZCBhcmd1bWVudHMgZm9yIF8uYXNzaWduIG9uIHBhdGggJyR7cGF0aH0nYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY2FzZSAndW5zZXQnOlxyXG4gICAgICAgICAgICBjYXNlICdkZWxldGUnOlxyXG4gICAgICAgICAgICBjYXNlICdyZW1vdmUnOiB7XHJcbiAgICAgICAgICAgICAgICAvLyDpqozor4Hot6/lvoTlrZjlnKjvvIzpmLLmraLml6DmlYjliKDpmaRcclxuICAgICAgICAgICAgICAgIGlmICghXy5oYXModmFyaWFibGVzLnN0YXRfZGF0YSwgcGF0aCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBvdXRFcnJvcihgdW5kZWZpbmVkIFBhdGg6ICR7cGF0aH0gaW4gXy5yZW1vdmUgY29tbWFuZGApO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIC0tLSDmqKHlvI/moKHpqozlvIDlp4sgLS0tXHJcbiAgICAgICAgICAgICAgICBsZXQgY29udGFpbmVyUGF0aCA9IHBhdGg7XHJcbiAgICAgICAgICAgICAgICBsZXQga2V5T3JJbmRleFRvUmVtb3ZlOiBzdHJpbmcgfCBudW1iZXIgfCB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGNvbW1hbmQuYXJncy5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXy5yZW1vdmUoJ3BhdGgnLCBrZXlfb3JfaW5kZXgpXHJcbiAgICAgICAgICAgICAgICAgICAga2V5T3JJbmRleFRvUmVtb3ZlID0gcGFyc2VDb21tYW5kVmFsdWUoY29tbWFuZC5hcmdzWzFdKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyDlpoLmnpwga2V5IOaYr+Wtl+espuS4su+8jOmcgOimgeWOu+mZpOWPr+iDveWtmOWcqOeahOW8leWPt1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Yga2V5T3JJbmRleFRvUmVtb3ZlID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXlPckluZGV4VG9SZW1vdmUgPSB0cmltUXVvdGVzQW5kQmFja3NsYXNoZXMoa2V5T3JJbmRleFRvUmVtb3ZlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIF8ucmVtb3ZlKCdwYXRoLnRvLmtleVtpbmRleF0nKVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhdGhQYXJ0cyA9IF8udG9QYXRoKHBhdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RQYXJ0ID0gcGF0aFBhcnRzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsYXN0UGFydCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXlPckluZGV4VG9SZW1vdmUgPSAvXlxcZCskLy50ZXN0KGxhc3RQYXJ0KSA/IE51bWJlcihsYXN0UGFydCkgOiBsYXN0UGFydDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyUGF0aCA9IHBhdGhQYXJ0cy5qb2luKCcuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChrZXlPckluZGV4VG9SZW1vdmUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG91dEVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBgQ291bGQgbm90IGRldGVybWluZSB0YXJnZXQgZm9yIGRlbGV0aW9uIGZvciBjb21tYW5kIG9uIHBhdGggJyR7cGF0aH0nICR7cmVhc29uX3N0cn1gXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIOWPquacieW9k+WuueWZqOi3r+W+hOS4jeaYr+aguei3r+W+hO+8iOWNs+S4jeS4uuepuu+8ieaXtu+8jOaJjeajgOafpeWFtuaYr+WQpuWtmOWcqFxyXG4gICAgICAgICAgICAgICAgaWYgKGNvbnRhaW5lclBhdGggIT09ICcnICYmICFfLmhhcyh2YXJpYWJsZXMuc3RhdF9kYXRhLCBjb250YWluZXJQYXRoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG91dEVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBgQ2Fubm90IHJlbW92ZSBmcm9tIG5vbi1leGlzdGVudCBwYXRoICcke2NvbnRhaW5lclBhdGh9Jy4gJHtyZWFzb25fc3RyfWBcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lclNjaGVtYSA9IGdldFNjaGVtYUZvclBhdGgoc2NoZW1hLCBjb250YWluZXJQYXRoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoY29udGFpbmVyU2NoZW1hKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRhaW5lclNjaGVtYS50eXBlID09PSAnYXJyYXknKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250YWluZXJTY2hlbWEuZXh0ZW5zaWJsZSAhPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0RXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYFNDSEVNQSBWSU9MQVRJT046IENhbm5vdCByZW1vdmUgZWxlbWVudCBmcm9tIG5vbi1leHRlbnNpYmxlIGFycmF5IGF0IHBhdGggJyR7Y29udGFpbmVyUGF0aH0nLiAke3JlYXNvbl9zdHJ9YFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjb250YWluZXJTY2hlbWEudHlwZSA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5U3RyaW5nID0gU3RyaW5nKGtleU9ySW5kZXhUb1JlbW92ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8uaGFzKGNvbnRhaW5lclNjaGVtYS5wcm9wZXJ0aWVzLCBrZXlTdHJpbmcpICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXJTY2hlbWEucHJvcGVydGllc1trZXlTdHJpbmddLnJlcXVpcmVkID09PSB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0RXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYFNDSEVNQSBWSU9MQVRJT046IENhbm5vdCByZW1vdmUgcmVxdWlyZWQga2V5ICcke2tleVN0cmluZ30nIGZyb20gcGF0aCAnJHtjb250YWluZXJQYXRofScuICR7cmVhc29uX3N0cn1gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gLS0tIOaJgOaciemqjOivgemAmui/h++8jOeOsOWcqOWPr+S7peWuieWFqOaJp+ihjCAtLS1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyDop6PmnpDliKDpmaTnm67moIfvvIzlj6/og73mmK/lgLzmiJbntKLlvJVcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldFRvUmVtb3ZlID1cclxuICAgICAgICAgICAgICAgICAgICBjb21tYW5kLmFyZ3MubGVuZ3RoID4gMSA/IHBhcnNlQ29tbWFuZFZhbHVlKGNvbW1hbmQuYXJnc1sxXSkgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICBsZXQgaXRlbVJlbW92ZWQgPSBmYWxzZTsgLy8g5qCH6K6w5piv5ZCm5Yig6Zmk5oiQ5YqfXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldFRvUmVtb3ZlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBfLnJlbW92ZSgncGF0aC50by5rZXknKVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOWIoOmZpOaVtOS4qui3r+W+hFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9sZFZhbHVlID0gXy5nZXQodmFyaWFibGVzLnN0YXRfZGF0YSwgcGF0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy51bnNldCh2YXJpYWJsZXMuc3RhdF9kYXRhLCBwYXRoKTtcclxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5X3N0ciA9IGBSRU1PVkVEIHBhdGggJyR7cGF0aH0nICR7cmVhc29uX3N0cn1gO1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1SZW1vdmVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBldmVudEVtaXQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlX2V2ZW50cy5TSU5HTEVfVkFSSUFCTEVfVVBEQVRFRCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVzLnN0YXRfZGF0YSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2xkVmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIF8ucmVtb3ZlKCdwYXRoLnRvLmFycmF5JywgdmFsdWVfb3JfaW5kZXgpXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29sbGVjdGlvbiA9IF8uZ2V0KHZhcmlhYmxlcy5zdGF0X2RhdGEsIHBhdGgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyDlvZPku47kuIDkuKrpm4blkIjkuK3liKDpmaTlhYPntKDml7bvvIzlv4Xpobvnoa7kv53nm67moIfot6/lvoTnoa7lrp7mmK/kuIDkuKrpm4blkIhcclxuICAgICAgICAgICAgICAgICAgICAvLyDlpoLmnpznm67moIfmmK/ljp/lp4vlgLzvvIjkvovlpoLlrZfnrKbkuLLvvInvvIzliJnml6Dms5XmiafooYzliKDpmaTmk43kvZxcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoY29sbGVjdGlvbikgJiYgIV8uaXNPYmplY3QoY29sbGVjdGlvbikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0RXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgQ2Fubm90IHJlbW92ZSBmcm9tIHBhdGggJyR7cGF0aH0nIGJlY2F1c2UgaXQgaXMgbm90IGFuIGFycmF5IG9yIG9iamVjdC4gU2tpcHBpbmcgY29tbWFuZC4gJHtyZWFzb25fc3RyfWBcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShjb2xsZWN0aW9uKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDnm67moIfmmK/mlbDnu4TvvIzliKDpmaTmjIflrprlhYPntKBcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxBcnJheSA9IF8uY2xvbmVEZWVwKGNvbGxlY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW5kZXhUb1JlbW92ZSA9IC0xO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRhcmdldFRvUmVtb3ZlID09PSAnbnVtYmVyJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXhUb1JlbW92ZSA9IHRhcmdldFRvUmVtb3ZlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXhUb1JlbW92ZSA9IGNvbGxlY3Rpb24uZmluZEluZGV4KGl0ZW0gPT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfLmlzRXF1YWwoaXRlbSwgdGFyZ2V0VG9SZW1vdmUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXhUb1JlbW92ZSA+PSAwICYmIGluZGV4VG9SZW1vdmUgPCBjb2xsZWN0aW9uLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvbi5zcGxpY2UoaW5kZXhUb1JlbW92ZSwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtUmVtb3ZlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5X3N0ciA9IGBSRU1PVkVEIGl0ZW0gZnJvbSAnJHtwYXRofScgJHtyZWFzb25fc3RyfWA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBldmVudEVtaXQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVfZXZlbnRzLlNJTkdMRV9WQVJJQUJMRV9VUERBVEVELFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlcy5zdGF0X2RhdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbEFycmF5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKF8uaXNPYmplY3QoY29sbGVjdGlvbikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0YXJnZXRUb1JlbW92ZSA9PT0gJ251bWJlcicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOebruagh+aYr+Wvueixoe+8jOaMiee0ouW8leWIoOmZpOmUrlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGNvbGxlY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSB0YXJnZXRUb1JlbW92ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA+PSAwICYmIGluZGV4IDwga2V5cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBrZXlUb1JlbW92ZSA9IGtleXNbaW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8udW5zZXQoY29sbGVjdGlvbiwga2V5VG9SZW1vdmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1SZW1vdmVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5X3N0ciA9IGBSRU1PVkVEICR7aW5kZXggKyAxfXRoIGVudHJ5ICgnJHtrZXlUb1JlbW92ZX0nKSBmcm9tIG9iamVjdCAnJHtwYXRofScgJHtyZWFzb25fc3RyfWA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDnm67moIfmmK/lr7nosaHvvIzmjInplK7lkI3liKDpmaRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleVRvUmVtb3ZlID0gU3RyaW5nKHRhcmdldFRvUmVtb3ZlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfLmhhcyhjb2xsZWN0aW9uLCBrZXlUb1JlbW92ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBfLnVuc2V0KGNvbGxlY3Rpb24sIGtleVRvUmVtb3ZlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgKGNvbGxlY3Rpb24gYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4pW2tleVRvUmVtb3ZlXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtUmVtb3ZlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheV9zdHIgPSBgUkVNT1ZFRCBrZXkgJyR7a2V5VG9SZW1vdmV9JyBmcm9tIG9iamVjdCAnJHtwYXRofScgJHtyZWFzb25fc3RyfWA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW1SZW1vdmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5Yig6Zmk5oiQ5Yqf77yM5pu05paw54q25oCB5bm26K6w5b2V5pel5b+XXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVfbW9kaWZpZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbyhkaXNwbGF5X3N0cik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOWIoOmZpOWksei0pe+8jOiusOW9leitpuWRiuW5tue7p+e7rVxyXG4gICAgICAgICAgICAgICAgICAgIG91dEVycm9yKGBGYWlsZWQgdG8gZXhlY3V0ZSByZW1vdmUgb24gJyR7cGF0aH0nYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY2FzZSAnYWRkJzoge1xyXG4gICAgICAgICAgICAgICAgLy8g6aqM6K+B6Lev5b6E5a2Y5ZyoXHJcbiAgICAgICAgICAgICAgICBpZiAoIV8uaGFzKHZhcmlhYmxlcy5zdGF0X2RhdGEsIHBhdGgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3V0RXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGBQYXRoICcke3BhdGh9JyBkb2VzIG5vdCBleGlzdCBpbiBzdGF0X2RhdGEsIHNraXBwaW5nIGFkZCBjb21tYW5kICR7cmVhc29uX3N0cn1gXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIOiOt+WPluW9k+WJjeWAvFxyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5pdGlhbFZhbHVlID0gXy5jbG9uZURlZXAoXy5nZXQodmFyaWFibGVzLnN0YXRfZGF0YSwgcGF0aCkpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb2xkVmFsdWUgPSBfLmdldCh2YXJpYWJsZXMuc3RhdF9kYXRhLCBwYXRoKTtcclxuICAgICAgICAgICAgICAgIGxldCB2YWx1ZVRvQWRkID0gb2xkVmFsdWU7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpc1ZXRCA9XHJcbiAgICAgICAgICAgICAgICAgICAgaXNWYWx1ZVdpdGhEZXNjcmlwdGlvblN0YXREYXRhKG9sZFZhbHVlKSAmJiB0eXBlb2Ygb2xkVmFsdWVbMF0gIT09ICdvYmplY3QnO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChpc1ZXRCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2VydFZXRChpc1ZXRCwgb2xkVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlVG9BZGQgPSBvbGRWYWx1ZVswXTsgLy8g5a+5IFZhbHVlV2l0aERlc2NyaXB0aW9uIOexu+Wei++8jOaTjeS9nOWFtuesrOS4gOS4quWFg+e0oFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS53YXJuKHZhbHVlVG9BZGQpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIOWwneivleWwhuW9k+WJjeWAvOino+aekOS4uiBEYXRlIOWvueixoe+8jOaXoOiuuuWFtuWOn+Wni+exu+Wei+aYryBEYXRlIOi/mOaYr+Wtl+espuS4slxyXG4gICAgICAgICAgICAgICAgbGV0IHBvdGVudGlhbERhdGU6IERhdGUgfCBudWxsID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZVRvQWRkIGluc3RhbmNlb2YgRGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBvdGVudGlhbERhdGUgPSB2YWx1ZVRvQWRkO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWVUb0FkZCA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWREYXRlID0gbmV3IERhdGUodmFsdWVUb0FkZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g56Gu5L+d5a6D5piv5LiA5Liq5pyJ5pWI55qE5pel5pyf77yM5bm25LiU5LiN5piv5LiA5Liq5Y+v5Lul6KKrIGBuZXcgRGF0ZWAg6Kej5p6Q55qE57qv5pWw5a2X5a2X56ym5LiyXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc05hTihwYXJzZWREYXRlLmdldFRpbWUoKSkgJiYgaXNOYU4oTnVtYmVyKHZhbHVlVG9BZGQpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3RlbnRpYWxEYXRlID0gcGFyc2VkRGF0ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGNvbW1hbmQuYXJncy5sZW5ndGggPT09IDIpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyDlj4zlj4LmlbDvvJrosIPmlbTmlbDlgLzmiJbml6XmnJ9cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWx0YSA9IHBhcnNlQ29tbWFuZFZhbHVlKGNvbW1hbmQuYXJnc1sxXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOWkhOeQhiBEYXRlIOexu+Wei1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwb3RlbnRpYWxEYXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZGVsdGEgIT09ICdudW1iZXInKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgRGVsdGEgJyR7Y29tbWFuZC5hcmdzWzFdfScgZm9yIERhdGUgb3BlcmF0aW9uIGlzIG5vdCBhIG51bWJlciwgc2tpcHBpbmcgYWRkIGNvbW1hbmQgJHtyZWFzb25fc3RyfWBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWx0YSDmmK/mr6vnp5LmlbDvvIzmm7TmlrDml7bpl7RcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3RGF0ZSA9IG5ldyBEYXRlKHBvdGVudGlhbERhdGUuZ2V0VGltZSgpICsgZGVsdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDmgLvmmK/lsIbmm7TmlrDlkI7nmoQgRGF0ZSDlr7nosaHovazmjaLkuLogSVNPIOWtl+espuS4suWGjeWtmOWbnuWOu1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaW5hbFZhbHVlVG9TZXQgPSBuZXdEYXRlLnRvSVNPU3RyaW5nKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNWV0QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2VydFZXRChpc1ZXRCwgb2xkVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkVmFsdWVbMF0gPSBmaW5hbFZhbHVlVG9TZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfLnNldCh2YXJpYWJsZXMuc3RhdF9kYXRhLCBwYXRoLCBvbGRWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfLnNldCh2YXJpYWJsZXMuc3RhdF9kYXRhLCBwYXRoLCBmaW5hbFZhbHVlVG9TZXQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaW5hbE5ld1ZhbHVlID0gXy5nZXQodmFyaWFibGVzLnN0YXRfZGF0YSwgcGF0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1ZXRCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheV9zdHIgPSBgJHtKU09OLnN0cmluZ2lmeSgoaW5pdGlhbFZhbHVlIGFzIGFueVtdKVswXSl9LT4ke0pTT04uc3RyaW5naWZ5KChmaW5hbE5ld1ZhbHVlIGFzIGFueVtdKVswXSl9ICR7cmVhc29uX3N0cn1gO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheV9zdHIgPSBgJHtKU09OLnN0cmluZ2lmeShpbml0aWFsVmFsdWUpfS0+JHtKU09OLnN0cmluZ2lmeShmaW5hbE5ld1ZhbHVlKX0gJHtyZWFzb25fc3RyfWA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVfbW9kaWZpZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmluZm8oXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgQURERUQgZGF0ZSAnJHtwYXRofScgZnJvbSAnJHtwb3RlbnRpYWxEYXRlLnRvSVNPU3RyaW5nKCl9JyB0byAnJHtuZXdEYXRlLnRvSVNPU3RyaW5nKCl9JyBieSBkZWx0YSAnJHtkZWx0YX0nbXMgJHtyZWFzb25fc3RyfWBcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgZXZlbnRFbWl0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVfZXZlbnRzLlNJTkdMRV9WQVJJQUJMRV9VUERBVEVELFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFibGVzLnN0YXRfZGF0YSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsVmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbE5ld1ZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWVUb0FkZCA9PT0gJ251bWJlcicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5Y6f5pyJ55qE5aSE55CGIG51bWJlciDnsbvlnovnmoTpgLvovpFcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBkZWx0YSAhPT0gJ251bWJlcicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dEVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBEZWx0YSAnJHtjb21tYW5kLmFyZ3NbMV19JyBpcyBub3QgYSBudW1iZXIsIHNraXBwaW5nIGFkZCBjb21tYW5kICR7cmVhc29uX3N0cn1gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5ld1ZhbHVlID0gdmFsdWVUb0FkZCArIGRlbHRhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZSA9IHBhcnNlRmxvYXQobmV3VmFsdWUudG9QcmVjaXNpb24oMTIpKTsgLy8g6YG/5YWN5rWu54K55pWw57K+5bqm6K+v5beuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1ZXRCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkVmFsdWVbMF0gPSBuZXdWYWx1ZTsgLy8gVXBkYXRlIHRoZSBmaXJzdCBlbGVtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfLnNldCh2YXJpYWJsZXMuc3RhdF9kYXRhLCBwYXRoLCBvbGRWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfLnNldCh2YXJpYWJsZXMuc3RhdF9kYXRhLCBwYXRoLCBuZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmluYWxOZXdWYWx1ZSA9IF8uZ2V0KHZhcmlhYmxlcy5zdGF0X2RhdGEsIHBhdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNWV0QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlfc3RyID0gYCR7SlNPTi5zdHJpbmdpZnkoKGluaXRpYWxWYWx1ZSBhcyBhbnlbXSlbMF0pfS0+JHtKU09OLnN0cmluZ2lmeSgoZmluYWxOZXdWYWx1ZSBhcyBhbnlbXSlbMF0pfSAke3JlYXNvbl9zdHJ9YDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlfc3RyID0gYCR7SlNPTi5zdHJpbmdpZnkoaW5pdGlhbFZhbHVlKX0tPiR7SlNPTi5zdHJpbmdpZnkoZmluYWxOZXdWYWx1ZSl9ICR7cmVhc29uX3N0cn1gO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlX21vZGlmaWVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5pbmZvKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYEFEREVEIG51bWJlciAnJHtwYXRofScgZnJvbSAnJHt2YWx1ZVRvQWRkfScgdG8gJyR7bmV3VmFsdWV9JyBieSBkZWx0YSAnJHtkZWx0YX0nICR7cmVhc29uX3N0cn1gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGV2ZW50RW1pdChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlX2V2ZW50cy5TSU5HTEVfVkFSSUFCTEVfVVBEQVRFRCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlcy5zdGF0X2RhdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbFZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxOZXdWYWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWmguaenOWAvOS4jeaYr+WPr+ivhuWIq+eahOexu+Wei++8iOaXpeacn+OAgeaVsOWtl++8ie+8jOWImei3s+i/h1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBQYXRoICcke3BhdGh9JyB2YWx1ZSBpcyBub3QgYSBkYXRlIG9yIG51bWJlcjsgc2tpcHBpbmcgYWRkIGNvbW1hbmQgJHtyZWFzb25fc3RyfWBcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBvdXRFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgYEludmFsaWQgbnVtYmVyIG9mIGFyZ3VtZW50cyBmb3IgXy5hZGQgb24gcGF0aCAnJHtwYXRofScgJHtyZWFzb25fc3RyfWBcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChkaXNwbGF5X3N0cikge1xyXG4gICAgICAgICAgICAvLyDmm7TmlrDnirbmgIHlkozlop7ph4/mlbDmja7vvIzorrDlvZXmk43kvZzor6bmg4VcclxuICAgICAgICAgICAgXy5zZXQob3V0X3N0YXR1cy5zdGF0X2RhdGEsIHBhdGgsIGRpc3BsYXlfc3RyKTtcclxuICAgICAgICAgICAgXy5zZXQoZGVsdGFfc3RhdHVzLnN0YXRfZGF0YSEsIHBhdGgsIGRpc3BsYXlfc3RyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyDmm7TmlrDlj5jph4/nmoTmmL7npLrlkozlop7ph4/mlbDmja5cclxuICAgIHZhcmlhYmxlcy5kaXNwbGF5X2RhdGEgPSBvdXRfc3RhdHVzLnN0YXRfZGF0YTtcclxuICAgIHZhcmlhYmxlcy5kZWx0YV9kYXRhID0gZGVsdGFfc3RhdHVzLnN0YXRfZGF0YSE7XHJcbiAgICAvLyDop6blj5Hlj5jph4/mm7TmlrDnu5PmnZ/kuovku7ZcclxuICAgIGF3YWl0IGV2ZW50RW1pdCh2YXJpYWJsZV9ldmVudHMuVkFSSUFCTEVfVVBEQVRFX0VOREVELCB2YXJpYWJsZXMpO1xyXG4gICAgLy/lnKjnu5PmnZ/kuovku7bkuK3kuZ/lj6/og73orr7nva7lj5jph49cclxuICAgIGRlbGV0ZSB2YXJpYWJsZXMuc3RhdF9kYXRhLiRpbnRlcm5hbDtcclxuXHJcbiAgICAvLyDlnKjmiYDmnInlkb3ku6TmiafooYzlrozmr5XlkI7vvIzlpoLmnpzmlbDmja7mnInku7vkvZXlj5jliqjvvIzliJnmiafooYzkuIDmrKEgU2NoZW1hIOiwg+WSjFxyXG4gICAgaWYgKHZhcmlhYmxlX21vZGlmaWVkKSB7XHJcbiAgICAgICAgcmVjb25jaWxlQW5kQXBwbHlTY2hlbWEodmFyaWFibGVzKTtcclxuICAgIH1cclxuICAgIGlmIChlcnJvcl9pbmZvICYmIHVzZVNldHRpbmdzU3RvcmUoKS5zZXR0aW5ncy7pgJrnn6Uu5Y+Y6YeP5pu05paw5Ye66ZSZKSB7XHJcbiAgICAgICAgY29uc3QgYmFzZV9jb21tYW5kOiBzdHJpbmcgPSBlcnJvcl9pbmZvLmVycm9yX2NvbW1hbmQuZnVsbE1hdGNoO1xyXG4gICAgICAgIGlmICh0eXBlb2YgdG9hc3RyICE9PSAndW5kZWZpbmVkJylcclxuICAgICAgICAgICAgdG9hc3RyLndhcm5pbmcoXHJcbiAgICAgICAgICAgICAgICBg5pyA6L+R6ZSZ6K+vOiAke2Vycm9yX2luZm8uZXJyb3JfbGFzdH1gLFxyXG4gICAgICAgICAgICAgICAgYOWPkeeUn+WPmOmHj+abtOaWsOmUmeivr++8jOWPr+iDvemcgOimgemHjVJvbGw6JHtiYXNlX2NvbW1hbmR9YCxcclxuICAgICAgICAgICAgICAgIHsgdGltZU91dDogNjAwMCB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g6L+U5Zue5piv5ZCm5L+u5pS55LqG5Y+Y6YePXHJcbiAgICByZXR1cm4gdmFyaWFibGVfbW9kaWZpZWQgfHwgb3V0X2lzX21vZGlmZWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYW5kbGVWYXJpYWJsZXNJbk1lc3NhZ2UobWVzc2FnZV9pZDogbnVtYmVyKSB7XHJcbiAgICBjb25zdCBjaGF0X21lc3NhZ2UgPSBnZXRDaGF0TWVzc2FnZXMobWVzc2FnZV9pZCkuYXQoLTEpO1xyXG4gICAgaWYgKCFjaGF0X21lc3NhZ2UpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IG1lc3NhZ2VfY29udGVudCA9IGNoYXRfbWVzc2FnZS5tZXNzYWdlO1xyXG5cclxuICAgIGlmIChtZXNzYWdlX2NvbnRlbnQubGVuZ3RoIDwgNSlcclxuICAgICAgICAvL01FU1NBR0VfUkVDRUlWRUTkvJrpgJLkuqTkuIDkuKogXCIuLi5cIiDnmoTmtojmga9cclxuICAgICAgICByZXR1cm47XHJcbiAgICBjb25zdCByZXF1ZXN0X21lc3NhZ2VfaWQgPSBtZXNzYWdlX2lkID09PSAwID8gMCA6IG1lc3NhZ2VfaWQgLSAxO1xyXG4gICAgY29uc3QgdmFyaWFibGVzID0gYXdhaXQgZ2V0TGFzdFZhbGlkVmFyaWFibGUocmVxdWVzdF9tZXNzYWdlX2lkKTtcclxuICAgIGlmICghXy5oYXModmFyaWFibGVzLCAnc3RhdF9kYXRhJykpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGBjYW5ub3QgZm91bmQgc3RhdF9kYXRhIGZvciAke3JlcXVlc3RfbWVzc2FnZV9pZH1gKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgaGFzX3ZhcmlhYmxlX21vZGlmaWVkID0gYXdhaXQgdXBkYXRlVmFyaWFibGVzKG1lc3NhZ2VfY29udGVudCwgdmFyaWFibGVzKTtcclxuICAgIGNvbnN0IHVwZGF0ZXIgPSAoZGF0YTogUmVjb3JkPHN0cmluZywgYW55PikgPT4ge1xyXG4gICAgICAgIGRhdGEuc3RhdF9kYXRhID0gdmFyaWFibGVzLnN0YXRfZGF0YTtcclxuICAgICAgICBkYXRhLmRpc3BsYXlfZGF0YSA9IHZhcmlhYmxlcy5kaXNwbGF5X2RhdGE7XHJcbiAgICAgICAgZGF0YS5kZWx0YV9kYXRhID0gdmFyaWFibGVzLmRlbHRhX2RhdGE7XHJcbiAgICAgICAgZGF0YS5pbml0aWFsaXplZF9sb3JlYm9va3MgPSB2YXJpYWJsZXMuaW5pdGlhbGl6ZWRfbG9yZWJvb2tzO1xyXG4gICAgICAgIGlmICh2YXJpYWJsZXMuc2NoZW1hICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgZGF0YS5zY2hlbWEgPSB2YXJpYWJsZXMuc2NoZW1hO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGRlbGV0ZSBkYXRhLnNjaGVtYTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9O1xyXG4gICAgaWYgKGhhc192YXJpYWJsZV9tb2RpZmllZCkge1xyXG4gICAgICAgIGF3YWl0IHVwZGF0ZVZhcmlhYmxlc1dpdGgodXBkYXRlciwgeyB0eXBlOiAnY2hhdCcgfSk7XHJcbiAgICB9XHJcbiAgICBhd2FpdCB1cGRhdGVWYXJpYWJsZXNXaXRoKHVwZGF0ZXIsIHsgdHlwZTogJ21lc3NhZ2UnLCBtZXNzYWdlX2lkOiBtZXNzYWdlX2lkIH0pO1xyXG5cclxuICAgIGlmIChjaGF0X21lc3NhZ2Uucm9sZSAhPT0gJ3VzZXInKSB7XHJcbiAgICAgICAgaWYgKCFtZXNzYWdlX2NvbnRlbnQuaW5jbHVkZXMoJzxTdGF0dXNQbGFjZUhvbGRlckltcGwvPicpKSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VfY29udGVudCArPSAnXFxuXFxuPFN0YXR1c1BsYWNlSG9sZGVySW1wbC8+JztcclxuICAgICAgICB9XHJcbiAgICAgICAgYXdhaXQgc2V0Q2hhdE1lc3NhZ2VzKFxyXG4gICAgICAgICAgICBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZV9pZDogbWVzc2FnZV9pZCxcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlX2NvbnRlbnQsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZWZyZXNoOiAnYWZmZWN0ZWQnLFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZVZhcmlhYmxlc0luQ2FsbGJhY2soXHJcbiAgICBtZXNzYWdlX2NvbnRlbnQ6IHN0cmluZyxcclxuICAgIGluX291dF92YXJpYWJsZV9pbmZvOiBWYXJpYWJsZURhdGFcclxuKSB7XHJcbiAgICBpZiAoaW5fb3V0X3ZhcmlhYmxlX2luZm8ub2xkX3ZhcmlhYmxlcyA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaW5fb3V0X3ZhcmlhYmxlX2luZm8ubmV3X3ZhcmlhYmxlcyA9IF8uY2xvbmVEZWVwKGluX291dF92YXJpYWJsZV9pbmZvLm9sZF92YXJpYWJsZXMpO1xyXG4gICAgY29uc3QgdmFyaWFibGVzID0gaW5fb3V0X3ZhcmlhYmxlX2luZm8ubmV3X3ZhcmlhYmxlcztcclxuXHJcbiAgICBjb25zdCBtb2RpZmllZCA9IGF3YWl0IHVwZGF0ZVZhcmlhYmxlcyhtZXNzYWdlX2NvbnRlbnQsIHZhcmlhYmxlcyk7XHJcbiAgICAvL+WmguaenOayoeacieS/ruaUue+8jOWImeS4jeS6p+eUnyBuZXdWYXJpYWJsZVxyXG4gICAgaWYgKCFtb2RpZmllZCkgZGVsZXRlIGluX291dF92YXJpYWJsZV9pbmZvLm5ld192YXJpYWJsZXM7XHJcbiAgICByZXR1cm47XHJcbn1cclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/function.ts\n\n}");
  },
  "./src/main.ts": 
  /*!*********************!*\
  !*** ./src/main.ts ***!
  \*********************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _button__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/button */ \"./src/button.ts\");\n/* harmony import */ var _export_globals__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/export_globals */ \"./src/export_globals.ts\");\n/* harmony import */ var _function__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/function */ \"./src/function.ts\");\n/* harmony import */ var _panel__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/panel */ \"./src/panel.ts\");\n/* harmony import */ var _settings__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/settings */ \"./src/settings.ts\");\n/* harmony import */ var _variable_def__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/variable_def */ \"./src/variable_def.ts\");\n/* harmony import */ var _variable_init__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/variable_init */ \"./src/variable_init.ts\");\n/* harmony import */ var compare_versions__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! compare-versions */ \"compare-versions\");\n\n\n\n\n\n\n\n\n$(async () => {\n    if ((0,compare_versions__WEBPACK_IMPORTED_MODULE_7__.compare)(await getTavernHelperVersion(), '3.4.17', '<')) {\n        toastr.warning('酒馆助手版本过低, 可能无法正常处理, 请更新至 3.4.17 或更高版本（建议保持酒馆助手最新）');\n    }\n    (0,_panel__WEBPACK_IMPORTED_MODULE_3__.initPanel)();\n    (0,_export_globals__WEBPACK_IMPORTED_MODULE_1__.exportGlobals)();\n    (0,_button__WEBPACK_IMPORTED_MODULE_0__.registerButtons)();\n    eventOn(tavern_events.GENERATION_STARTED, _variable_init__WEBPACK_IMPORTED_MODULE_6__.initCheck);\n    eventOn(tavern_events.MESSAGE_SENT, _variable_init__WEBPACK_IMPORTED_MODULE_6__.initCheck);\n    eventOn(tavern_events.MESSAGE_SENT, _function__WEBPACK_IMPORTED_MODULE_2__.handleVariablesInMessage);\n    // TODO: 拆分进专门的文件\n    const settings = (0,_settings__WEBPACK_IMPORTED_MODULE_4__.useSettingsStore)().settings;\n    let reverse = false;\n    eventOn(tavern_events.WORLD_INFO_ACTIVATED, entries => {\n        if (settings.更新方式 === '随AI输出') {\n            return;\n        }\n        _.remove(entries, entry => {\n            const match = entry.comment.match(/\\[mvu_update\\]/i);\n            return reverse ? !match : !!match;\n        });\n    });\n    eventOn(tavern_events.MESSAGE_RECEIVED, async (message_id) => {\n        const primary_worldbook = getCharWorldbookNames('current').primary;\n        if (settings.更新方式 === '随AI输出' ||\n            primary_worldbook === null ||\n            // 角色卡未适配时, 依旧使用 \"随AI输出\"\n            !(await getWorldbook(primary_worldbook)).some(entry => entry.name.match(/\\[mvu_update\\]/i))) {\n            (0,_function__WEBPACK_IMPORTED_MODULE_2__.handleVariablesInMessage)(message_id);\n            return;\n        }\n        reverse = true;\n        const user_input = `---\n<status_description>\n<%= YAML.stringify(getvar('stat_data'), { blockQuote: 'literal' }) _%>\n</status_description>\n<must>\\`<status_description>\\`中所记录的是在最新剧情之前的变量情况。你现在必须停止扮演模式，以旁白视角分析最新剧情，按照变量更新规则更新\\`<status_description>\\`中的变量</must>`;\n        // TODO: 破限怎么办\n        const result = await generateRaw(settings.额外模型解析配置.模型来源 === '与插头相同'\n            ? { user_input }\n            : {\n                user_input,\n                custom_api: {\n                    apiurl: settings.额外模型解析配置.api地址,\n                    key: settings.额外模型解析配置.密钥,\n                    model: settings.额外模型解析配置.模型名称,\n                },\n            });\n        reverse = false;\n        // QUESTION: 目前的方案是直接将额外模型对变量的解析结果直接尾附到楼层中, 会不会像 tool calling 那样把结果新建为一个楼层更好?\n        const chat_message = getChatMessages(message_id);\n        await setChatMessages([\n            {\n                message_id,\n                message: chat_message[0].message +\n                    '<UpdateVariable>' +\n                    result\n                        .replaceAll('<UpdateVariable>', '')\n                        .replaceAll('</UpdateVariable>', '') +\n                    '</UpdateVariable>',\n            },\n        ], {\n            refresh: 'none',\n        });\n        (0,_function__WEBPACK_IMPORTED_MODULE_2__.handleVariablesInMessage)(message_id);\n    });\n    eventOn(tavern_events.MESSAGE_RECEIVED, _function__WEBPACK_IMPORTED_MODULE_2__.handleVariablesInMessage);\n    eventOn(_variable_def__WEBPACK_IMPORTED_MODULE_5__.exported_events.INVOKE_MVU_PROCESS, _function__WEBPACK_IMPORTED_MODULE_2__.handleVariablesInCallback);\n    eventOn(_variable_def__WEBPACK_IMPORTED_MODULE_5__.exported_events.UPDATE_VARIABLE, _function__WEBPACK_IMPORTED_MODULE_2__.updateVariable);\n    _.set(window.parent, 'handleVariablesInMessage', _function__WEBPACK_IMPORTED_MODULE_2__.handleVariablesInMessage);\n    toastr.info(`构建信息: ${__BUILD_DATE__ ?? 'Unknown'} (${__COMMIT_ID__ ?? 'Unknown'})`, 'MVU加载成功');\n});\n$(window).on('pagehide', () => {\n    (0,_panel__WEBPACK_IMPORTED_MODULE_3__.destroyPanel)();\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VTtnQkFDVixPQUFPLEVBQ0gsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU87b0JBQ3ZCLGtCQUFrQjtvQkFDbEIsTUFBTTt5QkFDRCxVQUFVLENBQUMsa0JBQWtCLEVBQUUsRUFBRSxDQUFDO3lCQUNsQyxVQUFVLENBQUMsbUJBQW1CLEVBQUUsRUFBRSxDQUFDO29CQUN4QyxtQkFBbUI7YUFDMUI7U0FDSixFQUNEO1lBQ0ksT0FBTyxFQUFFLE1BQU07U0FDbEIsQ0FDSixDQUFDO1FBQ0YsbUVBQXdCLENBQUMsVUFBVSxDQUFDLENBQUM7SUFDekMsQ0FBQyxDQUFDLENBQUM7SUFFSCxPQUFPLENBQUMsYUFBYSxDQUFDLGdCQUFnQixFQUFFLCtEQUF3QixDQUFDLENBQUM7SUFDbEUsT0FBTyxDQUFDLDBEQUFlLENBQUMsa0JBQWtCLEVBQUUsZ0VBQXlCLENBQUMsQ0FBQztJQUN2RSxPQUFPLENBQUMsMERBQWUsQ0FBQyxlQUFlLEVBQUUscURBQWMsQ0FBQyxDQUFDO0lBRXpELENBQUMsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSwwQkFBMEIsRUFBRSwrREFBd0IsQ0FBQyxDQUFDO0lBRTNFLE1BQU0sQ0FBQyxJQUFJLENBQ1AsU0FBUyxjQUFjLElBQUksU0FBUyxLQUFLLGFBQWEsSUFBSSxTQUFTLEdBQUcsRUFDdEUsU0FBUyxDQUNaLENBQUM7QUFDTixDQUFDLENBQUMsQ0FBQztBQUVILENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsVUFBVSxFQUFFLEdBQUcsRUFBRTtJQUMxQixvREFBWSxFQUFFLENBQUM7QUFDbkIsQ0FBQyxDQUFDLENBQUMiLCJzb3VyY2VzIjpbInNyYzovL3RhdmVybl9oZWxwZXJfdGVtcGxhdGUvc3JjL21haW4udHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcmVnaXN0ZXJCdXR0b25zIH0gZnJvbSAnQC9idXR0b24nO1xuaW1wb3J0IHsgZXhwb3J0R2xvYmFscyB9IGZyb20gJ0AvZXhwb3J0X2dsb2JhbHMnO1xuaW1wb3J0IHsgaGFuZGxlVmFyaWFibGVzSW5DYWxsYmFjaywgaGFuZGxlVmFyaWFibGVzSW5NZXNzYWdlLCB1cGRhdGVWYXJpYWJsZSB9IGZyb20gJ0AvZnVuY3Rpb24nO1xuaW1wb3J0IHsgZGVzdHJveVBhbmVsLCBpbml0UGFuZWwgfSBmcm9tICdAL3BhbmVsJztcbmltcG9ydCB7IHVzZVNldHRpbmdzU3RvcmUgfSBmcm9tICdAL3NldHRpbmdzJztcbmltcG9ydCB7IGV4cG9ydGVkX2V2ZW50cyB9IGZyb20gJ0AvdmFyaWFibGVfZGVmJztcbmltcG9ydCB7IGluaXRDaGVjayB9IGZyb20gJ0AvdmFyaWFibGVfaW5pdCc7XG5pbXBvcnQgeyBjb21wYXJlIH0gZnJvbSAnY29tcGFyZS12ZXJzaW9ucyc7XG5cbiQoYXN5bmMgKCkgPT4ge1xuICAgIGlmIChjb21wYXJlKGF3YWl0IGdldFRhdmVybkhlbHBlclZlcnNpb24oKSwgJzMuNC4xNycsICc8JykpIHtcbiAgICAgICAgdG9hc3RyLndhcm5pbmcoXG4gICAgICAgICAgICAn6YWS6aaG5Yqp5omL54mI5pys6L+H5L2OLCDlj6/og73ml6Dms5XmraPluLjlpITnkIYsIOivt+abtOaWsOiHsyAzLjQuMTcg5oiW5pu06auY54mI5pys77yI5bu66K6u5L+d5oyB6YWS6aaG5Yqp5omL5pyA5paw77yJJ1xuICAgICAgICApO1xuICAgIH1cblxuICAgIGluaXRQYW5lbCgpO1xuXG4gICAgZXhwb3J0R2xvYmFscygpO1xuICAgIHJlZ2lzdGVyQnV0dG9ucygpO1xuICAgIGV2ZW50T24odGF2ZXJuX2V2ZW50cy5HRU5FUkFUSU9OX1NUQVJURUQsIGluaXRDaGVjayk7XG4gICAgZXZlbnRPbih0YXZlcm5fZXZlbnRzLk1FU1NBR0VfU0VOVCwgaW5pdENoZWNrKTtcbiAgICBldmVudE9uKHRhdmVybl9ldmVudHMuTUVTU0FHRV9TRU5ULCBoYW5kbGVWYXJpYWJsZXNJbk1lc3NhZ2UpO1xuXG4gICAgLy8gVE9ETzog5ouG5YiG6L+b5LiT6Zeo55qE5paH5Lu2XG4gICAgY29uc3Qgc2V0dGluZ3MgPSB1c2VTZXR0aW5nc1N0b3JlKCkuc2V0dGluZ3M7XG4gICAgbGV0IHJldmVyc2UgPSBmYWxzZTtcbiAgICBldmVudE9uKHRhdmVybl9ldmVudHMuV09STERfSU5GT19BQ1RJVkFURUQsIGVudHJpZXMgPT4ge1xuICAgICAgICBpZiAoc2V0dGluZ3Mu5pu05paw5pa55byPID09PSAn6ZqPQUnovpPlh7onKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXy5yZW1vdmUoZW50cmllcywgZW50cnkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSBlbnRyeS5jb21tZW50Lm1hdGNoKC9cXFttdnVfdXBkYXRlXFxdL2kpO1xuICAgICAgICAgICAgcmV0dXJuIHJldmVyc2UgPyAhbWF0Y2ggOiAhIW1hdGNoO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICBldmVudE9uKHRhdmVybl9ldmVudHMuTUVTU0FHRV9SRUNFSVZFRCwgYXN5bmMgbWVzc2FnZV9pZCA9PiB7XG4gICAgICAgIGNvbnN0IHByaW1hcnlfd29ybGRib29rID0gZ2V0Q2hhcldvcmxkYm9va05hbWVzKCdjdXJyZW50JykucHJpbWFyeTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgc2V0dGluZ3Mu5pu05paw5pa55byPID09PSAn6ZqPQUnovpPlh7onIHx8XG4gICAgICAgICAgICBwcmltYXJ5X3dvcmxkYm9vayA9PT0gbnVsbCB8fFxuICAgICAgICAgICAgLy8g6KeS6Imy5Y2h5pyq6YCC6YWN5pe2LCDkvp3ml6fkvb/nlKggXCLpmo9BSei+k+WHulwiXG4gICAgICAgICAgICAhKGF3YWl0IGdldFdvcmxkYm9vayhwcmltYXJ5X3dvcmxkYm9vaykpLnNvbWUoZW50cnkgPT5cbiAgICAgICAgICAgICAgICBlbnRyeS5uYW1lLm1hdGNoKC9cXFttdnVfdXBkYXRlXFxdL2kpXG4gICAgICAgICAgICApXG4gICAgICAgICkge1xuICAgICAgICAgICAgaGFuZGxlVmFyaWFibGVzSW5NZXNzYWdlKG1lc3NhZ2VfaWQpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV2ZXJzZSA9IHRydWU7XG4gICAgICAgIGNvbnN0IHVzZXJfaW5wdXQgPSBgLS0tXG48c3RhdHVzX2Rlc2NyaXB0aW9uPlxuPCU9IFlBTUwuc3RyaW5naWZ5KGdldHZhcignc3RhdF9kYXRhJyksIHsgYmxvY2tRdW90ZTogJ2xpdGVyYWwnIH0pIF8lPlxuPC9zdGF0dXNfZGVzY3JpcHRpb24+XG48bXVzdD5cXGA8c3RhdHVzX2Rlc2NyaXB0aW9uPlxcYOS4reaJgOiusOW9leeahOaYr+WcqOacgOaWsOWJp+aDheS5i+WJjeeahOWPmOmHj+aDheWGteOAguS9oOeOsOWcqOW/hemhu+WBnOatouaJrua8lOaooeW8j++8jOS7peaXgeeZveinhuinkuWIhuaekOacgOaWsOWJp+aDhe+8jOaMieeFp+WPmOmHj+abtOaWsOinhOWImeabtOaWsFxcYDxzdGF0dXNfZGVzY3JpcHRpb24+XFxg5Lit55qE5Y+Y6YePPC9tdXN0PmA7XG4gICAgICAgIC8vIFRPRE86IOegtOmZkOaAjuS5iOWKnlxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBnZW5lcmF0ZVJhdyhcbiAgICAgICAgICAgIHNldHRpbmdzLumineWkluaooeWei+ino+aekOmFjee9ri7mqKHlnovmnaXmupAgPT09ICfkuI7mj5LlpLTnm7jlkIwnXG4gICAgICAgICAgICAgICAgPyB7IHVzZXJfaW5wdXQgfVxuICAgICAgICAgICAgICAgIDoge1xuICAgICAgICAgICAgICAgICAgICAgIHVzZXJfaW5wdXQsXG4gICAgICAgICAgICAgICAgICAgICAgY3VzdG9tX2FwaToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBhcGl1cmw6IHNldHRpbmdzLumineWkluaooeWei+ino+aekOmFjee9ri5hcGnlnLDlnYAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogc2V0dGluZ3Mu6aKd5aSW5qih5Z6L6Kej5p6Q6YWN572uLuWvhumSpSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWw6IHNldHRpbmdzLumineWkluaooeWei+ino+aekOmFjee9ri7mqKHlnovlkI3np7AsXG4gICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgICAgcmV2ZXJzZSA9IGZhbHNlO1xuXG4gICAgICAgIC8vIFFVRVNUSU9OOiDnm67liY3nmoTmlrnmoYjmmK/nm7TmjqXlsIbpop3lpJbmqKHlnovlr7nlj5jph4/nmoTop6PmnpDnu5Pmnpznm7TmjqXlsL7pmYTliLDmpbzlsYLkuK0sIOS8muS4jeS8muWDjyB0b29sIGNhbGxpbmcg6YKj5qC35oqK57uT5p6c5paw5bu65Li65LiA5Liq5qW85bGC5pu05aW9P1xuICAgICAgICBjb25zdCBjaGF0X21lc3NhZ2UgPSBnZXRDaGF0TWVzc2FnZXMobWVzc2FnZV9pZCk7XG4gICAgICAgIGF3YWl0IHNldENoYXRNZXNzYWdlcyhcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VfaWQsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGF0X21lc3NhZ2VbMF0ubWVzc2FnZSArXG4gICAgICAgICAgICAgICAgICAgICAgICAnPFVwZGF0ZVZhcmlhYmxlPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2VBbGwoJzxVcGRhdGVWYXJpYWJsZT4nLCAnJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZUFsbCgnPC9VcGRhdGVWYXJpYWJsZT4nLCAnJykgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJzwvVXBkYXRlVmFyaWFibGU+JyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZWZyZXNoOiAnbm9uZScsXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICAgIGhhbmRsZVZhcmlhYmxlc0luTWVzc2FnZShtZXNzYWdlX2lkKTtcbiAgICB9KTtcblxuICAgIGV2ZW50T24odGF2ZXJuX2V2ZW50cy5NRVNTQUdFX1JFQ0VJVkVELCBoYW5kbGVWYXJpYWJsZXNJbk1lc3NhZ2UpO1xuICAgIGV2ZW50T24oZXhwb3J0ZWRfZXZlbnRzLklOVk9LRV9NVlVfUFJPQ0VTUywgaGFuZGxlVmFyaWFibGVzSW5DYWxsYmFjayk7XG4gICAgZXZlbnRPbihleHBvcnRlZF9ldmVudHMuVVBEQVRFX1ZBUklBQkxFLCB1cGRhdGVWYXJpYWJsZSk7XG5cbiAgICBfLnNldCh3aW5kb3cucGFyZW50LCAnaGFuZGxlVmFyaWFibGVzSW5NZXNzYWdlJywgaGFuZGxlVmFyaWFibGVzSW5NZXNzYWdlKTtcblxuICAgIHRvYXN0ci5pbmZvKFxuICAgICAgICBg5p6E5bu65L+h5oGvOiAke19fQlVJTERfREFURV9fID8/ICdVbmtub3duJ30gKCR7X19DT01NSVRfSURfXyA/PyAnVW5rbm93bid9KWAsXG4gICAgICAgICdNVlXliqDovb3miJDlip8nXG4gICAgKTtcbn0pO1xuXG4kKHdpbmRvdykub24oJ3BhZ2VoaWRlJywgKCkgPT4ge1xuICAgIGRlc3Ryb3lQYW5lbCgpO1xufSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/main.ts\n\n}");
  },
  "./src/panel.ts": 
  /*!**********************!*\
  !*** ./src/panel.ts ***!
  \**********************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval('{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   destroyPanel: () => (/* binding */ destroyPanel),\n/* harmony export */   initPanel: () => (/* binding */ initPanel)\n/* harmony export */ });\n/* harmony import */ var _Panel_vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/Panel.vue */ "./src/Panel.vue");\n/* harmony import */ var pinia__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! pinia */ "pinia");\n/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! vue */ "vue");\n/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(vue__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nconst app = (0,vue__WEBPACK_IMPORTED_MODULE_2__.createApp)(_Panel_vue__WEBPACK_IMPORTED_MODULE_0__["default"]);\nfunction teleportStyle() {\n    if ($(`head > div[script_id="${getScriptId()}"]`).length > 0) {\n        return;\n    }\n    const $div = $(`<div>`)\n        .attr(\'script_id\', getScriptId())\n        .append($(`head > style`, document).clone());\n    $(\'head\').append($div);\n}\nfunction initPanel() {\n    teleportStyle();\n    const $app = $(\'<div>\').attr(\'script_id\', getScriptId());\n    $(\'#extensions_settings2\').append($app);\n    app.use((0,pinia__WEBPACK_IMPORTED_MODULE_1__.createPinia)()).mount($app[0]);\n}\nfunction deteleportStyle() {\n    $(`head > div[script_id="${getScriptId()}"]`).remove();\n}\nfunction destroyPanel() {\n    app.unmount();\n    $(`#extensions_settings2 > div[script_id="${getScriptId()}"]`).remove();\n    deteleportStyle();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcGFuZWwudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQWdDO0FBQ0k7QUFDSjtBQUVoQyxNQUFNLEdBQUcsR0FBRyw4Q0FBUyxDQUFDLGtEQUFLLENBQUMsQ0FBQztBQUU3QixTQUFTLGFBQWE7SUFDbEIsSUFBSSxDQUFDLENBQUMseUJBQXlCLFdBQVcsRUFBRSxJQUFJLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUM7UUFDM0QsT0FBTztJQUNYLENBQUM7SUFDRCxNQUFNLElBQUksR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDO1NBQ2xCLElBQUksQ0FBQyxXQUFXLEVBQUUsV0FBVyxFQUFFLENBQUM7U0FDaEMsTUFBTSxDQUFDLENBQUMsQ0FBQyxjQUFjLEVBQUUsUUFBUSxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQztJQUNqRCxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQzNCLENBQUM7QUFDTSxTQUFTLFNBQVM7SUFDckIsYUFBYSxFQUFFLENBQUM7SUFFaEIsTUFBTSxJQUFJLEdBQUcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsV0FBVyxFQUFFLENBQUMsQ0FBQztJQUN6RCxDQUFDLENBQUMsdUJBQXVCLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7SUFFeEMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxrREFBVyxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDMUMsQ0FBQztBQUVELFNBQVMsZUFBZTtJQUNwQixDQUFDLENBQUMseUJBQXlCLFdBQVcsRUFBRSxJQUFJLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQztBQUMzRCxDQUFDO0FBQ00sU0FBUyxZQUFZO0lBQ3hCLEdBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUVkLENBQUMsQ0FBQywwQ0FBMEMsV0FBVyxFQUFFLElBQUksQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDO0lBRXhFLGVBQWUsRUFBRSxDQUFDO0FBQ3RCLENBQUMiLCJzb3VyY2VzIjpbInNyYzovL3RhdmVybl9oZWxwZXJfdGVtcGxhdGUvc3JjL3BhbmVsLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQYW5lbCBmcm9tICdAL1BhbmVsLnZ1ZSc7XG5pbXBvcnQgeyBjcmVhdGVQaW5pYSB9IGZyb20gJ3BpbmlhJztcbmltcG9ydCB7IGNyZWF0ZUFwcCB9IGZyb20gJ3Z1ZSc7XG5cbmNvbnN0IGFwcCA9IGNyZWF0ZUFwcChQYW5lbCk7XG5cbmZ1bmN0aW9uIHRlbGVwb3J0U3R5bGUoKSB7XG4gICAgaWYgKCQoYGhlYWQgPiBkaXZbc2NyaXB0X2lkPVwiJHtnZXRTY3JpcHRJZCgpfVwiXWApLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCAkZGl2ID0gJChgPGRpdj5gKVxuICAgICAgICAuYXR0cignc2NyaXB0X2lkJywgZ2V0U2NyaXB0SWQoKSlcbiAgICAgICAgLmFwcGVuZCgkKGBoZWFkID4gc3R5bGVgLCBkb2N1bWVudCkuY2xvbmUoKSk7XG4gICAgJCgnaGVhZCcpLmFwcGVuZCgkZGl2KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpbml0UGFuZWwoKSB7XG4gICAgdGVsZXBvcnRTdHlsZSgpO1xuXG4gICAgY29uc3QgJGFwcCA9ICQoJzxkaXY+JykuYXR0cignc2NyaXB0X2lkJywgZ2V0U2NyaXB0SWQoKSk7XG4gICAgJCgnI2V4dGVuc2lvbnNfc2V0dGluZ3MyJykuYXBwZW5kKCRhcHApO1xuXG4gICAgYXBwLnVzZShjcmVhdGVQaW5pYSgpKS5tb3VudCgkYXBwWzBdKTtcbn1cblxuZnVuY3Rpb24gZGV0ZWxlcG9ydFN0eWxlKCkge1xuICAgICQoYGhlYWQgPiBkaXZbc2NyaXB0X2lkPVwiJHtnZXRTY3JpcHRJZCgpfVwiXWApLnJlbW92ZSgpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGRlc3Ryb3lQYW5lbCgpIHtcbiAgICBhcHAudW5tb3VudCgpO1xuXG4gICAgJChgI2V4dGVuc2lvbnNfc2V0dGluZ3MyID4gZGl2W3NjcmlwdF9pZD1cIiR7Z2V0U2NyaXB0SWQoKX1cIl1gKS5yZW1vdmUoKTtcblxuICAgIGRldGVsZXBvcnRTdHlsZSgpO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/panel.ts\n\n}');
  },
  "./src/schema.ts": 
  /*!***********************!*\
  !*** ./src/schema.ts ***!
  \***********************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EXTENSIBLE_MARKER: () => (/* binding */ EXTENSIBLE_MARKER),\n/* harmony export */   cleanUpMetadata: () => (/* binding */ cleanUpMetadata),\n/* harmony export */   generateSchema: () => (/* binding */ generateSchema),\n/* harmony export */   getSchemaForPath: () => (/* binding */ getSchemaForPath),\n/* harmony export */   reconcileAndApplySchema: () => (/* binding */ reconcileAndApplySchema)\n/* harmony export */ });\n/* harmony import */ var _variable_def__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/variable_def */ \"./src/variable_def.ts\");\n\n// 定义魔法字符串为常量，便于管理和引用\nconst EXTENSIBLE_MARKER = '$__META_EXTENSIBLE__$';\n// 模式生成函数\n/**\n * 递归地为数据对象生成一个模式。\n * @param data - 要为其生成模式的数据对象 (stat_data)。\n * @param oldSchemaNode - (可选) 来自旧 Schema 的对应节点，用于继承元数据。\n * @param parentRecursiveExtensible - (可选) 父节点的 recursiveExtensible 状态，默认为 false。\n * @returns - 生成的模式对象。\n */\nfunction generateSchema(data, oldSchemaNode, parentRecursiveExtensible = false) {\n    if (Array.isArray(data)) {\n        let isExtensible = false;\n        let isRecursiveExtensible = parentRecursiveExtensible;\n        let oldElementType;\n        let template;\n        // 使用类型守卫检查 oldSchemaNode 是否为 ArraySchemaNode\n        if (oldSchemaNode) {\n            if ((0,_variable_def__WEBPACK_IMPORTED_MODULE_0__.isArraySchema)(oldSchemaNode)) {\n                isExtensible = oldSchemaNode.extensible === true;\n                isRecursiveExtensible =\n                    oldSchemaNode.recursiveExtensible === true || parentRecursiveExtensible;\n                oldElementType = oldSchemaNode.elementType;\n                template = oldSchemaNode.template;\n            }\n            else {\n                console.error(`Type mismatch: expected array schema but got ${oldSchemaNode.type} at path`);\n            }\n        }\n        // 检查是否有只包含 $meta 的元素\n        const metaElementIndex = data.findIndex(item => _.isObject(item) &&\n            !_.isDate(item) &&\n            '$arrayMeta' in item &&\n            '$meta' in item &&\n            item['$arrayMeta'] === true);\n        if (metaElementIndex !== -1) {\n            const metaElement = data[metaElementIndex];\n            // 从 $meta 中提取数组的元数据\n            if (metaElement.$meta.extensible !== undefined) {\n                isExtensible = metaElement.$meta.extensible;\n            }\n            if (metaElement.$meta.template !== undefined) {\n                template = metaElement.$meta.template;\n            }\n            // 从数组中移除这个元数据元素\n            data.splice(metaElementIndex, 1);\n            console.log(`Array metadata element found and processed.`);\n        }\n        // 检查并处理魔法字符串\n        const markerIndex = data.indexOf(EXTENSIBLE_MARKER);\n        if (markerIndex > -1) {\n            isExtensible = true;\n            // 从数组中移除标记，以免影响后续的类型推断\n            data.splice(markerIndex, 1);\n            console.log(`Extensible marker found and removed from an array.`);\n        }\n        const schema_node = {\n            type: 'array',\n            extensible: isExtensible || parentRecursiveExtensible,\n            recursiveExtensible: isRecursiveExtensible,\n            elementType: data.length > 0\n                ? generateSchema(data[0], oldElementType, isRecursiveExtensible)\n                : { type: 'any' },\n        };\n        if (template !== undefined) {\n            schema_node.template = template;\n        }\n        return schema_node;\n    }\n    if (_.isObject(data) && !_.isDate(data)) {\n        const typedData = data; // 类型断言\n        // 使用类型守卫检查 oldSchemaNode 是否为 ObjectSchemaNode\n        let oldExtensible = false;\n        let oldRecursiveExtensible = parentRecursiveExtensible;\n        let oldProperties;\n        if (oldSchemaNode) {\n            if ((0,_variable_def__WEBPACK_IMPORTED_MODULE_0__.isObjectSchema)(oldSchemaNode)) {\n                oldExtensible = oldSchemaNode.extensible === true;\n                oldRecursiveExtensible =\n                    oldSchemaNode.recursiveExtensible === true || parentRecursiveExtensible;\n                oldProperties = oldSchemaNode.properties;\n            }\n            else {\n                console.error(`Type mismatch: expected object schema but got ${oldSchemaNode.type} at path`);\n            }\n        }\n        const schemaNode = {\n            type: 'object',\n            properties: {},\n            // 默认不可扩展，但检查旧 schema、$meta.extensible 或 parentRecursiveExtensible\n            extensible: oldExtensible ||\n                typedData.$meta?.extensible === true ||\n                typedData.$meta?.recursiveExtensible === true ||\n                parentRecursiveExtensible,\n            recursiveExtensible: oldRecursiveExtensible || typedData.$meta?.recursiveExtensible === true,\n        };\n        // 处理 template\n        if (typedData.$meta?.template !== undefined) {\n            schemaNode.template = typedData.$meta.template;\n        }\n        else if (oldSchemaNode && (0,_variable_def__WEBPACK_IMPORTED_MODULE_0__.isObjectSchema)(oldSchemaNode) && oldSchemaNode.template) {\n            schemaNode.template = oldSchemaNode.template;\n        }\n        // 暂存父节点的 $meta，以便在循环中使用\n        const parentMeta = typedData.$meta;\n        // 从 $meta 中读取信息后，将其从数据中移除，避免污染\n        if (typedData.$meta) {\n            delete typedData.$meta;\n        }\n        for (const key in data) {\n            const oldChildNode = oldProperties?.[key];\n            // 传递当前节点的 recursiveExtensible（如果存在）或父节点的 recursiveExtensible\n            // 但如果当前节点明确设置 extensible: false, 则停止递归扩展\n            const childRecursiveExtensible = schemaNode.extensible !== false && schemaNode.recursiveExtensible;\n            const childSchema = generateSchema(typedData[key], oldChildNode, childRecursiveExtensible);\n            // 一个属性是否必需？\n            // 1. 默认值: 如果父节点可扩展，子节点默认为可选；否则为必需。\n            let isRequired = !schemaNode.extensible;\n            // 2. 覆盖规则: 检查父元数据中的 'required' 数组。\n            //    如果父节点的 $meta.required 是一个数组，并且当前 key 在这个数组里，\n            //    则无论默认值是什么，都强制覆盖为必需。\n            if (Array.isArray(parentMeta?.required) && parentMeta.required.includes(key)) {\n                isRequired = true;\n            }\n            // 3. 检查旧 schema 的设置，作为最后的参考\n            if (oldChildNode?.required === false) {\n                // 如果旧 schema 明确说这个是可选的，那么以这个为准\n                isRequired = false;\n            }\n            else if (oldChildNode?.required === true) {\n                isRequired = true;\n            }\n            schemaNode.properties[key] = {\n                ...childSchema,\n                required: isRequired,\n            };\n        }\n        return schemaNode;\n    }\n    // 处理原始类型\n    const dataType = typeof data;\n    if (dataType === 'string' || dataType === 'number' || dataType === 'boolean') {\n        return { type: dataType };\n    }\n    // 对于其他类型（function, symbol, bigint, undefined 等），默认返回 'any'\n    return { type: 'any' };\n}\n/**\n * 辅助函数：为数据路径获取对应的 Schema 规则。\n * 能够处理数组索引，将其转换为 .elementType 来查询 Schema。\n * @param schema - 完整的 Schema 对象\n * @param path - 要查询的数据路径\n * @returns 对应路径的 Schema 节点，如果找不到则返回 null。\n */\nfunction getSchemaForPath(schema, path) {\n    if (!path || !schema) {\n        return schema || null;\n    }\n    // 将 lodash 路径字符串转换为段数组，例如 'a.b[0].c' -> ['a', 'b', '0', 'c']\n    const pathSegments = _.toPath(path);\n    let currentSchema = schema;\n    for (const segment of pathSegments) {\n        if (!currentSchema)\n            return null;\n        // 如果 segment 是数字（数组索引），则移动到 elementType\n        if (/^\\d+$/.test(segment)) {\n            if ((0,_variable_def__WEBPACK_IMPORTED_MODULE_0__.isArraySchema)(currentSchema)) {\n                currentSchema = currentSchema.elementType;\n            }\n            else {\n                return null; // 路径试图索引一个非数组或无 elementType 的 schema\n            }\n        }\n        else if ((0,_variable_def__WEBPACK_IMPORTED_MODULE_0__.isObjectSchema)(currentSchema) && currentSchema.properties[segment]) {\n            // 否则，作为对象属性访问\n            const property = currentSchema.properties[segment];\n            currentSchema = property;\n        }\n        else {\n            return null; // 路径中的键在 schema 中不存在\n        }\n    }\n    return currentSchema;\n}\n/**\n * 调和函数：比较数据和旧 Schema，生成并应用一个与当前数据状态完全同步的新 Schema。\n * @param variables - 包含 stat_data 和旧 schema 的变量对象。\n */\nfunction reconcileAndApplySchema(variables) {\n    console.log('Reconciling schema with current data state...');\n    // 1. 深拷贝数据，以防 generateSchema 修改原始数据（例如删除 $meta）\n    const currentDataClone = _.cloneDeep(variables.stat_data);\n    // 2. 使用改进后的 generateSchema 生成一个与当前数据完全匹配的新 Schema，\n    //    并在此过程中从旧 Schema 继承元数据。\n    const newSchema = generateSchema(currentDataClone, variables.schema);\n    // 3. 直接用新 Schema 替换旧 Schema\n    // stat_data 的根节点应该始终是对象，所以生成的 schema 也应该是 ObjectSchemaNode\n    if (!(0,_variable_def__WEBPACK_IMPORTED_MODULE_0__.isObjectSchema)(newSchema)) {\n        console.error('Generated schema is not an object schema, which is unexpected for stat_data root');\n        return;\n    }\n    // 保留 RootAdditionalProps\n    const newSchemaWithProps = newSchema;\n    if (variables.schema?.strictTemplate !== undefined) {\n        newSchemaWithProps.strictTemplate = variables.schema.strictTemplate;\n    }\n    if (variables.schema?.strictSet !== undefined) {\n        newSchemaWithProps.strictSet = variables.schema.strictSet;\n    }\n    if (variables.schema?.concatTemplateArray !== undefined) {\n        newSchemaWithProps.concatTemplateArray = variables.schema.concatTemplateArray;\n    }\n    if (_.has(variables.stat_data, '$meta.strictTemplate'))\n        newSchemaWithProps.strictTemplate = variables.stat_data['$meta']?.strictTemplate;\n    if (_.has(variables.stat_data, '$meta.strictSet'))\n        newSchemaWithProps.strictSet = variables.stat_data['$meta']?.strictSet;\n    if (_.has(variables.stat_data, '$meta.concatTemplateArray'))\n        newSchemaWithProps.concatTemplateArray = variables.stat_data['$meta']\n            ?.concatTemplateArray;\n    variables.schema = newSchemaWithProps;\n    console.log('Schema reconciliation complete.');\n}\nfunction isMetaCarrier(value) {\n    return _.isObject(value) && !_.isDate(value);\n}\n/**\n * 递归清理数据中的元数据标记\n * - 从数组中移除 EXTENSIBLE_MARKER\n * - 从对象中删除 $meta 属性\n * @param data 需要清理的数据\n */\nfunction cleanUpMetadata(data) {\n    // 如果是数组，移除魔法字符串和只包含 $meta 的元素，并递归\n    if (Array.isArray(data)) {\n        let i = data.length;\n        while (i--) {\n            if (data[i] === EXTENSIBLE_MARKER) {\n                data.splice(i, 1);\n            }\n            else if (_.isObject(data[i]) &&\n                !_.isDate(data[i]) &&\n                '$arrayMeta' in data[i] &&\n                '$meta' in data[i] &&\n                data[i]['$arrayMeta'] === true) {\n                // 移除只包含 $meta & $arrayMeta 的元素\n                data.splice(i, 1);\n            }\n            else {\n                // 对数组中的其他元素（可能是对象或数组）进行递归清理\n                cleanUpMetadata(data[i]);\n            }\n        }\n    }\n    // 如果是对象，移除 $meta 并递归\n    else if (isMetaCarrier(data)) {\n        // 清除自身 $meta\n        delete data.$meta;\n        // 递归\n        for (const key in data) {\n            cleanUpMetadata(data[key]);\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDdEIsQ0FBQztpQkFBTSxDQUFDO2dCQUNKLDRCQUE0QjtnQkFDNUIsZUFBZSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzdCLENBQUM7UUFDTCxDQUFDO0lBQ0wsQ0FBQztJQUNELHFCQUFxQjtTQUNoQixJQUFJLGFBQWEsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDO1FBQzNCLGFBQWE7UUFDYixPQUFPLElBQUksQ0FBQyxLQUFLLENBQUM7UUFFbEIsS0FBSztRQUNMLEtBQUssTUFBTSxHQUFHLElBQUksSUFBSSxFQUFFLENBQUM7WUFDckIsZUFBZSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQy9CLENBQUM7SUFDTCxDQUFDO0FBQ0wsQ0FBQyIsInNvdXJjZXMiOlsic3JjOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS9zcmMvc2NoZW1hLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gICAgU2NoZW1hTm9kZSxcbiAgICBTdGF0RGF0YSxcbiAgICBpc0FycmF5U2NoZW1hLFxuICAgIGlzT2JqZWN0U2NoZW1hLFxuICAgIE9iamVjdFNjaGVtYU5vZGUsXG4gICAgTXZ1RGF0YSxcbiAgICBBcnJheVNjaGVtYU5vZGUsXG4gICAgVGVtcGxhdGVUeXBlLFxuICAgIFJvb3RBZGRpdGlvbmFsUHJvcHMsXG59IGZyb20gJ0AvdmFyaWFibGVfZGVmJztcblxuLy8g5a6a5LmJ6a2U5rOV5a2X56ym5Liy5Li65bi46YeP77yM5L6/5LqO566h55CG5ZKM5byV55SoXG5leHBvcnQgY29uc3QgRVhURU5TSUJMRV9NQVJLRVIgPSAnJF9fTUVUQV9FWFRFTlNJQkxFX18kJztcblxuLy8g5qih5byP55Sf5oiQ5Ye95pWwXG4vKipcbiAqIOmAkuW9kuWcsOS4uuaVsOaNruWvueixoeeUn+aIkOS4gOS4quaooeW8j+OAglxuICogQHBhcmFtIGRhdGEgLSDopoHkuLrlhbbnlJ/miJDmqKHlvI/nmoTmlbDmja7lr7nosaEgKHN0YXRfZGF0YSnjgIJcbiAqIEBwYXJhbSBvbGRTY2hlbWFOb2RlIC0gKOWPr+mAiSkg5p2l6Ieq5penIFNjaGVtYSDnmoTlr7nlupToioLngrnvvIznlKjkuo7nu6fmib/lhYPmlbDmja7jgIJcbiAqIEBwYXJhbSBwYXJlbnRSZWN1cnNpdmVFeHRlbnNpYmxlIC0gKOWPr+mAiSkg54i26IqC54K555qEIHJlY3Vyc2l2ZUV4dGVuc2libGUg54q25oCB77yM6buY6K6k5Li6IGZhbHNl44CCXG4gKiBAcmV0dXJucyAtIOeUn+aIkOeahOaooeW8j+WvueixoeOAglxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVTY2hlbWEoXG4gICAgZGF0YTogYW55LFxuICAgIG9sZFNjaGVtYU5vZGU/OiBTY2hlbWFOb2RlLFxuICAgIHBhcmVudFJlY3Vyc2l2ZUV4dGVuc2libGU6IGJvb2xlYW4gPSBmYWxzZVxuKTogU2NoZW1hTm9kZSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHtcbiAgICAgICAgbGV0IGlzRXh0ZW5zaWJsZSA9IGZhbHNlO1xuICAgICAgICBsZXQgaXNSZWN1cnNpdmVFeHRlbnNpYmxlID0gcGFyZW50UmVjdXJzaXZlRXh0ZW5zaWJsZTtcbiAgICAgICAgbGV0IG9sZEVsZW1lbnRUeXBlOiBTY2hlbWFOb2RlIHwgdW5kZWZpbmVkO1xuICAgICAgICBsZXQgdGVtcGxhdGU6IFRlbXBsYXRlVHlwZSB8IHVuZGVmaW5lZDtcblxuICAgICAgICAvLyDkvb/nlKjnsbvlnovlrojljavmo4Dmn6Ugb2xkU2NoZW1hTm9kZSDmmK/lkKbkuLogQXJyYXlTY2hlbWFOb2RlXG4gICAgICAgIGlmIChvbGRTY2hlbWFOb2RlKSB7XG4gICAgICAgICAgICBpZiAoaXNBcnJheVNjaGVtYShvbGRTY2hlbWFOb2RlKSkge1xuICAgICAgICAgICAgICAgIGlzRXh0ZW5zaWJsZSA9IG9sZFNjaGVtYU5vZGUuZXh0ZW5zaWJsZSA9PT0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpc1JlY3Vyc2l2ZUV4dGVuc2libGUgPVxuICAgICAgICAgICAgICAgICAgICBvbGRTY2hlbWFOb2RlLnJlY3Vyc2l2ZUV4dGVuc2libGUgPT09IHRydWUgfHwgcGFyZW50UmVjdXJzaXZlRXh0ZW5zaWJsZTtcbiAgICAgICAgICAgICAgICBvbGRFbGVtZW50VHlwZSA9IG9sZFNjaGVtYU5vZGUuZWxlbWVudFR5cGU7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGUgPSBvbGRTY2hlbWFOb2RlLnRlbXBsYXRlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgICAgICAgICBgVHlwZSBtaXNtYXRjaDogZXhwZWN0ZWQgYXJyYXkgc2NoZW1hIGJ1dCBnb3QgJHtvbGRTY2hlbWFOb2RlLnR5cGV9IGF0IHBhdGhgXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOajgOafpeaYr+WQpuacieWPquWMheWQqyAkbWV0YSDnmoTlhYPntKBcbiAgICAgICAgY29uc3QgbWV0YUVsZW1lbnRJbmRleCA9IGRhdGEuZmluZEluZGV4KFxuICAgICAgICAgICAgaXRlbSA9PlxuICAgICAgICAgICAgICAgIF8uaXNPYmplY3QoaXRlbSkgJiZcbiAgICAgICAgICAgICAgICAhXy5pc0RhdGUoaXRlbSkgJiZcbiAgICAgICAgICAgICAgICAnJGFycmF5TWV0YScgaW4gaXRlbSAmJlxuICAgICAgICAgICAgICAgICckbWV0YScgaW4gaXRlbSAmJlxuICAgICAgICAgICAgICAgIGl0ZW1bJyRhcnJheU1ldGEnXSA9PT0gdHJ1ZVxuICAgICAgICApO1xuXG4gICAgICAgIGlmIChtZXRhRWxlbWVudEluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgY29uc3QgbWV0YUVsZW1lbnQgPSBkYXRhW21ldGFFbGVtZW50SW5kZXhdIGFzIHsgJG1ldGE6IGFueSB9O1xuICAgICAgICAgICAgLy8g5LuOICRtZXRhIOS4reaPkOWPluaVsOe7hOeahOWFg+aVsOaNrlxuICAgICAgICAgICAgaWYgKG1ldGFFbGVtZW50LiRtZXRhLmV4dGVuc2libGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGlzRXh0ZW5zaWJsZSA9IG1ldGFFbGVtZW50LiRtZXRhLmV4dGVuc2libGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWV0YUVsZW1lbnQuJG1ldGEudGVtcGxhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlID0gbWV0YUVsZW1lbnQuJG1ldGEudGVtcGxhdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyDku47mlbDnu4TkuK3np7vpmaTov5nkuKrlhYPmlbDmja7lhYPntKBcbiAgICAgICAgICAgIGRhdGEuc3BsaWNlKG1ldGFFbGVtZW50SW5kZXgsIDEpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYEFycmF5IG1ldGFkYXRhIGVsZW1lbnQgZm91bmQgYW5kIHByb2Nlc3NlZC5gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOajgOafpeW5tuWkhOeQhumtlOazleWtl+espuS4slxuICAgICAgICBjb25zdCBtYXJrZXJJbmRleCA9IGRhdGEuaW5kZXhPZihFWFRFTlNJQkxFX01BUktFUik7XG4gICAgICAgIGlmIChtYXJrZXJJbmRleCA+IC0xKSB7XG4gICAgICAgICAgICBpc0V4dGVuc2libGUgPSB0cnVlO1xuICAgICAgICAgICAgLy8g5LuO5pWw57uE5Lit56e76Zmk5qCH6K6w77yM5Lul5YWN5b2x5ZON5ZCO57ut55qE57G75Z6L5o6o5patXG4gICAgICAgICAgICBkYXRhLnNwbGljZShtYXJrZXJJbmRleCwgMSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgRXh0ZW5zaWJsZSBtYXJrZXIgZm91bmQgYW5kIHJlbW92ZWQgZnJvbSBhbiBhcnJheS5gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHNjaGVtYV9ub2RlOiBBcnJheVNjaGVtYU5vZGUgPSB7XG4gICAgICAgICAgICB0eXBlOiAnYXJyYXknLFxuICAgICAgICAgICAgZXh0ZW5zaWJsZTogaXNFeHRlbnNpYmxlIHx8IHBhcmVudFJlY3Vyc2l2ZUV4dGVuc2libGUsXG4gICAgICAgICAgICByZWN1cnNpdmVFeHRlbnNpYmxlOiBpc1JlY3Vyc2l2ZUV4dGVuc2libGUsXG4gICAgICAgICAgICBlbGVtZW50VHlwZTpcbiAgICAgICAgICAgICAgICBkYXRhLmxlbmd0aCA+IDBcbiAgICAgICAgICAgICAgICAgICAgPyBnZW5lcmF0ZVNjaGVtYShkYXRhWzBdLCBvbGRFbGVtZW50VHlwZSwgaXNSZWN1cnNpdmVFeHRlbnNpYmxlKVxuICAgICAgICAgICAgICAgICAgICA6IHsgdHlwZTogJ2FueScgfSxcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAodGVtcGxhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc2NoZW1hX25vZGUudGVtcGxhdGUgPSB0ZW1wbGF0ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzY2hlbWFfbm9kZTtcbiAgICB9XG4gICAgaWYgKF8uaXNPYmplY3QoZGF0YSkgJiYgIV8uaXNEYXRlKGRhdGEpKSB7XG4gICAgICAgIGNvbnN0IHR5cGVkRGF0YSA9IGRhdGEgYXMgU3RhdERhdGE7IC8vIOexu+Wei+aWreiogFxuXG4gICAgICAgIC8vIOS9v+eUqOexu+Wei+WuiOWNq+ajgOafpSBvbGRTY2hlbWFOb2RlIOaYr+WQpuS4uiBPYmplY3RTY2hlbWFOb2RlXG4gICAgICAgIGxldCBvbGRFeHRlbnNpYmxlID0gZmFsc2U7XG4gICAgICAgIGxldCBvbGRSZWN1cnNpdmVFeHRlbnNpYmxlID0gcGFyZW50UmVjdXJzaXZlRXh0ZW5zaWJsZTtcbiAgICAgICAgbGV0IG9sZFByb3BlcnRpZXM6IE9iamVjdFNjaGVtYU5vZGVbJ3Byb3BlcnRpZXMnXSB8IHVuZGVmaW5lZDtcblxuICAgICAgICBpZiAob2xkU2NoZW1hTm9kZSkge1xuICAgICAgICAgICAgaWYgKGlzT2JqZWN0U2NoZW1hKG9sZFNjaGVtYU5vZGUpKSB7XG4gICAgICAgICAgICAgICAgb2xkRXh0ZW5zaWJsZSA9IG9sZFNjaGVtYU5vZGUuZXh0ZW5zaWJsZSA9PT0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBvbGRSZWN1cnNpdmVFeHRlbnNpYmxlID1cbiAgICAgICAgICAgICAgICAgICAgb2xkU2NoZW1hTm9kZS5yZWN1cnNpdmVFeHRlbnNpYmxlID09PSB0cnVlIHx8IHBhcmVudFJlY3Vyc2l2ZUV4dGVuc2libGU7XG4gICAgICAgICAgICAgICAgb2xkUHJvcGVydGllcyA9IG9sZFNjaGVtYU5vZGUucHJvcGVydGllcztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICAgICAgICAgICAgYFR5cGUgbWlzbWF0Y2g6IGV4cGVjdGVkIG9iamVjdCBzY2hlbWEgYnV0IGdvdCAke29sZFNjaGVtYU5vZGUudHlwZX0gYXQgcGF0aGBcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc2NoZW1hTm9kZTogT2JqZWN0U2NoZW1hTm9kZSA9IHtcbiAgICAgICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICAgICAgcHJvcGVydGllczoge30sXG4gICAgICAgICAgICAvLyDpu5jorqTkuI3lj6/mianlsZXvvIzkvYbmo4Dmn6Xml6cgc2NoZW1h44CBJG1ldGEuZXh0ZW5zaWJsZSDmiJYgcGFyZW50UmVjdXJzaXZlRXh0ZW5zaWJsZVxuICAgICAgICAgICAgZXh0ZW5zaWJsZTpcbiAgICAgICAgICAgICAgICBvbGRFeHRlbnNpYmxlIHx8XG4gICAgICAgICAgICAgICAgdHlwZWREYXRhLiRtZXRhPy5leHRlbnNpYmxlID09PSB0cnVlIHx8XG4gICAgICAgICAgICAgICAgdHlwZWREYXRhLiRtZXRhPy5yZWN1cnNpdmVFeHRlbnNpYmxlID09PSB0cnVlIHx8XG4gICAgICAgICAgICAgICAgcGFyZW50UmVjdXJzaXZlRXh0ZW5zaWJsZSxcbiAgICAgICAgICAgIHJlY3Vyc2l2ZUV4dGVuc2libGU6XG4gICAgICAgICAgICAgICAgb2xkUmVjdXJzaXZlRXh0ZW5zaWJsZSB8fCB0eXBlZERhdGEuJG1ldGE/LnJlY3Vyc2l2ZUV4dGVuc2libGUgPT09IHRydWUsXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8g5aSE55CGIHRlbXBsYXRlXG4gICAgICAgIGlmICh0eXBlZERhdGEuJG1ldGE/LnRlbXBsYXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHNjaGVtYU5vZGUudGVtcGxhdGUgPSB0eXBlZERhdGEuJG1ldGEudGVtcGxhdGU7XG4gICAgICAgIH0gZWxzZSBpZiAob2xkU2NoZW1hTm9kZSAmJiBpc09iamVjdFNjaGVtYShvbGRTY2hlbWFOb2RlKSAmJiBvbGRTY2hlbWFOb2RlLnRlbXBsYXRlKSB7XG4gICAgICAgICAgICBzY2hlbWFOb2RlLnRlbXBsYXRlID0gb2xkU2NoZW1hTm9kZS50ZW1wbGF0ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOaaguWtmOeItuiKgueCueeahCAkbWV0Ye+8jOS7peS+v+WcqOW+queOr+S4reS9v+eUqFxuICAgICAgICBjb25zdCBwYXJlbnRNZXRhID0gdHlwZWREYXRhLiRtZXRhO1xuXG4gICAgICAgIC8vIOS7jiAkbWV0YSDkuK3or7vlj5bkv6Hmga/lkI7vvIzlsIblhbbku47mlbDmja7kuK3np7vpmaTvvIzpgb/lhY3msaHmn5NcbiAgICAgICAgaWYgKHR5cGVkRGF0YS4kbWV0YSkge1xuICAgICAgICAgICAgZGVsZXRlIHR5cGVkRGF0YS4kbWV0YTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIGRhdGEpIHtcbiAgICAgICAgICAgIGNvbnN0IG9sZENoaWxkTm9kZSA9IG9sZFByb3BlcnRpZXM/LltrZXldO1xuICAgICAgICAgICAgLy8g5Lyg6YCS5b2T5YmN6IqC54K555qEIHJlY3Vyc2l2ZUV4dGVuc2libGXvvIjlpoLmnpzlrZjlnKjvvInmiJbniLboioLngrnnmoQgcmVjdXJzaXZlRXh0ZW5zaWJsZVxuICAgICAgICAgICAgLy8g5L2G5aaC5p6c5b2T5YmN6IqC54K55piO56Gu6K6+572uIGV4dGVuc2libGU6IGZhbHNlLCDliJnlgZzmraLpgJLlvZLmianlsZVcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkUmVjdXJzaXZlRXh0ZW5zaWJsZSA9XG4gICAgICAgICAgICAgICAgc2NoZW1hTm9kZS5leHRlbnNpYmxlICE9PSBmYWxzZSAmJiBzY2hlbWFOb2RlLnJlY3Vyc2l2ZUV4dGVuc2libGU7XG4gICAgICAgICAgICBjb25zdCBjaGlsZFNjaGVtYSA9IGdlbmVyYXRlU2NoZW1hKFxuICAgICAgICAgICAgICAgIHR5cGVkRGF0YVtrZXldLFxuICAgICAgICAgICAgICAgIG9sZENoaWxkTm9kZSxcbiAgICAgICAgICAgICAgICBjaGlsZFJlY3Vyc2l2ZUV4dGVuc2libGVcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIC8vIOS4gOS4quWxnuaAp+aYr+WQpuW/hemcgO+8n1xuXG4gICAgICAgICAgICAvLyAxLiDpu5jorqTlgLw6IOWmguaenOeItuiKgueCueWPr+aJqeWxle+8jOWtkOiKgueCuem7mOiupOS4uuWPr+mAie+8m+WQpuWImeS4uuW/hemcgOOAglxuICAgICAgICAgICAgbGV0IGlzUmVxdWlyZWQgPSAhc2NoZW1hTm9kZS5leHRlbnNpYmxlO1xuXG4gICAgICAgICAgICAvLyAyLiDopobnm5bop4TliJk6IOajgOafpeeItuWFg+aVsOaNruS4reeahCAncmVxdWlyZWQnIOaVsOe7hOOAglxuICAgICAgICAgICAgLy8gICAg5aaC5p6c54i26IqC54K555qEICRtZXRhLnJlcXVpcmVkIOaYr+S4gOS4quaVsOe7hO+8jOW5tuS4lOW9k+WJjSBrZXkg5Zyo6L+Z5Liq5pWw57uE6YeM77yMXG4gICAgICAgICAgICAvLyAgICDliJnml6Dorrrpu5jorqTlgLzmmK/ku4DkuYjvvIzpg73lvLrliLbopobnm5bkuLrlv4XpnIDjgIJcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHBhcmVudE1ldGE/LnJlcXVpcmVkKSAmJiBwYXJlbnRNZXRhLnJlcXVpcmVkLmluY2x1ZGVzKGtleSkpIHtcbiAgICAgICAgICAgICAgICBpc1JlcXVpcmVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gMy4g5qOA5p+l5penIHNjaGVtYSDnmoTorr7nva7vvIzkvZzkuLrmnIDlkI7nmoTlj4LogINcbiAgICAgICAgICAgIGlmIChvbGRDaGlsZE5vZGU/LnJlcXVpcmVkID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIC8vIOWmguaenOaXpyBzY2hlbWEg5piO56Gu6K+06L+Z5Liq5piv5Y+v6YCJ55qE77yM6YKj5LmI5Lul6L+Z5Liq5Li65YeGXG4gICAgICAgICAgICAgICAgaXNSZXF1aXJlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChvbGRDaGlsZE5vZGU/LnJlcXVpcmVkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgaXNSZXF1aXJlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNjaGVtYU5vZGUucHJvcGVydGllc1trZXldID0ge1xuICAgICAgICAgICAgICAgIC4uLmNoaWxkU2NoZW1hLFxuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBpc1JlcXVpcmVkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2NoZW1hTm9kZTtcbiAgICB9XG4gICAgLy8g5aSE55CG5Y6f5aeL57G75Z6LXG4gICAgY29uc3QgZGF0YVR5cGUgPSB0eXBlb2YgZGF0YTtcbiAgICBpZiAoZGF0YVR5cGUgPT09ICdzdHJpbmcnIHx8IGRhdGFUeXBlID09PSAnbnVtYmVyJyB8fCBkYXRhVHlwZSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgIHJldHVybiB7IHR5cGU6IGRhdGFUeXBlIH07XG4gICAgfVxuICAgIC8vIOWvueS6juWFtuS7luexu+Wei++8iGZ1bmN0aW9uLCBzeW1ib2wsIGJpZ2ludCwgdW5kZWZpbmVkIOetie+8ie+8jOm7mOiupOi/lOWbniAnYW55J1xuICAgIHJldHVybiB7IHR5cGU6ICdhbnknIH07XG59XG5cbi8qKlxuICog6L6F5Yqp5Ye95pWw77ya5Li65pWw5o2u6Lev5b6E6I635Y+W5a+55bqU55qEIFNjaGVtYSDop4TliJnjgIJcbiAqIOiDveWkn+WkhOeQhuaVsOe7hOe0ouW8le+8jOWwhuWFtui9rOaNouS4uiAuZWxlbWVudFR5cGUg5p2l5p+l6K+iIFNjaGVtYeOAglxuICogQHBhcmFtIHNjaGVtYSAtIOWujOaVtOeahCBTY2hlbWEg5a+56LGhXG4gKiBAcGFyYW0gcGF0aCAtIOimgeafpeivoueahOaVsOaNrui3r+W+hFxuICogQHJldHVybnMg5a+55bqU6Lev5b6E55qEIFNjaGVtYSDoioLngrnvvIzlpoLmnpzmib7kuI3liLDliJnov5Tlm54gbnVsbOOAglxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2NoZW1hRm9yUGF0aChcbiAgICBzY2hlbWE6IFNjaGVtYU5vZGUgfCBudWxsIHwgdW5kZWZpbmVkLFxuICAgIHBhdGg6IHN0cmluZ1xuKTogU2NoZW1hTm9kZSB8IG51bGwge1xuICAgIGlmICghcGF0aCB8fCAhc2NoZW1hKSB7XG4gICAgICAgIHJldHVybiBzY2hlbWEgfHwgbnVsbDtcbiAgICB9XG4gICAgLy8g5bCGIGxvZGFzaCDot6/lvoTlrZfnrKbkuLLovazmjaLkuLrmrrXmlbDnu4TvvIzkvovlpoIgJ2EuYlswXS5jJyAtPiBbJ2EnLCAnYicsICcwJywgJ2MnXVxuICAgIGNvbnN0IHBhdGhTZWdtZW50cyA9IF8udG9QYXRoKHBhdGgpO1xuICAgIGxldCBjdXJyZW50U2NoZW1hOiBTY2hlbWFOb2RlIHwgbnVsbCA9IHNjaGVtYTtcblxuICAgIGZvciAoY29uc3Qgc2VnbWVudCBvZiBwYXRoU2VnbWVudHMpIHtcbiAgICAgICAgaWYgKCFjdXJyZW50U2NoZW1hKSByZXR1cm4gbnVsbDtcblxuICAgICAgICAvLyDlpoLmnpwgc2VnbWVudCDmmK/mlbDlrZfvvIjmlbDnu4TntKLlvJXvvInvvIzliJnnp7vliqjliLAgZWxlbWVudFR5cGVcbiAgICAgICAgaWYgKC9eXFxkKyQvLnRlc3Qoc2VnbWVudCkpIHtcbiAgICAgICAgICAgIGlmIChpc0FycmF5U2NoZW1hKGN1cnJlbnRTY2hlbWEpKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFNjaGVtYSA9IGN1cnJlbnRTY2hlbWEuZWxlbWVudFR5cGU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsOyAvLyDot6/lvoTor5Xlm77ntKLlvJXkuIDkuKrpnZ7mlbDnu4TmiJbml6AgZWxlbWVudFR5cGUg55qEIHNjaGVtYVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGlzT2JqZWN0U2NoZW1hKGN1cnJlbnRTY2hlbWEpICYmIGN1cnJlbnRTY2hlbWEucHJvcGVydGllc1tzZWdtZW50XSkge1xuICAgICAgICAgICAgLy8g5ZCm5YiZ77yM5L2c5Li65a+56LGh5bGe5oCn6K6/6ZeuXG4gICAgICAgICAgICBjb25zdCBwcm9wZXJ0eSA9IGN1cnJlbnRTY2hlbWEucHJvcGVydGllc1tzZWdtZW50XTtcbiAgICAgICAgICAgIGN1cnJlbnRTY2hlbWEgPSBwcm9wZXJ0eSBhcyBTY2hlbWFOb2RlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7IC8vIOi3r+W+hOS4reeahOmUruWcqCBzY2hlbWEg5Lit5LiN5a2Y5ZyoXG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGN1cnJlbnRTY2hlbWE7XG59XG5cbi8qKlxuICog6LCD5ZKM5Ye95pWw77ya5q+U6L6D5pWw5o2u5ZKM5penIFNjaGVtYe+8jOeUn+aIkOW5tuW6lOeUqOS4gOS4quS4juW9k+WJjeaVsOaNrueKtuaAgeWujOWFqOWQjOatpeeahOaWsCBTY2hlbWHjgIJcbiAqIEBwYXJhbSB2YXJpYWJsZXMgLSDljIXlkKsgc3RhdF9kYXRhIOWSjOaXpyBzY2hlbWEg55qE5Y+Y6YeP5a+56LGh44CCXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWNvbmNpbGVBbmRBcHBseVNjaGVtYSh2YXJpYWJsZXM6IE12dURhdGEpIHtcbiAgICBjb25zb2xlLmxvZygnUmVjb25jaWxpbmcgc2NoZW1hIHdpdGggY3VycmVudCBkYXRhIHN0YXRlLi4uJyk7XG5cbiAgICAvLyAxLiDmt7Hmi7fotJ3mlbDmja7vvIzku6XpmLIgZ2VuZXJhdGVTY2hlbWEg5L+u5pS55Y6f5aeL5pWw5o2u77yI5L6L5aaC5Yig6ZmkICRtZXRh77yJXG4gICAgY29uc3QgY3VycmVudERhdGFDbG9uZSA9IF8uY2xvbmVEZWVwKHZhcmlhYmxlcy5zdGF0X2RhdGEpO1xuXG4gICAgLy8gMi4g5L2/55So5pS56L+b5ZCO55qEIGdlbmVyYXRlU2NoZW1hIOeUn+aIkOS4gOS4quS4juW9k+WJjeaVsOaNruWujOWFqOWMuemFjeeahOaWsCBTY2hlbWHvvIxcbiAgICAvLyAgICDlubblnKjmraTov4fnqIvkuK3ku47ml6cgU2NoZW1hIOe7p+aJv+WFg+aVsOaNruOAglxuICAgIGNvbnN0IG5ld1NjaGVtYSA9IGdlbmVyYXRlU2NoZW1hKGN1cnJlbnREYXRhQ2xvbmUsIHZhcmlhYmxlcy5zY2hlbWEpO1xuXG4gICAgLy8gMy4g55u05o6l55So5pawIFNjaGVtYSDmm7/mjaLml6cgU2NoZW1hXG4gICAgLy8gc3RhdF9kYXRhIOeahOagueiKgueCueW6lOivpeWni+e7iOaYr+Wvueixoe+8jOaJgOS7peeUn+aIkOeahCBzY2hlbWEg5Lmf5bqU6K+l5pivIE9iamVjdFNjaGVtYU5vZGVcbiAgICBpZiAoIWlzT2JqZWN0U2NoZW1hKG5ld1NjaGVtYSkpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICAgICdHZW5lcmF0ZWQgc2NoZW1hIGlzIG5vdCBhbiBvYmplY3Qgc2NoZW1hLCB3aGljaCBpcyB1bmV4cGVjdGVkIGZvciBzdGF0X2RhdGEgcm9vdCdcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIOS/neeVmSBSb290QWRkaXRpb25hbFByb3BzXG4gICAgY29uc3QgbmV3U2NoZW1hV2l0aFByb3BzID0gbmV3U2NoZW1hIGFzIE9iamVjdFNjaGVtYU5vZGUgJiBSb290QWRkaXRpb25hbFByb3BzO1xuICAgIGlmICh2YXJpYWJsZXMuc2NoZW1hPy5zdHJpY3RUZW1wbGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG5ld1NjaGVtYVdpdGhQcm9wcy5zdHJpY3RUZW1wbGF0ZSA9IHZhcmlhYmxlcy5zY2hlbWEuc3RyaWN0VGVtcGxhdGU7XG4gICAgfVxuICAgIGlmICh2YXJpYWJsZXMuc2NoZW1hPy5zdHJpY3RTZXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBuZXdTY2hlbWFXaXRoUHJvcHMuc3RyaWN0U2V0ID0gdmFyaWFibGVzLnNjaGVtYS5zdHJpY3RTZXQ7XG4gICAgfVxuICAgIGlmICh2YXJpYWJsZXMuc2NoZW1hPy5jb25jYXRUZW1wbGF0ZUFycmF5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbmV3U2NoZW1hV2l0aFByb3BzLmNvbmNhdFRlbXBsYXRlQXJyYXkgPSB2YXJpYWJsZXMuc2NoZW1hLmNvbmNhdFRlbXBsYXRlQXJyYXk7XG4gICAgfVxuICAgIGlmIChfLmhhcyh2YXJpYWJsZXMuc3RhdF9kYXRhLCAnJG1ldGEuc3RyaWN0VGVtcGxhdGUnKSlcbiAgICAgICAgbmV3U2NoZW1hV2l0aFByb3BzLnN0cmljdFRlbXBsYXRlID0gdmFyaWFibGVzLnN0YXRfZGF0YVsnJG1ldGEnXT8uc3RyaWN0VGVtcGxhdGUgYXMgYm9vbGVhbjtcbiAgICBpZiAoXy5oYXModmFyaWFibGVzLnN0YXRfZGF0YSwgJyRtZXRhLnN0cmljdFNldCcpKVxuICAgICAgICBuZXdTY2hlbWFXaXRoUHJvcHMuc3RyaWN0U2V0ID0gdmFyaWFibGVzLnN0YXRfZGF0YVsnJG1ldGEnXT8uc3RyaWN0U2V0IGFzIGJvb2xlYW47XG4gICAgaWYgKF8uaGFzKHZhcmlhYmxlcy5zdGF0X2RhdGEsICckbWV0YS5jb25jYXRUZW1wbGF0ZUFycmF5JykpXG4gICAgICAgIG5ld1NjaGVtYVdpdGhQcm9wcy5jb25jYXRUZW1wbGF0ZUFycmF5ID0gdmFyaWFibGVzLnN0YXRfZGF0YVsnJG1ldGEnXVxuICAgICAgICAgICAgPy5jb25jYXRUZW1wbGF0ZUFycmF5IGFzIGJvb2xlYW47XG5cbiAgICB2YXJpYWJsZXMuc2NoZW1hID0gbmV3U2NoZW1hV2l0aFByb3BzO1xuXG4gICAgY29uc29sZS5sb2coJ1NjaGVtYSByZWNvbmNpbGlhdGlvbiBjb21wbGV0ZS4nKTtcbn1cblxuZnVuY3Rpb24gaXNNZXRhQ2Fycmllcih2YWx1ZTogdW5rbm93bik6IHZhbHVlIGlzIFJlY29yZDxzdHJpbmcsIHVua25vd24+ICYgeyAkbWV0YT86IHVua25vd24gfSB7XG4gICAgcmV0dXJuIF8uaXNPYmplY3QodmFsdWUpICYmICFfLmlzRGF0ZSh2YWx1ZSk7XG59XG5cbi8qKlxuICog6YCS5b2S5riF55CG5pWw5o2u5Lit55qE5YWD5pWw5o2u5qCH6K6wXG4gKiAtIOS7juaVsOe7hOS4reenu+mZpCBFWFRFTlNJQkxFX01BUktFUlxuICogLSDku47lr7nosaHkuK3liKDpmaQgJG1ldGEg5bGe5oCnXG4gKiBAcGFyYW0gZGF0YSDpnIDopoHmuIXnkIbnmoTmlbDmja5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsZWFuVXBNZXRhZGF0YShkYXRhOiBhbnkpOiB2b2lkIHtcbiAgICAvLyDlpoLmnpzmmK/mlbDnu4TvvIznp7vpmaTprZTms5XlrZfnrKbkuLLlkozlj6rljIXlkKsgJG1ldGEg55qE5YWD57Sg77yM5bm26YCS5b2SXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHtcbiAgICAgICAgbGV0IGkgPSBkYXRhLmxlbmd0aDtcbiAgICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICAgICAgaWYgKGRhdGFbaV0gPT09IEVYVEVOU0lCTEVfTUFSS0VSKSB7XG4gICAgICAgICAgICAgICAgZGF0YS5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgIF8uaXNPYmplY3QoZGF0YVtpXSkgJiZcbiAgICAgICAgICAgICAgICAhXy5pc0RhdGUoZGF0YVtpXSkgJiZcbiAgICAgICAgICAgICAgICAnJGFycmF5TWV0YScgaW4gZGF0YVtpXSAmJlxuICAgICAgICAgICAgICAgICckbWV0YScgaW4gZGF0YVtpXSAmJlxuICAgICAgICAgICAgICAgIGRhdGFbaV1bJyRhcnJheU1ldGEnXSA9PT0gdHJ1ZVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgLy8g56e76Zmk5Y+q5YyF5ZCrICRtZXRhICYgJGFycmF5TWV0YSDnmoTlhYPntKBcbiAgICAgICAgICAgICAgICBkYXRhLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8g5a+55pWw57uE5Lit55qE5YW25LuW5YWD57Sg77yI5Y+v6IO95piv5a+56LGh5oiW5pWw57uE77yJ6L+b6KGM6YCS5b2S5riF55CGXG4gICAgICAgICAgICAgICAgY2xlYW5VcE1ldGFkYXRhKGRhdGFbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8vIOWmguaenOaYr+Wvueixoe+8jOenu+mZpCAkbWV0YSDlubbpgJLlvZJcbiAgICBlbHNlIGlmIChpc01ldGFDYXJyaWVyKGRhdGEpKSB7XG4gICAgICAgIC8vIOa4hemZpOiHqui6qyAkbWV0YVxuICAgICAgICBkZWxldGUgZGF0YS4kbWV0YTtcblxuICAgICAgICAvLyDpgJLlvZJcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gZGF0YSkge1xuICAgICAgICAgICAgY2xlYW5VcE1ldGFkYXRhKGRhdGFba2V5XSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/schema.ts\n\n}");
  },
  "./src/settings.ts": 
  /*!*************************!*\
  !*** ./src/settings.ts ***!
  \*************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useSettingsStore: () => (/* binding */ useSettingsStore)\n/* harmony export */ });\n/* harmony import */ var pinia__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pinia */ \"pinia\");\n/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! vue */ \"vue\");\n/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(vue__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! zod */ \"zod\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(zod__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nconst Settings = zod__WEBPACK_IMPORTED_MODULE_2__.object({\n    更新方式: zod__WEBPACK_IMPORTED_MODULE_2__[\"enum\"](['随AI输出', '额外模型解析']).prefault('随AI输出').catch('随AI输出'),\n    额外模型解析配置: zod__WEBPACK_IMPORTED_MODULE_2__.object({\n        模型来源: zod__WEBPACK_IMPORTED_MODULE_2__[\"enum\"](['与插头相同', '自定义']).default('与插头相同'),\n        api地址: zod__WEBPACK_IMPORTED_MODULE_2__.string().prefault('http://localhost:1234/v1'),\n        密钥: zod__WEBPACK_IMPORTED_MODULE_2__.string().prefault(''),\n        模型名称: zod__WEBPACK_IMPORTED_MODULE_2__.string().prefault('gemini-2.5-flash'),\n    })\n        .prefault({}),\n    通知: zod__WEBPACK_IMPORTED_MODULE_2__.object({\n        变量更新出错: zod__WEBPACK_IMPORTED_MODULE_2__.boolean().prefault(false).catch(false),\n    })\n        .prefault({}),\n})\n    .prefault({});\nconst useSettingsStore = (0,pinia__WEBPACK_IMPORTED_MODULE_0__.defineStore)('settings', () => {\n    const settings = (0,vue__WEBPACK_IMPORTED_MODULE_1__.ref)(Settings.parse(_.get(SillyTavern.extensionSettings, 'mvu_settings', {})));\n    (0,vue__WEBPACK_IMPORTED_MODULE_1__.watch)(settings, new_settings => {\n        _.set(SillyTavern.extensionSettings, 'mvu_settings', (0,vue__WEBPACK_IMPORTED_MODULE_1__.toRaw)(new_settings));\n        SillyTavern.saveSettingsDebounced();\n    }, { deep: true });\n    return { settings };\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc2V0dGluZ3MudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQW9DO0FBQ0k7QUFDZjtBQUV6QixNQUFNLFFBQVEsR0FBRyx1Q0FDTixDQUFDO0lBQ0osSUFBSSxFQUFFLHdDQUFNLENBQUMsQ0FBQyxPQUFPLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQztJQUNsRSxRQUFRLEVBQUUsdUNBQ0MsQ0FBQztRQUNKLElBQUksRUFBRSx3Q0FBTSxDQUFDLENBQUMsT0FBTyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQztRQUMvQyxLQUFLLEVBQUUsdUNBQVEsRUFBRSxDQUFDLFFBQVEsQ0FBQywwQkFBMEIsQ0FBQztRQUN0RCxFQUFFLEVBQUUsdUNBQVEsRUFBRSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUM7UUFDM0IsSUFBSSxFQUFFLHVDQUFRLEVBQUUsQ0FBQyxRQUFRLENBQUMsa0JBQWtCLENBQUM7S0FDaEQsQ0FBQztTQUNELFFBQVEsQ0FBQyxFQUFFLENBQUM7SUFDakIsRUFBRSxFQUFFLHVDQUNPLENBQUM7UUFDSixNQUFNLEVBQUUsd0NBQVMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDO0tBQ25ELENBQUM7U0FDRCxRQUFRLENBQUMsRUFBRSxDQUFDO0NBQ3BCLENBQUM7S0FDRCxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUM7QUFFWCxNQUFNLGdCQUFnQixHQUFHLGtEQUFXLENBQUMsVUFBVSxFQUFFLEdBQUcsRUFBRTtJQUN6RCxNQUFNLFFBQVEsR0FBRyx3Q0FBRyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUMsaUJBQWlCLEVBQUUsY0FBYyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUMvRiwwQ0FBSyxDQUNELFFBQVEsRUFDUixZQUFZLENBQUMsRUFBRTtRQUNYLENBQUMsQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLGlCQUFpQixFQUFFLGNBQWMsRUFBRSwwQ0FBSyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUM7UUFDMUUsV0FBVyxDQUFDLHFCQUFxQixFQUFFLENBQUM7SUFDeEMsQ0FBQyxFQUNELEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxDQUNqQixDQUFDO0lBRUYsT0FBTyxFQUFFLFFBQVEsRUFBRSxDQUFDO0FBQ3hCLENBQUMsQ0FBQyxDQUFDIiwic291cmNlcyI6WyJzcmM6Ly90YXZlcm5faGVscGVyX3RlbXBsYXRlL3NyYy9zZXR0aW5ncy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkZWZpbmVTdG9yZSB9IGZyb20gJ3BpbmlhJztcbmltcG9ydCB7IHJlZiwgdG9SYXcsIHdhdGNoIH0gZnJvbSAndnVlJztcbmltcG9ydCAqIGFzIHogZnJvbSAnem9kJztcblxuY29uc3QgU2V0dGluZ3MgPSB6XG4gICAgLm9iamVjdCh7XG4gICAgICAgIOabtOaWsOaWueW8jzogei5lbnVtKFsn6ZqPQUnovpPlh7onLCAn6aKd5aSW5qih5Z6L6Kej5p6QJ10pLnByZWZhdWx0KCfpmo9BSei+k+WHuicpLmNhdGNoKCfpmo9BSei+k+WHuicpLFxuICAgICAgICDpop3lpJbmqKHlnovop6PmnpDphY3nva46IHpcbiAgICAgICAgICAgIC5vYmplY3Qoe1xuICAgICAgICAgICAgICAgIOaooeWei+adpea6kDogei5lbnVtKFsn5LiO5o+S5aS055u45ZCMJywgJ+iHquWumuS5iSddKS5kZWZhdWx0KCfkuI7mj5LlpLTnm7jlkIwnKSxcbiAgICAgICAgICAgICAgICBhcGnlnLDlnYA6IHouc3RyaW5nKCkucHJlZmF1bHQoJ2h0dHA6Ly9sb2NhbGhvc3Q6MTIzNC92MScpLFxuICAgICAgICAgICAgICAgIOWvhumSpTogei5zdHJpbmcoKS5wcmVmYXVsdCgnJyksXG4gICAgICAgICAgICAgICAg5qih5Z6L5ZCN56ewOiB6LnN0cmluZygpLnByZWZhdWx0KCdnZW1pbmktMi41LWZsYXNoJyksXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnByZWZhdWx0KHt9KSxcbiAgICAgICAg6YCa55+lOiB6XG4gICAgICAgICAgICAub2JqZWN0KHtcbiAgICAgICAgICAgICAgICDlj5jph4/mm7TmlrDlh7rplJk6IHouYm9vbGVhbigpLnByZWZhdWx0KGZhbHNlKS5jYXRjaChmYWxzZSksXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnByZWZhdWx0KHt9KSxcbiAgICB9KVxuICAgIC5wcmVmYXVsdCh7fSk7XG5cbmV4cG9ydCBjb25zdCB1c2VTZXR0aW5nc1N0b3JlID0gZGVmaW5lU3RvcmUoJ3NldHRpbmdzJywgKCkgPT4ge1xuICAgIGNvbnN0IHNldHRpbmdzID0gcmVmKFNldHRpbmdzLnBhcnNlKF8uZ2V0KFNpbGx5VGF2ZXJuLmV4dGVuc2lvblNldHRpbmdzLCAnbXZ1X3NldHRpbmdzJywge30pKSk7XG4gICAgd2F0Y2goXG4gICAgICAgIHNldHRpbmdzLFxuICAgICAgICBuZXdfc2V0dGluZ3MgPT4ge1xuICAgICAgICAgICAgXy5zZXQoU2lsbHlUYXZlcm4uZXh0ZW5zaW9uU2V0dGluZ3MsICdtdnVfc2V0dGluZ3MnLCB0b1JhdyhuZXdfc2V0dGluZ3MpKTtcbiAgICAgICAgICAgIFNpbGx5VGF2ZXJuLnNhdmVTZXR0aW5nc0RlYm91bmNlZCgpO1xuICAgICAgICB9LFxuICAgICAgICB7IGRlZXA6IHRydWUgfVxuICAgICk7XG5cbiAgICByZXR1cm4geyBzZXR0aW5ncyB9O1xufSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/settings.ts\n\n}");
  },
  "./src/update_descriptions.ts": 
  /*!************************************!*\
  !*** ./src/update_descriptions.ts ***!
  \************************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval('{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   updateDescriptions: () => (/* binding */ updateDescriptions)\n/* harmony export */ });\n/**\n * 递归更新描述字段\n *\n * 示例数据结构：\n * initData: {\n *   "属性": {\n *     "value": 100,\n *     "description": "这是初始描述"  // 条件 4(a)\n *   },\n *   "生命值": [100, "初始生命值"],  // 条件 4(b): ValueWithDescription<number>\n *   "技能": [{\n *     "name": "攻击",\n *     "damage": [50, "基础伤害"],  // 嵌套的 ValueWithDescription\n *     "description": "普通攻击"\n *   }],\n *   "装备": {\n *     "武器": ["剑", "初始武器"],  // ValueWithDescription<string>\n *     "属性加成": {\n *       "攻击力": [10, "武器攻击力加成"]\n *     }\n *   }\n * }\n */\nfunction updateDescriptions(_init_path, init_data, msg_data, target_data) {\n    _.forEach(init_data, (value, key) => {\n        const current_path = key; //init_path ? `${init_path}.${key}` : key;\n        if (_.isArray(value)) {\n            // 检查是否为 ValueWithDescription<T> 类型 (长度为2，第二个元素是字符串)\n            if (value.length === 2 && _.isString(value[1])) {\n                // 条件 4(b): 满足 ValueWithDescription<T> 定义\n                if (_.isArray(_.get(msg_data, current_path))) {\n                    const msgValue = _.get(msg_data, current_path);\n                    if (msgValue.length === 2) {\n                        // 更新描述(第二个元素)\n                        _.set(target_data, `${current_path}[1]`, value[1]);\n                        // 如果第一个元素是对象或数组，需要递归处理\n                        if (_.isObject(value[0]) && !_.isArray(value[0])) {\n                            // 处理对象\n                            const targetObj = _.get(target_data, `${key}[0]`);\n                            // 如果对象包含description属性，需要特殊处理\n                            if (_.has(value[0], \'description\') &&\n                                _.isString(value[0].description)) {\n                                if (_.has(msgValue[0], \'description\')) {\n                                    _.set(target_data, `${current_path}[0].description`, value[0].description);\n                                }\n                            }\n                            // 递归处理对象的其他属性\n                            updateDescriptions(`${current_path}[0]`, value[0], msgValue[0], targetObj);\n                        }\n                        else if (_.isArray(value[0])) {\n                            // 处理数组\n                            updateDescriptions(`${current_path}[0]`, value[0], msgValue[0], target_data[0]);\n                        }\n                    }\n                }\n            }\n            else if (_.isArray(_.get(msg_data, current_path))) {\n                // 普通数组，递归处理每个元素\n                const msg_array = _.get(msg_data, current_path);\n                value.forEach((item, index) => {\n                    if (index < msg_array.length) {\n                        if (_.isObject(item)) {\n                            const current_target = _.get(target_data, `${current_path}[${index}]`);\n                            // 如果对象包含description属性，需要特殊处理\n                            if (_.has(item, \'description\') && _.isString(item.description)) {\n                                if (_.has(msg_array[index], \'description\')) {\n                                    _.set(current_target, `description`, item.description);\n                                }\n                            }\n                            updateDescriptions(`${current_path}[${index}]`, value[index], msg_array[index], current_target);\n                        }\n                    }\n                });\n            }\n        }\n        else if (_.isObject(value)) {\n            // 处理对象\n            if (_.has(value, \'description\') && _.isString(value.description)) {\n                // 条件 4(a): 对象包含 description 字段且为字符串\n                //msg_data 等已经在递归时跟着进入了更深的层次，不需要 currentPath前缀\n                const description_path = `${key}.description`;\n                if (_.has(msg_data, description_path)) {\n                    _.set(target_data, description_path, value.description);\n                }\n            }\n            // 继续递归处理对象的其他属性\n            if (_.has(msg_data, key) && _.isObject(msg_data[key])) {\n                updateDescriptions(current_path, value, msg_data[key], target_data[key]);\n            }\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsRUFBRSxDQUFDO2dCQUMvRCxvQ0FBb0M7Z0JBQ3BDLDhDQUE4QztnQkFDOUMsTUFBTSxnQkFBZ0IsR0FBRyxHQUFHLEdBQUcsY0FBYyxDQUFDO2dCQUM5QyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFFLGdCQUFnQixDQUFDLEVBQUUsQ0FBQztvQkFDcEMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxXQUFXLEVBQUUsZ0JBQWdCLEVBQUUsS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDO2dCQUM1RCxDQUFDO1lBQ0wsQ0FBQztZQUVELGdCQUFnQjtZQUNoQixJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFFLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQztnQkFDcEQsa0JBQWtCLENBQUMsWUFBWSxFQUFFLEtBQUssRUFBRSxRQUFRLENBQUMsR0FBRyxDQUFDLEVBQUUsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDN0UsQ0FBQztRQUNMLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNQLENBQUMiLCJzb3VyY2VzIjpbInNyYzovL3RhdmVybl9oZWxwZXJfdGVtcGxhdGUvc3JjL3VwZGF0ZV9kZXNjcmlwdGlvbnMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiDpgJLlvZLmm7TmlrDmj4/ov7DlrZfmrrVcbiAqXG4gKiDnpLrkvovmlbDmja7nu5PmnoTvvJpcbiAqIGluaXREYXRhOiB7XG4gKiAgIFwi5bGe5oCnXCI6IHtcbiAqICAgICBcInZhbHVlXCI6IDEwMCxcbiAqICAgICBcImRlc2NyaXB0aW9uXCI6IFwi6L+Z5piv5Yid5aeL5o+P6L+wXCIgIC8vIOadoeS7tiA0KGEpXG4gKiAgIH0sXG4gKiAgIFwi55Sf5ZG95YC8XCI6IFsxMDAsIFwi5Yid5aeL55Sf5ZG95YC8XCJdLCAgLy8g5p2h5Lu2IDQoYik6IFZhbHVlV2l0aERlc2NyaXB0aW9uPG51bWJlcj5cbiAqICAgXCLmioDog71cIjogW3tcbiAqICAgICBcIm5hbWVcIjogXCLmlLvlh7tcIixcbiAqICAgICBcImRhbWFnZVwiOiBbNTAsIFwi5Z+656GA5Lyk5a6zXCJdLCAgLy8g5bWM5aWX55qEIFZhbHVlV2l0aERlc2NyaXB0aW9uXG4gKiAgICAgXCJkZXNjcmlwdGlvblwiOiBcIuaZrumAmuaUu+WHu1wiXG4gKiAgIH1dLFxuICogICBcIuijheWkh1wiOiB7XG4gKiAgICAgXCLmrablmahcIjogW1wi5YmRXCIsIFwi5Yid5aeL5q2m5ZmoXCJdLCAgLy8gVmFsdWVXaXRoRGVzY3JpcHRpb248c3RyaW5nPlxuICogICAgIFwi5bGe5oCn5Yqg5oiQXCI6IHtcbiAqICAgICAgIFwi5pS75Ye75YqbXCI6IFsxMCwgXCLmrablmajmlLvlh7vlipvliqDmiJBcIl1cbiAqICAgICB9XG4gKiAgIH1cbiAqIH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZURlc2NyaXB0aW9ucyhcbiAgICBfaW5pdF9wYXRoOiBzdHJpbmcsXG4gICAgaW5pdF9kYXRhOiBhbnksXG4gICAgbXNnX2RhdGE6IGFueSxcbiAgICB0YXJnZXRfZGF0YTogYW55XG4pIHtcbiAgICBfLmZvckVhY2goaW5pdF9kYXRhLCAodmFsdWUsIGtleSkgPT4ge1xuICAgICAgICBjb25zdCBjdXJyZW50X3BhdGggPSBrZXk7IC8vaW5pdF9wYXRoID8gYCR7aW5pdF9wYXRofS4ke2tleX1gIDoga2V5O1xuXG4gICAgICAgIGlmIChfLmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgICAgICAvLyDmo4Dmn6XmmK/lkKbkuLogVmFsdWVXaXRoRGVzY3JpcHRpb248VD4g57G75Z6LICjplb/luqbkuLoy77yM56ys5LqM5Liq5YWD57Sg5piv5a2X56ym5LiyKVxuICAgICAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCA9PT0gMiAmJiBfLmlzU3RyaW5nKHZhbHVlWzFdKSkge1xuICAgICAgICAgICAgICAgIC8vIOadoeS7tiA0KGIpOiDmu6HotrMgVmFsdWVXaXRoRGVzY3JpcHRpb248VD4g5a6a5LmJXG4gICAgICAgICAgICAgICAgaWYgKF8uaXNBcnJheShfLmdldChtc2dfZGF0YSwgY3VycmVudF9wYXRoKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbXNnVmFsdWUgPSBfLmdldChtc2dfZGF0YSwgY3VycmVudF9wYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1zZ1ZhbHVlLmxlbmd0aCA9PT0gMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5pu05paw5o+P6L+wKOesrOS6jOS4quWFg+e0oClcbiAgICAgICAgICAgICAgICAgICAgICAgIF8uc2V0KHRhcmdldF9kYXRhLCBgJHtjdXJyZW50X3BhdGh9WzFdYCwgdmFsdWVbMV0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDlpoLmnpznrKzkuIDkuKrlhYPntKDmmK/lr7nosaHmiJbmlbDnu4TvvIzpnIDopoHpgJLlvZLlpITnkIZcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfLmlzT2JqZWN0KHZhbHVlWzBdKSAmJiAhXy5pc0FycmF5KHZhbHVlWzBdKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWkhOeQhuWvueixoVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldE9iaiA9IF8uZ2V0KHRhcmdldF9kYXRhLCBgJHtrZXl9WzBdYCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDlpoLmnpzlr7nosaHljIXlkKtkZXNjcmlwdGlvbuWxnuaAp++8jOmcgOimgeeJueauiuWkhOeQhlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXy5oYXModmFsdWVbMF0sICdkZXNjcmlwdGlvbicpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8uaXNTdHJpbmcodmFsdWVbMF0uZGVzY3JpcHRpb24pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfLmhhcyhtc2dWYWx1ZVswXSwgJ2Rlc2NyaXB0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8uc2V0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldF9kYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAke2N1cnJlbnRfcGF0aH1bMF0uZGVzY3JpcHRpb25gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlWzBdLmRlc2NyaXB0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g6YCS5b2S5aSE55CG5a+56LGh55qE5YW25LuW5bGe5oCnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlRGVzY3JpcHRpb25zKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgJHtjdXJyZW50X3BhdGh9WzBdYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVbMF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1zZ1ZhbHVlWzBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRPYmpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChfLmlzQXJyYXkodmFsdWVbMF0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5aSE55CG5pWw57uEXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlRGVzY3JpcHRpb25zKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgJHtjdXJyZW50X3BhdGh9WzBdYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVbMF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1zZ1ZhbHVlWzBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRfZGF0YVswXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKF8uaXNBcnJheShfLmdldChtc2dfZGF0YSwgY3VycmVudF9wYXRoKSkpIHtcbiAgICAgICAgICAgICAgICAvLyDmma7pgJrmlbDnu4TvvIzpgJLlvZLlpITnkIbmr4/kuKrlhYPntKBcbiAgICAgICAgICAgICAgICBjb25zdCBtc2dfYXJyYXkgPSBfLmdldChtc2dfZGF0YSwgY3VycmVudF9wYXRoKTtcbiAgICAgICAgICAgICAgICB2YWx1ZS5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggPCBtc2dfYXJyYXkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXy5pc09iamVjdChpdGVtKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRfdGFyZ2V0ID0gXy5nZXQodGFyZ2V0X2RhdGEsIGAke2N1cnJlbnRfcGF0aH1bJHtpbmRleH1dYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5aaC5p6c5a+56LGh5YyF5ZCrZGVzY3JpcHRpb27lsZ7mgKfvvIzpnIDopoHnibnmrorlpITnkIZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXy5oYXMoaXRlbSwgJ2Rlc2NyaXB0aW9uJykgJiYgXy5pc1N0cmluZyhpdGVtLmRlc2NyaXB0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXy5oYXMobXNnX2FycmF5W2luZGV4XSwgJ2Rlc2NyaXB0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8uc2V0KGN1cnJlbnRfdGFyZ2V0LCBgZGVzY3JpcHRpb25gLCBpdGVtLmRlc2NyaXB0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZURlc2NyaXB0aW9ucyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYCR7Y3VycmVudF9wYXRofVske2luZGV4fV1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZVtpbmRleF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1zZ19hcnJheVtpbmRleF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRfdGFyZ2V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKF8uaXNPYmplY3QodmFsdWUpKSB7XG4gICAgICAgICAgICAvLyDlpITnkIblr7nosaFcbiAgICAgICAgICAgIGlmIChfLmhhcyh2YWx1ZSwgJ2Rlc2NyaXB0aW9uJykgJiYgXy5pc1N0cmluZyh2YWx1ZS5kZXNjcmlwdGlvbikpIHtcbiAgICAgICAgICAgICAgICAvLyDmnaHku7YgNChhKTog5a+56LGh5YyF5ZCrIGRlc2NyaXB0aW9uIOWtl+auteS4lOS4uuWtl+espuS4slxuICAgICAgICAgICAgICAgIC8vbXNnX2RhdGEg562J5bey57uP5Zyo6YCS5b2S5pe26Lef552A6L+b5YWl5LqG5pu05rex55qE5bGC5qyh77yM5LiN6ZyA6KaBIGN1cnJlbnRQYXRo5YmN57yAXG4gICAgICAgICAgICAgICAgY29uc3QgZGVzY3JpcHRpb25fcGF0aCA9IGAke2tleX0uZGVzY3JpcHRpb25gO1xuICAgICAgICAgICAgICAgIGlmIChfLmhhcyhtc2dfZGF0YSwgZGVzY3JpcHRpb25fcGF0aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgXy5zZXQodGFyZ2V0X2RhdGEsIGRlc2NyaXB0aW9uX3BhdGgsIHZhbHVlLmRlc2NyaXB0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIOe7p+e7remAkuW9kuWkhOeQhuWvueixoeeahOWFtuS7luWxnuaAp1xuICAgICAgICAgICAgaWYgKF8uaGFzKG1zZ19kYXRhLCBrZXkpICYmIF8uaXNPYmplY3QobXNnX2RhdGFba2V5XSkpIHtcbiAgICAgICAgICAgICAgICB1cGRhdGVEZXNjcmlwdGlvbnMoY3VycmVudF9wYXRoLCB2YWx1ZSwgbXNnX2RhdGFba2V5XSwgdGFyZ2V0X2RhdGFba2V5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/update_descriptions.ts\n\n}');
  },
  "./src/variable_def.ts": 
  /*!*****************************!*\
  !*** ./src/variable_def.ts ***!
  \*****************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   assertVWD: () => (/* binding */ assertVWD),\n/* harmony export */   exported_events: () => (/* binding */ exported_events),\n/* harmony export */   extractRecord: () => (/* binding */ extractRecord),\n/* harmony export */   isArraySchema: () => (/* binding */ isArraySchema),\n/* harmony export */   isObjectSchema: () => (/* binding */ isObjectSchema),\n/* harmony export */   isPrimitiveSchema: () => (/* binding */ isPrimitiveSchema),\n/* harmony export */   isValueWithDescription: () => (/* binding */ isValueWithDescription),\n/* harmony export */   isValueWithDescriptionStatData: () => (/* binding */ isValueWithDescriptionStatData),\n/* harmony export */   variable_events: () => (/* binding */ variable_events)\n/* harmony export */ });\nfunction assertVWD(_flag, _v) { }\nfunction isValueWithDescription(value) {\n    return Array.isArray(value) && value.length === 2 && typeof value[1] === 'string';\n}\nfunction isValueWithDescriptionStatData(value) {\n    return Array.isArray(value) && value.length === 2 && typeof value[1] === 'string';\n}\n// 类型守卫函数\nfunction isArraySchema(value) {\n    return value.type === 'array';\n}\nfunction isObjectSchema(value) {\n    return value.type === 'object';\n}\nfunction isPrimitiveSchema(value) {\n    return (value.type === 'string' ||\n        value.type === 'number' ||\n        value.type === 'boolean' ||\n        value.type === 'any');\n}\nconst variable_events = {\n    SINGLE_VARIABLE_UPDATED: 'mag_variable_updated',\n    VARIABLE_UPDATE_ENDED: 'mag_variable_update_ended',\n    VARIABLE_UPDATE_STARTED: 'mag_variable_update_started',\n};\nconst exported_events = {\n    INVOKE_MVU_PROCESS: 'mag_invoke_mvu',\n    UPDATE_VARIABLE: 'mag_update_variable',\n};\nfunction extractRecord(category, game_data) {\n    let data = undefined;\n    switch (category) {\n        case 'stat':\n            data = game_data.stat_data;\n            break;\n        case 'display':\n            data = game_data.display_data;\n            break;\n        case 'delta':\n            data = game_data.delta_data;\n            break;\n    }\n    return data;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdmFyaWFibGVfZGVmLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQXFETyxTQUFTLFNBQVMsQ0FDckIsS0FBYyxFQUNkLEVBQTJELElBQ0UsQ0FBQztBQUUzRCxTQUFTLHNCQUFzQixDQUFDLEtBQWM7SUFDakQsT0FBTyxLQUFLLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxJQUFJLEtBQUssQ0FBQyxNQUFNLEtBQUssQ0FBQyxJQUFJLE9BQU8sS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLFFBQVEsQ0FBQztBQUN0RixDQUFDO0FBRU0sU0FBUyw4QkFBOEIsQ0FDMUMsS0FBOEQ7SUFFOUQsT0FBTyxLQUFLLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxJQUFJLEtBQUssQ0FBQyxNQUFNLEtBQUssQ0FBQyxJQUFJLE9BQU8sS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLFFBQVEsQ0FBQztBQUN0RixDQUFDO0FBRUQsU0FBUztBQUNGLFNBQVMsYUFBYSxDQUFDLEtBQWlCO0lBQzNDLE9BQU8sS0FBSyxDQUFDLElBQUksS0FBSyxPQUFPLENBQUM7QUFDbEMsQ0FBQztBQUVNLFNBQVMsY0FBYyxDQUFDLEtBQWlCO0lBQzVDLE9BQU8sS0FBSyxDQUFDLElBQUksS0FBSyxRQUFRLENBQUM7QUFDbkMsQ0FBQztBQUVNLFNBQVMsaUJBQWlCLENBQUMsS0FBaUI7SUFDL0MsT0FBTyxDQUNILEtBQUssQ0FBQyxJQUFJLEtBQUssUUFBUTtRQUN2QixLQUFLLENBQUMsSUFBSSxLQUFLLFFBQVE7UUFDdkIsS0FBSyxDQUFDLElBQUksS0FBSyxTQUFTO1FBQ3hCLEtBQUssQ0FBQyxJQUFJLEtBQUssS0FBSyxDQUN2QixDQUFDO0FBQ04sQ0FBQztBQWlFTSxNQUFNLGVBQWUsR0FBRztJQUMzQix1QkFBdUIsRUFBRSxzQkFBc0I7SUFDL0MscUJBQXFCLEVBQUUsMkJBQTJCO0lBQ2xELHVCQUF1QixFQUFFLDZCQUE2QjtDQUNoRCxDQUFDO0FBQ0osTUFBTSxlQUFlLEdBQUc7SUFDM0Isa0JBQWtCLEVBQUUsZ0JBQWdCO0lBQ3BDLGVBQWUsRUFBRSxxQkFBcUI7Q0FDaEMsQ0FBQztBQW9DSixTQUFTLGFBQWEsQ0FBQyxRQUFzQyxFQUFFLFNBQWtCO0lBQ3BGLElBQUksSUFBSSxHQUFvQyxTQUFTLENBQUM7SUFDdEQsUUFBUSxRQUFRLEVBQUUsQ0FBQztRQUNmLEtBQUssTUFBTTtZQUNQLElBQUksR0FBRyxTQUFTLENBQUMsU0FBUyxDQUFDO1lBQzNCLE1BQU07UUFDVixLQUFLLFNBQVM7WUFDVixJQUFJLEdBQUcsU0FBUyxDQUFDLFlBQWEsQ0FBQztZQUMvQixNQUFNO1FBQ1YsS0FBSyxPQUFPO1lBQ1IsSUFBSSxHQUFHLFNBQVMsQ0FBQyxVQUFXLENBQUM7WUFDN0IsTUFBTTtJQUNkLENBQUM7SUFDRCxPQUFPLElBQUksQ0FBQztBQUNoQixDQUFDIiwic291cmNlcyI6WyJzcmM6Ly90YXZlcm5faGVscGVyX3RlbXBsYXRlL3NyYy92YXJpYWJsZV9kZWYudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8g5qih5p2/57G75Z6L5a6a5LmJXG5leHBvcnQgdHlwZSBUZW1wbGF0ZVR5cGUgPSBTdGF0RGF0YSB8IFN0YXREYXRhW10gfCBhbnlbXTtcblxuLy8gU3RhdERhdGEg55qE5YWD5pWw5o2u57G75Z6L5a6a5LmJXG5leHBvcnQgdHlwZSBTdGF0RGF0YU1ldGEgPSB7XG4gICAgZXh0ZW5zaWJsZT86IGJvb2xlYW47XG4gICAgcmVjdXJzaXZlRXh0ZW5zaWJsZT86IGJvb2xlYW47XG4gICAgcmVxdWlyZWQ/OiBzdHJpbmdbXTtcbiAgICB0ZW1wbGF0ZT86IFRlbXBsYXRlVHlwZTsgLy8g5qih5p2/5a6a5LmJ77yM55So5LqO6Ieq5Yqo5aGr5YWF5paw5YWD57SgXG4gICAgW2tleTogc3RyaW5nXTogdW5rbm93bjtcbn07XG5cbmV4cG9ydCB0eXBlIEpTT05QcmltaXRpdmUgPSBzdHJpbmcgfCBudW1iZXIgfCBib29sZWFuIHwgbnVsbDtcblxuLy8gU3RhdERhdGEg57G75Z6L5a6a5LmJIC0g5pSv5oyB5bWM5aWX5a+56LGh5ZKM5pWw57uE77yM5Y+v5Lul5pyJICRtZXRhIOWxnuaAp1xuZXhwb3J0IHR5cGUgU3RhdERhdGEgPSB7XG4gICAgW2tleTogc3RyaW5nXTogU3RhdERhdGEgfCBKU09OUHJpbWl0aXZlIHwgKFN0YXREYXRhIHwgSlNPTlByaW1pdGl2ZSlbXTtcbn0gJiB7XG4gICAgJG1ldGE/OiBTdGF0RGF0YU1ldGE7XG4gICAgJGFycmF5TWV0YT86IGJvb2xlYW47XG59O1xuXG4vLyBTY2hlbWEg6IqC54K557G75Z6L5a6a5LmJXG5leHBvcnQgdHlwZSBTY2hlbWFOb2RlID0gT2JqZWN0U2NoZW1hTm9kZSB8IEFycmF5U2NoZW1hTm9kZSB8IFByaW1pdGl2ZVNjaGVtYU5vZGU7XG5cbi8vIOWvueixoeexu+Wei+eahCBTY2hlbWEg6IqC54K5XG5leHBvcnQgdHlwZSBPYmplY3RTY2hlbWFOb2RlID0ge1xuICAgIHR5cGU6ICdvYmplY3QnO1xuICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgW2tleTogc3RyaW5nXTogU2NoZW1hTm9kZSAmIHsgcmVxdWlyZWQ/OiBib29sZWFuIH07XG4gICAgfTtcbiAgICBleHRlbnNpYmxlPzogYm9vbGVhbjtcbiAgICB0ZW1wbGF0ZT86IFRlbXBsYXRlVHlwZTsgLy8g5paw5aKe5bGe5oCn55qE5qih5p2/XG4gICAgcmVjdXJzaXZlRXh0ZW5zaWJsZT86IGJvb2xlYW47XG59O1xuXG4vLyDmlbDnu4TnsbvlnovnmoQgU2NoZW1hIOiKgueCuVxuZXhwb3J0IHR5cGUgQXJyYXlTY2hlbWFOb2RlID0ge1xuICAgIHR5cGU6ICdhcnJheSc7XG4gICAgZWxlbWVudFR5cGU6IFNjaGVtYU5vZGU7XG4gICAgZXh0ZW5zaWJsZT86IGJvb2xlYW47XG4gICAgdGVtcGxhdGU/OiBUZW1wbGF0ZVR5cGU7IC8vIOaWsOWinuWFg+e0oOeahOaooeadv1xuICAgIHJlY3Vyc2l2ZUV4dGVuc2libGU/OiBib29sZWFuO1xufTtcblxuLy8g5Y6f5aeL57G75Z6L55qEIFNjaGVtYSDoioLngrlcbmV4cG9ydCB0eXBlIFByaW1pdGl2ZVNjaGVtYU5vZGUgPSB7XG4gICAgdHlwZTogJ3N0cmluZycgfCAnbnVtYmVyJyB8ICdib29sZWFuJyB8ICdhbnknO1xufTtcblxuLy8gVmFsdWVXaXRoRGVzY3JpcHRpb24g57G75Z6LIC0g55So5LqO6KGo56S65bim5o+P6L+w55qE5YC8XG5leHBvcnQgdHlwZSBWYWx1ZVdpdGhEZXNjcmlwdGlvbjxUPiA9IFtULCBzdHJpbmddO1xuXG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0VldEKFxuICAgIF9mbGFnOiBib29sZWFuLFxuICAgIF92OiBTdGF0RGF0YSB8IEpTT05QcmltaXRpdmUgfCAoU3RhdERhdGEgfCBKU09OUHJpbWl0aXZlKVtdXG4pOiBhc3NlcnRzIF92IGlzIFZhbHVlV2l0aERlc2NyaXB0aW9uPFN0YXREYXRhIHwgSlNPTlByaW1pdGl2ZT4ge31cblxuZXhwb3J0IGZ1bmN0aW9uIGlzVmFsdWVXaXRoRGVzY3JpcHRpb24odmFsdWU6IHVua25vd24pOiBib29sZWFuIHtcbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheSh2YWx1ZSkgJiYgdmFsdWUubGVuZ3RoID09PSAyICYmIHR5cGVvZiB2YWx1ZVsxXSA9PT0gJ3N0cmluZyc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1ZhbHVlV2l0aERlc2NyaXB0aW9uU3RhdERhdGEoXG4gICAgdmFsdWU6IFN0YXREYXRhIHwgSlNPTlByaW1pdGl2ZSB8IChTdGF0RGF0YSB8IEpTT05QcmltaXRpdmUpW11cbik6IHZhbHVlIGlzIFZhbHVlV2l0aERlc2NyaXB0aW9uPFN0YXREYXRhIHwgSlNPTlByaW1pdGl2ZT4ge1xuICAgIHJldHVybiBBcnJheS5pc0FycmF5KHZhbHVlKSAmJiB2YWx1ZS5sZW5ndGggPT09IDIgJiYgdHlwZW9mIHZhbHVlWzFdID09PSAnc3RyaW5nJztcbn1cblxuLy8g57G75Z6L5a6I5Y2r5Ye95pWwXG5leHBvcnQgZnVuY3Rpb24gaXNBcnJheVNjaGVtYSh2YWx1ZTogU2NoZW1hTm9kZSk6IHZhbHVlIGlzIEFycmF5U2NoZW1hTm9kZSB7XG4gICAgcmV0dXJuIHZhbHVlLnR5cGUgPT09ICdhcnJheSc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc09iamVjdFNjaGVtYSh2YWx1ZTogU2NoZW1hTm9kZSk6IHZhbHVlIGlzIE9iamVjdFNjaGVtYU5vZGUge1xuICAgIHJldHVybiB2YWx1ZS50eXBlID09PSAnb2JqZWN0Jztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzUHJpbWl0aXZlU2NoZW1hKHZhbHVlOiBTY2hlbWFOb2RlKTogdmFsdWUgaXMgUHJpbWl0aXZlU2NoZW1hTm9kZSB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgdmFsdWUudHlwZSA9PT0gJ3N0cmluZycgfHxcbiAgICAgICAgdmFsdWUudHlwZSA9PT0gJ251bWJlcicgfHxcbiAgICAgICAgdmFsdWUudHlwZSA9PT0gJ2Jvb2xlYW4nIHx8XG4gICAgICAgIHZhbHVlLnR5cGUgPT09ICdhbnknXG4gICAgKTtcbn1cblxuZXhwb3J0IHR5cGUgUm9vdEFkZGl0aW9uYWxQcm9wcyA9IHtcbiAgICBzdHJpY3RUZW1wbGF0ZT86IGJvb2xlYW47XG4gICAgY29uY2F0VGVtcGxhdGVBcnJheT86IGJvb2xlYW47XG4gICAgc3RyaWN0U2V0PzogYm9vbGVhbjtcbn07XG5cbmV4cG9ydCB0eXBlIFJvb3RBZGRpdGlvbmFsTWV0YVByb3BzID0ge1xuICAgICRtZXRhPzogU3RhdERhdGFNZXRhICYgUm9vdEFkZGl0aW9uYWxQcm9wcztcbn07XG5cbmV4cG9ydCB0eXBlIE12dURhdGEgPSB7XG4gICAgLy8gaW5pdGlhbGl6ZWRfbG9yZWJvb2tzIOS7juWtl+espuS4suWIl+ihqOWPmOS4uuiusOW9leWvueixoVxuICAgIC8vIOi/meagt+WPr+S7peS4uuavj+S4quefpeivhuW6k+WtmOWCqOWFg+aVsOaNru+8jOS+i+WmguWIneWni+WMlueahOagh+iusOWPmOmHj1xuICAgIC8qKiDlt7LliJ3lp4vljJbnmoQgbG9yZWJvb2sg5YiX6KGoICovXG4gICAgaW5pdGlhbGl6ZWRfbG9yZWJvb2tzPzogUmVjb3JkPHN0cmluZywgYW55W10+O1xuXG4gICAgLyoqXG4gICAgICog54q25oCB5pWw5o2uIC0g5a2Y5YKo5a6e6ZmF55qE5Y+Y6YeP5YC8XG4gICAgICog5pSv5oyB5bWM5aWX5a+56LGh57uT5p6E77yM6YCa6L+H6Lev5b6E77yI5aaCIFwicGxheWVyLmhlYWx0aFwi77yJ6K6/6ZeuXG4gICAgICogJGludGVybmFsIOWxnuaAp+WcqOabtOaWsOi/h+eoi+S4reS4tOaXtuWtmOWCqCBkaXNwbGF5X2RhdGEg5ZKMIGRlbHRhX2RhdGEg55qE5byV55SoXG4gICAgICpcbiAgICAgKiDmm7TmlrDpgLvovpHvvJpcbiAgICAgKiAxLiDmma7pgJrlgLzvvJrnm7TmjqXmm7TmlrDkuLrmlrDlgLxcbiAgICAgKiAyLiBWYWx1ZVdpdGhEZXNjcmlwdGlvbiDnsbvlnovvvJrmm7TmlrDmlbDnu4TnmoTnrKzkuIDkuKrlhYPntKDvvIjlrp7pmYXlgLzvvInvvIzkv53nlZnnrKzkuozkuKrlhYPntKDvvIjmj4/ov7DvvIlcbiAgICAgKiAzLiDmlbDlrZfnsbvlnovvvJroh6rliqjlsIblrZfnrKbkuLLmlrDlgLzovazmjaLkuLrmlbDlrZdcbiAgICAgKi9cbiAgICBzdGF0X2RhdGE6IFN0YXREYXRhICYgUm9vdEFkZGl0aW9uYWxNZXRhUHJvcHMgJiB7ICRpbnRlcm5hbD86IEludGVybmFsRGF0YSB9O1xuXG4gICAgLyoqXG4gICAgICog5pi+56S65pWw5o2uIC0g5a2Y5YKo5Y+Y6YeP5Y+Y5YyW55qE5Y+v6KeG5YyW6KGo56S6XG4gICAgICog5qC85byP77yaXCJ75pen5YC8fS0+e+aWsOWAvH0gKHvljp/lm6B9KVwiXG4gICAgICog5L6L5aaC77yaXCIxMDAtPjgwICjlj5fliLDkvKTlrrMpXCJcbiAgICAgKlxuICAgICAqIOm7mOiupOaDheWGteS4i+WMheWQq+WujOaVtOeahCBzdGF0X2RhdGEg77yM5L2G5piv5Zyo5Y+Y5pu05ZCO77yM5Lya5bCG5Y+Y5pu055qE5YWD57Sg5Y+Y5Li65LiK6Z2i5ZCr5Y6f5Zug55qE6KGo56S644CCXG4gICAgICog5pu05paw5pe25py677ya5q+P5qyhIHN0YXRfZGF0YSDkuK3nmoTlgLzlj5HnlJ/lj5jljJbml7blkIzmraXmm7TmlrBcbiAgICAgKiDnlKjpgJTvvJrlnKhVSeS4reWxleekuuWPmOmHj+eahOWPmOWMluWOhuWPsu+8jOiuqeeUqOaIt+S6huino+aVsOWAvOaYr+WmguS9leWPmOWMlueahFxuICAgICAqL1xuICAgIGRpc3BsYXlfZGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT47XG5cbiAgICAvKipcbiAgICAgKiDlop7ph4/mlbDmja4gLSDlrZjlgqjmnKzmrKHmm7TmlrDkuK3lj5HnlJ/lj5jljJbnmoTlj5jph49cbiAgICAgKiDmoLzlvI/vvJrkuI4gZGlzcGxheV9kYXRhIOebuOWQjO+8jFwie+aXp+WAvH0tPnvmlrDlgLx9ICjljp/lm6ApXCJcbiAgICAgKlxuICAgICAqIOabtOaWsOaXtuacuu+8mlxuICAgICAqIC0g5ZyoIHVwZGF0ZVZhcmlhYmxlcyDlvIDlp4vml7bliJ3lp4vljJbkuLrnqbrlr7nosaFcbiAgICAgKiAtIOavj+asoeWPmOmHj+abtOaWsOaXtuiusOW9leWPmOWMllxuICAgICAqIC0g5pu05paw57uT5p2f5ZCO5L+d5a2Y5Yiw5raI5oGv55qEIHZhcmlhYmxlcyDkuK1cbiAgICAgKlxuICAgICAqIOeUqOmAlO+8muS7heaYvuekuuW9k+WJjea2iOaBry/mk43kvZzkuK3lrp7pmYXlj5HnlJ/lj5jljJbnmoTlj5jph4/vvIzogIzkuI3mmK/miYDmnInljoblj7Llj5jljJZcbiAgICAgKi9cbiAgICBkZWx0YV9kYXRhPzogUmVjb3JkPHN0cmluZywgYW55PjtcbiAgICAvLyDnlKjkuo7lrZjlgqjmlbDmja7nu5PmnoTnmoTmqKHlvI9cbiAgICBzY2hlbWE/OiBPYmplY3RTY2hlbWFOb2RlICYgUGFydGlhbDxSb290QWRkaXRpb25hbFByb3BzPjtcbn07XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmFyaWFibGVEYXRhIHtcbiAgICBvbGRfdmFyaWFibGVzOiBNdnVEYXRhO1xuICAgIC8qKlxuICAgICAqIOi+k+WHuuWPmOmHj++8jOS7heW9k+WunumZheS6p+eUn+S6huWPmOmHj+WPmOabtOeahOWcuuWQiO+8jOS8muS6p+eUnyBuZXdWYXJpYWJsZXNcbiAgICAgKi9cbiAgICBuZXdfdmFyaWFibGVzPzogTXZ1RGF0YTtcbn1cblxuZXhwb3J0IGNvbnN0IHZhcmlhYmxlX2V2ZW50cyA9IHtcbiAgICBTSU5HTEVfVkFSSUFCTEVfVVBEQVRFRDogJ21hZ192YXJpYWJsZV91cGRhdGVkJyxcbiAgICBWQVJJQUJMRV9VUERBVEVfRU5ERUQ6ICdtYWdfdmFyaWFibGVfdXBkYXRlX2VuZGVkJyxcbiAgICBWQVJJQUJMRV9VUERBVEVfU1RBUlRFRDogJ21hZ192YXJpYWJsZV91cGRhdGVfc3RhcnRlZCcsXG59IGFzIGNvbnN0O1xuZXhwb3J0IGNvbnN0IGV4cG9ydGVkX2V2ZW50cyA9IHtcbiAgICBJTlZPS0VfTVZVX1BST0NFU1M6ICdtYWdfaW52b2tlX212dScsXG4gICAgVVBEQVRFX1ZBUklBQkxFOiAnbWFnX3VwZGF0ZV92YXJpYWJsZScsXG59IGFzIGNvbnN0O1xuXG5leHBvcnQgdHlwZSBJbnRlcm5hbERhdGEgPSB7XG4gICAgZGlzcGxheV9kYXRhOiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuICAgIGRlbHRhX2RhdGE6IFJlY29yZDxzdHJpbmcsIGFueT47XG59O1xuXG5leHBvcnQgdHlwZSBFeHRlbmRlZExpc3RlbmVyVHlwZSA9IHtcbiAgICBbdmFyaWFibGVfZXZlbnRzLlNJTkdMRV9WQVJJQUJMRV9VUERBVEVEXTogKFxuICAgICAgICBzdGF0X2RhdGE6IFJlY29yZDxzdHJpbmcsIGFueT4sXG4gICAgICAgIHBhdGg6IHN0cmluZyxcbiAgICAgICAgX29sZFZhbHVlOiBhbnksXG4gICAgICAgIF9uZXdWYWx1ZTogYW55XG4gICAgKSA9PiB2b2lkO1xuICAgIFt2YXJpYWJsZV9ldmVudHMuVkFSSUFCTEVfVVBEQVRFX1NUQVJURURdOiAoXG4gICAgICAgIHZhcmlhYmxlczogTXZ1RGF0YSxcbiAgICAgICAgb3V0X2lzX3VwZGF0ZWQ6IGJvb2xlYW5cbiAgICApID0+IHZvaWQ7XG4gICAgW3ZhcmlhYmxlX2V2ZW50cy5WQVJJQUJMRV9VUERBVEVfRU5ERURdOiAodmFyaWFibGVzOiBNdnVEYXRhLCBvdXRfaXNfdXBkYXRlZDogYm9vbGVhbikgPT4gdm9pZDtcbiAgICBbZXhwb3J0ZWRfZXZlbnRzLklOVk9LRV9NVlVfUFJPQ0VTU106IChcbiAgICAgICAgbWVzc2FnZV9jb250ZW50OiBzdHJpbmcsXG4gICAgICAgIHZhcmlhYmxlX2luZm86IFZhcmlhYmxlRGF0YVxuICAgICkgPT4gdm9pZDtcbiAgICBbZXhwb3J0ZWRfZXZlbnRzLlVQREFURV9WQVJJQUJMRV06IChcbiAgICAgICAgc3RhdF9kYXRhOiBSZWNvcmQ8c3RyaW5nLCBhbnk+LFxuICAgICAgICBwYXRoOiBzdHJpbmcsXG4gICAgICAgIG5ld1ZhbHVlOiBhbnksXG4gICAgICAgIHJlYXNvbjogc3RyaW5nLFxuICAgICAgICBpc1JlY3Vyc2l2ZTogYm9vbGVhblxuICAgICkgPT4gdm9pZDtcbn07XG5cbmV4cG9ydCB0eXBlIEluaXRWYXJUeXBlID0gU3RhdERhdGEgJiBSb290QWRkaXRpb25hbE1ldGFQcm9wcztcblxuZXhwb3J0IHR5cGUgRGF0YUNhdGVnb3J5ID0gJ3N0YXQnIHwgJ2Rpc3BsYXknIHwgJ2RlbHRhJztcblxuZXhwb3J0IGZ1bmN0aW9uIGV4dHJhY3RSZWNvcmQoY2F0ZWdvcnk6ICdzdGF0JyB8ICdkaXNwbGF5JyB8ICdkZWx0YScsIGdhbWVfZGF0YTogTXZ1RGF0YSkge1xuICAgIGxldCBkYXRhOiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuICAgIHN3aXRjaCAoY2F0ZWdvcnkpIHtcbiAgICAgICAgY2FzZSAnc3RhdCc6XG4gICAgICAgICAgICBkYXRhID0gZ2FtZV9kYXRhLnN0YXRfZGF0YTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdkaXNwbGF5JzpcbiAgICAgICAgICAgIGRhdGEgPSBnYW1lX2RhdGEuZGlzcGxheV9kYXRhITtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdkZWx0YSc6XG4gICAgICAgICAgICBkYXRhID0gZ2FtZV9kYXRhLmRlbHRhX2RhdGEhO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiBkYXRhO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/variable_def.ts\n\n}");
  },
  "./src/variable_init.ts": 
  /*!******************************!*\
  !*** ./src/variable_init.ts ***!
  \******************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createEmptyGameData: () => (/* binding */ createEmptyGameData),\n/* harmony export */   getEnabledLorebookList: () => (/* binding */ getEnabledLorebookList),\n/* harmony export */   getLastMessageVariables: () => (/* binding */ getLastMessageVariables),\n/* harmony export */   initCheck: () => (/* binding */ initCheck),\n/* harmony export */   loadInitVarData: () => (/* binding */ loadInitVarData),\n/* harmony export */   updateLorebookSettings: () => (/* binding */ updateLorebookSettings)\n/* harmony export */ });\n/* harmony import */ var _function__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/function */ \"./src/function.ts\");\n/* harmony import */ var _variable_def__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/variable_def */ \"./src/variable_def.ts\");\n/* harmony import */ var _schema__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/schema */ \"./src/schema.ts\");\n/* harmony import */ var json5__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! json5 */ \"json5\");\n/* harmony import */ var toml__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! toml */ \"toml\");\n// 整体游戏数据类型\n\n\n\n\n\nasync function initCheck() {\n    let variables;\n    //这个函数需要处理 dryRun,因为0层。\n    try {\n        if (SillyTavern.chat.length === 0) {\n            console.error('不存在任何一条消息，退出');\n            toastr.error(`无开场白，无法进行初始化`, '变量初始化失败');\n            return;\n        }\n        variables = (await (0,_function__WEBPACK_IMPORTED_MODULE_0__.getLastValidVariable)(getLastMessageId())) ?? createEmptyGameData();\n    }\n    catch (e) {\n        console.error('不存在任何一条消息，退出');\n        return;\n    }\n    // 确保变量结构完整\n    if (variables === undefined) {\n        variables = createEmptyGameData();\n    }\n    if (!_.has(variables, 'initialized_lorebooks')) {\n        variables.initialized_lorebooks = {};\n    }\n    if (Array.isArray(variables.initialized_lorebooks)) {\n        console.warn('Old \"initialized_lorebooks\" array format detected. Migrating to the new object format.');\n        const oldArray = variables.initialized_lorebooks;\n        const newObject = {};\n        for (const lorebookName of oldArray) {\n            newObject[lorebookName] = []; // 按照新格式，值为一个空数组\n        }\n        variables.initialized_lorebooks = newObject;\n    }\n    if (!variables.stat_data) {\n        variables.stat_data = {};\n    }\n    if (!variables.schema) {\n        variables.schema = { extensible: false, properties: {}, type: 'object' };\n    }\n    // 加载 InitVar 数据\n    const is_updated = await loadInitVarData(variables);\n    // --- 一次性清理所有魔法字符串 ---\n    if (is_updated) {\n        // 递归遍历整个 stat_data，移除所有魔法字符串\n        const cleanData = (data) => {\n            if (Array.isArray(data)) {\n                // 使用 filter 创建一个不含标记的新数组\n                const cleanedArray = data.filter(item => item !== _schema__WEBPACK_IMPORTED_MODULE_2__.EXTENSIBLE_MARKER);\n                // 递归清理数组内的对象或数组\n                cleanedArray.forEach(cleanData);\n                return cleanedArray;\n            }\n            if (_.isObject(data)) {\n                const newObj = {};\n                const typedData = data; // 类型断言\n                for (const key in data) {\n                    // 递归清理子节点，并将结果赋给新对象\n                    newObj[key] = cleanData(typedData[key]);\n                }\n                return newObj;\n            }\n            return data;\n        };\n        // 在生成 Schema 之前，先清理一遍 stat_data\n        // 这里需要先生成 Schema，再清理数据\n        // 所以还是得用克隆\n    }\n    // 在所有 lorebook 初始化完成后，生成最终的模式\n    if (is_updated || !variables.schema || _.isEmpty(variables.schema)) {\n        // 1. 克隆数据用于 Schema 生成\n        const dataForSchema = structuredClone(variables.stat_data);\n        // 2. generateSchema 会读取并移除克隆体中的标记，生成正确的 schema\n        // 对于增量场景，会以之前的 schema 为基础生成。\n        const generated_schema = (0,_schema__WEBPACK_IMPORTED_MODULE_2__.generateSchema)(dataForSchema, variables.schema);\n        // 使用类型守卫确保生成的 schema 是 ObjectSchemaNode\n        if ((0,_variable_def__WEBPACK_IMPORTED_MODULE_1__.isObjectSchema)(generated_schema)) {\n            if (_.has(variables.stat_data, '$meta.strictTemplate'))\n                generated_schema.strictTemplate = variables.stat_data['$meta']\n                    ?.strictTemplate;\n            if (_.has(variables.stat_data, '$meta.concatTemplateArray'))\n                generated_schema.concatTemplateArray = variables.stat_data['$meta']\n                    ?.concatTemplateArray;\n            if (_.has(variables.stat_data, '$meta.strictSet'))\n                generated_schema.strictSet = variables.stat_data['$meta']?.strictSet;\n            variables.schema = generated_schema;\n        }\n        else {\n            console.error('Generated schema is not an object schema, which is unexpected for stat_data root');\n        }\n        // 3. 现在，清理真实的 stat_data，让它在后续操作中保持干净\n        (0,_schema__WEBPACK_IMPORTED_MODULE_2__.cleanUpMetadata)(variables.stat_data);\n    }\n    if (!is_updated) {\n        return;\n    }\n    console.info(`Init chat variables.`);\n    await updateVariablesWith(data => _.assign(data, variables));\n    if (getLastMessageId() == 0) {\n        const last_msg = getChatMessages(0, { include_swipes: true })[0];\n        // 更新所有 swipes\n        await setChatMessages([\n            {\n                // last_msg 不一定存在 message_id\n                message_id: 0,\n                swipes_data: await Promise.all(last_msg.swipes.map(async (swipe) => {\n                    const current_data = structuredClone(variables);\n                    // 此处调用的是新版 updateVariables，它将支持更多命令\n                    // 不再需要手动调用 substitudeMacros，updateVariables 会处理\n                    await (0,_function__WEBPACK_IMPORTED_MODULE_0__.updateVariables)(swipe, current_data);\n                    console.log(`变量初始化完成`);\n                    return current_data;\n                })),\n            },\n        ]);\n    }\n    else {\n        // 非开局直接更新到最后一条即可，也并不需要重新结算当前的变量\n        // @ts-expect-error 该函数可用\n        await setChatMessage({ data: variables }, getLastMessageId());\n    }\n    try {\n        // 输出构建信息\n        toastr.info(`有新的世界书初始化变量被加载，当前使用世界书: ${YAML.stringify(variables.initialized_lorebooks)}`, '变量初始化成功');\n    }\n    catch (_e) {\n        /* empty */\n    }\n    // 更新 lorebook 设置\n    await updateLorebookSettings();\n}\n/**\n * 获取所有启用的 lorebook 列表\n */\nasync function getEnabledLorebookList() {\n    const lorebook_settings = await getLorebookSettings();\n    const enabled_lorebook_list = [...lorebook_settings.selected_global_lorebooks];\n    const char_lorebook = await getCurrentCharPrimaryLorebook();\n    if (char_lorebook !== null) {\n        enabled_lorebook_list.push(char_lorebook);\n    }\n    return enabled_lorebook_list;\n}\n/**\n * 从 lorebook 中加载所有 InitVar 数据并合并到提供的 GameData 中\n */\nasync function loadInitVarData(mvu_data, lorebook_list) {\n    const enabled_lorebook_list = lorebook_list || (await getEnabledLorebookList());\n    let is_updated = false;\n    // 确保 initialized_lorebooks 是对象格式\n    if (!mvu_data.initialized_lorebooks || Array.isArray(mvu_data.initialized_lorebooks)) {\n        mvu_data.initialized_lorebooks = {};\n    }\n    for (const current_lorebook of enabled_lorebook_list) {\n        // 适配 beta 分支的对象结构\n        if (_.has(mvu_data.initialized_lorebooks, current_lorebook))\n            continue;\n        mvu_data.initialized_lorebooks[current_lorebook] = [];\n        const init_entries = (await getLorebookEntries(current_lorebook));\n        for (const entry of init_entries) {\n            if (entry.comment?.toLowerCase().includes('[initvar]')) {\n                const content = substitudeMacros(entry.content);\n                let parsedData = null;\n                let parseError = null;\n                // Try YAML first (which also handles JSON)\n                try {\n                    parsedData = YAML.parseDocument(content, { merge: true }).toJS();\n                }\n                catch (e) {\n                    // Try JSON5\n                    try {\n                        // eslint-disable-next-line import-x/no-named-as-default-member\n                        parsedData = json5__WEBPACK_IMPORTED_MODULE_3__[\"default\"].parse(content);\n                    }\n                    catch (e2) {\n                        // Try TOML\n                        try {\n                            parsedData = toml__WEBPACK_IMPORTED_MODULE_4__[\"default\"].parse(content);\n                        }\n                        catch (e3) {\n                            parseError = new Error(`Failed to parse content as YAML/JSON, JSON5, or TOML: ${e3}`);\n                        }\n                    }\n                }\n                if (parseError) {\n                    console.error(`Failed to parse lorebook entry[${entry.comment}]: ${parseError}`);\n                    toastr.error(parseError.message, 'Failed to parse lorebook entry', {\n                        timeOut: 5000,\n                    });\n                    throw parseError;\n                }\n                if (parsedData) {\n                    mvu_data.stat_data = _.merge(mvu_data.stat_data, parsedData);\n                }\n            }\n        }\n        is_updated = true;\n    }\n    return is_updated;\n}\n/**\n * 创建一个新的空 GameData 对象\n */\nfunction createEmptyGameData() {\n    return {\n        display_data: {},\n        initialized_lorebooks: {}, // 适配 beta 分支的对象结构\n        stat_data: {},\n        delta_data: {},\n        schema: {\n            type: 'object',\n            properties: {},\n        }, // beta 分支新增的 schema 字段\n    };\n}\n/**\n * 获取最后一条消息的变量数据\n */\nasync function getLastMessageVariables() {\n    let last_chat_msg = [];\n    try {\n        last_chat_msg = (await getChatMessages(-2, {\n            role: 'assistant',\n            include_swipes: true,\n        }));\n    }\n    catch (e) {\n        // 在第一行时，必定发生异常。\n    }\n    if (!last_chat_msg || last_chat_msg.length <= 0) {\n        const first_msg = await getChatMessages(0, {\n            include_swipes: true,\n        });\n        if (first_msg && first_msg.length > 0) {\n            last_chat_msg = first_msg;\n        }\n        else {\n            throw new Error('不存在任何一条消息');\n        }\n    }\n    const last_msg = last_chat_msg[0];\n    const variables = last_msg.swipes_data[last_msg.swipe_id];\n    return { message: last_msg, variables };\n}\n/**\n * 更新 lorebook 设置为推荐配置\n */\nasync function updateLorebookSettings() {\n    /*Ref:https://github.com/lolo-desu/lolocard/blob/master/src/%E6%97%A5%E8%AE%B0%E7%BB%9C%E7%BB%9C/%E8%84%9A%E6%9C%AC/%E8%B0%83%E6%95%B4%E4%B8%96%E7%95%8C%E4%B9%A6%E5%85%A8%E5%B1%80%E8%AE%BE%E7%BD%AE.ts\n     */\n    const dst_setting = {\n        scan_depth: 2,\n        context_percentage: 100,\n        budget_cap: 0,\n        min_activations: 0,\n        max_depth: 0,\n        max_recursion_steps: 0,\n        insertion_strategy: 'character_first',\n        include_names: false,\n        recursive: true,\n        case_sensitive: false,\n        match_whole_words: false,\n        use_group_scoring: false,\n        overflow_alert: false,\n    };\n    const settings = getLorebookSettings();\n    if (!_.isEqual(_.merge({}, settings, dst_setting), settings)) {\n        setLorebookSettings(dst_setting);\n    }\n}\n//window.initCheck = initCheck;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBRSxDQUFDO1FBQ2IsZUFBZSxFQUFFLENBQUM7UUFDbEIsU0FBUyxFQUFFLENBQUM7UUFDWixtQkFBbUIsRUFBRSxDQUFDO1FBRXRCLGtCQUFrQixFQUFFLGlCQUFpQjtRQUVyQyxhQUFhLEVBQUUsS0FBSztRQUNwQixTQUFTLEVBQUUsSUFBSTtRQUNmLGNBQWMsRUFBRSxLQUFLO1FBQ3JCLGlCQUFpQixFQUFFLEtBQUs7UUFDeEIsaUJBQWlCLEVBQUUsS0FBSztRQUN4QixjQUFjLEVBQUUsS0FBSztLQUN4QixDQUFDO0lBQ0YsTUFBTSxRQUFRLEdBQUcsbUJBQW1CLEVBQUUsQ0FBQztJQUN2QyxJQUFJLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRSxRQUFRLEVBQUUsV0FBVyxDQUFDLEVBQUUsUUFBUSxDQUFDLEVBQUUsQ0FBQztRQUMzRCxtQkFBbUIsQ0FBQyxXQUFXLENBQUMsQ0FBQztJQUNyQyxDQUFDO0FBQ0wsQ0FBQztBQUVELCtCQUErQiIsInNvdXJjZXMiOlsic3JjOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS9zcmMvdmFyaWFibGVfaW5pdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyDmlbTkvZPmuLjmiI/mlbDmja7nsbvlnotcclxuaW1wb3J0IHsgZ2V0TGFzdFZhbGlkVmFyaWFibGUsIHVwZGF0ZVZhcmlhYmxlcyB9IGZyb20gJ0AvZnVuY3Rpb24nO1xyXG5pbXBvcnQgeyBNdnVEYXRhLCBpc09iamVjdFNjaGVtYSwgUm9vdEFkZGl0aW9uYWxQcm9wcywgU2NoZW1hTm9kZSB9IGZyb20gJ0AvdmFyaWFibGVfZGVmJztcclxuaW1wb3J0IHsgY2xlYW5VcE1ldGFkYXRhLCBFWFRFTlNJQkxFX01BUktFUiwgZ2VuZXJhdGVTY2hlbWEgfSBmcm9tICdAL3NjaGVtYSc7XHJcbmltcG9ydCBKU09ONSBmcm9tICdqc29uNSc7XHJcbmltcG9ydCBUT01MIGZyb20gJ3RvbWwnO1xyXG5cclxudHlwZSBMb3JlYm9va0VudHJ5ID0ge1xyXG4gICAgY29udGVudDogc3RyaW5nO1xyXG4gICAgY29tbWVudD86IHN0cmluZztcclxufTtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbml0Q2hlY2soKSB7XHJcbiAgICBsZXQgdmFyaWFibGVzOiBNdnVEYXRhICYgUmVjb3JkPHN0cmluZywgYW55PjtcclxuICAgIC8v6L+Z5Liq5Ye95pWw6ZyA6KaB5aSE55CGIGRyeVJ1bizlm6DkuLow5bGC44CCXHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICBpZiAoU2lsbHlUYXZlcm4uY2hhdC5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcign5LiN5a2Y5Zyo5Lu75L2V5LiA5p2h5raI5oGv77yM6YCA5Ye6Jyk7XHJcbiAgICAgICAgICAgIHRvYXN0ci5lcnJvcihg5peg5byA5Zy655m977yM5peg5rOV6L+b6KGM5Yid5aeL5YyWYCwgJ+WPmOmHj+WIneWni+WMluWksei0pScpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhcmlhYmxlcyA9IChhd2FpdCBnZXRMYXN0VmFsaWRWYXJpYWJsZShnZXRMYXN0TWVzc2FnZUlkKCkpKSA/PyBjcmVhdGVFbXB0eUdhbWVEYXRhKCk7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcign5LiN5a2Y5Zyo5Lu75L2V5LiA5p2h5raI5oGv77yM6YCA5Ye6Jyk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOehruS/neWPmOmHj+e7k+aehOWujOaVtFxyXG4gICAgaWYgKHZhcmlhYmxlcyA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgdmFyaWFibGVzID0gY3JlYXRlRW1wdHlHYW1lRGF0YSgpO1xyXG4gICAgfVxyXG4gICAgaWYgKCFfLmhhcyh2YXJpYWJsZXMsICdpbml0aWFsaXplZF9sb3JlYm9va3MnKSkge1xyXG4gICAgICAgIHZhcmlhYmxlcy5pbml0aWFsaXplZF9sb3JlYm9va3MgPSB7fTtcclxuICAgIH1cclxuICAgIGlmIChBcnJheS5pc0FycmF5KHZhcmlhYmxlcy5pbml0aWFsaXplZF9sb3JlYm9va3MpKSB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKFxyXG4gICAgICAgICAgICAnT2xkIFwiaW5pdGlhbGl6ZWRfbG9yZWJvb2tzXCIgYXJyYXkgZm9ybWF0IGRldGVjdGVkLiBNaWdyYXRpbmcgdG8gdGhlIG5ldyBvYmplY3QgZm9ybWF0LidcclxuICAgICAgICApO1xyXG4gICAgICAgIGNvbnN0IG9sZEFycmF5ID0gdmFyaWFibGVzLmluaXRpYWxpemVkX2xvcmVib29rcyBhcyBzdHJpbmdbXTtcclxuICAgICAgICBjb25zdCBuZXdPYmplY3Q6IFJlY29yZDxzdHJpbmcsIGFueVtdPiA9IHt9O1xyXG4gICAgICAgIGZvciAoY29uc3QgbG9yZWJvb2tOYW1lIG9mIG9sZEFycmF5KSB7XHJcbiAgICAgICAgICAgIG5ld09iamVjdFtsb3JlYm9va05hbWVdID0gW107IC8vIOaMieeFp+aWsOagvOW8j++8jOWAvOS4uuS4gOS4quepuuaVsOe7hFxyXG4gICAgICAgIH1cclxuICAgICAgICB2YXJpYWJsZXMuaW5pdGlhbGl6ZWRfbG9yZWJvb2tzID0gbmV3T2JqZWN0O1xyXG4gICAgfVxyXG4gICAgaWYgKCF2YXJpYWJsZXMuc3RhdF9kYXRhKSB7XHJcbiAgICAgICAgdmFyaWFibGVzLnN0YXRfZGF0YSA9IHt9O1xyXG4gICAgfVxyXG4gICAgaWYgKCF2YXJpYWJsZXMuc2NoZW1hKSB7XHJcbiAgICAgICAgdmFyaWFibGVzLnNjaGVtYSA9IHsgZXh0ZW5zaWJsZTogZmFsc2UsIHByb3BlcnRpZXM6IHt9LCB0eXBlOiAnb2JqZWN0JyB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOWKoOi9vSBJbml0VmFyIOaVsOaNrlxyXG4gICAgY29uc3QgaXNfdXBkYXRlZCA9IGF3YWl0IGxvYWRJbml0VmFyRGF0YSh2YXJpYWJsZXMpO1xyXG5cclxuICAgIC8vIC0tLSDkuIDmrKHmgKfmuIXnkIbmiYDmnInprZTms5XlrZfnrKbkuLIgLS0tXHJcbiAgICBpZiAoaXNfdXBkYXRlZCkge1xyXG4gICAgICAgIC8vIOmAkuW9kumBjeWOhuaVtOS4qiBzdGF0X2RhdGHvvIznp7vpmaTmiYDmnInprZTms5XlrZfnrKbkuLJcclxuICAgICAgICBjb25zdCBjbGVhbkRhdGEgPSAoZGF0YTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyDkvb/nlKggZmlsdGVyIOWIm+W7uuS4gOS4quS4jeWQq+agh+iusOeahOaWsOaVsOe7hFxyXG4gICAgICAgICAgICAgICAgY29uc3QgY2xlYW5lZEFycmF5ID0gZGF0YS5maWx0ZXIoaXRlbSA9PiBpdGVtICE9PSBFWFRFTlNJQkxFX01BUktFUik7XHJcbiAgICAgICAgICAgICAgICAvLyDpgJLlvZLmuIXnkIbmlbDnu4TlhoXnmoTlr7nosaHmiJbmlbDnu4RcclxuICAgICAgICAgICAgICAgIGNsZWFuZWRBcnJheS5mb3JFYWNoKGNsZWFuRGF0YSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY2xlYW5lZEFycmF5O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChfLmlzT2JqZWN0KGRhdGEpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdPYmo6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHR5cGVkRGF0YSA9IGRhdGEgYXMgUmVjb3JkPHN0cmluZywgYW55PjsgLy8g57G75Z6L5pat6KiAXHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g6YCS5b2S5riF55CG5a2Q6IqC54K577yM5bm25bCG57uT5p6c6LWL57uZ5paw5a+56LGhXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3T2JqW2tleV0gPSBjbGVhbkRhdGEodHlwZWREYXRhW2tleV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ld09iajtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8vIOWcqOeUn+aIkCBTY2hlbWEg5LmL5YmN77yM5YWI5riF55CG5LiA6YGNIHN0YXRfZGF0YVxyXG4gICAgICAgIC8vIOi/memHjOmcgOimgeWFiOeUn+aIkCBTY2hlbWHvvIzlho3muIXnkIbmlbDmja5cclxuICAgICAgICAvLyDmiYDku6Xov5jmmK/lvpfnlKjlhYvpmoZcclxuICAgIH1cclxuXHJcbiAgICAvLyDlnKjmiYDmnIkgbG9yZWJvb2sg5Yid5aeL5YyW5a6M5oiQ5ZCO77yM55Sf5oiQ5pyA57uI55qE5qih5byPXHJcbiAgICBpZiAoaXNfdXBkYXRlZCB8fCAhdmFyaWFibGVzLnNjaGVtYSB8fCBfLmlzRW1wdHkodmFyaWFibGVzLnNjaGVtYSkpIHtcclxuICAgICAgICAvLyAxLiDlhYvpmobmlbDmja7nlKjkuo4gU2NoZW1hIOeUn+aIkFxyXG4gICAgICAgIGNvbnN0IGRhdGFGb3JTY2hlbWEgPSBzdHJ1Y3R1cmVkQ2xvbmUodmFyaWFibGVzLnN0YXRfZGF0YSk7XHJcbiAgICAgICAgLy8gMi4gZ2VuZXJhdGVTY2hlbWEg5Lya6K+75Y+W5bm256e76Zmk5YWL6ZqG5L2T5Lit55qE5qCH6K6w77yM55Sf5oiQ5q2j56Gu55qEIHNjaGVtYVxyXG4gICAgICAgIC8vIOWvueS6juWinumHj+WcuuaZr++8jOS8muS7peS5i+WJjeeahCBzY2hlbWEg5Li65Z+656GA55Sf5oiQ44CCXHJcbiAgICAgICAgY29uc3QgZ2VuZXJhdGVkX3NjaGVtYTogU2NoZW1hTm9kZSAmIFJvb3RBZGRpdGlvbmFsUHJvcHMgPSBnZW5lcmF0ZVNjaGVtYShcclxuICAgICAgICAgICAgZGF0YUZvclNjaGVtYSxcclxuICAgICAgICAgICAgdmFyaWFibGVzLnNjaGVtYVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIC8vIOS9v+eUqOexu+Wei+WuiOWNq+ehruS/neeUn+aIkOeahCBzY2hlbWEg5pivIE9iamVjdFNjaGVtYU5vZGVcclxuICAgICAgICBpZiAoaXNPYmplY3RTY2hlbWEoZ2VuZXJhdGVkX3NjaGVtYSkpIHtcclxuICAgICAgICAgICAgaWYgKF8uaGFzKHZhcmlhYmxlcy5zdGF0X2RhdGEsICckbWV0YS5zdHJpY3RUZW1wbGF0ZScpKVxyXG4gICAgICAgICAgICAgICAgZ2VuZXJhdGVkX3NjaGVtYS5zdHJpY3RUZW1wbGF0ZSA9IHZhcmlhYmxlcy5zdGF0X2RhdGFbJyRtZXRhJ11cclxuICAgICAgICAgICAgICAgICAgICA/LnN0cmljdFRlbXBsYXRlIGFzIGJvb2xlYW47XHJcbiAgICAgICAgICAgIGlmIChfLmhhcyh2YXJpYWJsZXMuc3RhdF9kYXRhLCAnJG1ldGEuY29uY2F0VGVtcGxhdGVBcnJheScpKVxyXG4gICAgICAgICAgICAgICAgZ2VuZXJhdGVkX3NjaGVtYS5jb25jYXRUZW1wbGF0ZUFycmF5ID0gdmFyaWFibGVzLnN0YXRfZGF0YVsnJG1ldGEnXVxyXG4gICAgICAgICAgICAgICAgICAgID8uY29uY2F0VGVtcGxhdGVBcnJheSBhcyBib29sZWFuO1xyXG4gICAgICAgICAgICBpZiAoXy5oYXModmFyaWFibGVzLnN0YXRfZGF0YSwgJyRtZXRhLnN0cmljdFNldCcpKVxyXG4gICAgICAgICAgICAgICAgZ2VuZXJhdGVkX3NjaGVtYS5zdHJpY3RTZXQgPSB2YXJpYWJsZXMuc3RhdF9kYXRhWyckbWV0YSddPy5zdHJpY3RTZXQgYXMgYm9vbGVhbjtcclxuICAgICAgICAgICAgdmFyaWFibGVzLnNjaGVtYSA9IGdlbmVyYXRlZF9zY2hlbWE7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcclxuICAgICAgICAgICAgICAgICdHZW5lcmF0ZWQgc2NoZW1hIGlzIG5vdCBhbiBvYmplY3Qgc2NoZW1hLCB3aGljaCBpcyB1bmV4cGVjdGVkIGZvciBzdGF0X2RhdGEgcm9vdCdcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIDMuIOeOsOWcqO+8jOa4heeQhuecn+WunueahCBzdGF0X2RhdGHvvIzorqnlroPlnKjlkI7nu63mk43kvZzkuK3kv53mjIHlubLlh4BcclxuICAgICAgICBjbGVhblVwTWV0YWRhdGEodmFyaWFibGVzLnN0YXRfZGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFpc191cGRhdGVkKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnNvbGUuaW5mbyhgSW5pdCBjaGF0IHZhcmlhYmxlcy5gKTtcclxuICAgIGF3YWl0IHVwZGF0ZVZhcmlhYmxlc1dpdGgoZGF0YSA9PiBfLmFzc2lnbihkYXRhLCB2YXJpYWJsZXMpKTtcclxuXHJcbiAgICBpZiAoZ2V0TGFzdE1lc3NhZ2VJZCgpID09IDApIHtcclxuICAgICAgICBjb25zdCBsYXN0X21zZyA9IGdldENoYXRNZXNzYWdlcygwLCB7IGluY2x1ZGVfc3dpcGVzOiB0cnVlIH0pWzBdO1xyXG4gICAgICAgIC8vIOabtOaWsOaJgOaciSBzd2lwZXNcclxuICAgICAgICBhd2FpdCBzZXRDaGF0TWVzc2FnZXMoW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAvLyBsYXN0X21zZyDkuI3kuIDlrprlrZjlnKggbWVzc2FnZV9pZFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZV9pZDogMCxcclxuICAgICAgICAgICAgICAgIHN3aXBlc19kYXRhOiBhd2FpdCBQcm9taXNlLmFsbChcclxuICAgICAgICAgICAgICAgICAgICBsYXN0X21zZy5zd2lwZXMhLm1hcChhc3luYyBzd2lwZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRfZGF0YSA9IHN0cnVjdHVyZWRDbG9uZSh2YXJpYWJsZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDmraTlpITosIPnlKjnmoTmmK/mlrDniYggdXBkYXRlVmFyaWFibGVz77yM5a6D5bCG5pSv5oyB5pu05aSa5ZG95LukXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOS4jeWGjemcgOimgeaJi+WKqOiwg+eUqCBzdWJzdGl0dWRlTWFjcm9z77yMdXBkYXRlVmFyaWFibGVzIOS8muWkhOeQhlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB1cGRhdGVWYXJpYWJsZXMoc3dpcGUsIGN1cnJlbnRfZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDlj5jph4/liJ3lp4vljJblrozmiJBgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnRfZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICBdKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8g6Z2e5byA5bGA55u05o6l5pu05paw5Yiw5pyA5ZCO5LiA5p2h5Y2z5Y+v77yM5Lmf5bm25LiN6ZyA6KaB6YeN5paw57uT566X5b2T5YmN55qE5Y+Y6YePXHJcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciDor6Xlh73mlbDlj6/nlKhcclxuICAgICAgICBhd2FpdCBzZXRDaGF0TWVzc2FnZSh7IGRhdGE6IHZhcmlhYmxlcyB9LCBnZXRMYXN0TWVzc2FnZUlkKCkpO1xyXG4gICAgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgICAvLyDovpPlh7rmnoTlu7rkv6Hmga9cclxuICAgICAgICB0b2FzdHIuaW5mbyhcclxuICAgICAgICAgICAgYOacieaWsOeahOS4lueVjOS5puWIneWni+WMluWPmOmHj+iiq+WKoOi9ve+8jOW9k+WJjeS9v+eUqOS4lueVjOS5pjogJHtZQU1MLnN0cmluZ2lmeSh2YXJpYWJsZXMuaW5pdGlhbGl6ZWRfbG9yZWJvb2tzKX1gLFxyXG4gICAgICAgICAgICAn5Y+Y6YeP5Yid5aeL5YyW5oiQ5YqfJ1xyXG4gICAgICAgICk7XHJcbiAgICB9IGNhdGNoIChfZSkge1xyXG4gICAgICAgIC8qIGVtcHR5ICovXHJcbiAgICB9XHJcblxyXG4gICAgLy8g5pu05pawIGxvcmVib29rIOiuvue9rlxyXG4gICAgYXdhaXQgdXBkYXRlTG9yZWJvb2tTZXR0aW5ncygpO1xyXG59XHJcblxyXG4vKipcclxuICog6I635Y+W5omA5pyJ5ZCv55So55qEIGxvcmVib29rIOWIl+ihqFxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEVuYWJsZWRMb3JlYm9va0xpc3QoKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xyXG4gICAgY29uc3QgbG9yZWJvb2tfc2V0dGluZ3MgPSBhd2FpdCBnZXRMb3JlYm9va1NldHRpbmdzKCk7XHJcbiAgICBjb25zdCBlbmFibGVkX2xvcmVib29rX2xpc3QgPSBbLi4ubG9yZWJvb2tfc2V0dGluZ3Muc2VsZWN0ZWRfZ2xvYmFsX2xvcmVib29rc107XHJcbiAgICBjb25zdCBjaGFyX2xvcmVib29rID0gYXdhaXQgZ2V0Q3VycmVudENoYXJQcmltYXJ5TG9yZWJvb2soKTtcclxuICAgIGlmIChjaGFyX2xvcmVib29rICE9PSBudWxsKSB7XHJcbiAgICAgICAgZW5hYmxlZF9sb3JlYm9va19saXN0LnB1c2goY2hhcl9sb3JlYm9vayk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZW5hYmxlZF9sb3JlYm9va19saXN0O1xyXG59XHJcblxyXG4vKipcclxuICog5LuOIGxvcmVib29rIOS4reWKoOi9veaJgOaciSBJbml0VmFyIOaVsOaNruW5tuWQiOW5tuWIsOaPkOS+m+eahCBHYW1lRGF0YSDkuK1cclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2FkSW5pdFZhckRhdGEoXHJcbiAgICBtdnVfZGF0YTogTXZ1RGF0YSxcclxuICAgIGxvcmVib29rX2xpc3Q/OiBzdHJpbmdbXVxyXG4pOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgIGNvbnN0IGVuYWJsZWRfbG9yZWJvb2tfbGlzdCA9IGxvcmVib29rX2xpc3QgfHwgKGF3YWl0IGdldEVuYWJsZWRMb3JlYm9va0xpc3QoKSk7XHJcbiAgICBsZXQgaXNfdXBkYXRlZCA9IGZhbHNlO1xyXG5cclxuICAgIC8vIOehruS/nSBpbml0aWFsaXplZF9sb3JlYm9va3Mg5piv5a+56LGh5qC85byPXHJcbiAgICBpZiAoIW12dV9kYXRhLmluaXRpYWxpemVkX2xvcmVib29rcyB8fCBBcnJheS5pc0FycmF5KG12dV9kYXRhLmluaXRpYWxpemVkX2xvcmVib29rcykpIHtcclxuICAgICAgICBtdnVfZGF0YS5pbml0aWFsaXplZF9sb3JlYm9va3MgPSB7fTtcclxuICAgIH1cclxuXHJcbiAgICBmb3IgKGNvbnN0IGN1cnJlbnRfbG9yZWJvb2sgb2YgZW5hYmxlZF9sb3JlYm9va19saXN0KSB7XHJcbiAgICAgICAgLy8g6YCC6YWNIGJldGEg5YiG5pSv55qE5a+56LGh57uT5p6EXHJcbiAgICAgICAgaWYgKF8uaGFzKG12dV9kYXRhLmluaXRpYWxpemVkX2xvcmVib29rcywgY3VycmVudF9sb3JlYm9vaykpIGNvbnRpbnVlO1xyXG4gICAgICAgIG12dV9kYXRhLmluaXRpYWxpemVkX2xvcmVib29rc1tjdXJyZW50X2xvcmVib29rXSA9IFtdO1xyXG4gICAgICAgIGNvbnN0IGluaXRfZW50cmllcyA9IChhd2FpdCBnZXRMb3JlYm9va0VudHJpZXMoY3VycmVudF9sb3JlYm9vaykpIGFzIExvcmVib29rRW50cnlbXTtcclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBpbml0X2VudHJpZXMpIHtcclxuICAgICAgICAgICAgaWYgKGVudHJ5LmNvbW1lbnQ/LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ1tpbml0dmFyXScpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gc3Vic3RpdHVkZU1hY3JvcyhlbnRyeS5jb250ZW50KTtcclxuICAgICAgICAgICAgICAgIGxldCBwYXJzZWREYXRhOiBhbnkgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgbGV0IHBhcnNlRXJyb3I6IEVycm9yIHwgbnVsbCA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gVHJ5IFlBTUwgZmlyc3QgKHdoaWNoIGFsc28gaGFuZGxlcyBKU09OKVxyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBwYXJzZWREYXRhID0gWUFNTC5wYXJzZURvY3VtZW50KGNvbnRlbnQsIHsgbWVyZ2U6IHRydWUgfSkudG9KUygpO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRyeSBKU09ONVxyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQteC9uby1uYW1lZC1hcy1kZWZhdWx0LW1lbWJlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZWREYXRhID0gSlNPTjUucGFyc2UoY29udGVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZTIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVHJ5IFRPTUxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlZERhdGEgPSBUT01MLnBhcnNlKGNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlMykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VFcnJvciA9IG5ldyBFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgRmFpbGVkIHRvIHBhcnNlIGNvbnRlbnQgYXMgWUFNTC9KU09OLCBKU09ONSwgb3IgVE9NTDogJHtlM31gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChwYXJzZUVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgYEZhaWxlZCB0byBwYXJzZSBsb3JlYm9vayBlbnRyeVske2VudHJ5LmNvbW1lbnR9XTogJHtwYXJzZUVycm9yfWBcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIHRvYXN0ci5lcnJvcihwYXJzZUVycm9yLm1lc3NhZ2UsICdGYWlsZWQgdG8gcGFyc2UgbG9yZWJvb2sgZW50cnknLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVPdXQ6IDUwMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgcGFyc2VFcnJvcjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocGFyc2VkRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG12dV9kYXRhLnN0YXRfZGF0YSA9IF8ubWVyZ2UobXZ1X2RhdGEuc3RhdF9kYXRhLCBwYXJzZWREYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpc191cGRhdGVkID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gaXNfdXBkYXRlZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIOWIm+W7uuS4gOS4quaWsOeahOepuiBHYW1lRGF0YSDlr7nosaFcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFbXB0eUdhbWVEYXRhKCk6IE12dURhdGEge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBkaXNwbGF5X2RhdGE6IHt9LFxyXG4gICAgICAgIGluaXRpYWxpemVkX2xvcmVib29rczoge30sIC8vIOmAgumFjSBiZXRhIOWIhuaUr+eahOWvueixoee7k+aehFxyXG4gICAgICAgIHN0YXRfZGF0YToge30sXHJcbiAgICAgICAgZGVsdGFfZGF0YToge30sXHJcbiAgICAgICAgc2NoZW1hOiB7XHJcbiAgICAgICAgICAgIHR5cGU6ICdvYmplY3QnLFxyXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7fSxcclxuICAgICAgICB9LCAvLyBiZXRhIOWIhuaUr+aWsOWinueahCBzY2hlbWEg5a2X5q61XHJcbiAgICB9O1xyXG59XHJcblxyXG4vKipcclxuICog6I635Y+W5pyA5ZCO5LiA5p2h5raI5oGv55qE5Y+Y6YeP5pWw5o2uXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0TGFzdE1lc3NhZ2VWYXJpYWJsZXMoKTogUHJvbWlzZTx7XHJcbiAgICBtZXNzYWdlOiBDaGF0TWVzc2FnZVN3aXBlZDtcclxuICAgIHZhcmlhYmxlczogTXZ1RGF0YSB8IHVuZGVmaW5lZDtcclxufT4ge1xyXG4gICAgbGV0IGxhc3RfY2hhdF9tc2c6IENoYXRNZXNzYWdlU3dpcGVkW10gPSBbXTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgbGFzdF9jaGF0X21zZyA9IChhd2FpdCBnZXRDaGF0TWVzc2FnZXMoLTIsIHtcclxuICAgICAgICAgICAgcm9sZTogJ2Fzc2lzdGFudCcsXHJcbiAgICAgICAgICAgIGluY2x1ZGVfc3dpcGVzOiB0cnVlLFxyXG4gICAgICAgIH0pKSBhcyBDaGF0TWVzc2FnZVN3aXBlZFtdO1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgIC8vIOWcqOesrOS4gOihjOaXtu+8jOW/heWumuWPkeeUn+W8guW4uOOAglxyXG4gICAgfVxyXG5cclxuICAgIGlmICghbGFzdF9jaGF0X21zZyB8fCBsYXN0X2NoYXRfbXNnLmxlbmd0aCA8PSAwKSB7XHJcbiAgICAgICAgY29uc3QgZmlyc3RfbXNnID0gYXdhaXQgZ2V0Q2hhdE1lc3NhZ2VzKDAsIHtcclxuICAgICAgICAgICAgaW5jbHVkZV9zd2lwZXM6IHRydWUsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKGZpcnN0X21zZyAmJiBmaXJzdF9tc2cubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBsYXN0X2NoYXRfbXNnID0gZmlyc3RfbXNnO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcign5LiN5a2Y5Zyo5Lu75L2V5LiA5p2h5raI5oGvJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGxhc3RfbXNnID0gbGFzdF9jaGF0X21zZ1swXTtcclxuICAgIGNvbnN0IHZhcmlhYmxlcyA9IGxhc3RfbXNnLnN3aXBlc19kYXRhW2xhc3RfbXNnLnN3aXBlX2lkXSBhcyBNdnVEYXRhICYgUmVjb3JkPHN0cmluZywgYW55PjtcclxuXHJcbiAgICByZXR1cm4geyBtZXNzYWdlOiBsYXN0X21zZywgdmFyaWFibGVzIH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDmm7TmlrAgbG9yZWJvb2sg6K6+572u5Li65o6o6I2Q6YWN572uXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlTG9yZWJvb2tTZXR0aW5ncygpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIC8qUmVmOmh0dHBzOi8vZ2l0aHViLmNvbS9sb2xvLWRlc3UvbG9sb2NhcmQvYmxvYi9tYXN0ZXIvc3JjLyVFNiU5NyVBNSVFOCVBRSVCMCVFNyVCQiU5QyVFNyVCQiU5Qy8lRTglODQlOUElRTYlOUMlQUMvJUU4JUIwJTgzJUU2JTk1JUI0JUU0JUI4JTk2JUU3JTk1JThDJUU0JUI5JUE2JUU1JTg1JUE4JUU1JUIxJTgwJUU4JUFFJUJFJUU3JUJEJUFFLnRzXHJcbiAgICAgKi9cclxuICAgIGNvbnN0IGRzdF9zZXR0aW5nOiBQYXJ0aWFsPExvcmVib29rU2V0dGluZ3M+ID0ge1xyXG4gICAgICAgIHNjYW5fZGVwdGg6IDIsXHJcbiAgICAgICAgY29udGV4dF9wZXJjZW50YWdlOiAxMDAsXHJcbiAgICAgICAgYnVkZ2V0X2NhcDogMCxcclxuICAgICAgICBtaW5fYWN0aXZhdGlvbnM6IDAsXHJcbiAgICAgICAgbWF4X2RlcHRoOiAwLFxyXG4gICAgICAgIG1heF9yZWN1cnNpb25fc3RlcHM6IDAsXHJcblxyXG4gICAgICAgIGluc2VydGlvbl9zdHJhdGVneTogJ2NoYXJhY3Rlcl9maXJzdCcsXHJcblxyXG4gICAgICAgIGluY2x1ZGVfbmFtZXM6IGZhbHNlLFxyXG4gICAgICAgIHJlY3Vyc2l2ZTogdHJ1ZSxcclxuICAgICAgICBjYXNlX3NlbnNpdGl2ZTogZmFsc2UsXHJcbiAgICAgICAgbWF0Y2hfd2hvbGVfd29yZHM6IGZhbHNlLFxyXG4gICAgICAgIHVzZV9ncm91cF9zY29yaW5nOiBmYWxzZSxcclxuICAgICAgICBvdmVyZmxvd19hbGVydDogZmFsc2UsXHJcbiAgICB9O1xyXG4gICAgY29uc3Qgc2V0dGluZ3MgPSBnZXRMb3JlYm9va1NldHRpbmdzKCk7XHJcbiAgICBpZiAoIV8uaXNFcXVhbChfLm1lcmdlKHt9LCBzZXR0aW5ncywgZHN0X3NldHRpbmcpLCBzZXR0aW5ncykpIHtcclxuICAgICAgICBzZXRMb3JlYm9va1NldHRpbmdzKGRzdF9zZXR0aW5nKTtcclxuICAgIH1cclxufVxyXG5cclxuLy93aW5kb3cuaW5pdENoZWNrID0gaW5pdENoZWNrO1xyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/variable_init.ts\n\n}");
  },
  "compare-versions": 
  /*!***************************************************************************!*\
  !*** external "https://testingcf.jsdelivr.net/npm/compare-versions/+esm" ***!
  \***************************************************************************/ module => {
    module.exports = __WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_compare_versions_esm_4fbc8a69__;
  },
  json5: 
  /*!****************************************************************!*\
  !*** external "https://testingcf.jsdelivr.net/npm/json5/+esm" ***!
  \****************************************************************/ module => {
    module.exports = __WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_json5_esm_143ca249__;
  },
  mathjs: 
  /*!*****************************************************************!*\
  !*** external "https://testingcf.jsdelivr.net/npm/mathjs/+esm" ***!
  \*****************************************************************/ module => {
    module.exports = __WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_mathjs_esm_aec644b1__;
  },
  pinia: 
  /*!****************************************************************!*\
  !*** external "https://testingcf.jsdelivr.net/npm/pinia/+esm" ***!
  \****************************************************************/ module => {
    module.exports = __WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_pinia_esm_b723a504__;
  },
  toml: 
  /*!***************************************************************!*\
  !*** external "https://testingcf.jsdelivr.net/npm/toml/+esm" ***!
  \***************************************************************/ module => {
    module.exports = __WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_toml_esm_005ece54__;
  },
  vue: 
  /*!**********************!*\
  !*** external "Vue" ***!
  \**********************/ module => {
    module.exports = Vue;
  },
  zod: 
  /*!********************!*\
  !*** external "z" ***!
  \********************/ module => {
    module.exports = z;
  }
};

var __webpack_module_cache__ = {};

function __webpack_require__(moduleId) {
  var cachedModule = __webpack_module_cache__[moduleId];
  if (cachedModule !== undefined) {
    return cachedModule.exports;
  }
  var module = __webpack_module_cache__[moduleId] = {
    exports: {}
  };
  __webpack_modules__[moduleId](module, module.exports, __webpack_require__);
  return module.exports;
}

(() => {
  __webpack_require__.n = module => {
    var getter = module && module.__esModule ? () => module["default"] : () => module;
    __webpack_require__.d(getter, {
      a: getter
    });
    return getter;
  };
})();

(() => {
  __webpack_require__.d = (exports, definition) => {
    for (var key in definition) {
      if (__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
        Object.defineProperty(exports, key, {
          enumerable: true,
          get: definition[key]
        });
      }
    }
  };
})();

(() => {
  __webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);
})();

(() => {
  __webpack_require__.r = exports => {
    if (typeof Symbol !== "undefined" && Symbol.toStringTag) {
      Object.defineProperty(exports, Symbol.toStringTag, {
        value: "Module"
      });
    }
    Object.defineProperty(exports, "__esModule", {
      value: true
    });
  };
})();

var __webpack_exports__ = __webpack_require__("./src/main.ts");