{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://tavern_helper_template/src/panel/Button.vue?d73d","webpack://tavern_helper_template/src/panel/Panel.vue?fe64","webpack://tavern_helper_template/src/panel/component/Detail.vue?d53d","webpack://tavern_helper_template/src/panel/component/Field.vue?b96f","webpack://tavern_helper_template/src/panel/component/HelpIcon.vue?604c","webpack://tavern_helper_template/src/panel/component/ModelSelect.vue?c1de","webpack://tavern_helper_template/src/panel/component/RangeNumber.vue?230a","webpack://tavern_helper_template/src/panel/component/Section.vue?9f11","webpack://tavern_helper_template/src/panel/update/Method.vue?66b6","webpack://tavern_helper_template/src/panel/update/Source.vue?018f","src://tavern_helper_template/node_modules/css-loader/dist/runtime/api.js","src://tavern_helper_template/node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://tavern_helper_template/src/panel/Button.vue?505b","webpack://tavern_helper_template/src/panel/Panel.vue?d31b","webpack://tavern_helper_template/src/panel/component/Detail.vue?a233","webpack://tavern_helper_template/src/panel/component/Field.vue?70fb","webpack://tavern_helper_template/src/panel/component/HelpIcon.vue?2d0b","webpack://tavern_helper_template/src/panel/component/ModelSelect.vue?4dbf","webpack://tavern_helper_template/src/panel/component/RangeNumber.vue?d468","webpack://tavern_helper_template/src/panel/component/Section.vue?1367","webpack://tavern_helper_template/src/panel/update/Method.vue?22ec","webpack://tavern_helper_template/src/panel/update/Source.vue?8a55","src://tavern_helper_template/node_modules/vue-loader/dist/exportHelper.js","src://tavern_helper_template/node_modules/vue-style-loader/lib/listToStyles.js","src://tavern_helper_template/node_modules/vue-style-loader/lib/addStylesClient.js","src://tavern_helper_template/webpack/bootstrap","src://tavern_helper_template/src/variable_def.ts","src://tavern_helper_template/webpack/runtime/compat get default export","src://tavern_helper_template/webpack/runtime/define property getters","src://tavern_helper_template/webpack/runtime/hasOwnProperty shorthand","src://tavern_helper_template/webpack/runtime/make namespace object","src://tavern_helper_template/src/function/schema.ts","src://tavern_helper_template/src/util.ts","src://tavern_helper_template/external var \"Vue\"","src://tavern_helper_template/external var \"z\"","src://tavern_helper_template/src/store.ts","src://tavern_helper_template/util/common.ts","src://tavern_helper_template/external module \"https://testingcf.jsdelivr.net/npm/mathjs/+esm\"","src://tavern_helper_template/src/function/update_variables.ts","src://tavern_helper_template/src/function/initvar/variable_init.ts","src://tavern_helper_template/src/function/is_extra_model_supported.ts","src://tavern_helper_template/src/function/is_function_calling_supported.ts","src://tavern_helper_template/src/function/function_call.ts","src://tavern_helper_template/src/function/update/invoke_extra_model.ts","src://tavern_helper_template/src/function/update/on_message_received.ts","src://tavern_helper_template/src/button.ts","src://tavern_helper_template/src/function/cleanup/cleanup_variables.ts","src://tavern_helper_template/src/function/cleanup/restore_variables.ts","src://tavern_helper_template/src/function/cleanup/index.ts","src://tavern_helper_template/src/function/cleanup/chat_variables.ts","src://tavern_helper_template/src/function/cleanup/legacy_chat.ts","src://tavern_helper_template/src/function/global/index.ts","src://tavern_helper_template/src/function/notification/index.ts","src://tavern_helper_template/src/function/request/filter_entries.ts","src://tavern_helper_template/src/function/request/filter_prompts.ts","src://tavern_helper_template/src/function/request/index.ts","src://tavern_helper_template/src/panel/component/Section.vue","webpack://tavern_helper_template/src/panel/component/Section.vue?db84","src://tavern_helper_template/src/panel/Button.vue","webpack://tavern_helper_template/src/panel/Button.vue?c013","src://tavern_helper_template/src/panel/component/Checkbox.vue","webpack://tavern_helper_template/src/panel/component/Checkbox.vue?fd07","src://tavern_helper_template/src/panel/component/Detail.vue","webpack://tavern_helper_template/src/panel/component/Detail.vue?f28a","src://tavern_helper_template/src/panel/component/Field.vue","webpack://tavern_helper_template/src/panel/component/Field.vue?c634","webpack://tavern_helper_template/src/panel/Cleanup.vue?2e65","src://tavern_helper_template/src/panel/Cleanup.vue","src://tavern_helper_template/src/panel/component/HelpIcon.vue","webpack://tavern_helper_template/src/panel/component/HelpIcon.vue?a770","webpack://tavern_helper_template/src/panel/Compatibility.vue?0a10","src://tavern_helper_template/src/panel/Compatibility.vue","webpack://tavern_helper_template/src/panel/Notification.vue?cc90","src://tavern_helper_template/src/panel/Notification.vue","src://tavern_helper_template/src/panel/component/Select.vue","webpack://tavern_helper_template/src/panel/component/Select.vue?b983","webpack://tavern_helper_template/src/panel/update_method.md?6d76","src://tavern_helper_template/src/panel/update/Method.vue","webpack://tavern_helper_template/src/panel/update/Method.vue?3dcc","webpack://tavern_helper_template/src/panel/update/prompt_toolcall.md?18d5","webpack://tavern_helper_template/src/panel/update/Prompt.vue?7fe2","src://tavern_helper_template/src/panel/update/Prompt.vue","webpack://tavern_helper_template/src/panel/update/prompt_break.md?7330","src://tavern_helper_template/src/panel/component/RangeNumber.vue","webpack://tavern_helper_template/src/panel/component/RangeNumber.vue?c6f8","webpack://tavern_helper_template/src/panel/update/request_method.md?3f0d","webpack://tavern_helper_template/src/panel/update/Request.vue?4978","src://tavern_helper_template/src/panel/update/Request.vue","src://tavern_helper_template/src/panel/component/ModelSelect.vue","webpack://tavern_helper_template/src/panel/component/ModelSelect.vue?4786","src://tavern_helper_template/src/panel/update/Source.vue","webpack://tavern_helper_template/src/panel/update/Source.vue?08fc","webpack://tavern_helper_template/src/panel/Update.vue?8e8c","src://tavern_helper_template/src/panel/Update.vue","webpack://tavern_helper_template/src/panel/Version.vue?a4b3","src://tavern_helper_template/src/panel/Version.vue","src://tavern_helper_template/src/panel/Panel.vue","webpack://tavern_helper_template/src/panel/Panel.vue?c0c3","src://tavern_helper_template/src/panel/index.ts","src://tavern_helper_template/util/script.ts","src://tavern_helper_template/src/main.ts","src://tavern_helper_template/src/function/initvar/index.ts","src://tavern_helper_template/src/function/update/index.ts"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.mvu-button-wrap[data-v-d190cd26]{display:flex;flex-wrap:wrap;gap:0.5rem 0.6rem;align-items:center}.mvu-button-wrap[data-v-d190cd26] .menu_button{box-sizing:border-box;text-align:left;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;justify-content:flex-start;padding:0.35rem 0.6rem;min-height:unset;height:2.05rem;line-height:1.1}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/panel/Button.vue\"],\"names\":[],\"mappings\":\"AAkCA,kCACI,YAAa,CACb,cAAe,CACf,iBAAkB,CAClB,kBACJ,CAEA,+CACI,qBAAsB,CACtB,eAAgB,CAChB,kBAAmB,CACnB,eAAgB,CAChB,sBAAuB,CACvB,0BAA2B,CAC3B,sBAAuB,CACvB,gBAAiB,CACjB,cAAe,CACf,eACJ\",\"sourcesContent\":[\"<template>\\n    <Section label=\\\"\\\">\\n        <template #content>\\n            <div class=\\\"mvu-button-wrap\\\">\\n                <div\\n                    v-for=\\\"button in visible_buttons\\\"\\n                    :key=\\\"button.name\\\"\\n                    class=\\\"menu_button menu_button_icon interactable\\\"\\n                    tabindex=\\\"0\\\"\\n                    role=\\\"button\\\"\\n                    @click=\\\"button.function\\\"\\n                >\\n                    {{ button.name }}\\n                </div>\\n            </div>\\n        </template>\\n    </Section>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { buttons } from '@/button';\\nimport Section from '@/panel/component/Section.vue';\\nimport { useDataStore } from '@/store';\\nimport { computed } from 'vue';\\n\\nconst store = useDataStore();\\nconst visible_buttons = computed(() =>\\n    buttons.filter(\\n        button => !(button.is_legacy ?? false) || store.settings.. === true\\n    )\\n);\\n</script>\\n\\n<style scoped>\\n.mvu-button-wrap {\\n    display: flex;\\n    flex-wrap: wrap;\\n    gap: 0.5rem 0.6rem;\\n    align-items: center;\\n}\\n\\n.mvu-button-wrap :deep(.menu_button) {\\n    box-sizing: border-box;\\n    text-align: left;\\n    white-space: nowrap;\\n    overflow: hidden;\\n    text-overflow: ellipsis;\\n    justify-content: flex-start;\\n    padding: 0.35rem 0.6rem;\\n    min-height: unset;\\n    height: 2.05rem;\\n    line-height: 1.1;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.inline-drawer-content[data-v-df27a12a]{flex-direction:column;gap:0.75rem;padding-top:0.5rem}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/panel/Panel.vue\"],\"names\":[],\"mappings\":\"AA4BA,wCACI,qBAAsB,CACtB,WAAY,CACZ,kBACJ\",\"sourcesContent\":[\"<template>\\n    <div class=\\\"inline-drawer\\\">\\n        <div class=\\\"inline-drawer-toggle inline-drawer-header\\\">\\n            <b>MVU </b>\\n            <div class=\\\"inline-drawer-icon fa-solid fa-circle-chevron-down down\\\"></div>\\n        </div>\\n\\n        <div class=\\\"inline-drawer-content\\\">\\n            <Version />\\n            <Notification />\\n            <Update />\\n            <Button />\\n            <Cleanup />\\n            <Compatibility />\\n        </div>\\n    </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport Button from '@/panel/Button.vue';\\nimport Cleanup from '@/panel/Cleanup.vue';\\nimport Compatibility from '@/panel/Compatibility.vue';\\nimport Notification from '@/panel/Notification.vue';\\nimport Update from '@/panel/Update.vue';\\nimport Version from '@/panel/Version.vue';\\n</script>\\n\\n<style scoped>\\n.inline-drawer-content {\\n    flex-direction: column;\\n    gap: 0.75rem;\\n    padding-top: 0.5rem;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.mvu-details[data-v-47f2b2e0]{border:1px dashed var(--SmartThemeBorderColor,rgba(45,45,45,1));border-radius:10px;padding:0.5rem 0.7rem;background-color:rgba(0,0,0,0.06);background-color:color-mix(in srgb,var(--SmartThemeBlurTintColor,rgba(31,31,31,1)) 70%,transparent)}.mvu-details__summary[data-v-47f2b2e0]{cursor:pointer;-webkit-user-select:none;user-select:none;font-weight:600;opacity:0.95}.mvu-details__content[data-v-47f2b2e0]{margin-top:0.5rem;display:flex;flex-direction:column;gap:0.5rem}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/panel/component/Detail.vue\"],\"names\":[],\"mappings\":\"AAcA,8BACI,+DAAoE,CACpE,kBAAmB,CACnB,qBAAsB,CACtB,iCAAqC,CACrC,mGAKJ,CAEA,uCACI,cAAe,CACf,wBAAiB,CAAjB,gBAAiB,CACjB,eAAgB,CAChB,YACJ,CAEA,uCACI,iBAAkB,CAClB,YAAa,CACb,qBAAsB,CACtB,UACJ\",\"sourcesContent\":[\"<template>\\n    <details class=\\\"mvu-details\\\">\\n        <summary class=\\\"mvu-details__summary\\\">{{ title }}</summary>\\n        <div class=\\\"mvu-details__content\\\">\\n            <slot />\\n        </div>\\n    </details>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\ndefineProps<{ title: string }>();\\n</script>\\n\\n<style scoped>\\n.mvu-details {\\n    border: 1px dashed var(--SmartThemeBorderColor, rgba(45, 45, 45, 1));\\n    border-radius: 10px;\\n    padding: 0.5rem 0.7rem;\\n    background-color: rgba(0, 0, 0, 0.06);\\n    background-color: color-mix(\\n        in srgb,\\n        var(--SmartThemeBlurTintColor, rgba(31, 31, 31, 1)) 70%,\\n        transparent\\n    );\\n}\\n\\n.mvu-details__summary {\\n    cursor: pointer;\\n    user-select: none;\\n    font-weight: 600;\\n    opacity: 0.95;\\n}\\n\\n.mvu-details__content {\\n    margin-top: 0.5rem;\\n    display: flex;\\n    flex-direction: column;\\n    gap: 0.5rem;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.mvu-field[data-v-1bd30ada]{padding:0.45rem 0.6rem;gap:0.25rem;border:1px solid color-mix(in srgb,var(--SmartThemeBorderColor,rgba(45,45,45,1)) 35%,transparent);border-radius:10px;background-color:color-mix(in srgb,var(--SmartThemeBlurTintColor,rgba(31,31,31,1)) 55%,transparent)}.mvu-field__label[data-v-1bd30ada]{display:inline-flex;align-items:center;gap:0.35rem;font-weight:600;opacity:0.95}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/panel/component/Field.vue\"],\"names\":[],\"mappings\":\"AAeA,4BACI,sBAAuB,CACvB,WAAY,CACZ,iGAAwG,CACxG,kBAAmB,CACnB,mGAKJ,CAEA,mCACI,mBAAoB,CACpB,kBAAmB,CACnB,WAAY,CACZ,eAAgB,CAChB,YACJ\",\"sourcesContent\":[\"<template>\\n    <div class=\\\"mvu-field flex-container flexFlowColumn\\\">\\n        <label class=\\\"mvu-field__label\\\">\\n            <span>{{ label }}</span>\\n            <slot name=\\\"label-suffix\\\" />\\n        </label>\\n        <slot />\\n    </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\ndefineProps<{ label: string }>();\\n</script>\\n\\n<style scoped>\\n.mvu-field {\\n    padding: 0.45rem 0.6rem;\\n    gap: 0.25rem;\\n    border: 1px solid color-mix(in srgb, var(--SmartThemeBorderColor, rgba(45, 45, 45, 1)) 35%, transparent);\\n    border-radius: 10px;\\n    background-color: color-mix(\\n        in srgb,\\n        var(--SmartThemeBlurTintColor, rgba(31, 31, 31, 1)) 55%,\\n        transparent\\n    );\\n}\\n\\n.mvu-field__label {\\n    display: inline-flex;\\n    align-items: center;\\n    gap: 0.35rem;\\n    font-weight: 600;\\n    opacity: 0.95;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.mvu-help-icon[data-v-2eeacd15]{cursor:pointer}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/panel/component/HelpIcon.vue\"],\"names\":[],\"mappings\":\"AAiBA,gCACI,cACJ\",\"sourcesContent\":[\"<template>\\n    <i\\n        class=\\\"fa-solid fa-circle-question fa-sm note-link-span mvu-help-icon\\\"\\n        role=\\\"button\\\"\\n        tabindex=\\\"0\\\"\\n        aria-label=\\\"\\\"\\n        @click=\\\"showHelpPopup(help)\\\"\\n    />\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { showHelpPopup } from '@/util';\\n\\ndefineProps<{ help: string }>();\\n</script>\\n\\n<style scoped>\\n.mvu-help-icon {\\n    cursor: pointer;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.mvu-model-select[data-v-7f080574]{display:flex;flex-direction:column;gap:0.5rem}.mvu-model-select__row[data-v-7f080574]{width:100%}.mvu-model-select__row--controls[data-v-7f080574]{display:grid;grid-template-columns:1fr auto;gap:0.5rem;align-items:center}.mvu-model-select__btn[data-v-7f080574]{white-space:nowrap;text-align:left;padding:0.35rem 0.6rem;min-height:unset;height:2.05rem;line-height:1.1}@media (max-width:520px){.mvu-model-select__row--controls[data-v-7f080574]{grid-template-columns:1fr}}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/panel/component/ModelSelect.vue\"],\"names\":[],\"mappings\":\"AAyHA,mCACI,YAAa,CACb,qBAAsB,CACtB,UACJ,CAEA,wCACI,UACJ,CAEA,kDACI,YAAa,CACb,8BAA+B,CAC/B,UAAW,CACX,kBACJ,CAEA,wCACI,kBAAmB,CACnB,eAAgB,CAChB,sBAAuB,CACvB,gBAAiB,CACjB,cAAe,CACf,eACJ,CAEA,yBACI,kDACI,yBACJ,CACJ\",\"sourcesContent\":[\"<template>\\n    <div class=\\\"mvu-model-select\\\">\\n        <div class=\\\"mvu-model-select__row\\\">\\n            <input\\n                v-model=\\\"store.settings..\\\"\\n                type=\\\"text\\\"\\n                class=\\\"text_pole\\\"\\n                autocomplete=\\\"off\\\"\\n            />\\n        </div>\\n\\n        <div class=\\\"mvu-model-select__row mvu-model-select__row--controls\\\">\\n            <select\\n                ref=\\\"select\\\"\\n                v-model=\\\"selected\\\"\\n                class=\\\"text_pole\\\"\\n                :disabled=\\\"models.length === 0\\\"\\n                aria-label=\\\"\\\"\\n            >\\n                <option value=\\\"\\\"></option>\\n                <option v-for=\\\"model in models\\\" :key=\\\"model\\\" :value=\\\"model\\\">{{ model }}</option>\\n            </select>\\n\\n            <input\\n                class=\\\"mvu-model-select__btn menu_button menu_button_icon interactable\\\"\\n                type=\\\"button\\\"\\n                :value=\\\"loading ? '' : ''\\\"\\n                :disabled=\\\"loading\\\"\\n                @click=\\\"refresh\\\"\\n            />\\n        </div>\\n    </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { useDataStore } from '@/store';\\nimport { normalizeBaseURL } from '@/util';\\nimport { ref, watch } from 'vue';\\n\\nconst store = useDataStore();\\n\\nconst loading = ref(false);\\nconst models = ref<string[]>([]);\\nconst selected = ref('');\\n\\nasync function refresh() {\\n    if (loading.value) {\\n        return;\\n    }\\n\\n    const base_url = normalizeBaseURL(store.settings..api);\\n    if (!base_url) {\\n        return;\\n    }\\n\\n    loading.value = true;\\n    try {\\n        const response = await fetch('/api/backends/chat-completions/status', {\\n            method: 'POST',\\n            headers: SillyTavern.getRequestHeaders(),\\n            body: JSON.stringify({\\n                reverse_proxy: base_url,\\n                proxy_password: store.settings..,\\n                chat_completion_source: 'openai',\\n            }),\\n            cache: 'no-cache',\\n        });\\n\\n        const json = await response.json();\\n\\n        models.value = _(json?.data ?? [])\\n            .map((model: any) => String(model?.id ?? model?.name ?? '').trim())\\n            .filter(Boolean)\\n            .sort()\\n            .sortedUniq()\\n            .value();\\n        selected.value = models.value.includes(store.settings..)\\n            ? store.settings..\\n            : '';\\n\\n        if (models.value.length === 0) {\\n            toastr.warning('', '[MVU]');\\n        }\\n    } catch (error) {\\n        toastr.error(String((error as Error)?.message ?? error), '[MVU]');\\n    } finally {\\n        loading.value = false;\\n    }\\n}\\n\\nwatch(\\n    selected,\\n    value => {\\n        if (!value) return;\\n        store.settings.. = value;\\n    },\\n    { flush: 'sync' }\\n);\\n\\nwatch(\\n    () => store.settings..,\\n    value => {\\n        if (!value) {\\n            selected.value = '';\\n            return;\\n        }\\n        selected.value = models.value.includes(value) ? value : '';\\n    },\\n    { flush: 'sync' }\\n);\\n\\nwatch(\\n    () => [store.settings..api, store.settings..] as const,\\n    () => {\\n        models.value = [];\\n        selected.value = '';\\n    }\\n);\\n</script>\\n\\n<style scoped>\\n.mvu-model-select {\\n    display: flex;\\n    flex-direction: column;\\n    gap: 0.5rem;\\n}\\n\\n.mvu-model-select__row {\\n    width: 100%;\\n}\\n\\n.mvu-model-select__row--controls {\\n    display: grid;\\n    grid-template-columns: 1fr auto;\\n    gap: 0.5rem;\\n    align-items: center;\\n}\\n\\n.mvu-model-select__btn {\\n    white-space: nowrap;\\n    text-align: left;\\n    padding: 0.35rem 0.6rem;\\n    min-height: unset;\\n    height: 2.05rem;\\n    line-height: 1.1;\\n}\\n\\n@media (max-width: 520px) {\\n    .mvu-model-select__row--controls {\\n        grid-template-columns: 1fr;\\n    }\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.mvu-range-number[data-v-48562df7]{display:grid;grid-template-columns:1fr 7.5rem;gap:0.5rem;align-items:center}.mvu-range-number__range[data-v-48562df7]{width:100%}.mvu-range-number__number[data-v-48562df7]{text-align:left;padding-top:0.3rem;padding-bottom:0.3rem;background-color:color-mix(in srgb,var(--SmartThemeBlurTintColor,rgba(31,31,31,1)) 33%,transparent)}@media (max-width:420px){.mvu-range-number[data-v-48562df7]{grid-template-columns:1fr 6.5rem}}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/panel/component/RangeNumber.vue\"],\"names\":[],\"mappings\":\"AA2CA,mCACI,YAAa,CACb,gCAAiC,CACjC,UAAW,CACX,kBACJ,CAEA,0CACI,UACJ,CAEA,2CACI,eAAgB,CAChB,kBAAmB,CACnB,qBAAsB,CACtB,mGAKJ,CAEA,yBACI,mCACI,gCACJ,CACJ\",\"sourcesContent\":[\"<template>\\n    <div class=\\\"mvu-range-number\\\">\\n        <template v-for=\\\"type in ['range', 'number']\\\" :key=\\\"type\\\">\\n            <input\\n                :class=\\\"[\\n                    `mvu-range-number__${type}`,\\n                    type === 'number' ? 'text_pole' : '',\\n                ]\\\"\\n                :type=\\\"type\\\"\\n                :min=\\\"min\\\"\\n                :max=\\\"max\\\"\\n                :step=\\\"step\\\"\\n                :disabled=\\\"disabled\\\"\\n                :value=\\\"model\\\"\\n                @input=\\\"onInput\\\"\\n            />\\n        </template>\\n    </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nconst model = defineModel<number>({ required: true });\\nconst props = defineProps<{\\n    min: number;\\n    max: number;\\n    step: number;\\n    disabled?: boolean;\\n}>();\\n\\nfunction clamp(value: number) {\\n    return _.clamp(value, props.min, props.max);\\n}\\n\\nfunction onInput(event: Event) {\\n    const target = event.target as HTMLInputElement | null;\\n    const value = Number(target?.value);\\n    if (Number.isFinite(value)) {\\n        model.value = clamp(value);\\n    }\\n}\\n</script>\\n\\n<style scoped>\\n.mvu-range-number {\\n    display: grid;\\n    grid-template-columns: 1fr 7.5rem;\\n    gap: 0.5rem;\\n    align-items: center;\\n}\\n\\n.mvu-range-number__range {\\n    width: 100%;\\n}\\n\\n.mvu-range-number__number {\\n    text-align: left;\\n    padding-top: 0.3rem;\\n    padding-bottom: 0.3rem;\\n    background-color: color-mix(\\n        in srgb,\\n        var(--SmartThemeBlurTintColor, rgba(31, 31, 31, 1)) 33%,\\n        transparent\\n    );\\n}\\n\\n@media (max-width: 420px) {\\n    .mvu-range-number {\\n        grid-template-columns: 1fr 6.5rem;\\n    }\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.mvu-section[data-v-2432cb82]{border:1px solid var(--SmartThemeBorderColor,rgba(45,45,45,1));border-radius:10px;padding:0.6rem 0.75rem;gap:0.45rem;background-color:rgba(0,0,0,0.08);background-color:color-mix(in srgb,var(--SmartThemeBlurTintColor,rgba(31,31,31,1)) 75%,transparent)}.mvu-section__content[data-v-2432cb82]{gap:0.5rem}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/panel/component/Section.vue\"],\"names\":[],\"mappings\":\"AAmBA,8BACI,8DAAmE,CACnE,kBAAmB,CACnB,sBAAuB,CACvB,WAAY,CACZ,iCAAqC,CACrC,mGAKJ,CAEA,uCACI,UACJ\",\"sourcesContent\":[\"<template>\\n    <div class=\\\"mvu-section flex-container flexFlowColumn\\\">\\n        <div class=\\\"mvu-section__title\\\">\\n            <strong>\\n                <span>{{ label }}</span>\\n            </strong>\\n            <slot name=\\\"label-suffix\\\" />\\n        </div>\\n        <div class=\\\"mvu-section__content flex-container flexFlowColumn\\\">\\n            <slot name=\\\"content\\\" />\\n        </div>\\n    </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\ndefineProps<{ label: string }>();\\n</script>\\n\\n<style scoped>\\n.mvu-section {\\n    border: 1px solid var(--SmartThemeBorderColor, rgba(45, 45, 45, 1));\\n    border-radius: 10px;\\n    padding: 0.6rem 0.75rem;\\n    gap: 0.45rem;\\n    background-color: rgba(0, 0, 0, 0.08);\\n    background-color: color-mix(\\n        in srgb,\\n        var(--SmartThemeBlurTintColor, rgba(31, 31, 31, 1)) 75%,\\n        transparent\\n    );\\n}\\n\\n.mvu-section__content {\\n    gap: 0.5rem;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.mvu-warning[data-v-7327cadd]{margin-top:0.5rem;padding:0.55rem 0.7rem;border:1px solid color-mix(in srgb,var(--SmartThemeEmColor,#d39e00) 35%,transparent);border-radius:10px;background-color:color-mix(in srgb,var(--SmartThemeEmColor,#fff3cd) 15%,transparent);color:var(--SmartThemeEmColor,#856404);display:grid;grid-template-columns:auto 1fr;-moz-column-gap:0.5rem;column-gap:0.5rem;align-items:center}.mvu-warning__icon[data-v-7327cadd]{line-height:1}.mvu-warning__text[data-v-7327cadd]{word-break:break-word}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/panel/update/Method.vue\"],\"names\":[],\"mappings\":\"AA6BA,8BACI,iBAAkB,CAClB,sBAAuB,CACvB,oFAAwF,CACxF,kBAAmB,CACnB,oFAAwF,CACxF,sCAAwC,CACxC,YAAa,CACb,8BAA+B,CAC/B,sBAAkB,CAAlB,iBAAkB,CAClB,kBACJ,CAEA,oCACI,aACJ,CAEA,oCACI,qBACJ\",\"sourcesContent\":[\"<template>\\n    <Select v-model=\\\"store.settings.\\\" :options=\\\"['AI', '']\\\" />\\n\\n    <template\\n        v-if=\\\"\\n            store.runtimes.unsupported_warnings !== '' && store.settings. === ''\\n        \\\"\\n    >\\n        <div class=\\\"mvu-warning\\\">\\n            <span class=\\\"mvu-warning__icon\\\"></span>\\n            <span class=\\\"mvu-warning__text\\\">\\n                 [{{ store.runtimes.unsupported_warnings }}] , \\n                [mvu_plot]  ( AI AI).\\n                <HelpIcon :help=\\\"update_method_help\\\" />\\n            </span>\\n        </div>\\n    </template>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport HelpIcon from '@/panel/component/HelpIcon.vue';\\nimport Select from '@/panel/component/Select.vue';\\nimport update_method_help from '@/panel/update_method.md';\\nimport { useDataStore } from '@/store';\\n\\nconst store = useDataStore();\\n</script>\\n\\n<style scoped>\\n.mvu-warning {\\n    margin-top: 0.5rem;\\n    padding: 0.55rem 0.7rem;\\n    border: 1px solid color-mix(in srgb, var(--SmartThemeEmColor, #d39e00) 35%, transparent);\\n    border-radius: 10px;\\n    background-color: color-mix(in srgb, var(--SmartThemeEmColor, #fff3cd) 15%, transparent);\\n    color: var(--SmartThemeEmColor, #856404);\\n    display: grid;\\n    grid-template-columns: auto 1fr;\\n    column-gap: 0.5rem;\\n    align-items: center;\\n}\\n\\n.mvu-warning__icon {\\n    line-height: 1;\\n}\\n\\n.mvu-warning__text {\\n    word-break: break-word;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.mvu-field-grid[data-v-1ad75eb8]{display:flex;flex-direction:column;gap:0.5rem}.mvu-note[data-v-1ad75eb8]{opacity:0.85;color:var(--SmartThemeEmColor,inherit)}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/panel/update/Source.vue\"],\"names\":[],\"mappings\":\"AAwHA,iCACI,YAAa,CACb,qBAAsB,CACtB,UACJ,CAEA,2BACI,YAAa,CACb,sCACJ\",\"sourcesContent\":[\"<template>\\n    <Detail title=\\\"\\\">\\n        <Select\\n            v-model=\\\"store.settings..\\\"\\n            :options=\\\"['', '']\\\"\\n        />\\n\\n        <template v-if=\\\"store.settings.. === ''\\\">\\n            <div class=\\\"mvu-field-grid\\\">\\n                <Field label=\\\"API \\\">\\n                    <input\\n                        v-model=\\\"store.settings..api\\\"\\n                        type=\\\"text\\\"\\n                        class=\\\"text_pole\\\"\\n                        placeholder=\\\"http://localhost:1234/v1\\\"\\n                    />\\n                </Field>\\n\\n                <Field label=\\\"API \\\">\\n                    <input\\n                        v-model=\\\"store.settings..\\\"\\n                        type=\\\"password\\\"\\n                        class=\\\"text_pole\\\"\\n                        placeholder=\\\"\\\"\\n                    />\\n                </Field>\\n\\n                <Field label=\\\"\\\">\\n                    <ModelSelect />\\n                </Field>\\n            </div>\\n\\n            <Detail title=\\\"\\\">\\n                <div v-if=\\\"!additional_extra_configuration_supported\\\" class=\\\"mvu-note\\\">\\n                    \\n                </div>\\n\\n                <div class=\\\"mvu-field-grid\\\">\\n                    <Field label=\\\" token\\\">\\n                        <input\\n                            v-model.number=\\\"store.settings..token\\\"\\n                            :disabled=\\\"!additional_extra_configuration_supported\\\"\\n                            type=\\\"number\\\"\\n                            class=\\\"text_pole\\\"\\n                            min=\\\"0\\\"\\n                            step=\\\"128\\\"\\n                            placeholder=\\\"4096\\\"\\n                        />\\n                    </Field>\\n\\n                    <Field label=\\\"\\\">\\n                        <RangeNumber\\n                            v-model=\\\"store.settings..\\\"\\n                            :disabled=\\\"!additional_extra_configuration_supported\\\"\\n                            :min=\\\"0\\\"\\n                            :max=\\\"2\\\"\\n                            :step=\\\"0.01\\\"\\n                        />\\n                    </Field>\\n\\n                    <Field label=\\\"\\\">\\n                        <RangeNumber\\n                            v-model=\\\"store.settings..\\\"\\n                            :disabled=\\\"!additional_extra_configuration_supported\\\"\\n                            :min=\\\"-2\\\"\\n                            :max=\\\"2\\\"\\n                            :step=\\\"0.01\\\"\\n                        />\\n                    </Field>\\n\\n                    <Field label=\\\"\\\">\\n                        <RangeNumber\\n                            v-model=\\\"store.settings..\\\"\\n                            :disabled=\\\"!additional_extra_configuration_supported\\\"\\n                            :min=\\\"-2\\\"\\n                            :max=\\\"2\\\"\\n                            :step=\\\"0.01\\\"\\n                        />\\n                    </Field>\\n\\n                    <Field label=\\\"Top P\\\">\\n                        <RangeNumber\\n                            v-model=\\\"store.settings..top_p\\\"\\n                            :disabled=\\\"!additional_extra_configuration_supported\\\"\\n                            :min=\\\"0\\\"\\n                            :max=\\\"1\\\"\\n                            :step=\\\"0.01\\\"\\n                        />\\n                    </Field>\\n\\n                    <Field label=\\\"Top K\\\">\\n                        <RangeNumber\\n                            v-model=\\\"store.settings..top_k\\\"\\n                            :disabled=\\\"!additional_extra_configuration_supported\\\"\\n                            :min=\\\"0\\\"\\n                            :max=\\\"500\\\"\\n                            :step=\\\"1\\\"\\n                        />\\n                    </Field>\\n                </div>\\n            </Detail>\\n        </template>\\n    </Detail>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport Detail from '@/panel/component/Detail.vue';\\nimport Field from '@/panel/component/Field.vue';\\nimport ModelSelect from '@/panel/component/ModelSelect.vue';\\nimport RangeNumber from '@/panel/component/RangeNumber.vue';\\nimport Select from '@/panel/component/Select.vue';\\nimport { useDataStore } from '@/store';\\nimport { compare } from 'compare-versions';\\n\\nconst store = useDataStore();\\n\\nconst additional_extra_configuration_supported = compare(store.versions.tavernhelper, '4.0.14', '>=');\\n</script>\\n\\n<style scoped>\\n.mvu-field-grid {\\n    display: flex;\\n    flex-direction: column;\\n    gap: 0.5rem;\\n}\\n\\n.mvu-note {\\n    opacity: 0.85;\\n    color: var(--SmartThemeEmColor, inherit);\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n  if (!cssMapping) {\n    return content;\n  }\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    return [content].concat([sourceMapping]).join(\"\\n\");\n  }\n  return [content].join(\"\\n\");\n};","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-16.use[1]!../../node_modules/vue-loader/dist/stylePostLoader.js!../../node_modules/postcss-loader/dist/cjs.js!../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./Button.vue?vue&type=style&index=0&id=d190cd26&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"af70bd32\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-16.use[1]!../../node_modules/vue-loader/dist/stylePostLoader.js!../../node_modules/postcss-loader/dist/cjs.js!../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./Button.vue?vue&type=style&index=0&id=d190cd26&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-16.use[1]!../../node_modules/vue-loader/dist/stylePostLoader.js!../../node_modules/postcss-loader/dist/cjs.js!../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./Button.vue?vue&type=style&index=0&id=d190cd26&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-16.use[1]!../../node_modules/vue-loader/dist/stylePostLoader.js!../../node_modules/postcss-loader/dist/cjs.js!../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./Panel.vue?vue&type=style&index=0&id=df27a12a&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"20145f5a\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-16.use[1]!../../node_modules/vue-loader/dist/stylePostLoader.js!../../node_modules/postcss-loader/dist/cjs.js!../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./Panel.vue?vue&type=style&index=0&id=df27a12a&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-16.use[1]!../../node_modules/vue-loader/dist/stylePostLoader.js!../../node_modules/postcss-loader/dist/cjs.js!../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./Panel.vue?vue&type=style&index=0&id=df27a12a&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-16.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./Detail.vue?vue&type=style&index=0&id=47f2b2e0&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"5d55274a\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-16.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./Detail.vue?vue&type=style&index=0&id=47f2b2e0&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-16.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./Detail.vue?vue&type=style&index=0&id=47f2b2e0&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-16.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./Field.vue?vue&type=style&index=0&id=1bd30ada&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"005de17c\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-16.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./Field.vue?vue&type=style&index=0&id=1bd30ada&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-16.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./Field.vue?vue&type=style&index=0&id=1bd30ada&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-16.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./HelpIcon.vue?vue&type=style&index=0&id=2eeacd15&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"583ad818\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-16.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./HelpIcon.vue?vue&type=style&index=0&id=2eeacd15&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-16.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./HelpIcon.vue?vue&type=style&index=0&id=2eeacd15&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-16.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ModelSelect.vue?vue&type=style&index=0&id=7f080574&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"757f9d07\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-16.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ModelSelect.vue?vue&type=style&index=0&id=7f080574&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-16.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ModelSelect.vue?vue&type=style&index=0&id=7f080574&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-16.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./RangeNumber.vue?vue&type=style&index=0&id=48562df7&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"e6d2440c\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-16.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./RangeNumber.vue?vue&type=style&index=0&id=48562df7&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-16.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./RangeNumber.vue?vue&type=style&index=0&id=48562df7&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-16.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./Section.vue?vue&type=style&index=0&id=2432cb82&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"5c6cd034\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-16.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./Section.vue?vue&type=style&index=0&id=2432cb82&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-16.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./Section.vue?vue&type=style&index=0&id=2432cb82&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-16.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./Method.vue?vue&type=style&index=0&id=7327cadd&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"01fddb4b\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-16.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./Method.vue?vue&type=style&index=0&id=7327cadd&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-16.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./Method.vue?vue&type=style&index=0&id=7327cadd&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-16.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./Source.vue?vue&type=style&index=0&id=1ad75eb8&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"795e8a16\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-16.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./Source.vue?vue&type=style&index=0&id=1ad75eb8&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-16.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./Source.vue?vue&type=style&index=0&id=1ad75eb8&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","/**\n * Translates the list format produced by css-loader into something\n * easier to manipulate.\n */\nexport default function listToStyles (parentId, list) {\n  var styles = []\n  var newStyles = {}\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i]\n    var id = item[0]\n    var css = item[1]\n    var media = item[2]\n    var sourceMap = item[3]\n    var part = {\n      id: parentId + ':' + i,\n      css: css,\n      media: media,\n      sourceMap: sourceMap\n    }\n    if (!newStyles[id]) {\n      styles.push(newStyles[id] = { id: id, parts: [part] })\n    } else {\n      newStyles[id].parts.push(part)\n    }\n  }\n  return styles\n}\n","/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n  Modified by Evan You @yyx990803\n*/\n\nimport listToStyles from './listToStyles'\n\nvar hasDocument = typeof document !== 'undefined'\n\nif (typeof DEBUG !== 'undefined' && DEBUG) {\n  if (!hasDocument) {\n    throw new Error(\n    'vue-style-loader cannot be used in a non-browser environment. ' +\n    \"Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.\"\n  ) }\n}\n\n/*\ntype StyleObject = {\n  id: number;\n  parts: Array<StyleObjectPart>\n}\n\ntype StyleObjectPart = {\n  css: string;\n  media: string;\n  sourceMap: ?string\n}\n*/\n\nvar stylesInDom = {/*\n  [id: number]: {\n    id: number,\n    refs: number,\n    parts: Array<(obj?: StyleObjectPart) => void>\n  }\n*/}\n\nvar head = hasDocument && (document.head || document.getElementsByTagName('head')[0])\nvar singletonElement = null\nvar singletonCounter = 0\nvar isProduction = false\nvar noop = function () {}\nvar options = null\nvar ssrIdKey = 'data-vue-ssr-id'\n\n// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n// tags it will allow on a page\nvar isOldIE = typeof navigator !== 'undefined' && /msie [6-9]\\b/.test(navigator.userAgent.toLowerCase())\n\nexport default function addStylesClient (parentId, list, _isProduction, _options) {\n  isProduction = _isProduction\n\n  options = _options || {}\n\n  var styles = listToStyles(parentId, list)\n  addStylesToDom(styles)\n\n  return function update (newList) {\n    var mayRemove = []\n    for (var i = 0; i < styles.length; i++) {\n      var item = styles[i]\n      var domStyle = stylesInDom[item.id]\n      domStyle.refs--\n      mayRemove.push(domStyle)\n    }\n    if (newList) {\n      styles = listToStyles(parentId, newList)\n      addStylesToDom(styles)\n    } else {\n      styles = []\n    }\n    for (var i = 0; i < mayRemove.length; i++) {\n      var domStyle = mayRemove[i]\n      if (domStyle.refs === 0) {\n        for (var j = 0; j < domStyle.parts.length; j++) {\n          domStyle.parts[j]()\n        }\n        delete stylesInDom[domStyle.id]\n      }\n    }\n  }\n}\n\nfunction addStylesToDom (styles /* Array<StyleObject> */) {\n  for (var i = 0; i < styles.length; i++) {\n    var item = styles[i]\n    var domStyle = stylesInDom[item.id]\n    if (domStyle) {\n      domStyle.refs++\n      for (var j = 0; j < domStyle.parts.length; j++) {\n        domStyle.parts[j](item.parts[j])\n      }\n      for (; j < item.parts.length; j++) {\n        domStyle.parts.push(addStyle(item.parts[j]))\n      }\n      if (domStyle.parts.length > item.parts.length) {\n        domStyle.parts.length = item.parts.length\n      }\n    } else {\n      var parts = []\n      for (var j = 0; j < item.parts.length; j++) {\n        parts.push(addStyle(item.parts[j]))\n      }\n      stylesInDom[item.id] = { id: item.id, refs: 1, parts: parts }\n    }\n  }\n}\n\nfunction createStyleElement () {\n  var styleElement = document.createElement('style')\n  styleElement.type = 'text/css'\n  head.appendChild(styleElement)\n  return styleElement\n}\n\nfunction addStyle (obj /* StyleObjectPart */) {\n  var update, remove\n  var styleElement = document.querySelector('style[' + ssrIdKey + '~=\"' + obj.id + '\"]')\n\n  if (styleElement) {\n    if (isProduction) {\n      // has SSR styles and in production mode.\n      // simply do nothing.\n      return noop\n    } else {\n      // has SSR styles but in dev mode.\n      // for some reason Chrome can't handle source map in server-rendered\n      // style tags - source maps in <style> only works if the style tag is\n      // created and inserted dynamically. So we remove the server rendered\n      // styles and inject new ones.\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  if (isOldIE) {\n    // use singleton mode for IE9.\n    var styleIndex = singletonCounter++\n    styleElement = singletonElement || (singletonElement = createStyleElement())\n    update = applyToSingletonTag.bind(null, styleElement, styleIndex, false)\n    remove = applyToSingletonTag.bind(null, styleElement, styleIndex, true)\n  } else {\n    // use multi-style-tag mode in all other cases\n    styleElement = createStyleElement()\n    update = applyToTag.bind(null, styleElement)\n    remove = function () {\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  update(obj)\n\n  return function updateStyle (newObj /* StyleObjectPart */) {\n    if (newObj) {\n      if (newObj.css === obj.css &&\n          newObj.media === obj.media &&\n          newObj.sourceMap === obj.sourceMap) {\n        return\n      }\n      update(obj = newObj)\n    } else {\n      remove()\n    }\n  }\n}\n\nvar replaceText = (function () {\n  var textStore = []\n\n  return function (index, replacement) {\n    textStore[index] = replacement\n    return textStore.filter(Boolean).join('\\n')\n  }\n})()\n\nfunction applyToSingletonTag (styleElement, index, remove, obj) {\n  var css = remove ? '' : obj.css\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = replaceText(index, css)\n  } else {\n    var cssNode = document.createTextNode(css)\n    var childNodes = styleElement.childNodes\n    if (childNodes[index]) styleElement.removeChild(childNodes[index])\n    if (childNodes.length) {\n      styleElement.insertBefore(cssNode, childNodes[index])\n    } else {\n      styleElement.appendChild(cssNode)\n    }\n  }\n}\n\nfunction applyToTag (styleElement, obj) {\n  var css = obj.css\n  var media = obj.media\n  var sourceMap = obj.sourceMap\n\n  if (media) {\n    styleElement.setAttribute('media', media)\n  }\n  if (options.ssrId) {\n    styleElement.setAttribute(ssrIdKey, obj.id)\n  }\n\n  if (sourceMap) {\n    // https://developer.chrome.com/devtools/docs/javascript-debugging\n    // this makes source maps inside style tags work properly in Chrome\n    css += '\\n/*# sourceURL=' + sourceMap.sources[0] + ' */'\n    // http://stackoverflow.com/a/26603875\n    css += '\\n/*# sourceMappingURL=data:application/json;base64,' + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + ' */'\n  }\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild)\n    }\n    styleElement.appendChild(document.createTextNode(css))\n  }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// \nexport type TemplateType = StatData | StatData[] | any[];\n\n// StatData \nexport type StatDataMeta = {\n    extensible?: boolean;\n    recursiveExtensible?: boolean;\n    required?: string[];\n    template?: TemplateType; // \n    [key: string]: unknown;\n};\n\nexport type JSONPrimitive = string | number | boolean | null;\n\n// StatData  -  $meta \nexport type StatData = {\n    [key: string]: StatData | JSONPrimitive | (StatData | JSONPrimitive)[];\n} & {\n    $meta?: StatDataMeta;\n    $arrayMeta?: boolean;\n};\n\n// Schema \nexport type SchemaNode = ObjectSchemaNode | ArraySchemaNode | PrimitiveSchemaNode;\n\n//  Schema \nexport type ObjectSchemaNode = {\n    type: 'object';\n    properties: {\n        [key: string]: SchemaNode & { required?: boolean };\n    };\n    extensible?: boolean;\n    template?: TemplateType; // \n    recursiveExtensible?: boolean;\n};\n\n//  Schema \nexport type ArraySchemaNode = {\n    type: 'array';\n    elementType: SchemaNode;\n    extensible?: boolean;\n    template?: TemplateType; // \n    recursiveExtensible?: boolean;\n};\n\n//  Schema \nexport type PrimitiveSchemaNode = {\n    type: 'string' | 'number' | 'boolean' | 'any';\n};\n\n// ValueWithDescription  - \nexport type ValueWithDescription<T> = [T, string];\n\nexport function assertVWD(\n    _flag: boolean,\n    _v: StatData | JSONPrimitive | (StatData | JSONPrimitive)[]\n): asserts _v is ValueWithDescription<StatData | JSONPrimitive> {}\n\nexport function isValueWithDescription(value: unknown): boolean {\n    return Array.isArray(value) && value.length === 2 && typeof value[1] === 'string';\n}\n\nexport function isValueWithDescriptionStatData(\n    value: StatData | JSONPrimitive | (StatData | JSONPrimitive)[]\n): value is ValueWithDescription<StatData | JSONPrimitive> {\n    return Array.isArray(value) && value.length === 2 && typeof value[1] === 'string';\n}\n\n// \nexport function isArraySchema(value: SchemaNode): value is ArraySchemaNode {\n    return value.type === 'array';\n}\n\nexport function isObjectSchema(value: SchemaNode): value is ObjectSchemaNode {\n    return value.type === 'object';\n}\n\nexport function isPrimitiveSchema(value: SchemaNode): value is PrimitiveSchemaNode {\n    return (\n        value.type === 'string' ||\n        value.type === 'number' ||\n        value.type === 'boolean' ||\n        value.type === 'any'\n    );\n}\n\nexport type RootAdditionalProps = {\n    strictTemplate?: boolean;\n    concatTemplateArray?: boolean;\n    strictSet?: boolean;\n};\n\nexport type RootAdditionalMetaProps = {\n    $meta?: StatDataMeta & RootAdditionalProps;\n};\n\nexport type InternalData = {\n    display_data: Record<string, any>;\n    delta_data: Record<string, any>;\n};\n\nexport type MvuData = {\n    // initialized_lorebooks \n    // \n    /**  lorebook  */\n    initialized_lorebooks: Record<string, any[]>;\n\n    /**\n     *  - \n     *  \"player.health\"\n     * $internal  display_data  delta_data \n     *\n     * \n     * 1. \n     * 2. ValueWithDescription \n     * 3. \n     */\n    stat_data: StatData & RootAdditionalMetaProps & { $internal?: InternalData };\n\n    // \n    schema: ObjectSchemaNode & Partial<RootAdditionalProps>;\n\n    /**\n     * @deprecated\n     *  - \n     * \"{}->{} ({})\"\n     * \"100->80 ()\"\n     *\n     *  stat_data \n     *  stat_data \n     * UI\n     */\n    display_data?: Record<string, any>;\n\n    /**\n     * @deprecated\n     *  - \n     *  display_data \"{}->{} ()\"\n     *\n     * \n     * -  updateVariables \n     * - \n     * -  variables \n     *\n     * /\n     */\n    delta_data?: Record<string, any>;\n\n    [key: string]: any;\n};\n\nexport function isMvuData(variables: Record<string, any>): variables is MvuData {\n    return _.get(variables, 'stat_data') !== undefined && _.get(variables, 'schema') !== undefined;\n}\n\nexport const variable_events = {\n    /**   */\n    VARIABLE_INITIALIZED: 'mag_variable_initialized',\n\n    /**  */\n    VARIABLE_UPDATE_STARTED: 'mag_variable_update_started',\n\n    /**\n     * , \n     *\n     * @example\n     * //  gemini  '-'',  '.-'  '.'\n     * eventOn(Mvu.events.COMMAND_PARSED, commands => {\n     *   commands.forEach(command => {\n     *     command.args[0] = command.args[0].replace(/-/g, '');\n     *   });\n     * });\n     *\n     * @example\n     * // ,  ''  ''\n     * eventOn(Mvu.events.COMMAND_PARSED, commands => {\n     *   commands.forEach(command => {\n     *     command.args[0] = command.args[0].replaceAll('', '');\n     *   });\n     * });\n     *\n     * @example\n     * // \n     * eventOn(Mvu.events.COMMAND_PARSED, commands => {\n     *   commands.push({\n     *     type: 'set',\n     *     full_match: `_.set('.', 5)`,\n     *     args: ['.', 5],\n     *     reason: '',\n     *   });\n     * });\n     */\n    COMMAND_PARSED: 'mag_command_parsed',\n\n    /**\n     * \n     *\n     * @example\n     * //  0\n     * eventOn(Mvu.events.VARIABLE_UPDATE_ENDED, variables => {\n     *   if (_.get(variables, 'stat_data...') < 0) {\n     *     _.set(variables, 'stat_data...', 0);\n     *   }\n     * })\n     *\n     * @example\n     * //  3\n     * eventOn(Mvu.events.VARIABLE_UPDATE_ENDED, (variables, variables_before_update) => {\n     *   const old_value = _.get(variables_before_update, 'stat_data...');\n     *   const new_value = _.get(variables, 'stat_data...');\n     *\n     *   //  -3  +3 \n     *   _.set(variables, 'stat_data...', _.clamp(new_value, old_value - 3, old_value + 3));\n     * });\n     */\n    VARIABLE_UPDATE_ENDED: 'mag_variable_update_ended',\n\n    /**   */\n    BEFORE_MESSAGE_UPDATE: 'mag_before_message_update',\n\n    /** @deprecated */\n    SINGLE_VARIABLE_UPDATED: 'mag_variable_updated',\n} as const;\n\nexport type UpdateContext = {\n    variables: MvuData;\n    message_content: string;\n};\n\nexport type CommandInfo =\n    | SetCommandInfo\n    | InsertCommandInfo\n    | DeleteCommandInfo\n    | AddCommandInfo\n    | MoveCommandInfo;\ntype SetCommandInfo = {\n    type: 'set';\n    full_match: string;\n    args:\n        | [path: string, new_value_literal: string]\n        | [path: string, expected_old_value_literal: string, new_value_literal: string];\n    reason: string;\n};\ntype InsertCommandInfo = {\n    type: 'insert';\n    full_match: string;\n    args:\n        | [path: string, value_literal: string] // \n        | [path: string, index_or_key_literal: string, value_literal: string]; // /\n    reason: string;\n};\ntype DeleteCommandInfo = {\n    type: 'delete';\n    full_match: string;\n    args: [path: string] | [path: string, index_or_key_or_value_literal: string];\n    reason: string;\n};\ntype AddCommandInfo = {\n    type: 'add';\n    full_match: string;\n    args: [path: string, delta_or_toggle_literal: string];\n    reason: string;\n};\ntype MoveCommandInfo = {\n    type: 'move';\n    full_match: string;\n    args: [from: string, to: string];\n    reason: string;\n};\n\nexport interface ListenerType {\n    [variable_events.VARIABLE_INITIALIZED]: (variables: MvuData, swipe_id: number) => void;\n    [variable_events.VARIABLE_UPDATE_STARTED]: (\n        variables: MvuData,\n        out_is_updated: boolean\n    ) => void;\n    [variable_events.COMMAND_PARSED]: (\n        variables: MvuData,\n        commands: CommandInfo[],\n        message_content: string\n    ) => void;\n    [variable_events.VARIABLE_UPDATE_ENDED]: (\n        variables: MvuData,\n        variables_before_update: MvuData\n    ) => void;\n    [variable_events.BEFORE_MESSAGE_UPDATE]: (context: UpdateContext) => void;\n\n    /** @deprecated */\n    [variable_events.SINGLE_VARIABLE_UPDATED]: (\n        stat_data: Record<string, any>,\n        path: string,\n        _oldValue: any,\n        _newValue: any\n    ) => void;\n}\n\nexport const UPDATE_REGEX = /\\[mvu_update\\]/i;\nexport const PLOT_REGEX = /\\[mvu_plot\\]/i;\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import {\n    ArraySchemaNode,\n    isArraySchema,\n    isObjectSchema,\n    MvuData,\n    ObjectSchemaNode,\n    RootAdditionalProps,\n    SchemaNode,\n    StatData,\n    TemplateType,\n} from '@/variable_def';\nimport { klona } from 'klona';\n\n// \nexport const EXTENSIBLE_MARKER = '$__META_EXTENSIBLE__$';\n\n// \n/**\n * \n * @param data -  (stat_data)\n * @param oldSchemaNode - ()  Schema \n * @param parentRecursiveExtensible - ()  recursiveExtensible  false\n * @returns - \n */\nexport function generateSchema(\n    data: any,\n    oldSchemaNode?: SchemaNode,\n    parentRecursiveExtensible: boolean = false\n): SchemaNode {\n    // @ts-expect-error hack for mvu zod\n    if (oldSchemaNode === '') {\n        return { type: 'any' };\n    }\n\n    if (Array.isArray(data)) {\n        let isExtensible = false;\n        let isRecursiveExtensible = parentRecursiveExtensible;\n        let oldElementType: SchemaNode | undefined;\n        let template: TemplateType | undefined;\n\n        //  oldSchemaNode  ArraySchemaNode\n        if (oldSchemaNode) {\n            if (isArraySchema(oldSchemaNode)) {\n                isExtensible = oldSchemaNode.extensible === true;\n                isRecursiveExtensible =\n                    oldSchemaNode.recursiveExtensible === true || parentRecursiveExtensible;\n                oldElementType = oldSchemaNode.elementType;\n                template = oldSchemaNode.template;\n            } else {\n                console.error(\n                    `Type mismatch: expected array schema but got ${oldSchemaNode.type} at path`\n                );\n            }\n        }\n\n        //  $meta \n        const metaElementIndex = data.findIndex(\n            item =>\n                _.isObject(item) &&\n                !_.isDate(item) &&\n                '$arrayMeta' in item &&\n                '$meta' in item &&\n                item['$arrayMeta'] === true\n        );\n\n        if (metaElementIndex !== -1) {\n            const metaElement = data[metaElementIndex] as { $meta: any };\n            //  $meta \n            if (metaElement.$meta.extensible !== undefined) {\n                isExtensible = metaElement.$meta.extensible;\n            }\n            if (metaElement.$meta.template !== undefined) {\n                template = metaElement.$meta.template;\n            }\n            // \n            data.splice(metaElementIndex, 1);\n            console.log(`Array metadata element found and processed.`);\n        }\n\n        // \n        const markerIndex = data.indexOf(EXTENSIBLE_MARKER);\n        if (markerIndex > -1) {\n            isExtensible = true;\n            // \n            data.splice(markerIndex, 1);\n            console.log(`Extensible marker found and removed from an array.`);\n        }\n\n        const schema_node: ArraySchemaNode = {\n            type: 'array',\n            extensible: isExtensible || parentRecursiveExtensible,\n            recursiveExtensible: isRecursiveExtensible,\n            elementType:\n                data.length > 0\n                    ? generateSchema(data[0], oldElementType, isRecursiveExtensible)\n                    : { type: 'any' },\n        };\n\n        if (template !== undefined) {\n            schema_node.template = template;\n        }\n\n        return schema_node;\n    }\n    if (_.isObject(data) && !_.isDate(data)) {\n        const typedData = data as StatData; // \n\n        //  oldSchemaNode  ObjectSchemaNode\n        let oldExtensible = false;\n        let oldRecursiveExtensible = parentRecursiveExtensible;\n        let oldProperties: ObjectSchemaNode['properties'] | undefined;\n\n        if (oldSchemaNode) {\n            if (isObjectSchema(oldSchemaNode)) {\n                oldExtensible = oldSchemaNode.extensible === true;\n                oldRecursiveExtensible =\n                    oldSchemaNode.recursiveExtensible === true || parentRecursiveExtensible;\n                oldProperties = oldSchemaNode.properties;\n            } else {\n                console.error(\n                    `Type mismatch: expected object schema but got ${oldSchemaNode.type} at path`\n                );\n            }\n        }\n\n        const schemaNode: ObjectSchemaNode = {\n            type: 'object',\n            properties: {},\n            //  schema$meta.extensible  parentRecursiveExtensible\n            extensible:\n                oldExtensible ||\n                typedData.$meta?.extensible === true ||\n                typedData.$meta?.recursiveExtensible === true ||\n                parentRecursiveExtensible,\n            recursiveExtensible:\n                oldRecursiveExtensible || typedData.$meta?.recursiveExtensible === true,\n        };\n\n        //  template\n        if (typedData.$meta?.template !== undefined) {\n            schemaNode.template = typedData.$meta.template;\n        } else if (oldSchemaNode && isObjectSchema(oldSchemaNode) && oldSchemaNode.template) {\n            schemaNode.template = oldSchemaNode.template;\n        }\n\n        //  $meta\n        const parentMeta = typedData.$meta;\n\n        //  $meta \n        if (typedData.$meta) {\n            delete typedData.$meta;\n        }\n\n        for (const key in data) {\n            const oldChildNode = oldProperties?.[key];\n            //  recursiveExtensible recursiveExtensible\n            //  extensible: false, \n            const childRecursiveExtensible =\n                schemaNode.extensible !== false && schemaNode.recursiveExtensible;\n            const childSchema = generateSchema(\n                typedData[key],\n                oldChildNode,\n                childRecursiveExtensible\n            );\n\n            // \n\n            // 1. : \n            let isRequired = !schemaNode.extensible;\n\n            // 2. :  'required' \n            //     $meta.required  key \n            //    \n            if (Array.isArray(parentMeta?.required) && parentMeta.required.includes(key)) {\n                isRequired = true;\n            }\n\n            // 3.  schema \n            if (oldChildNode?.required === false) {\n                //  schema \n                isRequired = false;\n            } else if (oldChildNode?.required === true) {\n                isRequired = true;\n            }\n\n            schemaNode.properties[key] = {\n                ...childSchema,\n                required: isRequired,\n            };\n        }\n        return schemaNode;\n    }\n    // \n    const dataType = typeof data;\n    if (dataType === 'string' || dataType === 'number' || dataType === 'boolean') {\n        return { type: dataType };\n    }\n    // function, symbol, bigint, undefined  'any'\n    return { type: 'any' };\n}\n\n/**\n *  Schema \n *  .elementType  Schema\n * @param schema -  Schema \n * @param path - \n * @returns  Schema  null\n */\nexport function getSchemaForPath(\n    schema: SchemaNode | null | undefined,\n    path: string\n): SchemaNode | null {\n    if (!path || !schema) {\n        return schema || null;\n    }\n    //  lodash  'a.b[0].c' -> ['a', 'b', '0', 'c']\n    const pathSegments = _.toPath(path);\n    let currentSchema: SchemaNode | null = schema;\n\n    for (const segment of pathSegments) {\n        if (!currentSchema) return null;\n\n        //  segment  elementType\n        if (/^\\d+$/.test(segment)) {\n            if (isArraySchema(currentSchema)) {\n                currentSchema = currentSchema.elementType;\n            } else {\n                return null; //  elementType  schema\n            }\n        } else if (isObjectSchema(currentSchema) && currentSchema.properties[segment]) {\n            // \n            const property = currentSchema.properties[segment];\n            currentSchema = property as SchemaNode;\n        } else {\n            return null; //  schema \n        }\n    }\n    return currentSchema;\n}\n\n/**\n *  Schema Schema\n * @param variables -  stat_data  schema \n */\nexport function reconcileAndApplySchema(variables: MvuData) {\n    console.log('Reconciling schema with current data state...');\n\n    // 1.  generateSchema  $meta\n    const currentDataClone = klona(variables.stat_data);\n\n    // 2.  generateSchema  Schema\n    //     Schema \n    const newSchema = generateSchema(currentDataClone, variables.schema);\n\n    // 3.  Schema  Schema\n    // stat_data  schema  ObjectSchemaNode\n    if (!isObjectSchema(newSchema)) {\n        return;\n    }\n\n    //  RootAdditionalProps\n    const newSchemaWithProps = newSchema as ObjectSchemaNode & RootAdditionalProps;\n    if (variables.schema?.strictTemplate !== undefined) {\n        newSchemaWithProps.strictTemplate = variables.schema.strictTemplate;\n    }\n    if (variables.schema?.strictSet !== undefined) {\n        newSchemaWithProps.strictSet = variables.schema.strictSet;\n    }\n    if (variables.schema?.concatTemplateArray !== undefined) {\n        newSchemaWithProps.concatTemplateArray = variables.schema.concatTemplateArray;\n    }\n    if (_.has(variables.stat_data, '$meta.strictTemplate'))\n        newSchemaWithProps.strictTemplate = variables.stat_data['$meta']?.strictTemplate as boolean;\n    if (_.has(variables.stat_data, '$meta.strictSet'))\n        newSchemaWithProps.strictSet = variables.stat_data['$meta']?.strictSet as boolean;\n    if (_.has(variables.stat_data, '$meta.concatTemplateArray'))\n        newSchemaWithProps.concatTemplateArray = variables.stat_data['$meta']\n            ?.concatTemplateArray as boolean;\n\n    variables.schema = newSchemaWithProps;\n\n    console.log('Schema reconciliation complete.');\n}\n\nfunction isMetaCarrier(value: unknown): value is Record<string, unknown> & { $meta?: unknown } {\n    return _.isObject(value) && !_.isDate(value);\n}\n\n/**\n * \n * -  EXTENSIBLE_MARKER\n * -  $meta \n * @param data \n */\nexport function cleanUpMetadata(data: any): void {\n    //  $meta \n    if (Array.isArray(data)) {\n        let i = data.length;\n        while (i--) {\n            if (data[i] === EXTENSIBLE_MARKER) {\n                data.splice(i, 1);\n            } else if (\n                _.isObject(data[i]) &&\n                !_.isDate(data[i]) &&\n                '$arrayMeta' in data[i] &&\n                '$meta' in data[i] &&\n                data[i]['$arrayMeta'] === true\n            ) {\n                //  $meta & $arrayMeta \n                data.splice(i, 1);\n            } else {\n                // \n                cleanUpMetadata(data[i]);\n            }\n        }\n    }\n    //  $meta \n    else if (isMetaCarrier(data)) {\n        //  $meta\n        delete data.$meta;\n\n        // \n        for (const key in data) {\n            cleanUpMetadata(data[key]);\n        }\n    }\n}\n","import { isMvuData, MvuData } from '@/variable_def';\nimport * as jsonpatch from 'fast-json-patch';\nimport { klona } from 'klona';\n\ndeclare const jest: any;\ndeclare const process: any;\n\nexport const is_jest_environment =\n    typeof jest !== 'undefined' ||\n    (typeof process !== 'undefined' && process.env?.NODE_ENV === 'test');\n\nexport const saveChatDebounced = _.debounce(SillyTavern.saveChat, 1000);\n\n/**\n * \n * @param end_message_id ()\n */\nexport function getLastValidMessageId(end_message_id: number): number {\n    return _(SillyTavern.chat)\n        .slice(0, end_message_id)\n        .findLastIndex(chat_message => {\n            return isMvuData(_.get(chat_message, ['variables', chat_message.swipe_id ?? 0], {}));\n        });\n}\n\nexport function getLastValidVariable(end_message_id: number): MvuData | undefined {\n    const message_id = getLastValidMessageId(end_message_id);\n    if (message_id === -1) {\n        return undefined;\n    }\n    return klona(\n        _.get(\n            SillyTavern.chat[message_id],\n            ['variables', SillyTavern.chat[message_id].swipe_id ?? 0],\n            {}\n        ) as MvuData\n    );\n}\n\nexport function stoppableEventOn<T extends EventType>(event_type: T, listener: ListenerType[T]) {\n    eventOn(event_type, listener);\n    return () => eventRemoveListener(event_type, listener);\n}\n\nexport function isJsonPatch(patch: any): patch is jsonpatch.Operation[] {\n    if (!Array.isArray(patch)) {\n        return false;\n    }\n    // An empty array is a valid patch.\n    if (patch.length === 0) {\n        return true;\n    }\n    return patch.every(\n        op =>\n            _.isPlainObject(op) &&\n            typeof op.op === 'string' &&\n            (typeof op.path === 'string' || (op.op === 'move' && typeof op.to === 'string'))\n    );\n}\n\nexport function showHelpPopup(content: string) {\n    SillyTavern.callGenericPopup(content, SillyTavern.POPUP_TYPE.TEXT, '', {\n        allowVerticalScrolling: true,\n        leftAlign: true,\n        wide: true,\n    });\n}\n\nexport function normalizeBaseURL(api_url: string): string {\n    api_url = api_url.trim().replace(/\\/+$/, '');\n    if (!api_url) {\n        return '';\n    }\n    if (api_url.endsWith('/v1')) {\n        return api_url;\n    }\n    if (api_url.endsWith('/models')) {\n        return api_url.replace(/\\/models$/, '');\n    }\n    if (api_url.endsWith('/chat/completions')) {\n        return api_url.replace(/\\/chat\\/completions$/, '');\n    }\n    return `${api_url}/v1`;\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = Vue;","const __WEBPACK_NAMESPACE_OBJECT__ = z;","import { is_jest_environment } from '@/util';\nimport { defineStore } from 'pinia';\nimport { ref, toRaw, watch } from 'vue';\nimport * as z from 'zod';\n\nconst OldSettings = z\n    .object({\n        : z.object({\n            : z.boolean(),\n            : z.boolean(),\n        }),\n        : z.enum(['AI', '']),\n        : z.boolean(),\n        : z.object({\n            : z.boolean(),\n            : z.boolean(),\n            : z.enum(['', '']),\n            api: z.string(),\n            : z.string(),\n            : z.string(),\n            : z.coerce.number(),\n            : z.coerce.number(),\n            : z.coerce.number(),\n            top_p: z.coerce.number(),\n            token: z.coerce.number(),\n        }),\n        : z.number(),\n        : z.boolean(),\n        legacy: z.object({\n            : z.boolean(),\n        }),\n        auto_cleanup: z.object({\n            : z.boolean(),\n            : z.number(),\n            : z.number(),\n        }),\n        internal: z.object({\n            : z.boolean(),\n            : z.boolean(),\n            API: z.boolean(),\n            : z.boolean(),\n        }),\n    })\n    .transform(data =>\n        NewSettings.decode({\n            : {\n                ...data.,\n            },\n            : data.,\n            : {\n                ...data.,\n                : data.. ? '' : '',\n                : data.,\n            },\n            : {\n                ...data.auto_cleanup,\n                : data.,\n            },\n            : {\n                : data.,\n                : data.legacy.,\n            },\n            internal: {\n                ...data.internal,\n            },\n        })\n    );\n\nconst NewSettings = z\n    .object({\n        : z\n            .object({\n                MVU: z.boolean().default(true),\n                : z.boolean().default(true),\n                : z.boolean().default(false),\n                : z.boolean().default(true),\n            })\n            .prefault({}),\n        : z.enum(['AI', '']).default('AI'),\n        : z\n            .object({\n                : z.enum(['', '']).default(''),\n                : z.boolean().default(false),\n                : z.boolean().default(false),\n\n                : z.boolean().default(true),\n                : z\n                    .enum([\n                        '',\n                        '',\n                        ', ',\n                    ])\n                    .default(''),\n                : z.number().default(3),\n\n                : z.enum(['', '']).default(''),\n                api: z.string().default('http://localhost:1234/v1'),\n                : z.string().default(''),\n                : z.string().default('gemini-2.5-flash-nothinking'),\n                : z.coerce\n                    .number()\n                    .default(1)\n                    .transform(value => _.clamp(value, 0, 2)),\n                : z.coerce\n                    .number()\n                    .default(0.0)\n                    .transform(value => _.clamp(value, -2, 2)),\n                : z.coerce\n                    .number()\n                    .default(0.0)\n                    .transform(value => _.clamp(value, -2, 2)),\n                top_p: z.coerce\n                    .number()\n                    .default(1)\n                    .transform(value => _.clamp(value, 0, 1)),\n                top_k: z.coerce\n                    .number()\n                    .default(0)\n                    .transform(value => _.clamp(value, 0, 500)),\n                token: z.coerce\n                    .number()\n                    .default(4096)\n                    .transform(value => Math.max(0, value)),\n            })\n            .prefault({}),\n        : z\n            .object({\n                : z.boolean().default(true),\n                : z.number().default(50),\n                : z.number().default(20),\n                : z.number().default(10),\n            })\n            .prefault({}),\n        : z\n            .object({\n                : z.boolean().default(false),\n                : z.boolean().default(false),\n            })\n            .prefault({}),\n        internal: z\n            .object({\n                : z.boolean().default(false),\n                : z.boolean().default(false),\n                API: z.boolean().default(false),\n                : z.boolean().default(false),\n                : z.boolean().default(false),\n                : z.boolean().default(false),\n                : z.boolean().default(false),\n            })\n            .prefault({}),\n    })\n    .transform(data => {\n        if (data.internal. === false) {\n            data.. = false;\n            data.internal. = true;\n        }\n        return data;\n    })\n    .prefault({});\n\nconst Settings = z.union([OldSettings, NewSettings]).catch(() => NewSettings.parse({}));\n\nconst Runtimes = z\n    .object({\n        unsupported_warnings: z.string().default(''),\n        is_during_extra_analysis: z.boolean().default(false),\n        is_function_call_enabled: z.boolean().default(false),\n        debug: z\n            .object({\n                : z.boolean().default(false),\n            })\n            .prefault({}),\n    })\n    .prefault({});\n\nexport const useDataStore = defineStore('MVU', () => {\n    const settings = ref(Settings.parse(_.get(SillyTavern.extensionSettings, 'mvu_settings', {})));\n    watch(\n        settings,\n        new_settings => {\n            _.set(SillyTavern.extensionSettings, 'mvu_settings', toRaw(new_settings));\n            if (!is_jest_environment) SillyTavern.saveSettingsDebounced();\n        },\n        { deep: true }\n    );\n\n    const runtimes = ref(Runtimes.parse({}));\n    watch(\n        () => runtimes.value.is_during_extra_analysis,\n        new_value => insertOrAssignVariables({ extra_analysis: new_value }, { type: 'global' }),\n        { immediate: true }\n    );\n    const resetRuntimes = () => {\n        runtimes.value = Runtimes.parse({});\n    };\n\n    const versions = ref<{ sillytavern: string; tavernhelper: string }>({\n        sillytavern: '',\n        tavernhelper: '',\n    });\n    const _wait_init = async () => {\n        versions.value.sillytavern = await fetch('/version')\n            .then(res => res.json())\n            .then(data => data.pkgVersion)\n            .catch(() => '1.0.0');\n        versions.value.tavernhelper = await getTavernHelperVersion();\n    };\n\n    return { settings, runtimes, versions, resetRuntimes, _wait_init };\n});\n","import { compare } from 'compare-versions';\nimport JSON5 from 'json5';\nimport { jsonrepair } from 'jsonrepair';\n\n//  _.merge , [1, 2, 3]  [4, 5]  [4, 5]  [4, 5, 3]\nexport function correctlyMerge<TObject, TSource>(lhs: TObject, rhs: TSource): TObject & TSource {\n    return _.mergeWith(lhs, rhs, (_lhs, rhs) => (_.isArray(rhs) ? rhs : undefined));\n}\n\nexport function uuidv4(): string {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        const r = (Math.random() * 16) | 0;\n        const v = c === 'x' ? r : (r & 0x3) | 0x8;\n        return v.toString(16);\n    });\n}\n\nexport async function checkMinimumVersion(expected: string, title: string) {\n    if (compare(await getTavernHelperVersion(), expected, '<')) {\n        toastr.error(`'${title}'  >= '${expected}'`, '');\n    }\n}\nexport function literalYamlify(value: any) {\n    return YAML.stringify(value, { blockQuote: 'literal' });\n}\n\nexport function parseString(content: string): any {\n    const json_first = /^[[{]/s.test(content.trimStart());\n    try {\n        if (json_first) {\n            throw Error(`expected error`);\n        }\n        return YAML.parseDocument(content, { merge: true }).toJS();\n    } catch (yaml_error1) {\n        try {\n            // eslint-disable-next-line import-x/no-named-as-default-member\n            return JSON5.parse(content);\n        } catch (json5_error) {\n            try {\n                return JSON.parse(jsonrepair(content));\n            } catch (json_error) {\n                try {\n                    if (!json_first) {\n                        throw Error(`expected error`);\n                    }\n                    return YAML.parseDocument(content, { merge: true }).toJS();\n                } catch (yaml_error2) {\n                    const toError = (error: unknown) =>\n                        error instanceof Error\n                            ? `${error.stack ? error.stack : error.message}`\n                            : String(error);\n\n                    throw new Error(\n                        literalYamlify({\n                            [' YAML/JSON/JSON5 ']: {\n                                : content,\n                                YAML: toError(json_first ? yaml_error2 : yaml_error1),\n                                JSON5: toError(json5_error),\n                                JSON: toError(json_error),\n                            },\n                        })\n                    );\n                }\n            }\n        }\n    }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = __WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_mathjs_esm_aec644b1__;","import {\n    cleanUpMetadata,\n    generateSchema,\n    getSchemaForPath,\n    reconcileAndApplySchema,\n} from '@/function/schema';\nimport { useDataStore } from '@/store';\nimport { getLastValidVariable, isJsonPatch } from '@/util';\nimport {\n    assertVWD,\n    isArraySchema,\n    isObjectSchema,\n    isValueWithDescriptionStatData,\n    MvuData,\n    TemplateType,\n    UpdateContext,\n    variable_events,\n} from '@/variable_def';\nimport { parseString } from '@util/common';\nimport { klona } from 'klona';\nimport * as math from 'mathjs';\n\nexport function trimQuotesAndBackslashes(str: string): string {\n    if (!_.isString(str)) return str;\n    // Regular expression to match backslashes and quotes (including backticks) at the beginning and end\n    return str.replace(/^[\\\\\"'` ]*(.*?)[\\\\\"'` ]*$/, '$1');\n}\n\n/**\n * \n * @param value \n * @param template  (TemplateType | undefined)\n * @param strict_array_cast  primitive type -> [primitive type] \n * @param array_merge_concat      \n * @returns \n */\nexport function applyTemplate(\n    value: any,\n    template: TemplateType | undefined,\n    strict_array_cast: boolean = false,\n    array_merge_concat: boolean = true\n): any {\n    // \n    if (!template) {\n        return value;\n    }\n\n    // \n    const value_is_object = _.isObject(value) && !Array.isArray(value) && !_.isDate(value);\n    const value_is_array = Array.isArray(value);\n    const template_is_array = Array.isArray(template);\n\n    if (value_is_object && !template_is_array) {\n        // value template  StatData\n        // \n        return _.merge({}, template, value);\n    } else if (value_is_array && template_is_array) {\n        // \n        if (array_merge_concat) return _.concat(value, template);\n        return _.merge([], template, value);\n    } else if (\n        ((value_is_object || value_is_array) && template_is_array !== value_is_array) ||\n        (!value_is_object && !value_is_array && _.isObject(template) && !Array.isArray(template))\n    ) {\n        // \n        console.error(\n            `Template type mismatch: template is ${template_is_array ? 'array' : 'object'}, but value is ${value_is_array ? 'array' : 'object'}. Skipping template merge.`\n        );\n        return value;\n    } else if (!value_is_object && !value_is_array && template_is_array) {\n        // \n        //  [value] \n        if (strict_array_cast)\n            // primitive type -> [primitive type] \n            return value;\n        if (array_merge_concat) return _.concat([value], template);\n        return _.merge([], template, [value]);\n    } else {\n        // \n        return value;\n    }\n}\n\n// \n//  JSON, , null, , \nexport function parseCommandValue(valStr: string): any {\n    if (typeof valStr !== 'string') return valStr;\n    const trimmed = valStr.trim();\n\n    // /null/undefined\n    if (trimmed === 'true') return true;\n    if (trimmed === 'false') return false;\n    if (trimmed === 'null') return null;\n    if (trimmed === 'undefined') return undefined;\n\n    try {\n        //  JSON.parse \n        return JSON.parse(trimmed);\n    } catch (e) {\n        // Handle JavaScript array or object literals\n        if (\n            (trimmed.startsWith('{') && trimmed.endsWith('}')) ||\n            (trimmed.startsWith('[') && trimmed.endsWith(']'))\n        ) {\n            try {\n                // Safely evaluate literals using a function constructor\n                const result = new Function(`return ${trimmed};`)();\n                if (_.isObject(result) || Array.isArray(result)) {\n                    return result;\n                }\n            } catch (err) {\n                // \n            }\n        }\n    }\n\n    //  trimmed \n    // 'hello_world', '10 + 2', 'sqrt(16)'\n\n    try {\n        //  scope / mathjs \n        // \n        const scope = {\n            //  JavaScript  Math  (e.g., Math.sqrt(), Math.PI)\n            Math: Math,\n            //  Python  math  (e.g., math.sqrt(), math.pi)\n            //  LLM \n            // 'math'  mathjs \n            math: math,\n        };\n        //  mathjs \n        // math.evaluate \n        const result = math.evaluate(trimmed, scope);\n        //  mathjs \n        if (math.isComplex(result) || math.isMatrix(result)) {\n            return result.toString();\n        }\n        // mathjs undefined \n        if (result === undefined && !/^[a-zA-Z_]+$/.test(trimmed)) {\n            return trimmed; //  undefined \n        }\n        if (result !== undefined) {\n            //  toPrecision \n            return parseFloat(result.toPrecision(12));\n        }\n    } catch (err) {\n        //  math.evaluate \n        // \n    }\n\n    // \n    // _.add `_.add('', 10 * 60 * 1000);`\n    //  \"2024-01-01T12:00:00Z\"\n    // `isNaN(Number(trimmed))` \"12345\"\n    /*\n    if (isNaN(Number(trimmed))) {\n        const potentialDate = new Date(trimQuotesAndBackslashes(trimmed));\n        if (!isNaN(potentialDate.getTime())) {\n            return potentialDate;\n        }\n    }\n    */\n\n    try {\n        //  YAML.parse\n        return YAML.parse(trimmed);\n    } catch (e) {\n        /* empty */\n    }\n\n    // \n    return trimQuotesAndBackslashes(valStr);\n}\n\n/**\n * Type definition for CommandNames representing a set of valid command strings.\n *\n * This type is used to define a finite and specific set of command string values\n * that may be used in operations or functions requiring predefined command names.\n *\n * The allowed command names are:\n * - 'set': Represents a command to set a value.\n * - 'insert': Alias of 'assign'\n * - 'assign': Represents a command to assign a value or reference.\n * - 'remove': Represents a command to remove an item or data.\n * - 'add': Represents a command to add an item or data.\n */\ntype CommandNames = 'set' | 'insert' | 'assign' | 'remove' | 'unset' | 'delete' | 'add' | 'move';\n\n/**\n *  .set(${path}, ${new_value});//${reason} \n * \n */\n// \n// Command  SetCommand \ninterface Command {\n    type: CommandNames;\n    full_match: string;\n    args: string[];\n    reason: string;\n}\n\nfunction extractJsonPatch(patch: any): Command[] {\n    const translated_commands: Command[] = [];\n\n    for (const op of patch) {\n        const path = (op.path ?? op.to).substring(1).replace(/\\//g, '.');\n        switch (op.op) {\n            case 'replace':\n                translated_commands.push({\n                    type: 'set',\n                    full_match: JSON.stringify(op),\n                    args: [path, JSON.stringify((op as any).value)],\n                    reason: 'json_patch',\n                });\n                break;\n            case 'delta': {\n                translated_commands.push({\n                    type: 'add',\n                    full_match: JSON.stringify(op),\n                    args: [path, JSON.stringify((op as any).value)],\n                    reason: 'json_patch',\n                });\n                break;\n            }\n            case 'insert':\n            case 'add': {\n                const pathParts = _.toPath(path);\n                const lastPart = pathParts[pathParts.length - 1];\n                const containerPath = pathParts.slice(0, -1).join('.');\n                const keyOrIndexArg = /^\\d+$/.test(lastPart) ? lastPart : `'${lastPart}'`;\n                translated_commands.push({\n                    type: 'insert',\n                    full_match: JSON.stringify(op),\n                    args: [containerPath, keyOrIndexArg, JSON.stringify((op as any).value)],\n                    reason: 'json_patch',\n                });\n                break;\n            }\n            case 'remove':\n                translated_commands.push({\n                    type: 'delete',\n                    full_match: JSON.stringify(op),\n                    args: [path],\n                    reason: 'json_patch',\n                });\n                break;\n            case 'move':\n                translated_commands.push({\n                    type: 'move',\n                    full_match: JSON.stringify(op),\n                    args: [(op as any).from.substring(1).replace(/\\//g, '.'), path],\n                    reason: 'json_patch',\n                });\n                break;\n        }\n    }\n    return translated_commands;\n}\n\n/**\n *  _.set() \n *\n * \n *  /_\\.set\\(([\\s\\S]*?)\\);/ \n *  ); \n * _.set('path', [\"text with _.set('inner',null);//comment\"], []);\n *  \"comment\") \n *\n * \n *  _.set() \n */\n//  extractSetCommands  extractCommands \nexport function extractCommands(inputText: string): Command[] {\n    // TODO:  json_patch \n    const results: (Command & { $index: number })[] = _.concat(\n        [\n            ...inputText.matchAll(\n                /<(json_?patch)>(?:\\s*```.*)?((?:(?!<json_?patch>)[\\s\\S])*?)(?:```\\s*)?<\\/\\1>/gim\n            ),\n        ]\n            .map(match => ({\n                index: match.index ?? 0,\n                string: match[2].trim(),\n            }))\n            .flatMap(({ index, string }): (Command & { $index: number })[] => {\n                try {\n                    const patch = parseString(string);\n                    {\n                        if (isJsonPatch(patch)) {\n                            return extractJsonPatch(patch).map(command => ({\n                                $index: index,\n                                ...command,\n                            }));\n                        }\n                    }\n                } catch {\n                    /* ignore */\n                }\n                return [];\n            })\n    );\n\n    let i = 0;\n    while (i < inputText.length) {\n        // \n        //  _.set(_.assign(_.remove(  _.add(\n        const setMatch = inputText\n            .substring(i)\n            .match(/_\\.(set|insert|assign|remove|unset|delete|add)\\(/);\n        if (!setMatch || setMatch.index === undefined) {\n            // \n            break;\n        }\n\n        // setassignremove  add\n        const commandType = setMatch[1] as CommandNames;\n        const setStart = i + setMatch.index;\n        // \n        const openParen = setStart + setMatch[0].length;\n\n        //  findMatchingCloseParen  _.set('path', ['inner);'])\n        const closeParen = findMatchingCloseParen(inputText, openParen);\n        if (closeParen === -1) {\n            // \n            // \n            i = openParen; // \n            continue; //  while \n        }\n\n        // \n        let endPos = closeParen + 1;\n        if (endPos >= inputText.length || inputText[endPos] !== ';') {\n            // \n            i = closeParen + 1;\n            continue;\n        }\n        endPos++; // \n\n        // //  reason\n        let comment = '';\n        const potentialComment = inputText.substring(endPos).match(/^\\s*\\/\\/(.*)/);\n        if (potentialComment) {\n            // \n            comment = potentialComment[1].trim();\n            endPos += potentialComment[0].length;\n        }\n\n        //  fullMatch \n        const fullMatch = inputText.substring(setStart, endPos);\n        // \n        const paramsString = inputText.substring(openParen, closeParen);\n        //  parseParameters \n        const params = parseParameters(paramsString);\n\n        // \n        let isValid = false;\n        if (commandType === 'set' && params.length >= 2)\n            isValid = true; // _.set \n        else if (commandType === 'assign' && params.length >= 2)\n            isValid = true; // _.assign \n        else if (commandType === 'insert' && params.length >= 2)\n            isValid = true; // _.insert \n        else if (commandType === 'remove' && params.length >= 1)\n            isValid = true; // _.remove \n        else if (commandType === 'unset' && params.length >= 1)\n            isValid = true; // _.unset \n        else if (commandType === 'delete' && params.length >= 1)\n            isValid = true; // _.delete \n        else if (commandType === 'add' && /*params.length === 1 || */ params.length === 2)\n            isValid = true; // _.add 12\n\n        if (isValid) {\n            // \n            results.push({\n                $index: setStart,\n                type: commandType,\n                full_match: fullMatch,\n                args: params,\n                reason: comment,\n            });\n        }\n\n        // \n        i = endPos;\n    }\n\n    // \n    return _(results)\n        .sortBy('$index')\n        .map(command => _.omit(command, '$index'))\n        .value();\n}\n\n/**\n * \n *\n * \n * 1.  ( 1 ) 1\n * 2. \n * 3. \n *\n * @param str \n * @param startPos \n * @returns  -1\n */\nfunction findMatchingCloseParen(str: string, startPos: number): number {\n    let parenCount = 1; // 1\n    let inQuote = false;\n    let quoteChar = '';\n\n    for (let i = startPos; i < str.length; i++) {\n        const char = str[i];\n        const prevChar = i > 0 ? str[i - 1] : '';\n\n        // \n        // \n        // \n        if ((char === '\"' || char === \"'\" || char === '`') && prevChar !== '\\\\') {\n            if (!inQuote) {\n                inQuote = true;\n                quoteChar = char;\n            } else if (char === quoteChar) {\n                inQuote = false;\n            }\n        }\n\n        // \n        //  \"text with )\" \n        if (!inQuote) {\n            if (char === '(') {\n                parenCount++;\n            } else if (char === ')') {\n                parenCount--;\n                if (parenCount === 0) {\n                    return i;\n                }\n            }\n        }\n    }\n\n    return -1; // \n}\n\n// \n// \nexport function parseParameters(paramsString: string): string[] {\n    const params: string[] = [];\n    let currentParam = '';\n    let inQuote = false;\n    let quoteChar = '';\n    let bracketCount = 0;\n    let braceCount = 0;\n    let parenCount = 0;\n\n    for (let i = 0; i < paramsString.length; i++) {\n        const char = paramsString[i];\n\n        // \n        if (\n            (char === '\"' || char === \"'\" || char === '`') &&\n            (i === 0 || paramsString[i - 1] !== '\\\\')\n        ) {\n            if (!inQuote) {\n                inQuote = true;\n                quoteChar = char;\n            } else if (char === quoteChar) {\n                inQuote = false;\n            }\n        }\n\n        if (!inQuote) {\n            //  ()\n            if (char === '(') parenCount++;\n            if (char === ')') parenCount--;\n\n            //  ()\n            if (char === '[') bracketCount++;\n            if (char === ']') bracketCount--;\n\n            //  ()\n            if (char === '{') braceCount++;\n            if (char === '}') braceCount--;\n        }\n        // \n        // \n        if (\n            char === ',' &&\n            !inQuote &&\n            parenCount === 0 &&\n            bracketCount === 0 &&\n            braceCount === 0\n        ) {\n            params.push(currentParam.trim());\n            currentParam = '';\n            continue;\n        }\n\n        currentParam += char;\n    }\n\n    // \n    if (currentParam.trim()) {\n        params.push(currentParam.trim());\n    }\n\n    return params;\n}\n\nexport function pathFix(path: string): string {\n    if (!path) return path;\n\n    // 1.  []  /  key\n    const fixedBrackets = path.replace(/\\[([^\\]]*)\\]/g, (_match, rawInner: string) => {\n        let inner = rawInner.trim();\n        if (!inner) {\n            return '[]';\n        }\n\n        let wasQuoted = false;\n        const first = inner[0];\n        const last = inner[inner.length - 1];\n\n        if (inner.length >= 2 && (first === '\"' || first === \"'\") && first === last) {\n            wasQuoted = true;\n            inner = inner.slice(1, -1);\n        }\n\n        const isPureDigits = /^\\d+$/.test(inner);\n        const hasWhitespace = /\\s/.test(inner);\n\n        // \n        if (isPureDigits) {\n            if (!wasQuoted) {\n                //   \n                return `[${inner}]`;\n            } else {\n                //    key\n                const escaped = inner.replace(/\"/g, '\\\\\"');\n                return `[\"${escaped}\"]`;\n            }\n        }\n\n        //    key\n        if (hasWhitespace) {\n            const escaped = inner.replace(/\"/g, '\\\\\"');\n            return `[\"${escaped}\"]`;\n        } else {\n            return `[${inner}]`;\n        }\n    });\n\n    // 2. \n    //\n    // \n    //   -  / . / []   [\"\"]  []\n    //   -    bracket\n    //       foo.\"a b\".c     foo[\"a b\"].c\n    //       root.' '.  root[\" \"].\n    //       foo[.].c      foo[\".\"].c\n    const fixedDots = fixedBrackets.replace(\n        /(^|\\.)([\"'])([^\"']*)\\2(?=\\.|\\[|$)/g,\n        (_match, prefix: string, _quote: string, name: string) => {\n            const hasWhitespace = /\\s/.test(name);\n            const hasSpecial = /[.[\\]]/.test(name);\n\n            if (!hasWhitespace && !hasSpecial) {\n                // \n                //  foo.\"\"  foo.\n                return prefix + name;\n            } else {\n                //  bracket \n                const escaped = name.replace(/\"/g, '\\\\\"');\n                if (prefix === '.') {\n                    // foo.\"a b\"  foo[\"a b\"]\n                    return `[\"${escaped}\"]`;\n                } else {\n                    // \" \".  [\" \"].\n                    return `${prefix}[\"${escaped}\"]`;\n                }\n            }\n        }\n    );\n\n    return fixedDots;\n}\n\n/**\n * MVU  display_data/delta_data\n * @deprecated MVU zod  display_data/delta_data\n */\nexport async function updateVariable(\n    stat_data: Record<string, any>,\n    path: string,\n    new_value: any,\n    reason: string = '',\n    is_recursive: boolean = false\n): Promise<boolean> {\n    const display_data = stat_data.$internal?.display_data;\n    const delta_data = stat_data.$internal?.delta_data;\n    if (_.has(stat_data, path)) {\n        const currentValue = _.get(stat_data, path);\n        if (Array.isArray(currentValue) && currentValue.length === 2) {\n            //VWD \n            const oldValue = klona(currentValue[0]);\n            currentValue[0] = new_value;\n            _.set(stat_data, path, currentValue);\n            const reason_str = reason ? `(${reason})` : '';\n            const display_str = `${trimQuotesAndBackslashes(JSON.stringify(oldValue))}->${trimQuotesAndBackslashes(JSON.stringify(new_value))} ${reason_str}`;\n            if (display_data) _.set(display_data, path, display_str);\n            if (delta_data) _.set(delta_data, path, display_str);\n            console.info(\n                `Set '${path}' to '${trimQuotesAndBackslashes(JSON.stringify(new_value))}' ${reason_str}`\n            );\n            if (is_recursive)\n                await eventEmit(\n                    variable_events.SINGLE_VARIABLE_UPDATED,\n                    stat_data,\n                    path,\n                    oldValue,\n                    new_value\n                );\n            return true;\n        } else {\n            const oldValue = klona(currentValue);\n            _.set(stat_data, path, new_value);\n            const reason_str = reason ? `(${reason})` : '';\n            const stringNewValue = trimQuotesAndBackslashes(JSON.stringify(new_value));\n            const display_str = `${trimQuotesAndBackslashes(JSON.stringify(oldValue))}->${stringNewValue} ${reason_str}`;\n            if (display_data) _.set(display_data, path, display_str);\n            if (delta_data) _.set(delta_data, path, display_str);\n            console.info(`Set '${path}' to '${stringNewValue}' ${reason_str}`);\n            if (is_recursive)\n                await eventEmit(\n                    variable_events.SINGLE_VARIABLE_UPDATED,\n                    stat_data,\n                    path,\n                    oldValue,\n                    new_value\n                );\n            return true;\n        }\n    }\n    return false;\n}\n\nfunction pathFixPass(_unused_data: MvuData, commands: Command[], _unused_content: string): void {\n    for (const command of commands) {\n        command.args[0] = pathFix(trimQuotesAndBackslashes(command.args[0]));\n    }\n}\n\nfunction isNullOrWhiteSpace(str: string): boolean {\n    return str == null || str.trim().length === 0;\n}\n\nexport async function updateVariables(\n    current_message_content: string,\n    variables: MvuData\n): Promise<boolean> {\n    //  variable_ended\n    const variables_before_update: MvuData = klona(variables);\n    // \n    const out_status: MvuData = klona(variables);\n    // \n    const delta_status: Partial<MvuData> = { stat_data: {} };\n\n    //  ${variable}\n    const processed_message_content = substitudeMacros(current_message_content);\n\n    //  extractCommands \n    const commands = extractCommands(processed_message_content);\n\n    // \n    _.set(variables.stat_data, '$internal', {\n        display_data: out_status.stat_data,\n        delta_data: delta_status.stat_data || {},\n    });\n    await eventEmit(variable_events.VARIABLE_UPDATE_STARTED, variables);\n\n    let error_info: { title: string; content: string } | undefined;\n    let current_command: Command | undefined;\n    const outError = function (content: string) {\n        const title = `, Roll: ${current_command?.full_match}`;\n        console.warn(`${title}\\n${content}`);\n        error_info = {\n            title: `[MVU]${title}`,\n            content,\n        };\n    };\n\n    const schema = variables.schema; //  schema undefined\n    const strict_template = schema?.strictTemplate ?? false;\n    const concat_template_array = schema?.concatTemplateArray ?? true;\n    const strict_set = schema?.strictSet ?? false;\n\n    //\n    for (const cmd of commands) {\n        if (cmd.type === 'remove') {\n            cmd.type = 'delete';\n        } else if (cmd.type === 'assign') {\n            cmd.type = 'insert';\n        } else if (cmd.type === 'unset') {\n            cmd.type = 'delete';\n        }\n    }\n\n    //@ts-expect-error old fn\n    await eventEmit(variable_events.COMMAND_PARSED, variables, commands, current_message_content);\n    // MVU zod  COMMAND_PARSED \n    await eventEmit(\n        variable_events.COMMAND_PARSED + '_for_zod',\n        variables,\n        commands,\n        current_message_content\n    );\n    // MVU zod  COMMAND_PARSED  commands\n    await eventEmit(\n        variable_events.COMMAND_PARSED + '_ended_for_zod',\n        variables,\n        commands,\n        current_message_content\n    );\n\n    pathFixPass(variables, commands, current_message_content);\n\n    for (const command of commands) {\n        // \n        // \n        const path = command.args[0];\n        // \n        const reason_str = command.reason ? `(${command.reason})` : '';\n        let display_str = ''; // \n        current_command = command;\n\n        switch (\n            command.type // \n        ) {\n            case 'set': {\n                // _.has \n                if (path !== '' && !_.has(variables.stat_data, path)) {\n                    outError(\n                        `Path '${path}' does not exist in stat_data, skipping set command ${reason_str}`\n                    );\n                    continue;\n                }\n\n                //  undefined\n                let oldValue =\n                    path === '' ? klona(variables.stat_data) : _.get(variables.stat_data, path);\n\n                // _.set(path, newValue)  _.set(path, oldValue, newValue)\n                //   JSON \n                let newValue = parseCommandValue(command.args.at(-1)!);\n\n                //  Date  ISO \n                if (newValue instanceof Date) {\n                    newValue = newValue.toISOString();\n                }\n                let isPathVWD = false;\n\n                if (\n                    !strict_set &&\n                    Array.isArray(oldValue) &&\n                    oldValue.length === 2 &&\n                    typeof oldValue[1] === 'string' &&\n                    !Array.isArray(oldValue[0])\n                ) {\n                    //  ValueWithDescription<T> \n                    //  null \n                    //  null ( null)\n                    const oldValueCopy = klona(oldValue[0]);\n                    oldValue[0] =\n                        typeof oldValue[0] === 'number' && newValue !== null\n                            ? Number(newValue)\n                            : newValue;\n                    oldValue = oldValueCopy;\n                    isPathVWD = true;\n                } else if (\n                    typeof oldValue === 'number' &&\n                    newValue !== null &&\n                    typeof newValue === 'string'\n                ) {\n                    _.set(variables.stat_data, path, Number(newValue));\n                } else if (path) {\n                    _.set(variables.stat_data, path, newValue);\n                } else {\n                    variables.stat_data = newValue;\n                }\n\n                // \n                let finalNewValue =\n                    path === '' ? variables.stat_data : _.get(variables.stat_data, path);\n\n                assertVWD(isPathVWD, finalNewValue);\n\n                if (isPathVWD) {\n                    finalNewValue = finalNewValue[0];\n                }\n\n                //  ValueWithDescription \n                const isStrict = !strict_set;\n\n                if (\n                    isStrict &&\n                    isValueWithDescriptionStatData(oldValue) &&\n                    Array.isArray(finalNewValue)\n                ) {\n                    //  ValueWithDescription\n                    display_str = `${trimQuotesAndBackslashes(JSON.stringify(oldValue[0]))}->${trimQuotesAndBackslashes(JSON.stringify(finalNewValue[0]))} ${reason_str}`;\n                } else {\n                    // \n                    display_str = `${trimQuotesAndBackslashes(JSON.stringify(oldValue))}->${trimQuotesAndBackslashes(JSON.stringify(finalNewValue))} ${reason_str}`;\n                }\n\n                // \n                console.info(`Set '${path}' to '${JSON.stringify(finalNewValue)}' ${reason_str}`);\n\n                // \n                await eventEmit(\n                    variable_events.SINGLE_VARIABLE_UPDATED,\n                    variables.stat_data,\n                    path,\n                    oldValue,\n                    finalNewValue\n                );\n                break;\n            }\n\n            case 'insert':\n            case 'assign': {\n                // \n                // \n                const targetPath = path;\n                // Schema\n                const existingValue =\n                    targetPath === ''\n                        ? variables.stat_data\n                        : _.get(variables.stat_data, targetPath);\n                const targetSchema = getSchemaForPath(schema, targetPath);\n\n                // 1\n                if (\n                    existingValue !== null &&\n                    !Array.isArray(existingValue) &&\n                    !_.isObject(existingValue)\n                ) {\n                    outError(\n                        `Cannot assign into path '${targetPath}' because it holds a primitive value (${typeof existingValue}). Operation skipped. ${reason_str}`\n                    );\n                    continue;\n                }\n\n                // 2Schema \n                if (targetSchema) {\n                    if (targetSchema.type === 'object' && targetSchema.extensible === false) {\n                        if (command.args.length === 2) {\n                            // \n                            outError(\n                                `SCHEMA VIOLATION: Cannot merge data into non-extensible object at path '${targetPath}'. ${reason_str}`\n                            );\n                            continue;\n                        }\n                        if (command.args.length >= 3) {\n                            // \n                            const newKey = String(parseCommandValue(command.args[1]));\n                            if (!_.has(targetSchema.properties, newKey)) {\n                                outError(\n                                    `SCHEMA VIOLATION: Cannot assign new key '${newKey}' into non-extensible object at path '${targetPath}'. ${reason_str}`\n                                );\n                                continue;\n                            }\n                        }\n                    } else if (\n                        targetSchema.type === 'array' &&\n                        (targetSchema.extensible === false || targetSchema.extensible === undefined)\n                    ) {\n                        outError(\n                            `SCHEMA VIOLATION: Cannot assign elements into non-extensible array at path '${targetPath}'. ${reason_str}`\n                        );\n                        continue;\n                    }\n                } else if (\n                    //  targetPath !== '' \n                    targetPath !== '' &&\n                    !_.get(variables.stat_data, _.toPath(targetPath).slice(0, -1).join('.'))\n                ) {\n                    // 3\n                    outError(\n                        `Cannot assign into non-existent path '${targetPath}' without an extensible parent. ${reason_str}`\n                    );\n                    continue;\n                }\n                // ---  ---\n\n                // \n                const oldValue = klona(existingValue);\n                let successful = false; // \n\n                if (command.args.length === 2) {\n                    // _.assign('path.to.array', value)\n                    // \n                    let valueToAssign = parseCommandValue(command.args[1]);\n\n                    //  Date Date\n                    if (valueToAssign instanceof Date) {\n                        valueToAssign = valueToAssign.toISOString();\n                    } else if (Array.isArray(valueToAssign)) {\n                        valueToAssign = valueToAssign.map(item =>\n                            item instanceof Date ? item.toISOString() : item\n                        );\n                    }\n\n                    // \n                    let collection =\n                        targetPath === '' ? variables.stat_data : _.get(variables.stat_data, path);\n\n                    // \n                    if (!Array.isArray(collection) && !_.isObject(collection)) {\n                        collection = Array.isArray(valueToAssign) ? [] : {};\n                        _.set(variables.stat_data, path, collection);\n                    }\n\n                    if (Array.isArray(collection)) {\n                        // \n                        // \n                        const template =\n                            targetSchema && isArraySchema(targetSchema)\n                                ? targetSchema.template\n                                : undefined;\n                        valueToAssign = applyTemplate(\n                            valueToAssign,\n                            template,\n                            strict_template,\n                            concat_template_array\n                        );\n                        collection.push(valueToAssign);\n                        display_str = `ASSIGNED ${JSON.stringify(valueToAssign)} into array '${path}' ${reason_str}`;\n                        successful = true;\n                    } else if (_.isObject(collection)) {\n                        // \n                        // \n                        //  assign\n                        if (_.isObject(valueToAssign) && !Array.isArray(valueToAssign)) {\n                            _.merge(collection, valueToAssign);\n                            display_str = `MERGED object ${JSON.stringify(valueToAssign)} into object '${path}' ${reason_str}`;\n                            successful = true;\n                        } else {\n                            // \n                            outError(\n                                `Cannot merge ${Array.isArray(valueToAssign) ? 'array' : 'non-object'} into object at '${path}'`\n                            );\n                            continue;\n                        }\n                    }\n                } else if (command.args.length >= 3) {\n                    // _.assign('path', key/index, value)\n                    // /\n                    let valueToAssign = parseCommandValue(command.args[2]);\n                    const keyOrIndex = parseCommandValue(command.args[1]);\n\n                    //  Date Date\n                    if (valueToAssign instanceof Date) {\n                        valueToAssign = valueToAssign.toISOString();\n                    } else if (Array.isArray(valueToAssign)) {\n                        valueToAssign = valueToAssign.map(item =>\n                            item instanceof Date ? item.toISOString() : item\n                        );\n                    }\n\n                    let collection =\n                        targetPath === '' ? variables.stat_data : _.get(variables.stat_data, path);\n\n                    // \n                    const template =\n                        targetSchema &&\n                        (isArraySchema(targetSchema) || isObjectSchema(targetSchema))\n                            ? targetSchema.template\n                            : undefined;\n\n                    if (Array.isArray(collection) && typeof keyOrIndex === 'number') {\n                        // \n                        valueToAssign = applyTemplate(\n                            valueToAssign,\n                            template,\n                            strict_template,\n                            concat_template_array\n                        );\n                        collection.splice(keyOrIndex, 0, valueToAssign);\n                        display_str = `ASSIGNED ${JSON.stringify(valueToAssign)} into '${path}' at index ${keyOrIndex} ${reason_str}`;\n                        successful = true;\n                    } else if (_.isObject(collection)) {\n                        // \n                        // _.set(collection, String(keyOrIndex), valueToAssign);\n                        // \n                        valueToAssign = applyTemplate(\n                            valueToAssign,\n                            template,\n                            strict_template,\n                            concat_template_array\n                        );\n                        (collection as Record<string, unknown>)[String(keyOrIndex)] = valueToAssign;\n                        display_str = `ASSIGNED key '${keyOrIndex}' with value ${JSON.stringify(valueToAssign)} into object '${path}' ${reason_str}`;\n                        successful = true;\n                    } else {\n                        // \n                        collection = {};\n                        _.set(variables.stat_data, path, collection);\n                        /*\n                        _.set(\n                            collection as Record<string, unknown>,\n                            String(keyOrIndex),\n                            valueToAssign\n                        );\n                        */\n                        // \n                        valueToAssign = applyTemplate(\n                            valueToAssign,\n                            template,\n                            strict_template,\n                            concat_template_array\n                        );\n                        (collection as Record<string, unknown>)[String(keyOrIndex)] = valueToAssign;\n                        display_str = `CREATED object at '${path}' and ASSIGNED key '${keyOrIndex}' ${reason_str}`;\n                        successful = true;\n                    }\n                }\n\n                if (successful) {\n                    // \n                    const newValue = isNullOrWhiteSpace(path)\n                        ? variables.stat_data\n                        : _.get(variables.stat_data, path);\n                    console.info(display_str);\n                    await eventEmit(\n                        variable_events.SINGLE_VARIABLE_UPDATED,\n                        variables.stat_data,\n                        path,\n                        oldValue,\n                        newValue\n                    );\n                    try {\n                        // template \n                        const currentDataClone = klona(newValue);\n\n                        const newSchema = generateSchema(currentDataClone, targetSchema!);\n                        _.merge(targetSchema, newSchema);\n                        cleanUpMetadata(newValue);\n                    } catch (error) {\n                        // \n                        if (error instanceof Error) {\n                            outError(\n                                `Failed to resolve template meta at '${path}', '${error.message}'`\n                            );\n                        } else {\n                            outError(`Failed to resolve template meta at '${path}', '${error}'`);\n                        }\n                    }\n                } else {\n                    // \n                    outError(`Invalid arguments for _.assign on path '${path}'`);\n                    continue;\n                }\n                break;\n            }\n\n            case 'unset':\n            case 'delete':\n            case 'remove': {\n                // --- handle array element removal correctly ---\n                const pathParts = _.toPath(path);\n                const lastPart = pathParts[pathParts.length - 1];\n                const isArrayElementPath = /^\\d+$/.test(lastPart);\n\n                if (command.args.length === 1 && isArrayElementPath) {\n                    const containerPath = pathParts.slice(0, -1).join('.');\n                    // isArray \n                    const container = _.get(variables.stat_data, containerPath);\n                    const indexToRemove = parseInt(lastPart, 10);\n\n                    if (Array.isArray(container) && indexToRemove < container.length) {\n                        const originalArray = klona(container);\n                        container.splice(indexToRemove, 1);\n                        display_str = `REMOVED item from '${containerPath}' at index ${indexToRemove} ${reason_str}`;\n                        console.info(display_str);\n                        await eventEmit(\n                            variable_events.SINGLE_VARIABLE_UPDATED,\n                            variables.stat_data,\n                            containerPath,\n                            originalArray,\n                            container\n                        );\n                        continue; // Skip to next command\n                    }\n                }\n\n                // \n                //  _.remove('', 'val');\n                if (!_.has(variables.stat_data, path)) {\n                    outError(`undefined Path: ${path} in _.remove command`);\n                    continue;\n                }\n\n                // ---  ---\n                let containerPath = path;\n                let keyOrIndexToRemove: string | number | undefined;\n\n                if (command.args.length > 1) {\n                    // _.remove('path', key_or_index)\n                    keyOrIndexToRemove = parseCommandValue(command.args[1]);\n                    //  key \n                    if (typeof keyOrIndexToRemove === 'string') {\n                        keyOrIndexToRemove = trimQuotesAndBackslashes(keyOrIndexToRemove);\n                    }\n                } else {\n                    // _.remove('path.to.key[index]')\n                    const pathParts = _.toPath(path);\n                    const lastPart = pathParts.pop();\n                    if (lastPart) {\n                        keyOrIndexToRemove = /^\\d+$/.test(lastPart) ? Number(lastPart) : lastPart;\n                        containerPath = pathParts.join('.');\n                    }\n                }\n\n                if (keyOrIndexToRemove === undefined) {\n                    outError(\n                        `Could not determine target for deletion for command on path '${path}' ${reason_str}`\n                    );\n                    continue;\n                }\n                // \n                if (containerPath !== '' && !_.has(variables.stat_data, containerPath)) {\n                    outError(\n                        `Cannot remove from non-existent path '${containerPath}'. ${reason_str}`\n                    );\n                    continue;\n                }\n\n                const containerSchema = getSchemaForPath(schema, containerPath);\n\n                if (containerSchema) {\n                    if (containerSchema.type === 'array') {\n                        if (containerSchema.extensible !== true) {\n                            outError(\n                                `SCHEMA VIOLATION: Cannot remove element from non-extensible array at path '${containerPath}'. ${reason_str}`\n                            );\n                            continue;\n                        }\n                    } else if (containerSchema.type === 'object') {\n                        const keyString = String(keyOrIndexToRemove);\n                        if (\n                            _.has(containerSchema.properties, keyString) &&\n                            containerSchema.properties[keyString].required === true\n                        ) {\n                            outError(\n                                `SCHEMA VIOLATION: Cannot remove required key '${keyString}' from path '${containerPath}'. ${reason_str}`\n                            );\n                            continue;\n                        }\n                    }\n                }\n\n                // ---  ---\n\n                // \n                const targetToRemove =\n                    command.args.length > 1 ? parseCommandValue(command.args[1]) : undefined;\n                let itemRemoved = false; // \n\n                if (targetToRemove === undefined) {\n                    // _.remove('path.to.key')\n                    // \n                    const oldValue = _.get(variables.stat_data, path);\n                    _.unset(variables.stat_data, path);\n                    display_str = `REMOVED path '${path}' ${reason_str}`;\n                    itemRemoved = true;\n                    await eventEmit(\n                        variable_events.SINGLE_VARIABLE_UPDATED,\n                        variables.stat_data,\n                        path,\n                        oldValue,\n                        undefined\n                    );\n                } else {\n                    // _.remove('path.to.array', value_or_index)\n                    const collection = _.get(variables.stat_data, path);\n\n                    // \n                    // \n                    if (!Array.isArray(collection) && !_.isObject(collection)) {\n                        outError(\n                            `Cannot remove from path '${path}' because it is not an array or object. Skipping command. ${reason_str}`\n                        );\n                        continue;\n                    }\n\n                    if (Array.isArray(collection)) {\n                        // \n                        const originalArray = klona(collection);\n                        let indexToRemove = -1;\n                        if (typeof targetToRemove === 'number') {\n                            indexToRemove = targetToRemove;\n                        } else {\n                            indexToRemove = collection.findIndex(item =>\n                                _.isEqual(item, targetToRemove)\n                            );\n                        }\n\n                        if (indexToRemove >= 0 && indexToRemove < collection.length) {\n                            collection.splice(indexToRemove, 1);\n                            itemRemoved = true;\n                            display_str = `REMOVED item from '${path}' ${reason_str}`;\n                            await eventEmit(\n                                variable_events.SINGLE_VARIABLE_UPDATED,\n                                variables.stat_data,\n                                path,\n                                originalArray,\n                                collection\n                            );\n                        }\n                    } else if (_.isObject(collection)) {\n                        if (typeof targetToRemove === 'number') {\n                            // \n                            const keys = Object.keys(collection);\n                            const index = targetToRemove;\n                            if (index >= 0 && index < keys.length) {\n                                const keyToRemove = keys[index];\n                                _.unset(collection, keyToRemove);\n                                itemRemoved = true;\n                                display_str = `REMOVED ${index + 1}th entry ('${keyToRemove}') from object '${path}' ${reason_str}`;\n                            }\n                        } else {\n                            // \n                            const keyToRemove = String(targetToRemove);\n                            if (_.has(collection, keyToRemove)) {\n                                // _.unset(collection, keyToRemove);\n                                delete (collection as Record<string, unknown>)[keyToRemove];\n                                itemRemoved = true;\n                                display_str = `REMOVED key '${keyToRemove}' from object '${path}' ${reason_str}`;\n                            }\n                        }\n                    }\n                }\n\n                if (itemRemoved) {\n                    // \n                    console.info(display_str);\n                } else {\n                    // \n                    outError(`Failed to execute remove on '${path}'`);\n                    continue;\n                }\n                break;\n            }\n\n            case 'add': {\n                // \n                if (!_.has(variables.stat_data, path)) {\n                    outError(\n                        `Path '${path}' does not exist in stat_data, skipping add command ${reason_str}`\n                    );\n                    continue;\n                }\n                // \n                const initialValue = klona(_.get(variables.stat_data, path));\n                const oldValue = _.get(variables.stat_data, path);\n                let valueToAdd = oldValue;\n                const isVWD =\n                    isValueWithDescriptionStatData(oldValue) && typeof oldValue[0] !== 'object';\n\n                if (isVWD) {\n                    assertVWD(isVWD, oldValue);\n                    valueToAdd = oldValue[0]; //  ValueWithDescription \n                }\n                // console.warn(valueToAdd);\n\n                //  Date  Date \n                let potentialDate: Date | null = null;\n                if (valueToAdd instanceof Date) {\n                    potentialDate = valueToAdd;\n                } else if (typeof valueToAdd === 'string') {\n                    const parsedDate = new Date(valueToAdd);\n                    //  `new Date` \n                    if (!isNaN(parsedDate.getTime()) && isNaN(Number(valueToAdd))) {\n                        potentialDate = parsedDate;\n                    }\n                }\n\n                if (command.args.length === 2) {\n                    // \n                    const delta = parseCommandValue(command.args[1]);\n\n                    //  Date \n                    if (potentialDate) {\n                        if (typeof delta !== 'number') {\n                            outError(\n                                `Delta '${command.args[1]}' for Date operation is not a number, skipping add command ${reason_str}`\n                            );\n                            continue;\n                        }\n                        // delta \n                        const newDate = new Date(potentialDate.getTime() + delta);\n                        //  Date  ISO \n                        const finalValueToSet = newDate.toISOString();\n\n                        if (isVWD) {\n                            assertVWD(isVWD, oldValue);\n                            oldValue[0] = finalValueToSet;\n                            _.set(variables.stat_data, path, oldValue);\n                        } else {\n                            _.set(variables.stat_data, path, finalValueToSet);\n                        }\n\n                        const finalNewValue = _.get(variables.stat_data, path);\n                        if (isVWD) {\n                            display_str = `${JSON.stringify((initialValue as any[])[0])}->${JSON.stringify((finalNewValue as any[])[0])} ${reason_str}`;\n                        } else {\n                            display_str = `${JSON.stringify(initialValue)}->${JSON.stringify(finalNewValue)} ${reason_str}`;\n                        }\n                        console.info(\n                            `ADDED date '${path}' from '${potentialDate.toISOString()}' to '${newDate.toISOString()}' by delta '${delta}'ms ${reason_str}`\n                        );\n                        await eventEmit(\n                            variable_events.SINGLE_VARIABLE_UPDATED,\n                            variables.stat_data,\n                            path,\n                            initialValue,\n                            finalNewValue\n                        );\n                    } else if (typeof valueToAdd === 'number') {\n                        //  number \n                        if (typeof delta !== 'number') {\n                            outError(\n                                `Delta '${command.args[1]}' is not a number, skipping add command ${reason_str}`\n                            );\n                            continue;\n                        }\n                        let newValue = valueToAdd + delta;\n                        newValue = parseFloat(newValue.toPrecision(12)); // \n                        if (isVWD) {\n                            oldValue[0] = newValue; // Update the first element\n                            _.set(variables.stat_data, path, oldValue);\n                        } else {\n                            _.set(variables.stat_data, path, newValue);\n                        }\n                        const finalNewValue = _.get(variables.stat_data, path);\n                        if (isVWD) {\n                            display_str = `${JSON.stringify((initialValue as any[])[0])}->${JSON.stringify((finalNewValue as any[])[0])} ${reason_str}`;\n                        } else {\n                            display_str = `${JSON.stringify(initialValue)}->${JSON.stringify(finalNewValue)} ${reason_str}`;\n                        }\n                        console.info(\n                            `ADDED number '${path}' from '${valueToAdd}' to '${newValue}' by delta '${delta}' ${reason_str}`\n                        );\n                        await eventEmit(\n                            variable_events.SINGLE_VARIABLE_UPDATED,\n                            variables.stat_data,\n                            path,\n                            initialValue,\n                            finalNewValue\n                        );\n                    } else {\n                        // \n                        outError(\n                            `Path '${path}' value is not a date or number; skipping add command ${reason_str}`\n                        );\n                        continue;\n                    }\n                } else {\n                    outError(\n                        `Invalid number of arguments for _.add on path '${path}' ${reason_str}`\n                    );\n                    continue;\n                }\n                break;\n            }\n        }\n\n        if (display_str) {\n            // \n            _.set(out_status.stat_data, path, display_str);\n            _.set(delta_status.stat_data!, path, display_str);\n        }\n    }\n    // \n    variables.display_data = out_status.stat_data;\n    variables.delta_data = delta_status.stat_data!;\n    // \n    await eventEmit(variable_events.VARIABLE_UPDATE_ENDED, variables, variables_before_update);\n    //\n    _.unset(variables.stat_data, '$internal');\n    //  Schema \n    const is_modified = !_.isEqual(variables.stat_data, variables_before_update.stat_data);\n    if (is_modified) {\n        reconcileAndApplySchema(variables);\n    }\n    await eventEmit(\n        variable_events.VARIABLE_UPDATE_ENDED + '_for_zod',\n        variables,\n        variables_before_update\n    );\n    if (error_info && useDataStore().settings..) {\n        toastr.warning(error_info.content, error_info.title, { timeOut: 6000 });\n    }\n\n    return is_modified;\n}\n\nexport async function handleVariablesInMessage(message_id: number) {\n    const chat_message = getChatMessages(message_id).at(-1);\n    if (!chat_message) {\n        return;\n    }\n\n    let message_content = chat_message.message;\n\n    if (chat_message.role === 'assistant' && message_content.length < 5) {\n        return;\n    }\n    // getLastValidVariable  [0, message_id) \n    const request_message_id = message_id === 0 ? 1 : message_id;\n    const variables = getLastValidVariable(request_message_id);\n    const settings = useDataStore().settings;\n    if (!_.has(variables, 'stat_data')) {\n        return;\n    }\n\n    const has_variable_modified = await updateVariables(message_content, variables);\n    if (has_variable_modified && chat_message.role !== 'user') {\n        const context: UpdateContext = {\n            variables: variables,\n            message_content: message_content,\n        };\n        await eventEmit(variable_events.BEFORE_MESSAGE_UPDATE, context);\n        message_content = context.message_content;\n    }\n    const updater = (data: Record<string, any>) => {\n        data.initialized_lorebooks = variables.initialized_lorebooks;\n        data.stat_data = variables.stat_data;\n        if (variables.schema !== undefined) {\n            _.set(data, 'schema', variables.schema);\n        } else {\n            _.unset(data, 'schema');\n        }\n        if (variables.display_data !== undefined) {\n            _.set(data, 'display_data', variables.display_data);\n        } else {\n            _.unset(data, 'display_data');\n        }\n        if (variables.delta_data !== undefined) {\n            _.set(data, 'delta_data', variables.delta_data);\n        } else {\n            _.unset(data, 'delta_data');\n        }\n        return data;\n    };\n    if (has_variable_modified && settings..) {\n        await updateVariablesWith(updater, { type: 'chat' });\n    }\n    await updateVariablesWith(updater, { type: 'message', message_id: message_id });\n\n    if (chat_message.role !== 'user') {\n        if (!message_content.includes('<StatusPlaceHolderImpl/>')) {\n            message_content += '\\n\\n<StatusPlaceHolderImpl/>';\n        }\n        if (message_content.includes('<status_current_variable>')) {\n            message_content = message_content.replaceAll(\n                /<(status_current_variable)>(?:(?!<\\1>).)*<\\/\\1?>/gis,\n                ''\n            );\n        }\n        await setChatMessages(\n            [\n                {\n                    message_id: message_id,\n                    message: message_content,\n                },\n            ],\n            {\n                refresh: 'affected',\n            }\n        );\n    }\n}\n","import { cleanUpMetadata, EXTENSIBLE_MARKER, generateSchema } from '@/function/schema';\nimport { updateVariables } from '@/function/update_variables';\nimport { useDataStore } from '@/store';\nimport { getLastValidVariable } from '@/util';\nimport {\n    isObjectSchema,\n    MvuData,\n    RootAdditionalProps,\n    SchemaNode,\n    StatData,\n    variable_events,\n} from '@/variable_def';\nimport { correctlyMerge, parseString } from '@util/common';\nimport { klona } from 'klona';\n\ntype LorebookEntry = {\n    content: string;\n    comment?: string;\n};\n\nexport async function initCheck() {\n    if ($('#chat > .welcomePanel').length > 0) {\n        return;\n    }\n\n    let variables: MvuData & Record<string, any>;\n    // dryRun,0\n\n    try {\n        if (SillyTavern.chat.length === 0) {\n            console.error('');\n            toastr.error('', '[MVU]');\n            return;\n        }\n        variables = getLastValidVariable(getLastMessageId() + 1) ?? createEmptyGameData();\n    } catch (e) {\n        console.error('');\n        return;\n    }\n\n    // \n    if (variables === undefined) {\n        variables = createEmptyGameData();\n    }\n    if (!_.has(variables, 'initialized_lorebooks')) {\n        variables.initialized_lorebooks = {};\n    }\n    if (Array.isArray(variables.initialized_lorebooks)) {\n        console.warn(\n            'Old \"initialized_lorebooks\" array format detected. Migrating to the new object format.'\n        );\n        const oldArray = variables.initialized_lorebooks as string[];\n        const newObject: Record<string, any[]> = {};\n        for (const lorebookName of oldArray) {\n            newObject[lorebookName] = []; // \n        }\n        variables.initialized_lorebooks = newObject;\n    }\n    if (!variables.stat_data) {\n        variables.stat_data = {};\n    }\n    if (!variables.schema) {\n        variables.schema = { extensible: false, properties: {}, type: 'object' };\n    }\n\n    //  InitVar \n    const is_updated = await loadInitVarData(variables);\n\n    // ---  ---\n    if (is_updated) {\n        //  stat_data\n        const cleanData = (data: any) => {\n            if (Array.isArray(data)) {\n                //  filter \n                const cleanedArray = data.filter(item => item !== EXTENSIBLE_MARKER);\n                // \n                cleanedArray.forEach(cleanData);\n                return cleanedArray;\n            }\n            if (_.isObject(data)) {\n                const newObj: Record<string, any> = {};\n                const typedData = data as Record<string, any>; // \n                for (const key in data) {\n                    // \n                    newObj[key] = cleanData(typedData[key]);\n                }\n                return newObj;\n            }\n            return data;\n        };\n        //  Schema  stat_data\n        //  Schema\n        // \n    }\n\n    //  lorebook \n    if (is_updated || !variables.schema || _.isEmpty(variables.schema)) {\n        // 1.  Schema \n        const dataForSchema = klona(variables.stat_data);\n        // 2. generateSchema  schema\n        //  schema \n        const generated_schema: SchemaNode & RootAdditionalProps = generateSchema(\n            dataForSchema,\n            variables.schema\n        );\n\n        //  schema  ObjectSchemaNode\n        if (isObjectSchema(generated_schema)) {\n            if (_.has(variables.stat_data, '$meta.strictTemplate'))\n                generated_schema.strictTemplate = variables.stat_data['$meta']\n                    ?.strictTemplate as boolean;\n            if (_.has(variables.stat_data, '$meta.concatTemplateArray'))\n                generated_schema.concatTemplateArray = variables.stat_data['$meta']\n                    ?.concatTemplateArray as boolean;\n            if (_.has(variables.stat_data, '$meta.strictSet'))\n                generated_schema.strictSet = variables.stat_data['$meta']?.strictSet as boolean;\n            variables.schema = generated_schema;\n        }\n\n        // 3.  stat_data\n        cleanUpMetadata(variables.stat_data);\n    }\n\n    if (!is_updated) {\n        return;\n    }\n\n    if (useDataStore().settings..) {\n        console.info(`Init chat variables.`);\n        await updateVariablesWith(data => _.assign(data, variables), { type: 'chat' });\n    }\n\n    if (getLastMessageId() == 0) {\n        const last_msg = getChatMessages(0, { include_swipes: true })[0];\n        //  swipes\n        await setChatMessages([\n            {\n                // last_msg  message_id\n                message_id: 0,\n                swipes_data: await Promise.all(\n                    last_msg.swipes!.map(async (swipe, index) => {\n                        let vanilla_variable_data: Record<string, any> = klona(\n                            last_msg.swipes_data[index]\n                        );\n                        if (vanilla_variable_data === undefined) {\n                            vanilla_variable_data = {};\n                        }\n                        const current_data = correctlyMerge(\n                            vanilla_variable_data,\n                            klona(variables)\n                        );\n\n                        const matched_init = swipe.matchAll(\n                            /<(initvar)>(?:\\s*```.*)?([\\s\\S]*?)(?:```\\s*)?<\\/\\1>/gim\n                        );\n                        //  <initvar> \n                        //  <initvar>  [initvar] \n                        let is_initvar_applied = false;\n                        const overrided_initvar: StatData = {};\n                        for (const match of matched_init) {\n                            const init_content = match[2];\n                            try {\n                                const init_variables = parseString(substitudeMacros(init_content));\n                                correctlyMerge(overrided_initvar, init_variables);\n                                is_initvar_applied = true;\n                            } catch (e) {\n                                console.error('failed to parse initvar block:' + e);\n                            }\n                        }\n                        if (is_initvar_applied) {\n                            current_data.stat_data = overrided_initvar;\n                            const char_lorebook =\n                                getCharWorldbookNames('current').primary ?? 'unknown';\n                            //  \n                            // <initvar> \n                            current_data.initialized_lorebooks = {};\n                            current_data.initialized_lorebooks[char_lorebook] = [];\n                            //\n                            await loadInitVarData(current_data);\n                        }\n\n                        await eventEmit(variable_events.VARIABLE_INITIALIZED, current_data, index);\n                        //  updateVariables\n                        //  substitudeMacrosupdateVariables \n                        await updateVariables(swipe, current_data);\n                        console.log(``);\n                        return current_data;\n                    })\n                ),\n            },\n        ]);\n    } else {\n        // \n        await replaceVariables(variables, { type: 'message' });\n    }\n    try {\n        if (useDataStore().settings..) {\n            // \n            toastr.info(\n                `:<br>${Object.entries(\n                    variables.initialized_lorebooks ?? {}\n                )\n                    .map(([key, value]) => `- ${key}: ${JSON.stringify(value)}`)\n                    .join('<br>')}`,\n                '[MVU]',\n                {\n                    escapeHtml: false,\n                }\n            );\n        }\n    } catch (_e) {\n        /* empty */\n    }\n\n    //  lorebook \n    await updateLorebookSettings();\n}\n\n/**\n *  lorebook \n */\nexport async function getEnabledLorebookList(): Promise<string[]> {\n    const lorebook_settings = await getLorebookSettings();\n    const enabled_lorebook_list = [...lorebook_settings.selected_global_lorebooks];\n    const char_lorebook = await getCurrentCharPrimaryLorebook();\n    if (char_lorebook !== null) {\n        enabled_lorebook_list.push(char_lorebook);\n    }\n    return enabled_lorebook_list;\n}\n\n/**\n *  lorebook  InitVar  GameData \n */\nexport async function loadInitVarData(\n    mvu_data: MvuData,\n    lorebook_list?: string[]\n): Promise<boolean> {\n    const enabled_lorebook_list = lorebook_list || (await getEnabledLorebookList());\n    let is_updated = false;\n\n    //  initialized_lorebooks \n    if (!mvu_data.initialized_lorebooks || Array.isArray(mvu_data.initialized_lorebooks)) {\n        mvu_data.initialized_lorebooks = {};\n    }\n\n    for (const current_lorebook of enabled_lorebook_list) {\n        //  beta \n        if (_.has(mvu_data.initialized_lorebooks, current_lorebook)) continue;\n        mvu_data.initialized_lorebooks[current_lorebook] = [];\n        try {\n            const init_entries = (await getLorebookEntries(current_lorebook)) as LorebookEntry[];\n\n            const merged_data: Record<string, any> = {};\n            for (const entry of init_entries) {\n                if (entry.comment?.toLowerCase().includes('[initvar]')) {\n                    const xml_match = entry.content\n                        .trim()\n                        .match(/.*<initvar>.*\\n([\\s\\S]*)\\n.*<\\/initvar>.*/m);\n                    if (xml_match) {\n                        entry.content = xml_match[1];\n                    }\n                    const codeblock_match = entry.content.trim().match(/```.*\\n([\\s\\S]*)\\n```/m);\n                    if (codeblock_match) {\n                        entry.content = codeblock_match[1];\n                    }\n                    const content = substitudeMacros(entry.content);\n                    let parsedData: any = null;\n                    let parseError: Error | null = null;\n\n                    // Try YAML first (which also handles JSON)\n                    try {\n                        parsedData = parseString(content);\n                    } catch (e) {\n                        parseError = e as Error;\n                    }\n\n                    if (parseError) {\n                        console.error(`'${entry.comment}': ${parseError}`);\n                        toastr.error(\n                            parseError.message,\n                            `[MVU] '${entry.comment}'`,\n                            {\n                                timeOut: 5000,\n                            }\n                        );\n                        throw parseError;\n                    }\n\n                    if (parsedData) {\n                        correctlyMerge(merged_data, parsedData);\n                    }\n                }\n            }\n            mvu_data.stat_data = { ...merged_data, ...mvu_data.stat_data };\n            is_updated = true;\n        } catch (e) {\n            console.error(e);\n        }\n    }\n\n    return is_updated;\n}\n\n/**\n *  GameData \n */\nexport function createEmptyGameData(): MvuData {\n    return {\n        display_data: {},\n        initialized_lorebooks: {}, //  beta \n        stat_data: {},\n        delta_data: {},\n        schema: {\n            type: 'object',\n            properties: {},\n        }, // beta  schema \n    };\n}\n\n/**\n * \n */\nexport async function getLastMessageVariables(): Promise<{\n    message: ChatMessageSwiped;\n    variables: MvuData | undefined;\n}> {\n    let last_chat_msg: ChatMessageSwiped[] = [];\n    try {\n        last_chat_msg = (await getChatMessages(-2, {\n            role: 'assistant',\n            include_swipes: true,\n        })) as ChatMessageSwiped[];\n    } catch (e) {\n        // \n    }\n\n    if (!last_chat_msg || last_chat_msg.length <= 0) {\n        const first_msg = await getChatMessages(0, {\n            include_swipes: true,\n        });\n        if (first_msg && first_msg.length > 0) {\n            last_chat_msg = first_msg;\n        } else {\n            throw new Error('');\n        }\n    }\n\n    const last_msg = last_chat_msg[0];\n    const variables = last_msg.swipes_data[last_msg.swipe_id] as MvuData & Record<string, any>;\n\n    return { message: last_msg, variables };\n}\n\n/**\n *  lorebook \n */\nexport async function updateLorebookSettings(): Promise<void> {\n    /*Ref:https://github.com/lolo-desu/lolocard/blob/master/src/%E6%97%A5%E8%AE%B0%E7%BB%9C%E7%BB%9C/%E8%84%9A%E6%9C%AC/%E8%B0%83%E6%95%B4%E4%B8%96%E7%95%8C%E4%B9%A6%E5%85%A8%E5%B1%80%E8%AE%BE%E7%BD%AE.ts\n     */\n    const dst_setting: Partial<LorebookSettings> = {\n        scan_depth: 2,\n        context_percentage: 100,\n        budget_cap: 0,\n        min_activations: 0,\n        max_depth: 0,\n        max_recursion_steps: 0,\n\n        insertion_strategy: 'character_first',\n\n        include_names: false,\n        recursive: true,\n        case_sensitive: false,\n        match_whole_words: false,\n        use_group_scoring: false,\n        overflow_alert: false,\n    };\n    const settings = getLorebookSettings();\n    if (!_.isEqual(_.merge({}, settings, dst_setting), settings)) {\n        setLorebookSettings(dst_setting);\n    }\n}\n","import { PLOT_REGEX, UPDATE_REGEX } from '@/variable_def';\n\nexport async function isExtraModelSupported(): Promise<boolean> {\n    const lorebook_name = getCurrentCharPrimaryLorebook();\n    if (!lorebook_name) {\n        return false;\n    }\n    return await getLorebookEntries(lorebook_name).then(entries =>\n        entries.some(entry => UPDATE_REGEX.test(entry.comment) || PLOT_REGEX.test(entry.comment))\n    );\n}\n","export function isFunctionCallingSupported() {\n    if (!SillyTavern.ToolManager.isToolCallingSupported()) {\n        return false;\n    }\n    if (SillyTavern.chatCompletionSettings.function_calling === false) {\n        return false;\n    }\n    return true;\n}\n","import { updateVariables } from '@/function/update_variables';\nimport { useDataStore } from '@/store';\nimport { getLastValidVariable, isJsonPatch } from '@/util';\nimport { parseString } from '@util/common';\n\n/**\n * generate  tool_call \n *  tool_call llm tool callauto/any\n *  tool call required\n *  mvu \n *  generate  required \n */\n\nexport const MVU_FUNCTION_NAME = 'mvu_VariableUpdate';\nconst mvu_update_call_function_name = 'mvu_updateRound';\n\n/*\n    e.g.: [\n    [\n        {\n            \"index\": 0,\n            \"id\": \"tool_0_mvu_VariableUpdate_2lJb8gNNBxCT4Gi4QDkF\",\n            \"type\": \"function\",\n            \"function\": {\n                \"name\": \"mvu_VariableUpdate\",\n                \"arguments\": \"{\\\"delta\\\":\\\"\\\\n_.set('.','19:30');//\\\\n_.set('yukkuri.yukkuri_1.fullness_level',45);\\\\n_.set('yukkuri.yukkuri_1.pickiness_level',40);\\\\n_.set('yukkuri.yukkuri_1.monologue','Q');\\\\n_.set('yukkuri.yukkuri_2.fullness_level',45);\\\\n_.set('yukkuri.yukkuri_2.pickiness_level',40);\\\\n_.set('yukkuri.yukkuri_2.monologue','');\\\\n_.set('yukkuri.yukkuri_3.fullness_level',45);\\\\n_.set('yukkuri.yukkuri_3.pickiness_level',40);\\\\n_.set('yukkuri.yukkuri_3.monologue','');\\\\n_.set('yukkuri.yukkuri_4.fullness_level',30);\\\\n_.set('yukkuri.yukkuri_4.pickiness_level',45);\\\\n_.set('yukkuri.yukkuri_4.monologue','');\\\\n_.set('yukkuri.yukkuri_5.fullness_level',30);\\\\n_.set('yukkuri.yukkuri_5.pickiness_level',45);\\\\n_.set('yukkuri.yukkuri_5.monologue','');\\\\n\\\",\\\"analysis\\\":\\\"\\\\nTime passed: 1 hour. Not a special case, so no dramatic updates.\\\\nVariables to check: ., yukkuri.yukkuri_1.fullness_level, yukkuri.yukkuri_1.pickiness_level, yukkuri.yukkuri_1.monologue, yukkuri.yukkuri_2.fullness_level, yukkuri.yukkuri_2.pickiness_level, yukkuri.yukkuri_2.monologue, yukkuri.yukkuri_3.fullness_level, yukkuri.yukkuri_3.pickiness_level, yukkuri.yukkuri_3.monologue, yukkuri.yukkuri_4.fullness_level, yukkuri.yukkuri_4.pickiness_level, yukkuri.yukkuri_4.monologue, yukkuri.yukkuri_5.fullness_level, yukkuri.yukkuri_5.pickiness_level, yukkuri.yukkuri_5.monologue\\\\n\\\\n.: Y\\\\nyukkuri.yukkuri_1.fullness_level: Y\\\\nyukkuri.yukkuri_1.pickiness_level: Y\\\\nyukkuri.yukkuri_1.monologue: Y\\\\nyukkuri.yukkuri_2.fullness_level: Y\\\\nyukkuri.yukkuri_2.pickiness_level: Y\\\\nyukkuri.yukkuri_2.monologue: Y\\\\nyukkuri.yukkuri_3.fullness_level: Y\\\\nyukkuri.yukkuri_3.pickiness_level: Y\\\\nyukkuri.yukkuri_3.monologue: Y\\\\nyukkuri.yukkuri_4.fullness_level: Y\\\\nyukkuri.yukkuri_4.pickiness_level: Y\\\\nyukkuri.yukkuri_4.monologue: Y\\\\nyukkuri.yukkuri_5.fullness_level: Y\\\\nyukkuri.yukkuri_5.pickiness_level: Y\\\\nyukkuri.yukkuri_5.monologue: Y\\\\n\\\"}\"\n            }\n        }\n    ]\n]\n */\n\n/**  mvu_VariableUpdate string  */\ntype ToolName = typeof MVU_FUNCTION_NAME | (string & {});\n\n/**  */\ninterface FunctionCallBody {\n    /**  \"mvu_VariableUpdate\" */\n    name: ToolName;\n    /** ** JSON** */\n    arguments: string;\n}\n\n/** function-calling  */\ninterface ToolFunctionCall {\n    index: number; //  tool_call \n    id: string; // / ID\n    type: 'function'; //  function\n    function: FunctionCallBody;\n}\n\n/**  */\ntype ToolCallBatch = ToolFunctionCall[];\n\n/**  */\ntype ToolCallBatches = ToolCallBatch[];\n\n/*\nasync function _onStoryEndCall(_args: any): Promise<string> {\n    const variables = await getLastValidVariable(getLastMessageId());\n    const val = variables.stat_data;\n    let content = ExtraLLMRequestContent;\n    if (val !== undefined) {\n        content = content.replaceAll(\n            \"<%= YAML.stringify(getvar('stat_data'), { blockQuote: 'literal' }) _%>\",\n            YAML.stringify(val, { blockQuote: 'literal' })\n        );\n    }\n    content += `\\nuse \\`${MVUFunctionName}\\` tool to update variables.`;\n    return content;\n}\n*/\n\nasync function onVariableUpdatedCall(args: any): Promise<string> {\n    if (!args?.delta) return '';\n    let message_id = getLastMessageId();\n    let chat_message = getChatMessages(message_id).at(-1);\n    if (chat_message && chat_message.role === 'system') {\n        // mvu \n        message_id -= 1;\n        chat_message = getChatMessages(message_id).at(-1);\n    }\n    if (!chat_message) {\n        return '';\n    }\n\n    let message_content = chat_message.message.trimEnd();\n    const variables = getLastValidVariable(message_id + 1);\n    if (!_.has(variables, 'stat_data')) {\n        return '';\n    }\n\n    const has_variable_modified = await updateVariables(args.delta, variables);\n    if (has_variable_modified && useDataStore().settings..) {\n        await replaceVariables(variables, { type: 'chat' });\n    }\n    await replaceVariables(variables, { type: 'message', message_id: message_id });\n\n    message_content += `\\n\\n<UpdateVariable>\\n<Analysis>${args.analysis}</Analysis></Analysis>${args.delta}\\n</UpdateVariable>`;\n\n    if (chat_message.role !== 'user' && !message_content.includes('<StatusPlaceHolderImpl/>')) {\n        // PlaceHolder\n        await setChatMessages(\n            [\n                {\n                    message_id: message_id,\n                    message: message_content + '\\n\\n<StatusPlaceHolderImpl/>',\n                },\n            ],\n            {\n                refresh: 'affected',\n            }\n        );\n    } else {\n        // UpdateVaraible \n        await setChatMessages(\n            [\n                {\n                    message_id: message_id,\n                    message: message_content,\n                },\n            ],\n            {\n                refresh: 'affected',\n            }\n        );\n    }\n    return JSON.stringify(variables.delta_data);\n}\n\nexport function registerFunction() {\n    const { registerFunctionTool } = SillyTavern;\n    if (!registerFunctionTool) {\n        console.debug('MVU: function tools are not supported');\n        return () => {};\n    }\n\n    const mvu_update_schema = Object.freeze({\n        $schema: 'http://json-schema.org/draft-04/schema#',\n        type: 'object',\n        additionalProperties: false,\n        properties: {\n            analysis: {\n                type: 'string',\n                minLength: 1,\n                description:\n                    'Write in ENGLISH. A compact reasoning summary that includes: (1) calculate time passed; (2) decide whether dramatic updates are allowed (special case or sufficiently long time); (3) list every variable name BEFORE actual variable analysis, without revealing their contents; (4) for each variable, judge whether it satisfies its change conditions and output only Y/N without reasons; (5) only evaluate stories inside <past_observe> block.',\n            },\n            delta: {\n                type: 'string',\n                minLength: 0,\n                description: 'variable update block',\n            },\n        },\n        required: ['delta'],\n    });\n\n    registerFunctionTool({\n        name: MVU_FUNCTION_NAME,\n        displayName: 'MVU update',\n        stealth: true,\n        description: 'use this tool to UpdateVariable.',\n        parameters: mvu_update_schema,\n        shouldRegister: () => {\n            const store = useDataStore();\n            if (!store.runtimes.is_function_call_enabled) {\n                return false;\n            }\n            return store.settings..;\n        },\n        action: onVariableUpdatedCall,\n        formatMessage: () => '',\n    });\n\n    /* () llm \n    const mvuRoundUpdateSchema = Object.freeze({\n        $schema: 'http://json-schema.org/draft-04/schema#',\n        type: 'object',\n        additionalProperties: false,\n\n        properties: {},\n    });\n\n    registerFunctionTool({\n        name: MVUUpdateCallFunctionName,\n        displayName: 'MVU update',\n        stealth: false,\n        description:\n            '**ALWAYS** call this function to end each response. By use this tool, output the `<UpdateVariable>` block is no longer necessary;',\n        parameters: mvuRoundUpdateSchema,\n        shouldRegister: () => {\n            const settings = useDataStore().settings;\n            if (settings. === '') {\n                const message_id = getLastMessageId();\n                const chat_message = getChatMessages(message_id).at(-1);\n                if (!chat_message) {\n                    return false;\n                }\n\n                let message_content = chat_message.message;\n                //\n                if (message_content.indexOf(``) != -1)\n                    return false;\n                return true;\n            }\n            return false;\n        },\n        action: onStoryEndCall,\n        formatMessage: () => '',\n    });\n    */\n\n    return () => {\n        SillyTavern.unregisterFunctionTool(MVU_FUNCTION_NAME);\n        SillyTavern.unregisterFunctionTool(mvu_update_call_function_name);\n    };\n}\n\nexport function overrideToolRequest(generate_data: any) {\n    const store = useDataStore();\n    if (\n        store.settings. !== '' ||\n        store.settings.. !== true\n    ) {\n        return;\n    }\n    if (!store.runtimes.is_function_call_enabled) {\n        return;\n    }\n    if (generate_data.tools !== undefined && _.size(generate_data.tools) > 0) {\n        // v3 required\n        /*\n        const message_id = getLastMessageId();\n        const chat_message = getChatMessages(message_id).at(-1);\n        if (!chat_message) {\n            generate_data.tool_choice = 'auto';\n            return;\n        }\n        const function_info = _.get(chat_message, 'extra.tool_invocations');\n        if (_.isArray(function_info)) {\n            //required prompt\n            generate_data.tool_choice = 'required';\n            return;\n        }\n        */\n        generate_data.tool_choice = 'required';\n    }\n}\n\nexport function extractFromToolCall(tool_calls: ToolCallBatches | undefined): string | null {\n    if (!tool_calls) {\n        return null;\n    }\n\n    const tool_call = _.get(tool_calls as ToolCallBatches, '[0]');\n    if (!tool_call) {\n        return null;\n    }\n\n    const mvu_call = _(tool_call).findLast(fn => fn.function.name === MVU_FUNCTION_NAME);\n    if (!mvu_call) {\n        return null;\n    }\n\n    const content = _.get(mvu_call, 'function.arguments');\n    if (!content) {\n        return null;\n    }\n\n    try {\n        const json = parseString(content);\n        if (json.delta && json.delta.length > 5) {\n            let result = '';\n            result += `<UpdateVariable>\\n`;\n            result += `<Analyze>\\n${json.analysis}\\n</Analyze>\\n`;\n            // <JsonPatch> \n            //\n            //  llm <json_patch> tryfallback\n            const json_patch_match = /json_?patch/i.test(json.delta);\n            try {\n                const parsed = parseString(\n                    json.delta.replaceAll(/```.*/gm, '').replaceAll(/<\\/?json_?patch>/gim, '')\n                );\n                if (!isJsonPatch(parsed)) {\n                    throw new Error(` json patch`);\n                }\n                json.delta = JSON.stringify(parsed, null, 2);\n                result += `<JSONPatch>\\n${json.delta}\\n</JSONPatch>\\n`;\n            } catch (error) {\n                if (json_patch_match) {\n                    console.error(\n                        `[MVU] ${json.delta},  ${error}`\n                    );\n                    return null;\n                }\n                const fn_call_match =\n                    /_\\.(?:set|insert|assign|remove|unset|delete|add)\\s*\\([\\s\\S]*?\\)\\s*;/.test(\n                        json.delta\n                    );\n                //\n                if (fn_call_match) {\n                    result += `${json.delta}\\n`;\n                } else {\n                    return null;\n                }\n            }\n            result += `</UpdateVariable>`;\n            return result;\n        }\n    } catch (e) {\n        console.log(`[MVU], ${e}`);\n    }\n    return null;\n}\n","import { extractFromToolCall } from '@/function/function_call';\nimport claude_head from '@/prompts/claude_head.txt?raw';\nimport claude_tail from '@/prompts/claude_tail.txt?raw';\nimport extra_model_task from '@/prompts/extra_model_task.txt?raw';\nimport gemini_head from '@/prompts/gemini_head.txt?raw';\nimport gemini_tail from '@/prompts/gemini_tail.txt?raw';\nimport { useDataStore } from '@/store';\nimport { normalizeBaseURL } from '@/util';\nimport { literalYamlify, uuidv4 } from '@util/common';\nimport { compare } from 'compare-versions';\n\nlet toolcall_result: string | undefined = undefined;\nlet vanilla_parseToolCalls: any = null;\n//\nlet debug_extra_request_counter = 0;\n\nfunction generateRandomHeader(): string {\n    return _.times(4, () => uuidv4().slice(0, 8)).join('\\n');\n}\n\nfunction setExtraAnalysisStates() {\n    const store = useDataStore();\n\n    if (store.runtimes.is_during_extra_analysis === true) {\n        //\n        throw new Error('setExtraAnalysisStates() should not be called recursively.');\n    }\n\n    //macro RequestReply\n    //\n\n    store.runtimes.is_during_extra_analysis = true;\n    toolcall_result = undefined;\n\n    if (store.settings..) {\n        vanilla_parseToolCalls = SillyTavern.ToolManager.parseToolCalls;\n        const vanilla_bound = SillyTavern.ToolManager.parseToolCalls.bind(SillyTavern.ToolManager);\n        SillyTavern.ToolManager.parseToolCalls = (tool_calls: any, parsed: any) => {\n            vanilla_bound(tool_calls, parsed);\n            //concurrent  **** \n            const extracted = extractFromToolCall(tool_calls);\n            if (extracted) {\n                toolcall_result = extracted;\n            }\n        };\n    }\n}\n\nfunction unsetExtraAnalysisStates() {\n    const store = useDataStore();\n\n    if (vanilla_parseToolCalls !== null) {\n        SillyTavern.ToolManager.parseToolCalls = vanilla_parseToolCalls;\n        vanilla_parseToolCalls = null;\n    }\n    SillyTavern.unregisterMacro('lastUserMessage');\n    store.runtimes.is_during_extra_analysis = false;\n    store.runtimes.is_function_call_enabled = false;\n}\n\nlet is_analysis_in_progress = false;\n\nexport async function invokeExtraModelWithStrategy(): Promise<string | null> {\n    const batch_id = generateRandomHeader();\n    if (is_analysis_in_progress) {\n        return null;\n    }\n    try {\n        is_analysis_in_progress = true;\n        const store = useDataStore();\n\n        debug_extra_request_counter = 0;\n\n        const recordedInvoke = async (generation_id?: string) => {\n            try {\n                return await invokeExtraModel(generation_id, batch_id);\n            } catch (e) {\n                console.error(e);\n                throw e;\n            }\n        };\n        const safeInvoke = async (): Promise<{\n            result: string | null;\n            is_manual_canceled: boolean;\n        }> => {\n            let is_manual_canceled = false;\n            try {\n                setExtraAnalysisStates();\n                return { result: await recordedInvoke(), is_manual_canceled: false };\n            } catch (e) {\n                /** ,  */\n                if (e === 'Clicked stop button') is_manual_canceled = true;\n            } finally {\n                unsetExtraAnalysisStates();\n            }\n            return { result: null, is_manual_canceled: is_manual_canceled };\n        };\n        const concurrentInvoke = async (times: number) => {\n            const uuids = _.times(times, uuidv4);\n            try {\n                setExtraAnalysisStates();\n                // **** \n                return await Promise.any(uuids.map(recordedInvoke));\n            } catch (e) {\n                /** ,  */\n            } finally {\n                uuids.forEach(stopGenerationById);\n                unsetExtraAnalysisStates();\n            }\n            return null;\n        };\n\n        switch (store.settings..) {\n            case '':\n                for (let i = 0; i < store.settings..; i++) {\n                    if (store.settings..) {\n                        toastr.info(\n                            `${i === 0 ? '' : `  ${i}/3`}`,\n                            '[MVU]'\n                        );\n                    }\n                    const { result, is_manual_canceled } = await safeInvoke();\n                    if (result !== null) {\n                        return result;\n                    }\n                    if (is_manual_canceled) {\n                        //\n                        return null;\n                    }\n                }\n                return null;\n            case '':\n                if (store.settings..) {\n                    toastr.info(\n                        ` ${store.settings..} AI...`,\n                        '[MVU]'\n                    );\n                }\n                return concurrentInvoke(store.settings..);\n            case ', ':\n                if (store.settings..) {\n                    toastr.info(`...`, '[MVU]');\n                }\n                {\n                    const { result, is_manual_canceled } = await safeInvoke();\n                    if (result !== null) {\n                        return result;\n                    }\n                    if (is_manual_canceled) {\n                        //\n                        return null;\n                    }\n                }\n                if (store.settings..) {\n                    toastr.info(\n                        `,  ${store.settings.. - 1} AI...`,\n                        '[MVU]'\n                    );\n                }\n                return concurrentInvoke(store.settings.. - 1);\n        }\n    } finally {\n        is_analysis_in_progress = false;\n    }\n}\n\n/**\n * @brief \n */\nexport async function generateExtraModel(): Promise<string | null> {\n    try {\n        setExtraAnalysisStates();\n        return await invokeExtraModel();\n    } finally {\n        unsetExtraAnalysisStates();\n    }\n}\n\n//  `Clicked stop button`: string ,\n//\nasync function invokeExtraModel(generation_id?: string, batch_id?: string): Promise<string> {\n    try {\n        const direct_reply = await requestReply(generation_id, batch_id);\n        // collected_tool_calls  requestReply , \n        const result = toolcall_result ?? direct_reply;\n\n        // QUESTION: , \n\n        const tag = _([...result.matchAll(/<(update(?:variable)?|variableupdate)>/gi)]).last()?.[1];\n        if (!tag) {\n            throw new Error(\n                literalYamlify({\n                    ['[MVU]<UpdateVariable>']: result,\n                })\n            );\n        }\n\n        const start_index = result.lastIndexOf(`<${tag}>`);\n        const end_index = result.indexOf(`</${tag}>`, start_index);\n        const update_block = result.slice(\n            start_index + 2 + tag.length,\n            end_index === -1 ? undefined : end_index\n        );\n\n        const fn_call_match =\n            /_\\.(?:set|insert|assign|remove|unset|delete|add)\\s*\\([\\s\\S]*?\\)\\s*;/.test(\n                update_block\n            );\n        const json_patch_match = /json_?patch/i.test(update_block);\n        if (fn_call_match || json_patch_match) {\n            return `<UpdateVariable>${update_block}</UpdateVariable>`;\n        }\n\n        throw new Error(\n            literalYamlify({\n                ['[MVU]<UpdateVariable>']: result,\n            })\n        );\n    } finally {\n        /* empty */\n    }\n}\n\nfunction decode(string: string) {\n    const binary = atob(string);\n    const percent = binary\n        .split('')\n        .map(c => {\n            return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\n        })\n        .join('');\n    return decodeURIComponent(percent);\n}\n\nconst decoded_claude_head = decode(claude_head);\nconst decoded_gemini_head = decode(gemini_head);\nconst decoded_claude_tail = decode(claude_tail);\nconst decoded_gemini_tail = decode(gemini_tail);\nconst decoded_extra_model_task = decode(extra_model_task);\n\nasync function requestReply(generation_id?: string, batch_id?: string): Promise<string> {\n    const store = useDataStore();\n\n    const config: GenerateRawConfig = {\n        user_input: '<must>',\n        max_chat_history: 2,\n        should_stream:\n            store.settings.. ||\n            store.settings..,\n        generation_id,\n    };\n    if (store.settings.. === '') {\n        const unset_if_equal = (value: number, expected: number) =>\n            compare(store.versions.tavernhelper, '4.3.9', '>=') && value === expected\n                ? 'unset'\n                : value;\n        config.custom_api = {\n            apiurl: normalizeBaseURL(store.settings..api),\n            key: store.settings..,\n            model: store.settings..,\n            max_tokens: store.settings..token,\n            temperature: unset_if_equal(store.settings.., 1),\n            frequency_penalty: unset_if_equal(store.settings.., 0),\n            presence_penalty: unset_if_equal(store.settings.., 0),\n            top_p: unset_if_equal(store.settings..top_p, 1),\n            top_k: unset_if_equal(store.settings..top_k, 0),\n        };\n    }\n\n    let task = decoded_extra_model_task;\n    if (store.settings..) {\n        task += `\\n use \\`mvu_VariableUpdate\\` tool to update variables.`;\n        store.runtimes.is_function_call_enabled = true;\n    }\n\n    // {{lastUserMessage}}\n    //, ST \n    SillyTavern.registerMacro('lastUserMessage', () => {\n        return task;\n    });\n    if (store.runtimes.debug. && debug_extra_request_counter === 0) {\n        debug_extra_request_counter++;\n        throw 'simulated exception';\n    }\n\n    if (store.settings.. === '') {\n        const result = generate({\n            ...config,\n            injects: [\n                {\n                    position: 'in_chat',\n                    depth: 0,\n                    should_scan: false,\n                    role: 'system',\n                    content: task,\n                },\n                {\n                    position: 'in_chat',\n                    depth: 2,\n                    should_scan: false,\n                    role: 'system',\n                    content: '<past_observe>',\n                },\n                {\n                    position: 'in_chat',\n                    depth: 1,\n                    should_scan: false,\n                    role: 'system',\n                    content: '</past_observe>',\n                },\n            ],\n        });\n        return result;\n    }\n\n    const model_name =\n        store.settings.. === ''\n            ? SillyTavern.getChatCompletionModel()\n            : store.settings..;\n    const is_gemini = model_name.toLowerCase().includes('gemini');\n\n    const result = generateRaw({\n        ...config,\n        ordered_prompts: [\n            { role: 'system', content: batch_id ?? generateRandomHeader() },\n            { role: 'system', content: is_gemini ? decoded_gemini_head : decoded_claude_head },\n            { role: 'system', content: '<additional_information>' },\n            'persona_description',\n            'char_description',\n            'world_info_before',\n            'world_info_after',\n            { role: 'system', content: '</additional_information>' },\n            { role: 'system', content: '<past_observe>' },\n            'chat_history',\n            { role: 'system', content: '</past_observe>' },\n            { role: 'system', content: task },\n            'user_input',\n            { role: 'system', content: is_gemini ? decoded_gemini_tail : decoded_claude_tail },\n        ],\n    });\n    return result;\n}\n","import { isExtraModelSupported } from '@/function/is_extra_model_supported';\nimport { isFunctionCallingSupported } from '@/function/is_function_calling_supported';\nimport { invokeExtraModelWithStrategy } from '@/function/update/invoke_extra_model';\nimport { handleVariablesInMessage } from '@/function/update_variables';\nimport { useDataStore } from '@/store';\n\nexport async function onMessageReceived(\n    message_id: number,\n    { force = false }: { force?: boolean } = {}\n) {\n    const current_chatmsg = getChatMessages(message_id).at(-1);\n    if (!current_chatmsg) {\n        return;\n    }\n\n    const message_content = current_chatmsg.message;\n    if (message_content.length < 5) {\n        //MESSAGE_RECEIVED  \"...\" \n        return;\n    }\n\n    const store = useDataStore();\n    store.runtimes.is_during_extra_analysis = false;\n\n    if (\n        store.settings. === 'AI' ||\n        (store.settings.. && !isFunctionCallingSupported()) || //\n        !(await isExtraModelSupported())\n    ) {\n        await handleVariablesInMessage(message_id);\n        return;\n    }\n\n    if (SillyTavern.chat.length <= 1) {\n        console.log('[MVU] ');\n        return;\n    }\n\n    if (!force && store.settings.. === false) {\n        console.log('[MVU] ');\n        return;\n    }\n\n    const result = await invokeExtraModelWithStrategy();\n    if (result !== null) {\n        const chat_message = getChatMessages(message_id);\n\n        await setChatMessages(\n            [\n                {\n                    message_id,\n                    message: chat_message[0].message.trimEnd() + '\\n\\n' + result,\n                },\n            ],\n            {\n                refresh: 'none',\n            }\n        );\n    } else {\n        toastr.error(\n            ', -',\n            '[MVU]'\n        );\n    }\n    await handleVariablesInMessage(message_id);\n}\n","import { createEmptyGameData, loadInitVarData } from '@/function/initvar/variable_init';\nimport { isExtraModelSupported } from '@/function/is_extra_model_supported';\nimport { isFunctionCallingSupported } from '@/function/is_function_calling_supported';\nimport { cleanUpMetadata, reconcileAndApplySchema } from '@/function/schema';\nimport { onMessageReceived } from '@/function/update/on_message_received';\nimport { handleVariablesInMessage, updateVariables } from '@/function/update_variables';\nimport { useDataStore } from '@/store';\nimport { getLastValidMessageId, getLastValidVariable } from '@/util';\nimport { MvuData } from '@/variable_def';\nimport { klona } from 'klona';\n\n/**\n * \n *\n * \n * initData: {\n *   \"\": {\n *     \"value\": 100,\n *     \"description\": \"\"  //  4(a)\n *   },\n *   \"\": [100, \"\"],  //  4(b): ValueWithDescription<number>\n *   \"\": [{\n *     \"name\": \"\",\n *     \"damage\": [50, \"\"],  //  ValueWithDescription\n *     \"description\": \"\"\n *   }],\n *   \"\": {\n *     \"\": [\"\", \"\"],  // ValueWithDescription<string>\n *     \"\": {\n *       \"\": [10, \"\"]\n *     }\n *   }\n * }\n */\nexport function updateDescriptions(\n    _init_path: string,\n    init_data: any,\n    msg_data: any,\n    target_data: any\n) {\n    _.forEach(init_data, (value, key) => {\n        const current_path = key; //init_path ? `${init_path}.${key}` : key;\n\n        if (_.isArray(value)) {\n            //  ValueWithDescription<T>  (2)\n            if (value.length === 2 && _.isString(value[1])) {\n                //  4(b):  ValueWithDescription<T> \n                if (_.isArray(_.get(msg_data, current_path))) {\n                    const msgValue = _.get(msg_data, current_path);\n                    if (msgValue.length === 2) {\n                        // ()\n                        _.set(target_data, `${current_path}[1]`, value[1]);\n\n                        // \n                        if (_.isObject(value[0]) && !_.isArray(value[0])) {\n                            // \n                            const targetObj = _.get(target_data, `${key}[0]`);\n\n                            // description\n                            if (\n                                _.has(value[0], 'description') &&\n                                _.isString(value[0].description)\n                            ) {\n                                if (_.has(msgValue[0], 'description')) {\n                                    _.set(\n                                        target_data,\n                                        `${current_path}[0].description`,\n                                        value[0].description\n                                    );\n                                }\n                            }\n\n                            // \n                            updateDescriptions(\n                                `${current_path}[0]`,\n                                value[0],\n                                msgValue[0],\n                                targetObj\n                            );\n                        } else if (_.isArray(value[0])) {\n                            // \n                            updateDescriptions(\n                                `${current_path}[0]`,\n                                value[0],\n                                msgValue[0],\n                                target_data[0]\n                            );\n                        }\n                    }\n                }\n            } else if (_.isArray(_.get(msg_data, current_path))) {\n                // \n                const msg_array = _.get(msg_data, current_path);\n                value.forEach((item, index) => {\n                    if (index < msg_array.length) {\n                        if (_.isObject(item)) {\n                            const current_target = _.get(target_data, `${current_path}[${index}]`);\n                            // description\n                            if (_.has(item, 'description') && _.isString(item.description)) {\n                                if (_.has(msg_array[index], 'description')) {\n                                    _.set(current_target, `description`, item.description);\n                                }\n                            }\n\n                            updateDescriptions(\n                                `${current_path}[${index}]`,\n                                value[index],\n                                msg_array[index],\n                                current_target\n                            );\n                        }\n                    }\n                });\n            }\n        } else if (_.isObject(value)) {\n            // \n            if (_.has(value, 'description') && _.isString(value.description)) {\n                //  4(a):  description \n                //msg_data  currentPath\n                const description_path = `${key}.description`;\n                if (_.has(msg_data, description_path)) {\n                    _.set(target_data, description_path, value.description);\n                }\n            }\n\n            // \n            if (_.has(msg_data, key) && _.isObject(msg_data[key])) {\n                updateDescriptions(current_path, value, msg_data[key], target_data[key]);\n            }\n        }\n    });\n}\n\ninterface Button {\n    name: string;\n    function: (() => void) | (() => Promise<void>);\n    is_legacy?: boolean;\n}\n\nexport const buttons: Button[] = [\n    {\n        name: '',\n        function: async () => {\n            const last_msg = getLastMessageId();\n            if (last_msg < 1) return;\n            if (SillyTavern.chat.length === 0) return;\n            await updateVariablesWith(\n                variables => {\n                    _.unset(variables, `stat_data`);\n                    _.unset(variables, `delta_data`);\n                    _.unset(variables, `display_data`);\n                    _.unset(variables, `schema`);\n                    return variables;\n                },\n                { type: 'message', message_id: last_msg }\n            );\n            //\n            await handleVariablesInMessage(getLastMessageId());\n        },\n    },\n    {\n        name: '',\n        is_legacy: true,\n        function: async () => {\n            // 1.  GameData  InitVar \n            const latest_init_data = createEmptyGameData();\n\n            try {\n                const hasInitData = await loadInitVarData(latest_init_data);\n                if (!hasInitData) {\n                    console.error(' InitVar ');\n                    toastr.error(' InitVar ', '[MVU]', { timeOut: 3000 });\n                    return;\n                }\n            } catch (e) {\n                console.error(' InitVar :', e);\n                return;\n            }\n            await reconcileAndApplySchema(latest_init_data);\n\n            cleanUpMetadata(latest_init_data.stat_data);\n\n            // 2. \n            const message_id = getLastMessageId();\n            if (message_id < 0) {\n                console.error('');\n                toastr.error('', '[MVU]', { timeOut: 3000 });\n                return;\n            }\n\n            const latest_msg_data = getLastValidVariable(message_id + 1);\n\n            if (!latest_msg_data) {\n                return;\n            }\n\n            // 3.  latest_init_data  latest_msg_data \n            // latest_init_data  klona\n            const merged_data: Record<string, any> = { stat_data: undefined, schema: undefined };\n            merged_data.stat_data = _.merge(\n                {},\n                latest_init_data.stat_data,\n                latest_msg_data.stat_data\n            );\n            merged_data.schema = _.merge({}, latest_msg_data.schema, latest_init_data.schema);\n            merged_data.initialized_lorebooks = _.merge(\n                {},\n                latest_init_data.initialized_lorebooks,\n                latest_msg_data.initialized_lorebooks\n            );\n            merged_data.display_data = klona(merged_data.stat_data);\n            merged_data.delta_data = latest_msg_data.delta_data;\n\n            // 4-5. \n            updateDescriptions(\n                '',\n                latest_init_data.stat_data,\n                latest_msg_data.stat_data,\n                merged_data.stat_data\n            );\n\n            //\n            await reconcileAndApplySchema(merged_data as MvuData);\n\n            cleanUpMetadata(merged_data.stat_data);\n\n            // 6. \n            await replaceVariables(merged_data, { type: 'message', message_id: message_id });\n\n            // @ts-expect-error \n            await setChatMessage({}, message_id);\n\n            if (useDataStore().settings..) {\n                await replaceVariables(merged_data, { type: 'chat' });\n            }\n\n            console.info('InitVar');\n            toastr.success('InitVar', '[MVU]', { timeOut: 3000 });\n        },\n    },\n    {\n        name: '',\n        is_legacy: true,\n        function: async () => {\n            const result = (await SillyTavern.callGenericPopup(\n                '<h4></h4> ( 10  10 )<br><strong></strong>',\n                SillyTavern.POPUP_TYPE.INPUT,\n                '10'\n            )) as string | undefined;\n            if (!result) {\n                return;\n            }\n            const message_id = parseInt(result);\n            if (isNaN(message_id)) {\n                toastr.error(`,  '${result}'`, '[MVU]');\n                return;\n            }\n            const chat_message = SillyTavern.chat[message_id];\n            if (chat_message === undefined) {\n                toastr.error(` '${result}'`, '[MVU]');\n                return;\n            }\n            _.range(0, chat_message.swipes?.length ?? 1).forEach(i => {\n                if (chat_message?.variables?.[i] === undefined) {\n                    return;\n                }\n                chat_message.variables[i].snapshot = true;\n            });\n            SillyTavern.saveChat().then(() =>\n                toastr.success(` ${message_id} `, '[MVU]')\n            );\n        },\n    },\n    {\n        name: '',\n        is_legacy: true,\n        function: async () => {\n            const result = (await SillyTavern.callGenericPopup(\n                '<h4> required/extensible </h4> ( 10  10 , -1 )<br><strong></strong>',\n                SillyTavern.POPUP_TYPE.INPUT,\n                '-1'\n            )) as string | undefined;\n            if (!result) {\n                return;\n            }\n            let message_id = parseInt(result);\n            if (message_id === -1) {\n                message_id = getLastMessageId();\n            }\n            if (isNaN(message_id) || SillyTavern.chat[message_id] === undefined) {\n                toastr.error(`,  '${result}'`, '[MVU]');\n                return;\n            }\n\n            const fnd_message = getLastValidMessageId(message_id);\n            if (fnd_message === -1) {\n                toastr.error(``, '[MVU]');\n                return;\n            }\n            //\n            const result2 = (await SillyTavern.callGenericPopup(\n                ` [${fnd_message}]`,\n                SillyTavern.POPUP_TYPE.INPUT,\n                fnd_message.toString()\n            )) as string | undefined;\n            if (!result2) {\n                return;\n            }\n            const recur_intial_message_id = parseInt(result2);\n            if (isNaN(recur_intial_message_id)) {\n                toastr.error(`,  '${result2}'`, '[MVU]');\n                return;\n            }\n\n            //\n            //\n            const recur_variable_data = klona(\n                getVariables({\n                    type: 'message',\n                    message_id: recur_intial_message_id,\n                })\n            );\n            if (\n                recur_variable_data === undefined ||\n                !_.has(recur_variable_data, 'stat_data') ||\n                !_.has(recur_variable_data, 'schema')\n            ) {\n                toastr.error(\n                    `,  '${result2}'`,\n                    '[MVU]'\n                );\n                return;\n            }\n            let counter = 0;\n            /**\n             *  (recur_intial_message_id, recur_end_message_id]\n             * @param recur_variable_data (MvuData)\n             * @param recur_intial_message_id id()\n             * @param message_id id()\n             */\n            for (let i = recur_intial_message_id + 1; i <= message_id; i++) {\n                const chat_message = SillyTavern.chat[i];\n                const index = i - (recur_intial_message_id + 1);\n\n                console.log(` ${index},  ${chat_message.mes}`);\n                // @ts-expect-error \n                await updateVariables(chat_message.mes, recur_variable_data);\n\n                counter++;\n                if (counter % 50 === 0) {\n                    toastr.info(\n                        ` (${counter} / ${message_id - recur_intial_message_id})`,\n                        `[MVU]`\n                    );\n                }\n            }\n\n            const updater = (data: Record<string, any>) => {\n                data.stat_data = recur_variable_data.stat_data;\n                data.display_data = recur_variable_data.display_data;\n                data.delta_data = recur_variable_data.delta_data;\n                data.initialized_lorebooks = recur_variable_data.initialized_lorebooks;\n                data.schema = recur_variable_data.schema;\n                return data;\n            };\n            await updateVariablesWith(updater, { type: 'message', message_id: message_id });\n\n            SillyTavern.saveChat().then(() =>\n                toastr.success(\n                    ` ${message_id}  ${counter} `,\n                    '[MVU]'\n                )\n            );\n            await setChatMessages(\n                [\n                    {\n                        message_id: message_id,\n                    },\n                ],\n                {\n                    refresh: 'affected',\n                }\n            );\n        },\n    },\n    {\n        name: '',\n        function: async () => {\n            const store = useDataStore();\n            if (store.settings. === 'AI') {\n                toastr.info(\n                    ``,\n                    '[MVU]',\n                    {\n                        timeOut: 3000,\n                    }\n                );\n                return;\n            } else if (\n                store.settings.. &&\n                !isFunctionCallingSupported()\n            ) {\n                toastr.info(\n                    `LLM`,\n                    '[MVU]',\n                    {\n                        timeOut: 3000,\n                    }\n                );\n                return;\n            } else if (!(await isExtraModelSupported())) {\n                toastr.info(\n                    ``,\n                    '[MVU]',\n                    {\n                        timeOut: 3000,\n                    }\n                );\n                return;\n            }\n            const last_msg = getLastMessageId();\n            const current_chatmsg = getChatMessages(last_msg).at(-1);\n            const current_chat_content = current_chatmsg?.message ?? '';\n            const begin_pos = current_chat_content.lastIndexOf('<UpdateVariable>');\n            if (begin_pos >= 0) {\n                //\n                const end_pos = current_chat_content.lastIndexOf('</UpdateVariable>');\n                let filtered_string = '';\n                if (end_pos === -1) {\n                    //\n                    filtered_string = current_chat_content.slice(0, begin_pos);\n                } else {\n                    // </UpdateVariable> \n                    filtered_string =\n                        current_chat_content.slice(0, begin_pos) +\n                        current_chat_content.slice(end_pos + 17);\n                }\n                //\n                await setChatMessages(\n                    [\n                        {\n                            message_id: last_msg,\n                            message: filtered_string,\n                        },\n                    ],\n                    {\n                        refresh: 'none',\n                    }\n                );\n                //\n                //\n                const last_valid_msg = getLastValidMessageId(last_msg);\n                if (last_valid_msg !== -1) {\n                    const last_variable_data = klona(\n                        getVariables({\n                            type: 'message',\n                            message_id: last_valid_msg,\n                        })\n                    );\n                    //\n                    await updateVariablesWith(\n                        variables => {\n                            _.set(variables, `stat_data`, last_variable_data?.stat_data);\n                            _.set(variables, `delta_data`, last_variable_data?.delta_data);\n                            _.set(variables, `display_data`, last_variable_data?.display_data);\n                            _.set(variables, `schema`, last_variable_data?.schema);\n                            return variables;\n                        },\n                        { type: 'message', message_id: last_msg }\n                    );\n                }\n            }\n            await onMessageReceived(last_msg, { force: true });\n            toastr.info(``, '[MVU]');\n        },\n    },\n    {\n        name: '',\n        is_legacy: true,\n        function: async () => {\n            const snapshot_interval = useDataStore().settings..;\n            const result = (await SillyTavern.callGenericPopup(\n                `<h4></h4> ( 10  10  [${snapshot_interval}] ) <br><strong>: </strong>`,\n                SillyTavern.POPUP_TYPE.INPUT,\n                '10'\n            )) as string | undefined;\n            if (!result) {\n                return;\n            }\n            const depth = parseInt(result);\n            if (isNaN(depth)) {\n                toastr.error(\n                    `,  '${result}'`,\n                    '[MVU]'\n                );\n                return;\n            }\n            SillyTavern.chat.slice(1, -depth - 1).forEach((chat_message, index) => {\n                if (chat_message.variables === undefined) {\n                    return;\n                }\n                chat_message.variables = _.range(0, chat_message.swipes?.length ?? 1).map(i => {\n                    if (chat_message?.variables?.[i] === undefined) {\n                        return {};\n                    }\n                    if (_.get(chat_message.variables[i], 'snapshot') === true)\n                        return chat_message.variables[i];\n                    if ((index + 1) % snapshot_interval === 0) {\n                        chat_message.variables[i].snapshot = true;\n                        console.log(` [${index + 1}] `);\n                        return chat_message.variables[i];\n                    }\n                    return _.omit(\n                        chat_message.variables[i],\n                        `stat_data`,\n                        `display_data`,\n                        `delta_data`,\n                        `schema`\n                    );\n                });\n            });\n            SillyTavern.saveChat().then(() =>\n                toastr.success(\n                    `,  ${depth} `,\n                    '[MVU]'\n                )\n            );\n        },\n    },\n];\n\nexport function initButtons() {\n    appendInexistentScriptButtons(buttons.map(button => ({ name: button.name, visible: false })));\n    buttons.forEach(button => {\n        eventOn(getButtonEvent(button.name), button.function);\n    });\n\n    return () => {};\n}\n","import { saveChatDebounced } from '@/util';\n\n/**  `[start_message_id, end_message_id]` ,  `snap_interval`  */\nexport function cleanupMessageVariables(\n    start_message_id: number,\n    end_message_id: number,\n    snap_interval: number\n) {\n    let counter = 0;\n    SillyTavern.chat\n        .slice(start_message_id, end_message_id + 1)\n        .forEach((chat_message, msg_index) => {\n            if (chat_message.variables === undefined) {\n                return;\n            }\n            //counter \n            let chat_flag = false;\n            chat_message.variables = _.range(0, chat_message.swipes?.length ?? 1).map(i => {\n                if (chat_message?.variables?.[i] === undefined) {\n                    return {};\n                }\n                if (_.get(chat_message?.variables?.[i], 'snapshot') === true) {\n                    return chat_message.variables[i];\n                }\n                if ((start_message_id + msg_index) % snap_interval === 0) {\n                    //snapshot \n                    // 50-> 70  350 \n                    _.set(chat_message, ['variables', i, 'snapshot'], true);\n                    return chat_message.variables[i];\n                }\n                if (!chat_flag) {\n                    chat_flag = true;\n                    ++counter;\n                }\n                return _.omit(\n                    chat_message.variables[i],\n                    `initialized_lorebooks`,\n                    `stat_data`,\n                    `display_data`,\n                    `delta_data`,\n                    `schema`\n                );\n            });\n        });\n    saveChatDebounced();\n    return counter;\n}\n","import { updateVariables } from '@/function/update_variables';\nimport { useDataStore } from '@/store';\nimport { getLastValidMessageId } from '@/util';\nimport { MvuData } from '@/variable_def';\nimport { klona } from 'klona';\n\nexport async function restoreVariables() {\n    const last_message_id = SillyTavern.chat.length - 1;\n\n    const store = useDataStore();\n    const {  } = store.settings.;\n\n    const last_10th_message_id = Math.max(1, last_message_id - );\n    const last_not_has_variable_message_id = SillyTavern.chat.findLastIndex(\n        chat_message =>\n            !_.has(chat_message, ['variables', chat_message.swipe_id ?? 0, 'stat_data']) ||\n            !_.has(chat_message, ['variables', chat_message.swipe_id ?? 0, 'schema'])\n    );\n    if (last_10th_message_id > last_not_has_variable_message_id) {\n        //  10 \n        console.info(` ${} `);\n        return;\n    }\n\n    const last_20th_message_id = Math.max(\n        1,\n        last_message_id - store.settings..\n    );\n    const snapshot_message_id = getLastValidMessageId(last_20th_message_id);\n    if (snapshot_message_id === -1) {\n        // \n        toastr.warning(\n            ` 0 ~ ${last_20th_message_id} , `,\n            '[MVU]'\n        );\n        return;\n    }\n    const snapshot_chat_message = SillyTavern.chat[snapshot_message_id];\n\n    // start/end  \"10\" \n    let message = SillyTavern.chat[snapshot_message_id + 1].mes;\n    let variables = klona(\n        snapshot_chat_message.variables![snapshot_chat_message.swipe_id ?? 0] as MvuData\n    );\n    for (let i = snapshot_message_id + 1; i <= last_not_has_variable_message_id; i++) {\n        message = SillyTavern.chat[i].mes;\n        //\n        await updateVariables(message, variables);\n        const chat_message = SillyTavern.chat[i];\n        const is_valid_message =\n            _.has(chat_message, ['variables', chat_message.swipe_id ?? 0, 'stat_data']) &&\n            _.has(chat_message, ['variables', chat_message.swipe_id ?? 0, 'schema']);\n\n        // message_id \n        //assert\n        //\n        if (i >= last_20th_message_id && !is_valid_message) {\n            await updateVariablesWith(\n                data => {\n                    data.initialized_lorebooks = variables.initialized_lorebooks;\n                    data.stat_data = variables.stat_data;\n                    if (variables.schema !== undefined) {\n                        data.schema = variables.schema;\n                    } else {\n                        _.unset(data, 'schema');\n                    }\n                    if (variables.display_data !== undefined) {\n                        _.set(data, 'display_data', variables.display_data);\n                    } else {\n                        _.unset(data, 'display_data');\n                    }\n                    if (variables.delta_data !== undefined) {\n                        _.set(data, 'delta_data', variables.delta_data);\n                    } else {\n                        _.unset(data, 'delta_data');\n                    }\n                    return data;\n                },\n                { type: 'message', message_id: i }\n            );\n            //variables \n            variables = klona(variables);\n        }\n        //  update \n    }\n}\n","import { checkAndRemoveChatVariables } from '@/function/cleanup/chat_variables';\nimport { cleanupMessageVariables } from '@/function/cleanup/cleanup_variables';\nimport { checkAndCleanupLegacyChat } from '@/function/cleanup/legacy_chat';\nimport { restoreVariables } from '@/function/cleanup/restore_variables';\nimport { useDataStore } from '@/store';\nimport { stoppableEventOn } from '@/util';\n\nexport function initCleanup() {\n    checkAndRemoveChatVariables();\n    checkAndCleanupLegacyChat();\n\n    const stop_list: Array<() => void> = [];\n    stop_list.push(\n        stoppableEventOn(tavern_events.MESSAGE_DELETED, _.debounce(restoreVariables, 2000))\n    );\n    stop_list.push(\n        stoppableEventOn(tavern_events.MESSAGE_RECEIVED, message_id => {\n            const store = useDataStore();\n            if (!store.settings..) {\n                return;\n            }\n            if (SillyTavern.chat.length % 5 !== 0) {\n                return; //  5 \n            }\n            const old_message_id = message_id - store.settings..; //user\n            if (old_message_id > 0) {\n                const counter = cleanupMessageVariables(\n                    //  user * 2\n                    Math.max(\n                        1,\n                        old_message_id - 2 - store.settings.. * 2\n                    ), //  MESSAGE_SENT\n                    old_message_id,\n                    store.settings..\n                );\n                console.log(`[MVU] ${counter} `);\n            }\n        })\n    );\n\n    return () => {\n        stop_list.forEach(stop => stop());\n    };\n}\n","import { useDataStore } from '@/store';\n\nexport function checkAndRemoveChatVariables() {\n    const store = useDataStore();\n    if (store.settings.. === false) {\n        updateVariablesWith(\n            variables => {\n                _.unset(variables, 'initialized_lorebooks');\n                _.unset(variables, 'stat_data');\n                _.unset(variables, 'schema');\n                _.unset(variables, 'display_data');\n                _.unset(variables, 'delta_data');\n                return variables;\n            },\n            { type: 'chat' }\n        );\n    }\n}\n","import { cleanupMessageVariables } from '@/function/cleanup/cleanup_variables';\nimport { useDataStore } from '@/store';\n\nexport async function checkAndCleanupLegacyChat() {\n    const store = useDataStore();\n    if (\n        !store.settings.. ||\n        SillyTavern.chat.length <= store.settings.. + 5 ||\n        !_.has(SillyTavern.chat, [1, 'variables', 0, 'stat_data']) ||\n        _.has(SillyTavern.chat, [1, 'variables', 0, 'ignore_cleanup'])\n    ) {\n        return;\n    }\n\n    const result = await SillyTavern.callGenericPopup(\n        ', ?()',\n        SillyTavern.POPUP_TYPE.CONFIRM,\n        '',\n        {\n            okButton: '',\n            cancelButton: '',\n            customButtons: [''],\n        }\n    );\n\n    if (\n        result === SillyTavern.POPUP_RESULT.CANCELLED ||\n        result === SillyTavern.POPUP_RESULT.NEGATIVE\n    ) {\n        _.set(SillyTavern.chat, [1, 'variables', 0, 'ignore_cleanup'], true);\n        return;\n    }\n    toastr.info(\n        `${result === SillyTavern.POPUP_RESULT.CUSTOM1 ? '' : ''}...`,\n        '[MVU]'\n    );\n\n    if (result === SillyTavern.POPUP_RESULT.CUSTOM1 || result === 2) {\n        try {\n            const body = {\n                is_group: false,\n                avatar_url: SillyTavern.characters[Number(SillyTavern.characterId)]?.avatar,\n                file: `${SillyTavern.getCurrentChatId()}.jsonl`,\n                exportfilename: `${SillyTavern.getCurrentChatId()}.jsonl`,\n                format: 'jsonl',\n            };\n\n            const response = await fetch('/api/chats/export', {\n                method: 'POST',\n                body: JSON.stringify(body),\n                headers: SillyTavern.getRequestHeaders(),\n            });\n            const data = await response.json();\n            if (!response.ok) {\n                toastr.error(`: ${data.message}`, '[MVU]');\n                return;\n            }\n            toastr.success(data.message);\n            const serialized = data.result;\n            const blob = new Blob([serialized], { type: 'text/plain' });\n            const url = URL.createObjectURL(blob);\n            const link = document.createElement('a');\n            link.href = url;\n            link.download = body.exportfilename;\n            link.click();\n            URL.revokeObjectURL(url);\n        } catch (error) {\n            toastr.error(`: ${error}`, '[MVU]');\n            return;\n        }\n    }\n\n    const counter = cleanupMessageVariables(\n        1, //0 \n        SillyTavern.chat.length - 1 - store.settings..,\n        store.settings..\n    );\n    if (counter > 0) {\n        toastr.info(` ${counter} `, '[MVU]', {\n            timeOut: 1000,\n        });\n    }\n}\n","import { loadInitVarData } from '@/function/initvar/variable_init';\nimport { updateVariable, updateVariables } from '@/function/update_variables';\nimport { isValueWithDescription, variable_events } from '@/variable_def';\nimport { useDataStore } from '../../store';\nfunction createMvu() {\n    const mvu = {\n        events: variable_events,\n        /**\n         * ,  mvu  MvuData\n         *\n         * @param  \n         *   - `type?:'message'|'chat'|'character'|'global'`:  (`message`) (`'chat'`) (`'character'`)  (`'global'`) ,  `'chat'`\n         *   - `message_id?:number|'latest'`:  `type`  `'message'` , , ,  `-1` ;  `'latest'`\n         *   - `script_id?:string`:  `type`  `'script'` ,  ID; ,  `getScriptId()`  ID\n         *\n         * @returns MvuData \n         *\n         * @example\n         * //  mvu \n         * const message_data = Mvu.getMvuData({ type: 'message', message_id: 'latest' });\n         *\n         * //  iframe  iframe  mvu \n         * const message_data = Mvu.getMvuData({ type: 'message', message_id: getCurrentMessageId() });\n         */\n        getMvuData: function (options) {\n            return getVariables(options);\n        },\n        /**\n         *  mvu  `mvu_data` ( parseMessages ,  mvu  mvu !)\n         *\n         * @param variables \n         * @param option \n         *   - `type?:'message'|'chat'|'character'|'global'`:  (`message`) (`'chat'`) (`'character'`)  (`'global'`) ,  `'chat'`\n         *   - `message_id?:number|'latest'`:  `type`  `'message'` , , ,  `-1` ;  `'latest'`\n         *   - `script_id?:string`:  `type`  `'script'` ,  ID; ,  `getScriptId()`  ID\n         *\n         * @example\n         * //  30\n         * const mvu_data = Mvu.getMvuData({ type: 'message', message_id: 'latest' });\n         * _.set(mvu_data, 'stat_data...', 30);\n         * await Mvu.replaceMvuData(mvu_data, { type: 'message', message_id: 'latest' });\n         */\n        replaceMvuData: function (mvu_data, options) {\n            /**  replaceVariables ,  Promise */\n            return replaceVariables(mvu_data, options);\n        },\n        /**\n         *  (`_.set`)  `message`,  `old_data`  mvu \n         *\n         * @param message  _.set() \n         * @param old_data  MvuData \n         *\n         * @returns  MvuData,  `undefined`\n         *\n         * @example\n         * //  30\n         * const old_data = Mvu.getMvuData({ type: 'message', message_id: 'latest' });\n         * const new_data = await Mvu.parseMessage(\"_.set('..', 30); // \", old_data);\n         * await Mvu.replaceMvuData(new_data, { type: 'message', message_id: 'latest' });\n         */\n        parseMessage: async function (message, old_data) {\n            const result = klona(old_data);\n            await updateVariables(message, result);\n            return result;\n        },\n        /** @deprecated */\n        getCurrentMvuData: function () {\n            const variables = getVariables({ type: 'message', message_id: getCurrentMessageId() });\n            return variables;\n        },\n        /** @deprecated */\n        replaceCurrentMvuData: async function (mvu_data) {\n            await replaceVariables(mvu_data, {\n                type: 'message',\n                message_id: getCurrentMessageId(),\n            });\n        },\n        /** @deprecated */\n        reloadInitVar: async function (mvu_data) {\n            return await loadInitVarData(mvu_data);\n        },\n        /** @deprecated */\n        setMvuVariable: async function (mvu_data, path, new_value, { reason = '', is_recursive = false } = {}) {\n            return await updateVariable(mvu_data.stat_data, path, new_value, reason, is_recursive);\n        },\n        /** @deprecated */\n        getMvuVariable: function (mvu_data, path, { category = 'stat', default_value = undefined, } = {}) {\n            let data;\n            switch (category) {\n                case 'stat':\n                    data = mvu_data.stat_data;\n                    break;\n                case 'display':\n                    data = mvu_data.display_data;\n                    break;\n                case 'delta':\n                    data = mvu_data.delta_data;\n                    break;\n            }\n            const value = _.get(data, path, default_value);\n            /*  VWD */\n            if (isValueWithDescription(value)) {\n                return value[0];\n            }\n            /*  */\n            return value;\n        },\n        /** @deprecated */\n        getRecordFromMvuData: function (mvu_data, category) {\n            let data = undefined;\n            switch (category) {\n                case 'stat':\n                    data = mvu_data.stat_data;\n                    break;\n                case 'display':\n                    data = mvu_data.display_data;\n                    break;\n                case 'delta':\n                    data = mvu_data.delta_data;\n                    break;\n            }\n            return data;\n        },\n        /**\n         * @brief \n         */\n        isDuringExtraAnalysis: () => useDataStore().runtimes.is_during_extra_analysis,\n    };\n    return mvu;\n}\nexport function initGlobals() {\n    const mvu = createMvu();\n    _.set(window, 'Mvu', mvu);\n    _.set(window.parent, 'Mvu', mvu);\n    eventEmit('global_Mvu_initialized');\n    return () => {\n        deleteVariable('extra_analysis', { type: 'global' });\n        _.unset(window.parent, 'Mvu');\n    };\n}\n","import { useDataStore } from '@/store';\n\nfunction notify(title: string, message: string) {\n    toastr.success(message, title, { timeOut: 10000 });\n}\n\nexport function initNotification() {\n    const store = useDataStore();\n\n    if (store.settings.internal. === false) {\n        notify(\n            '[MVU]',\n            '-, '\n        );\n        store.settings.internal. = true;\n    }\n    if (store.settings.internal. === false) {\n        notify(\n            '[MVU]',\n            'MVU ;  `` '\n        );\n        store.settings.internal. = true;\n    }\n    if (store.settings.internal.API === false) {\n        notify(\n            '[MVU]API',\n            'MVU  API  token  >= 4.0.14'\n        );\n        store.settings.internal.API = true;\n    }\n\n    if (store.settings.internal. === false) {\n        notify(\n            '[MVU]',\n            'MVU '\n        );\n        store.settings.internal. = true;\n        store.settings.. = true;\n    }\n\n    if (store.settings.internal. === false) {\n        notify(\n            '[MVU]',\n            ''\n        );\n        store.settings.internal. = true;\n    }\n\n    if (store.settings.internal. === false) {\n        notify(\n            '[MVU]',\n            '--'\n        );\n        store.settings.internal. = true;\n    }\n\n    if (store.settings..MVU) {\n        toastr.info(\n            `: ${__BUILD_DATE__ ?? 'Unknown'} (${__COMMIT_ID__ ?? 'Unknown'})`,\n            '[MVU]'\n        );\n    }\n\n    return () => {};\n}\n","import { isExtraModelSupported } from '@/function/is_extra_model_supported';\nimport { isFunctionCallingSupported } from '@/function/is_function_calling_supported';\nimport { useDataStore } from '@/store';\nimport { PLOT_REGEX, UPDATE_REGEX } from '@/variable_def';\n\nexport async function filterEntries(lores: {\n    globalLore: Record<string, any>[];\n    characterLore: Record<string, any>[];\n    chatLore: Record<string, any>[];\n    personaLore: Record<string, any>[];\n}) {\n    const store = useDataStore();\n    store.runtimes.unsupported_warnings = '';\n\n    //lore [mvu_update] \n    if (store.settings. === 'AI') {\n        return;\n    }\n    if (store.settings.. && !isFunctionCallingSupported()) {\n        toastr.warning(\n            '/API  `AI`',\n            '[MVU]',\n            {\n                timeOut: 2000,\n            }\n        );\n        return;\n    }\n\n    const supported_worlds = new Set<string>();\n    const remove_and_check = (lore: Record<string, any>[]) => {\n        //  [mvu_plot]/[mvu_update]  [mvu_plot]\n        _.remove(lore, entry => {\n            const is_update_regex = UPDATE_REGEX.test(entry.comment);\n            const is_plot_regex = PLOT_REGEX.test(entry.comment);\n            if (is_update_regex || is_plot_regex) {\n                supported_worlds.add(entry.world);\n            }\n            return store.runtimes.is_during_extra_analysis\n                ? is_plot_regex && !is_update_regex\n                : !is_plot_regex && is_update_regex;\n        });\n    };\n    remove_and_check(lores.characterLore);\n    //\n    //\n    //\n    const is_extra_model_supported = await isExtraModelSupported();\n    if (!is_extra_model_supported) {\n        return;\n    }\n    remove_and_check(lores.globalLore);\n    remove_and_check(lores.chatLore);\n    remove_and_check(lores.personaLore);\n\n    const process_unsupported_worlds = (lore: Record<string, any>[]) => {\n        let removed_entries: Record<string, any>[] = [];\n        if (store.runtimes.is_during_extra_analysis) {\n            removed_entries = _.remove(lore, entry => !supported_worlds.has(entry.world));\n        } else {\n            //\n            removed_entries = _.filter(lore, entry => !supported_worlds.has(entry.world));\n        }\n        return removed_entries.map(entry => entry.world);\n    };\n    const removed_worlds = _(\n        _.concat(\n            process_unsupported_worlds(lores.globalLore),\n            process_unsupported_worlds(lores.chatLore),\n            process_unsupported_worlds(lores.personaLore)\n        )\n    )\n        .sort()\n        .sortedUniq()\n        .value();\n\n    store.runtimes.unsupported_warnings = Array.from(removed_worlds).join(', ');\n}\n","import { useDataStore } from '@/store';\n\nexport function filterPrompts({ messages }: { messages: SillyTavern.SendingMessage[] }) {\n    const store = useDataStore();\n\n    const text_messages = messages.filter(message => typeof message.content === 'string') as {\n        role: string;\n        content: string;\n    }[];\n\n    if (store.settings. === '' && !store.runtimes.is_during_extra_analysis) {\n        text_messages\n            .filter(message => message.content.includes('<UpdateVariable>'))\n            .forEach(\n                message =>\n                    (message.content = message.content.replaceAll(\n                        /\\n<(update(?:variable)?|variableupdate)>(?:(?!<\\1>).)*<\\/\\1?>/gis,\n                        ''\n                    ))\n            );\n    }\n    text_messages\n        .filter(message => message.content.includes('<StatusPlaceHolderImpl/>'))\n        .forEach(\n            message =>\n                (message.content = message.content.replaceAll('\\n<StatusPlaceHolderImpl/>', ''))\n        );\n}\n","import { overrideToolRequest, registerFunction } from '@/function/function_call';\nimport { filterEntries } from '@/function/request/filter_entries';\nimport { filterPrompts } from '@/function/request/filter_prompts';\nimport { stoppableEventOn } from '@/util';\n\nexport function initRequest() {\n    const stop_list: Array<() => void> = [];\n    stop_list.push(registerFunction());\n\n    stop_list.push(stoppableEventOn('worldinfo_entries_loaded', filterEntries));\n    stop_list.push(\n        stoppableEventOn(tavern_events.CHAT_COMPLETION_SETTINGS_READY, overrideToolRequest)\n    );\n    stop_list.push(stoppableEventOn(tavern_events.CHAT_COMPLETION_SETTINGS_READY, filterPrompts));\n\n    return () => {\n        stop_list.forEach(stop => stop());\n    };\n}\n","import { defineComponent as _defineComponent } from 'vue';\nimport { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, renderSlot as _renderSlot, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = { class: \"mvu-section flex-container flexFlowColumn\" };\nconst _hoisted_2 = { class: \"mvu-section__title\" };\nconst _hoisted_3 = { class: \"mvu-section__content flex-container flexFlowColumn\" };\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'Section',\n    props: {\n        label: {}\n    },\n    setup(__props) {\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createElementVNode(\"strong\", null, [\n                        _createElementVNode(\"span\", null, _toDisplayString(__props.label), 1 /* TEXT */)\n                    ]),\n                    _renderSlot(_ctx.$slots, \"label-suffix\")\n                ]),\n                _createElementVNode(\"div\", _hoisted_3, [\n                    _renderSlot(_ctx.$slots, \"content\")\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./Section.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Section.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./Section.vue?vue&type=style&index=0&id=2432cb82&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-2432cb82\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, withCtx as _withCtx, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = { class: \"mvu-button-wrap\" };\nconst _hoisted_2 = [\"onClick\"];\nimport { buttons } from '@/button';\nimport Section from '@/panel/component/Section.vue';\nimport { useDataStore } from '@/store';\nimport { computed } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'Button',\n    setup(__props) {\n        const store = useDataStore();\n        const visible_buttons = computed(() => buttons.filter(button => !(button.is_legacy ?? false) || store.settings.. === true));\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createBlock(Section, { label: \"\" }, {\n                content: _withCtx(() => [\n                    _createElementVNode(\"div\", _hoisted_1, [\n                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(visible_buttons.value, (button) => {\n                            return (_openBlock(), _createElementBlock(\"div\", {\n                                key: button.name,\n                                class: \"menu_button menu_button_icon interactable\",\n                                tabindex: \"0\",\n                                role: \"button\",\n                                onClick: button.function\n                            }, _toDisplayString(button.name), 9 /* TEXT, PROPS */, _hoisted_2));\n                        }), 128 /* KEYED_FRAGMENT */))\n                    ])\n                ]),\n                _: 1 /* STABLE */\n            }));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./Button.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Button.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./Button.vue?vue&type=style&index=0&id=d190cd26&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-d190cd26\"]])\n\nexport default __exports__","import { useModel as _useModel, defineComponent as _defineComponent } from 'vue';\nimport { vModelCheckbox as _vModelCheckbox, createElementVNode as _createElementVNode, withDirectives as _withDirectives, renderSlot as _renderSlot, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = { class: \"checkbox_label\" };\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'Checkbox',\n    props: {\n        \"modelValue\": { type: Boolean, ...{ required: true } },\n        \"modelModifiers\": {},\n    },\n    emits: [\"update:modelValue\"],\n    setup(__props) {\n        const model = _useModel(__props, \"modelValue\");\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"label\", _hoisted_1, [\n                _withDirectives(_createElementVNode(\"input\", {\n                    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((model).value = $event)),\n                    type: \"checkbox\"\n                }, null, 512 /* NEED_PATCH */), [\n                    [_vModelCheckbox, model.value]\n                ]),\n                _renderSlot(_ctx.$slots, \"default\")\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./Checkbox.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Checkbox.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, renderSlot as _renderSlot, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = { class: \"mvu-details\" };\nconst _hoisted_2 = { class: \"mvu-details__summary\" };\nconst _hoisted_3 = { class: \"mvu-details__content\" };\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'Detail',\n    props: {\n        title: {}\n    },\n    setup(__props) {\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"details\", _hoisted_1, [\n                _createElementVNode(\"summary\", _hoisted_2, _toDisplayString(__props.title), 1 /* TEXT */),\n                _createElementVNode(\"div\", _hoisted_3, [\n                    _renderSlot(_ctx.$slots, \"default\")\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./Detail.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Detail.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./Detail.vue?vue&type=style&index=0&id=47f2b2e0&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-47f2b2e0\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, renderSlot as _renderSlot, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = { class: \"mvu-field flex-container flexFlowColumn\" };\nconst _hoisted_2 = { class: \"mvu-field__label\" };\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'Field',\n    props: {\n        label: {}\n    },\n    setup(__props) {\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createElementVNode(\"label\", _hoisted_2, [\n                    _createElementVNode(\"span\", null, _toDisplayString(__props.label), 1 /* TEXT */),\n                    _renderSlot(_ctx.$slots, \"label-suffix\")\n                ]),\n                _renderSlot(_ctx.$slots, \"default\")\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./Field.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Field.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./Field.vue?vue&type=style&index=0&id=1bd30ada&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-1bd30ada\"]])\n\nexport default __exports__","/* unplugin-vue-components disabled */import script from \"./Cleanup.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Cleanup.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, createElementVNode as _createElementVNode, withCtx as _withCtx, createVNode as _createVNode, vModelText as _vModelText, withDirectives as _withDirectives, openBlock as _openBlock, createBlock as _createBlock } from \"vue\";\nimport Checkbox from '@/panel/component/Checkbox.vue';\nimport Detail from '@/panel/component/Detail.vue';\nimport Field from '@/panel/component/Field.vue';\nimport Section from '@/panel/component/Section.vue';\nimport { useDataStore } from '@/store';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'Cleanup',\n    setup(__props) {\n        const store = useDataStore();\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createBlock(Section, { label: \"\" }, {\n                content: _withCtx(() => [\n                    _createVNode(Checkbox, {\n                        modelValue: _unref(store).settings..,\n                        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((_unref(store).settings..) = $event))\n                    }, {\n                        default: _withCtx(() => [...(_cache[4] || (_cache[4] = [\n                                _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n                            ]))]),\n                        _: 1 /* STABLE */\n                    }, 8 /* PROPS */, [\"modelValue\"]),\n                    _createVNode(Detail, { title: \"\" }, {\n                        default: _withCtx(() => [\n                            _createVNode(Field, {\n                                id: \"mvu_snapshot_keep_interval\",\n                                label: \"\"\n                            }, {\n                                default: _withCtx(() => [\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        id: \"mvu_snapshot_keep_interval\",\n                                        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => ((_unref(store).settings..) = $event)),\n                                        type: \"number\",\n                                        min: \"1\",\n                                        step: \"1\",\n                                        class: \"text_pole\",\n                                        placeholder: \"50\"\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [\n                                            _vModelText,\n                                            _unref(store).settings..,\n                                            void 0,\n                                            { number: true }\n                                        ]\n                                    ])\n                                ]),\n                                _: 1 /* STABLE */\n                            }),\n                            _createVNode(Field, {\n                                id: \"mvu_keep_recent_floors\",\n                                label: \"\"\n                            }, {\n                                default: _withCtx(() => [\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        id: \"mvu_keep_recent_floors\",\n                                        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event) => ((_unref(store).settings..) = $event)),\n                                        type: \"number\",\n                                        min: \"1\",\n                                        step: \"1\",\n                                        class: \"text_pole\",\n                                        placeholder: \"20\"\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [\n                                            _vModelText,\n                                            _unref(store).settings..,\n                                            void 0,\n                                            { number: true }\n                                        ]\n                                    ])\n                                ]),\n                                _: 1 /* STABLE */\n                            }),\n                            _createVNode(Field, {\n                                id: \"mvu_restore_recent_floors\",\n                                label: \"\"\n                            }, {\n                                default: _withCtx(() => [\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        id: \"mvu_restore_recent_floors\",\n                                        \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event) => ((_unref(store).settings..) = $event)),\n                                        type: \"number\",\n                                        min: \"1\",\n                                        step: \"1\",\n                                        class: \"text_pole\",\n                                        placeholder: \"10\"\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [\n                                            _vModelText,\n                                            _unref(store).settings..,\n                                            void 0,\n                                            { number: true }\n                                        ]\n                                    ])\n                                ]),\n                                _: 1 /* STABLE */\n                            })\n                        ]),\n                        _: 1 /* STABLE */\n                    })\n                ]),\n                _: 1 /* STABLE */\n            }));\n        };\n    }\n});\n","import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nimport { showHelpPopup } from '@/util';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'HelpIcon',\n    props: {\n        help: {}\n    },\n    setup(__props) {\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"i\", {\n                class: \"fa-solid fa-circle-question fa-sm note-link-span mvu-help-icon\",\n                role: \"button\",\n                tabindex: \"0\",\n                \"aria-label\": \"\",\n                onClick: _cache[0] || (_cache[0] = ($event) => (_unref(showHelpPopup)(__props.help)))\n            }));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./HelpIcon.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./HelpIcon.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./HelpIcon.vue?vue&type=style&index=0&id=2eeacd15&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-2eeacd15\"]])\n\nexport default __exports__","/* unplugin-vue-components disabled */import script from \"./Compatibility.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Compatibility.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, createElementVNode as _createElementVNode, createVNode as _createVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock } from \"vue\";\nimport Checkbox from '@/panel/component/Checkbox.vue';\nimport HelpIcon from '@/panel/component/HelpIcon.vue';\nimport Section from '@/panel/component/Section.vue';\nimport { useDataStore } from '@/store';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'Compatibility',\n    setup(__props) {\n        const store = useDataStore();\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createBlock(Section, { label: \"\" }, {\n                content: _withCtx(() => [\n                    _createVNode(Checkbox, {\n                        modelValue: _unref(store).settings..,\n                        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((_unref(store).settings..) = $event))\n                    }, {\n                        default: _withCtx(() => [\n                            _cache[2] || (_cache[2] = _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)),\n                            _createVNode(HelpIcon, { help: \", . , .\" })\n                        ]),\n                        _: 1 /* STABLE */\n                    }, 8 /* PROPS */, [\"modelValue\"]),\n                    _createVNode(Checkbox, {\n                        modelValue: _unref(store).settings..,\n                        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => ((_unref(store).settings..) = $event))\n                    }, {\n                        default: _withCtx(() => [...(_cache[3] || (_cache[3] = [\n                                _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n                            ]))]),\n                        _: 1 /* STABLE */\n                    }, 8 /* PROPS */, [\"modelValue\"])\n                ]),\n                _: 1 /* STABLE */\n            }));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./Notification.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Notification.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, createElementVNode as _createElementVNode, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock } from \"vue\";\nimport Checkbox from '@/panel/component/Checkbox.vue';\nimport Section from '@/panel/component/Section.vue';\nimport { useDataStore } from '@/store';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'Notification',\n    setup(__props) {\n        const store = useDataStore();\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createBlock(Section, { label: \"\" }, {\n                content: _withCtx(() => [\n                    _createVNode(Checkbox, {\n                        modelValue: _unref(store).settings..MVU,\n                        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((_unref(store).settings..MVU) = $event))\n                    }, {\n                        default: _withCtx(() => [...(_cache[4] || (_cache[4] = [\n                                _createElementVNode(\"span\", null, \"MVU\", -1 /* CACHED */)\n                            ]))]),\n                        _: 1 /* STABLE */\n                    }, 8 /* PROPS */, [\"modelValue\"]),\n                    _createVNode(Checkbox, {\n                        modelValue: _unref(store).settings..,\n                        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => ((_unref(store).settings..) = $event))\n                    }, {\n                        default: _withCtx(() => [...(_cache[5] || (_cache[5] = [\n                                _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n                            ]))]),\n                        _: 1 /* STABLE */\n                    }, 8 /* PROPS */, [\"modelValue\"]),\n                    _createVNode(Checkbox, {\n                        modelValue: _unref(store).settings..,\n                        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event) => ((_unref(store).settings..) = $event))\n                    }, {\n                        default: _withCtx(() => [...(_cache[6] || (_cache[6] = [\n                                _createElementVNode(\"span\", null, \"/\", -1 /* CACHED */)\n                            ]))]),\n                        _: 1 /* STABLE */\n                    }, 8 /* PROPS */, [\"modelValue\"]),\n                    _createVNode(Checkbox, {\n                        modelValue: _unref(store).settings..,\n                        \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event) => ((_unref(store).settings..) = $event))\n                    }, {\n                        default: _withCtx(() => [...(_cache[7] || (_cache[7] = [\n                                _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n                            ]))]),\n                        _: 1 /* STABLE */\n                    }, 8 /* PROPS */, [\"modelValue\"])\n                ]),\n                _: 1 /* STABLE */\n            }));\n        };\n    }\n});\n","import { useModel as _useModel, mergeModels as _mergeModels, defineComponent as _defineComponent } from 'vue';\nimport { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, withDirectives as _withDirectives } from \"vue\";\nconst _hoisted_1 = [\"value\"];\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'Select',\n    props: /*@__PURE__*/ _mergeModels({\n        options: {}\n    }, {\n        \"modelValue\": { required: true },\n        \"modelModifiers\": {},\n    }),\n    emits: [\"update:modelValue\"],\n    setup(__props) {\n        const model = _useModel(__props, \"modelValue\");\n        return (_ctx, _cache) => {\n            return _withDirectives((_openBlock(), _createElementBlock(\"select\", {\n                \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((model).value = $event)),\n                class: \"text_pole\"\n            }, [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.options, (option) => {\n                    return (_openBlock(), _createElementBlock(\"option\", {\n                        key: option,\n                        value: option\n                    }, _toDisplayString(option), 9 /* TEXT, PROPS */, _hoisted_1));\n                }), 128 /* KEYED_FRAGMENT */))\n            ], 512 /* NEED_PATCH */)), [\n                [_vModelSelect, model.value]\n            ]);\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./Select.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Select.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","// Module\nvar code = `<h1></h1> <p>, .</p> <h2> AI </h2> <p> AI,  AI , .</p> <h2></h2> <p> AI :  AI ,  AI .</p> <p>, ,  AI:</p> <ul> <li> <code>[mvu_plot]</code>  AI;</li> <li> <code>[mvu_update]</code>  AI;</li> <li> <code>[mvu_plot]</code>  <code>[mvu_update]</code>  AI.</li> </ul> <p>,  MVU  <code>[mvu_plot]</code>  <code>[mvu_update]</code>.</p> <p> <a href=\"https://stagedog.github.io/%E7%BB%9C%E7%BB%9C/%E6%95%99%E7%A8%8B/%E6%89%8B%E5%86%99mvu%E5%8F%98%E9%87%8F%E5%8D%A1/\">MVU </a>, .</p> `;\n// Exports\nexport default code;","import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, createVNode as _createVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = {\n    key: 0,\n    class: \"mvu-warning\"\n};\nconst _hoisted_2 = { class: \"mvu-warning__text\" };\nimport HelpIcon from '@/panel/component/HelpIcon.vue';\nimport Select from '@/panel/component/Select.vue';\nimport update_method_help from '@/panel/update_method.md';\nimport { useDataStore } from '@/store';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'Method',\n    setup(__props) {\n        const store = useDataStore();\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(_Fragment, null, [\n                _createVNode(Select, {\n                    modelValue: _unref(store).settings.,\n                    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((_unref(store).settings.) = $event)),\n                    options: ['AI', '']\n                }, null, 8 /* PROPS */, [\"modelValue\"]),\n                (_unref(store).runtimes.unsupported_warnings !== '' && _unref(store).settings. === '')\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                        _cache[1] || (_cache[1] = _createElementVNode(\"span\", { class: \"mvu-warning__icon\" }, \"\", -1 /* CACHED */)),\n                        _createElementVNode(\"span\", _hoisted_2, [\n                            _createTextVNode(\"  [\" + _toDisplayString(_unref(store).runtimes.unsupported_warnings) + \"] ,  [mvu_plot]  ( AI AI). \", 1 /* TEXT */),\n                            _createVNode(HelpIcon, { help: _unref(update_method_help) }, null, 8 /* PROPS */, [\"help\"])\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true)\n            ], 64 /* STABLE_FRAGMENT */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./Method.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Method.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./Method.vue?vue&type=style&index=0&id=7327cadd&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-7327cadd\"]])\n\nexport default __exports__","// Module\nvar code = `<h1></h1> <p> AI , .</p> <p><code></code>, ; //<code></code>, , .</p> `;\n// Exports\nexport default code;","/* unplugin-vue-components disabled */import script from \"./Prompt.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Prompt.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, createVNode as _createVNode, withCtx as _withCtx, createElementVNode as _createElementVNode, openBlock as _openBlock, createBlock as _createBlock } from \"vue\";\nimport Checkbox from '@/panel/component/Checkbox.vue';\nimport Detail from '@/panel/component/Detail.vue';\nimport Field from '@/panel/component/Field.vue';\nimport Select from '@/panel/component/Select.vue';\nimport prompt_break_help from '@/panel/update/prompt_break.md';\nimport prompt_toolcall_help from '@/panel/update/prompt_toolcall.md';\nimport { useDataStore } from '@/store';\nimport { watch } from 'vue';\nimport HelpIcon from '../component/HelpIcon.vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'Prompt',\n    setup(__props) {\n        const store = useDataStore();\n        watch(() => store.settings.., value => {\n            if (value === true) {\n                if (!SillyTavern.ToolManager.isToolCallingSupported()) {\n                    toastr.error(\" API  () ''\", \"[MVU]''\", {\n                        timeOut: 5000,\n                    });\n                    store.settings.. = false;\n                }\n                if (SillyTavern.chatCompletionSettings.function_calling === false) {\n                    toastr.error(\"''\", \"[MVU]''\", {\n                        timeOut: 5000,\n                    });\n                    store.settings.. = false;\n                }\n            }\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createBlock(Detail, { title: \"\" }, {\n                default: _withCtx(() => [\n                    _createVNode(Field, { label: \"\" }, {\n                        \"label-suffix\": _withCtx(() => [\n                            _createVNode(HelpIcon, { help: _unref(prompt_break_help) }, null, 8 /* PROPS */, [\"help\"])\n                        ]),\n                        default: _withCtx(() => [\n                            _createVNode(Select, {\n                                modelValue: _unref(store).settings..,\n                                \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((_unref(store).settings..) = $event)),\n                                options: ['', '']\n                            }, null, 8 /* PROPS */, [\"modelValue\"])\n                        ]),\n                        _: 1 /* STABLE */\n                    }),\n                    _createVNode(Field, { label: \"\" }, {\n                        \"label-suffix\": _withCtx(() => [\n                            _createVNode(HelpIcon, { help: _unref(prompt_toolcall_help) }, null, 8 /* PROPS */, [\"help\"])\n                        ]),\n                        default: _withCtx(() => [\n                            _createVNode(Checkbox, {\n                                modelValue: _unref(store).settings..,\n                                \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => ((_unref(store).settings..) = $event))\n                            }, {\n                                default: _withCtx(() => [...(_cache[3] || (_cache[3] = [\n                                        _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n                                    ]))]),\n                                _: 1 /* STABLE */\n                            }, 8 /* PROPS */, [\"modelValue\"])\n                        ]),\n                        _: 1 /* STABLE */\n                    }),\n                    _createVNode(Field, { label: \"\" }, {\n                        \"label-suffix\": _withCtx(() => [\n                            _createVNode(HelpIcon, { help: \",  AI , \" })\n                        ]),\n                        default: _withCtx(() => [\n                            _createVNode(Checkbox, {\n                                modelValue: _unref(store).settings..,\n                                \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event) => ((_unref(store).settings..) = $event))\n                            }, {\n                                default: _withCtx(() => [...(_cache[4] || (_cache[4] = [\n                                        _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n                                    ]))]),\n                                _: 1 /* STABLE */\n                            }, 8 /* PROPS */, [\"modelValue\"])\n                        ]),\n                        _: 1 /* STABLE */\n                    })\n                ]),\n                _: 1 /* STABLE */\n            }));\n        };\n    }\n});\n","// Module\nvar code = `<h1></h1> <h2></h2> <p> AI  MVU .</p> <p> @  Gemini/Claude</p> <h2></h2> <p> AI , .</p> <p> AI , , .</p> `;\n// Exports\nexport default code;","import { useModel as _useModel, mergeModels as _mergeModels, defineComponent as _defineComponent } from 'vue';\nimport { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode } from \"vue\";\nconst _hoisted_1 = { class: \"mvu-range-number\" };\nconst _hoisted_2 = [\"type\", \"min\", \"max\", \"step\", \"disabled\", \"value\"];\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'RangeNumber',\n    props: /*@__PURE__*/ _mergeModels({\n        min: {},\n        max: {},\n        step: {},\n        disabled: { type: Boolean }\n    }, {\n        \"modelValue\": { required: true },\n        \"modelModifiers\": {},\n    }),\n    emits: [\"update:modelValue\"],\n    setup(__props) {\n        const model = _useModel(__props, \"modelValue\");\n        const props = __props;\n        function clamp(value) {\n            return _.clamp(value, props.min, props.max);\n        }\n        function onInput(event) {\n            const target = event.target;\n            const value = Number(target?.value);\n            if (Number.isFinite(value)) {\n                model.value = clamp(value);\n            }\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                (_openBlock(), _createElementBlock(_Fragment, null, _renderList(['range', 'number'], (type) => {\n                    return _createElementVNode(\"input\", {\n                        key: type,\n                        class: _normalizeClass([\n                            `mvu-range-number__${type}`,\n                            type === 'number' ? 'text_pole' : '',\n                        ]),\n                        type: type,\n                        min: __props.min,\n                        max: __props.max,\n                        step: __props.step,\n                        disabled: __props.disabled,\n                        value: model.value,\n                        onInput: onInput\n                    }, null, 42 /* CLASS, PROPS, NEED_HYDRATION */, _hoisted_2);\n                }), 64 /* STABLE_FRAGMENT */))\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./RangeNumber.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./RangeNumber.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./RangeNumber.vue?vue&type=style&index=0&id=48562df7&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-48562df7\"]])\n\nexport default __exports__","// Module\nvar code = `<h1></h1> <h2>?</h2> <h3>, </h3> <p> AI :</p> <ul> <li> AI </li> <li> AI , </li> <li>, ,  \"\"</li> </ul> <h3></h3> <p><strong> AI </strong>:</p> <ul> <li> AI  \"\" </li> <li> AI , ; </li> </ul> <p>, .</p> <p>,  token. ,  Claude  token , :</p> <h3>, </h3> <p>,  AI , , .</p> <h2>?</h2> <p> (rpm) ,  \"\"  \", \".</p> <h2> token?</h2> <p> \"\"  \", \"  token, :</p> <ul> <li> <code>[mvu_update]</code> </li> <li> <code>[mvu_plot]</code>  <code>[mvu_update]</code> </li> <li><strong></strong></li> <li>( \"\") </li> </ul> <p>, token , , ,  token.</p> `;\n// Exports\nexport default code;","/* unplugin-vue-components disabled */import script from \"./Request.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Request.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, createVNode as _createVNode, withCtx as _withCtx, createElementVNode as _createElementVNode, openBlock as _openBlock, createBlock as _createBlock } from \"vue\";\nimport Checkbox from '@/panel/component/Checkbox.vue';\nimport Detail from '@/panel/component/Detail.vue';\nimport Field from '@/panel/component/Field.vue';\nimport HelpIcon from '@/panel/component/HelpIcon.vue';\nimport RangeNumber from '@/panel/component/RangeNumber.vue';\nimport Select from '@/panel/component/Select.vue';\nimport request_method_help from '@/panel/update/request_method.md';\nimport { useDataStore } from '@/store';\nimport { compare } from 'compare-versions';\nimport { watch } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'Request',\n    setup(__props) {\n        const store = useDataStore();\n        watch(() => store.settings.., value => {\n            if (value !== '' && compare(store.versions.tavernhelper, '4.4.3', '<')) {\n                toastr.warning(' 4.4.3 ', '[MVU]', {\n                    timeOut: 5000,\n                });\n            }\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createBlock(Detail, { title: \"\" }, {\n                default: _withCtx(() => [\n                    _createVNode(Field, { label: \"\" }, {\n                        \"label-suffix\": _withCtx(() => [\n                            _createVNode(HelpIcon, { help: _unref(request_method_help) }, null, 8 /* PROPS */, [\"help\"])\n                        ]),\n                        default: _withCtx(() => [\n                            _createVNode(Select, {\n                                modelValue: _unref(store).settings..,\n                                \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((_unref(store).settings..) = $event)),\n                                options: [\n                                    '',\n                                    '',\n                                    ', ',\n                                ]\n                            }, null, 8 /* PROPS */, [\"modelValue\"])\n                        ]),\n                        _: 1 /* STABLE */\n                    }),\n                    _createVNode(Field, { label: \"\" }, {\n                        default: _withCtx(() => [\n                            _createVNode(RangeNumber, {\n                                modelValue: _unref(store).settings..,\n                                \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => ((_unref(store).settings..) = $event)),\n                                min: _unref(store).settings.. === ', '\n                                    ? 2\n                                    : 1,\n                                max: 10,\n                                step: 1\n                            }, null, 8 /* PROPS */, [\"modelValue\", \"min\"])\n                        ]),\n                        _: 1 /* STABLE */\n                    }),\n                    _createVNode(Field, { label: \"\" }, {\n                        \"label-suffix\": _withCtx(() => [\n                            _createVNode(HelpIcon, { help: \",  AI , `` `<StatusPlaceHolderImpl/>`\" })\n                        ]),\n                        default: _withCtx(() => [\n                            _createVNode(Checkbox, {\n                                modelValue: _unref(store).settings..,\n                                \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event) => ((_unref(store).settings..) = $event))\n                            }, {\n                                default: _withCtx(() => [...(_cache[3] || (_cache[3] = [\n                                        _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n                                    ]))]),\n                                _: 1 /* STABLE */\n                            }, 8 /* PROPS */, [\"modelValue\"])\n                        ]),\n                        _: 1 /* STABLE */\n                    })\n                ]),\n                _: 1 /* STABLE */\n            }));\n        };\n    }\n});\n","import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, vModelText as _vModelText, createElementVNode as _createElementVNode, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect } from \"vue\";\nconst _hoisted_1 = { class: \"mvu-model-select\" };\nconst _hoisted_2 = { class: \"mvu-model-select__row\" };\nconst _hoisted_3 = { class: \"mvu-model-select__row mvu-model-select__row--controls\" };\nconst _hoisted_4 = [\"disabled\"];\nconst _hoisted_5 = [\"value\"];\nconst _hoisted_6 = [\"value\", \"disabled\"];\nimport { useDataStore } from '@/store';\nimport { normalizeBaseURL } from '@/util';\nimport { ref, watch } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'ModelSelect',\n    setup(__props) {\n        const store = useDataStore();\n        const loading = ref(false);\n        const models = ref([]);\n        const selected = ref('');\n        async function refresh() {\n            if (loading.value) {\n                return;\n            }\n            const base_url = normalizeBaseURL(store.settings..api);\n            if (!base_url) {\n                return;\n            }\n            loading.value = true;\n            try {\n                const response = await fetch('/api/backends/chat-completions/status', {\n                    method: 'POST',\n                    headers: SillyTavern.getRequestHeaders(),\n                    body: JSON.stringify({\n                        reverse_proxy: base_url,\n                        proxy_password: store.settings..,\n                        chat_completion_source: 'openai',\n                    }),\n                    cache: 'no-cache',\n                });\n                const json = await response.json();\n                models.value = _(json?.data ?? [])\n                    .map((model) => String(model?.id ?? model?.name ?? '').trim())\n                    .filter(Boolean)\n                    .sort()\n                    .sortedUniq()\n                    .value();\n                selected.value = models.value.includes(store.settings..)\n                    ? store.settings..\n                    : '';\n                if (models.value.length === 0) {\n                    toastr.warning('', '[MVU]');\n                }\n            }\n            catch (error) {\n                toastr.error(String(error?.message ?? error), '[MVU]');\n            }\n            finally {\n                loading.value = false;\n            }\n        }\n        watch(selected, value => {\n            if (!value)\n                return;\n            store.settings.. = value;\n        }, { flush: 'sync' });\n        watch(() => store.settings.., value => {\n            if (!value) {\n                selected.value = '';\n                return;\n            }\n            selected.value = models.value.includes(value) ? value : '';\n        }, { flush: 'sync' });\n        watch(() => [store.settings..api, store.settings..], () => {\n            models.value = [];\n            selected.value = '';\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _withDirectives(_createElementVNode(\"input\", {\n                        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((_unref(store).settings..) = $event)),\n                        type: \"text\",\n                        class: \"text_pole\",\n                        autocomplete: \"off\"\n                    }, null, 512 /* NEED_PATCH */), [\n                        [_vModelText, _unref(store).settings..]\n                    ])\n                ]),\n                _createElementVNode(\"div\", _hoisted_3, [\n                    _withDirectives(_createElementVNode(\"select\", {\n                        ref: \"select\",\n                        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => ((selected).value = $event)),\n                        class: \"text_pole\",\n                        disabled: models.value.length === 0,\n                        \"aria-label\": \"\"\n                    }, [\n                        _cache[2] || (_cache[2] = _createElementVNode(\"option\", { value: \"\" }, \"\", -1 /* CACHED */)),\n                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(models.value, (model) => {\n                            return (_openBlock(), _createElementBlock(\"option\", {\n                                key: model,\n                                value: model\n                            }, _toDisplayString(model), 9 /* TEXT, PROPS */, _hoisted_5));\n                        }), 128 /* KEYED_FRAGMENT */))\n                    ], 8 /* PROPS */, _hoisted_4), [\n                        [_vModelSelect, selected.value]\n                    ]),\n                    _createElementVNode(\"input\", {\n                        class: \"mvu-model-select__btn menu_button menu_button_icon interactable\",\n                        type: \"button\",\n                        value: loading.value ? '' : '',\n                        disabled: loading.value,\n                        onClick: refresh\n                    }, null, 8 /* PROPS */, _hoisted_6)\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./ModelSelect.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ModelSelect.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ModelSelect.vue?vue&type=style&index=0&id=7f080574&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-7f080574\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, createVNode as _createVNode, vModelText as _vModelText, createElementVNode as _createElementVNode, withDirectives as _withDirectives, withCtx as _withCtx, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, Fragment as _Fragment, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = { class: \"mvu-field-grid\" };\nconst _hoisted_2 = {\n    key: 0,\n    class: \"mvu-note\"\n};\nconst _hoisted_3 = { class: \"mvu-field-grid\" };\nconst _hoisted_4 = [\"disabled\"];\nimport Detail from '@/panel/component/Detail.vue';\nimport Field from '@/panel/component/Field.vue';\nimport ModelSelect from '@/panel/component/ModelSelect.vue';\nimport RangeNumber from '@/panel/component/RangeNumber.vue';\nimport Select from '@/panel/component/Select.vue';\nimport { useDataStore } from '@/store';\nimport { compare } from 'compare-versions';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'Source',\n    setup(__props) {\n        const store = useDataStore();\n        const additional_extra_configuration_supported = compare(store.versions.tavernhelper, '4.0.14', '>=');\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createBlock(Detail, { title: \"\" }, {\n                default: _withCtx(() => [\n                    _createVNode(Select, {\n                        modelValue: _unref(store).settings..,\n                        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((_unref(store).settings..) = $event)),\n                        options: ['', '']\n                    }, null, 8 /* PROPS */, [\"modelValue\"]),\n                    (_unref(store).settings.. === '')\n                        ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                            _createElementVNode(\"div\", _hoisted_1, [\n                                _createVNode(Field, { label: \"API \" }, {\n                                    default: _withCtx(() => [\n                                        _withDirectives(_createElementVNode(\"input\", {\n                                            \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => ((_unref(store).settings..api) = $event)),\n                                            type: \"text\",\n                                            class: \"text_pole\",\n                                            placeholder: \"http://localhost:1234/v1\"\n                                        }, null, 512 /* NEED_PATCH */), [\n                                            [_vModelText, _unref(store).settings..api]\n                                        ])\n                                    ]),\n                                    _: 1 /* STABLE */\n                                }),\n                                _createVNode(Field, { label: \"API \" }, {\n                                    default: _withCtx(() => [\n                                        _withDirectives(_createElementVNode(\"input\", {\n                                            \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event) => ((_unref(store).settings..) = $event)),\n                                            type: \"password\",\n                                            class: \"text_pole\",\n                                            placeholder: \"\"\n                                        }, null, 512 /* NEED_PATCH */), [\n                                            [_vModelText, _unref(store).settings..]\n                                        ])\n                                    ]),\n                                    _: 1 /* STABLE */\n                                }),\n                                _createVNode(Field, { label: \"\" }, {\n                                    default: _withCtx(() => [\n                                        _createVNode(ModelSelect)\n                                    ]),\n                                    _: 1 /* STABLE */\n                                })\n                            ]),\n                            _createVNode(Detail, { title: \"\" }, {\n                                default: _withCtx(() => [\n                                    (!_unref(additional_extra_configuration_supported))\n                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, \"  \"))\n                                        : _createCommentVNode(\"v-if\", true),\n                                    _createElementVNode(\"div\", _hoisted_3, [\n                                        _createVNode(Field, { label: \" token\" }, {\n                                            default: _withCtx(() => [\n                                                _withDirectives(_createElementVNode(\"input\", {\n                                                    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event) => ((_unref(store).settings..token) = $event)),\n                                                    disabled: !_unref(additional_extra_configuration_supported),\n                                                    type: \"number\",\n                                                    class: \"text_pole\",\n                                                    min: \"0\",\n                                                    step: \"128\",\n                                                    placeholder: \"4096\"\n                                                }, null, 8 /* PROPS */, _hoisted_4), [\n                                                    [\n                                                        _vModelText,\n                                                        _unref(store).settings..token,\n                                                        void 0,\n                                                        { number: true }\n                                                    ]\n                                                ])\n                                            ]),\n                                            _: 1 /* STABLE */\n                                        }),\n                                        _createVNode(Field, { label: \"\" }, {\n                                            default: _withCtx(() => [\n                                                _createVNode(RangeNumber, {\n                                                    modelValue: _unref(store).settings..,\n                                                    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event) => ((_unref(store).settings..) = $event)),\n                                                    disabled: !_unref(additional_extra_configuration_supported),\n                                                    min: 0,\n                                                    max: 2,\n                                                    step: 0.01\n                                                }, null, 8 /* PROPS */, [\"modelValue\", \"disabled\"])\n                                            ]),\n                                            _: 1 /* STABLE */\n                                        }),\n                                        _createVNode(Field, { label: \"\" }, {\n                                            default: _withCtx(() => [\n                                                _createVNode(RangeNumber, {\n                                                    modelValue: _unref(store).settings..,\n                                                    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event) => ((_unref(store).settings..) = $event)),\n                                                    disabled: !_unref(additional_extra_configuration_supported),\n                                                    min: -2,\n                                                    max: 2,\n                                                    step: 0.01\n                                                }, null, 8 /* PROPS */, [\"modelValue\", \"disabled\"])\n                                            ]),\n                                            _: 1 /* STABLE */\n                                        }),\n                                        _createVNode(Field, { label: \"\" }, {\n                                            default: _withCtx(() => [\n                                                _createVNode(RangeNumber, {\n                                                    modelValue: _unref(store).settings..,\n                                                    \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event) => ((_unref(store).settings..) = $event)),\n                                                    disabled: !_unref(additional_extra_configuration_supported),\n                                                    min: -2,\n                                                    max: 2,\n                                                    step: 0.01\n                                                }, null, 8 /* PROPS */, [\"modelValue\", \"disabled\"])\n                                            ]),\n                                            _: 1 /* STABLE */\n                                        }),\n                                        _createVNode(Field, { label: \"Top P\" }, {\n                                            default: _withCtx(() => [\n                                                _createVNode(RangeNumber, {\n                                                    modelValue: _unref(store).settings..top_p,\n                                                    \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event) => ((_unref(store).settings..top_p) = $event)),\n                                                    disabled: !_unref(additional_extra_configuration_supported),\n                                                    min: 0,\n                                                    max: 1,\n                                                    step: 0.01\n                                                }, null, 8 /* PROPS */, [\"modelValue\", \"disabled\"])\n                                            ]),\n                                            _: 1 /* STABLE */\n                                        }),\n                                        _createVNode(Field, { label: \"Top K\" }, {\n                                            default: _withCtx(() => [\n                                                _createVNode(RangeNumber, {\n                                                    modelValue: _unref(store).settings..top_k,\n                                                    \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event) => ((_unref(store).settings..top_k) = $event)),\n                                                    disabled: !_unref(additional_extra_configuration_supported),\n                                                    min: 0,\n                                                    max: 500,\n                                                    step: 1\n                                                }, null, 8 /* PROPS */, [\"modelValue\", \"disabled\"])\n                                            ]),\n                                            _: 1 /* STABLE */\n                                        })\n                                    ])\n                                ]),\n                                _: 1 /* STABLE */\n                            })\n                        ], 64 /* STABLE_FRAGMENT */))\n                        : _createCommentVNode(\"v-if\", true)\n                ]),\n                _: 1 /* STABLE */\n            }));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./Source.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Source.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./Source.vue?vue&type=style&index=0&id=1ad75eb8&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-1ad75eb8\"]])\n\nexport default __exports__","/* unplugin-vue-components disabled */import script from \"./Update.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Update.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, createVNode as _createVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, withCtx as _withCtx, createBlock as _createBlock } from \"vue\";\nimport HelpIcon from '@/panel/component/HelpIcon.vue';\nimport Section from '@/panel/component/Section.vue';\nimport Method from '@/panel/update/Method.vue';\nimport Prompt from '@/panel/update/Prompt.vue';\nimport Request from '@/panel/update/Request.vue';\nimport Source from '@/panel/update/Source.vue';\nimport update_method_help from '@/panel/update_method.md';\nimport { useDataStore } from '@/store';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'Update',\n    setup(__props) {\n        const store = useDataStore();\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createBlock(Section, { label: \"\" }, {\n                \"label-suffix\": _withCtx(() => [\n                    _createVNode(HelpIcon, { help: _unref(update_method_help) }, null, 8 /* PROPS */, [\"help\"])\n                ]),\n                content: _withCtx(() => [\n                    _createVNode(Method),\n                    (_unref(store).settings. === '')\n                        ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                            _createVNode(Prompt),\n                            _createVNode(Request),\n                            _createVNode(Source)\n                        ], 64 /* STABLE_FRAGMENT */))\n                        : _createCommentVNode(\"v-if\", true)\n                ]),\n                _: 1 /* STABLE */\n            }));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./Version.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Version.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock } from \"vue\";\nimport Section from '@/panel/component/Section.vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'Version',\n    setup(__props) {\n        const build_date = __BUILD_DATE__ ?? 'Unknown';\n        const commit_id = __COMMIT_ID__ ?? 'Unknown';\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createBlock(Section, { label: \"\" }, {\n                content: _withCtx(() => [\n                    _createElementVNode(\"span\", null, _toDisplayString(_unref(build_date)) + \" (\" + _toDisplayString(_unref(commit_id)) + \") \", 1 /* TEXT */)\n                ]),\n                _: 1 /* STABLE */\n            }));\n        };\n    }\n});\n","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = { class: \"inline-drawer\" };\nconst _hoisted_2 = { class: \"inline-drawer-content\" };\nimport Button from '@/panel/Button.vue';\nimport Cleanup from '@/panel/Cleanup.vue';\nimport Compatibility from '@/panel/Compatibility.vue';\nimport Notification from '@/panel/Notification.vue';\nimport Update from '@/panel/Update.vue';\nimport Version from '@/panel/Version.vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'Panel',\n    setup(__props) {\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _cache[0] || (_cache[0] = _createElementVNode(\"div\", { class: \"inline-drawer-toggle inline-drawer-header\" }, [\n                    _createElementVNode(\"b\", null, \"MVU \"),\n                    _createElementVNode(\"div\", { class: \"inline-drawer-icon fa-solid fa-circle-chevron-down down\" })\n                ], -1 /* CACHED */)),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createVNode(Version),\n                    _createVNode(Notification),\n                    _createVNode(Update),\n                    _createVNode(Button),\n                    _createVNode(Cleanup),\n                    _createVNode(Compatibility)\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./Panel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Panel.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./Panel.vue?vue&type=style&index=0&id=df27a12a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-df27a12a\"]])\n\nexport default __exports__","import Panel from '@/panel/Panel.vue';\nimport { createScriptIdDiv, teleportStyle } from '@util/script';\nimport { createPinia } from 'pinia';\nimport { createApp } from 'vue';\nexport function initPanel() {\n    const app = createApp(Panel).use(getActivePinia() ?? createPinia());\n    const $app = createScriptIdDiv();\n    $('#extensions_settings2').append($app);\n    app.mount($app[0]);\n    const { destroy: destroyStyle } = teleportStyle();\n    return () => {\n        app.unmount();\n        $app.remove();\n        destroyStyle();\n    };\n}\n","export function teleportStyle(\n  append_to: JQuery.Selector | JQuery.htmlString | JQuery.TypeOrArray<Element | DocumentFragment> | JQuery = 'head',\n): { destroy: () => void } {\n  const $div = $(`<div>`)\n    .attr('script_id', getScriptId())\n    .append($(`head > style`, document).clone())\n    .appendTo(append_to);\n\n  return {\n    destroy: () => $div.remove(),\n  };\n}\n\nexport function createScriptIdDiv(): JQuery<HTMLDivElement> {\n  return $('<div>').attr('script_id', getScriptId()) as JQuery<HTMLDivElement>;\n}\n\nexport function registerAsUniqueScript(id: string): {\n  unregister: () => void;\n  getPreferredScriptId: () => string | undefined;\n  listenPreferenceState: (callback: (perferred_script_id: string) => void) => EventOnReturn;\n} {\n  const script_id = getScriptId();\n  const path = `th_unique_check.${id}`;\n\n  const getPreferredScriptId = () => {\n    const registered_scripts = _.get(window.parent, path, new Set<string>());\n    return _($('#tavern_helper').find('div[data-script-id]').toArray())\n      .map(element => String($(element).attr('data-script-id')))\n      .filter(element => registered_scripts.has(element))\n      .last();\n  };\n\n  _.update(window.parent, path, (value: Set<string> | undefined) => {\n    if (value === undefined) {\n      return new Set([script_id]);\n    }\n    value.add(script_id);\n    return value;\n  });\n  eventEmit(path, getPreferredScriptId());\n\n  return {\n    unregister: () => {\n      _.update(window.parent, path, (value: Set<string> | undefined) => {\n        if (value !== undefined) {\n          value.delete(script_id);\n        }\n        return value;\n      });\n      eventEmit(path, getPreferredScriptId());\n    },\n    getPreferredScriptId,\n    listenPreferenceState: (callback: (enabled_script_id: string) => void) => eventOn(path, callback),\n  };\n}\n","import { initButtons } from '@/button';\nimport { initCleanup } from '@/function/cleanup';\nimport { initGlobals } from '@/function/global';\nimport { initInitvar } from '@/function/initvar';\nimport { initNotification } from '@/function/notification';\nimport { initRequest } from '@/function/request';\nimport { initResponse } from '@/function/update';\nimport { initPanel } from '@/panel';\nimport { useDataStore } from '@/store';\nimport { checkMinimumVersion } from '@util/common';\nimport { createPinia, getActivePinia, setActivePinia } from 'pinia';\n\nsetActivePinia(getActivePinia() ?? createPinia());\n\n$(async () => {\n    await checkMinimumVersion('3.4.17', 'MVU');\n\n    const store = useDataStore();\n    await store._wait_init();\n\n    const stop_list: Array<() => void> = [];\n\n    stop_list.push(initPanel());\n    stop_list.push(initButtons());\n    stop_list.push(initGlobals());\n\n    let chat_level_stop_list = await initChatLevel();\n    let current_chat_id = SillyTavern.getCurrentChatId();\n    eventOn(tavern_events.CHAT_CHANGED, async (chat_id: string) => {\n        if (current_chat_id !== chat_id) {\n            current_chat_id = chat_id;\n            chat_level_stop_list.forEach(stop => stop());\n            chat_level_stop_list = await initChatLevel();\n        }\n    });\n\n    stop_list.push(initNotification());\n\n    $(window).on('pagehide', async () => {\n        chat_level_stop_list.forEach(stop => stop());\n        stop_list.forEach(stop => stop());\n    });\n});\n\nasync function initChatLevel() {\n    const stop_list: Array<() => void> = [];\n    stop_list.push(await initInitvar());\n    stop_list.push(initRequest());\n    stop_list.push(initResponse());\n    stop_list.push(initCleanup());\n    return stop_list;\n}\n","import { initCheck } from '@/function/initvar/variable_init';\nimport { stoppableEventOn } from '@/util';\n\nexport async function initInitvar() {\n    const stop_list: Array<() => void> = [];\n\n    await initCheck();\n    stop_list.push(stoppableEventOn(tavern_events.GENERATION_STARTED, initCheck));\n    stop_list.push(stoppableEventOn(tavern_events.MESSAGE_SENT, initCheck));\n\n    return () => {\n        stop_list.forEach(stop => stop());\n    };\n}\n","import { is_jest_environment, stoppableEventOn } from '@/util';\n\nimport { onMessageReceived } from '@/function/update/on_message_received';\nimport { handleVariablesInMessage } from '@/function/update_variables';\n\nexport function initResponse() {\n    const stop_list: Array<() => void> = [];\n    stop_list.push(stoppableEventOn(tavern_events.MESSAGE_SENT, handleVariablesInMessage));\n    stop_list.push(\n        stoppableEventOn(\n            tavern_events.MESSAGE_RECEIVED,\n            is_jest_environment ? onMessageReceived : _.throttle(onMessageReceived, 3000)\n        )\n    );\n    return () => {\n        stop_list.forEach(stop => stop());\n    };\n}\n"],"names":["___CSS_LOADER_EXPORT___","push","module","id","exports","cssWithMappingToString","list","toString","this","map","item","content","needLayer","concat","length","join","i","modules","media","dedupe","supports","layer","undefined","alreadyImportedModules","k","_k","cssMapping","btoa","base64","unescape","encodeURIComponent","JSON","stringify","data","sourceMapping","__esModule","default","locals","add","sfc","props","target","__vccOpts","key","val","listToStyles","parentId","styles","newStyles","part","css","sourceMap","parts","hasDocument","document","DEBUG","Error","stylesInDom","head","getElementsByTagName","singletonElement","singletonCounter","isProduction","noop","options","ssrIdKey","isOldIE","navigator","test","userAgent","toLowerCase","addStylesClient","_isProduction","_options","addStylesToDom","newList","mayRemove","domStyle","refs","j","addStyle","createStyleElement","styleElement","createElement","type","appendChild","obj","update","remove","querySelector","parentNode","removeChild","styleIndex","applyToSingletonTag","bind","applyToTag","newObj","textStore","replaceText","index","replacement","filter","Boolean","styleSheet","cssText","cssNode","createTextNode","childNodes","insertBefore","setAttribute","ssrId","sources","firstChild","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","assertVWD","_flag","_v","isValueWithDescriptionStatData","value","Array","isArray","isArraySchema","isObjectSchema","n","getter","d","a","definition","o","Object","defineProperty","enumerable","get","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","variable_events","VARIABLE_INITIALIZED","VARIABLE_UPDATE_STARTED","COMMAND_PARSED","VARIABLE_UPDATE_ENDED","BEFORE_MESSAGE_UPDATE","SINGLE_VARIABLE_UPDATED","UPDATE_REGEX","PLOT_REGEX","EXTENSIBLE_MARKER","generateSchema","oldSchemaNode","parentRecursiveExtensible","oldElementType","template","isExtensible","isRecursiveExtensible","extensible","recursiveExtensible","elementType","console","error","metaElementIndex","findIndex","_","isObject","isDate","metaElement","$meta","splice","log","markerIndex","indexOf","schema_node","typedData","oldProperties","oldExtensible","oldRecursiveExtensible","properties","schemaNode","parentMeta","oldChildNode","childRecursiveExtensible","childSchema","isRequired","required","includes","dataType","getSchemaForPath","schema","path","pathSegments","toPath","currentSchema","segment","reconcileAndApplySchema","variables","newSchema","stat_data","newSchemaWithProps","strictTemplate","strictSet","concatTemplateArray","has","cleanUpMetadata","is_jest_environment","jest","process","saveChatDebounced","debounce","SillyTavern","saveChat","getLastValidMessageId","end_message_id","chat","slice","findLastIndex","chat_message","swipe_id","getLastValidVariable","message_id","stoppableEventOn","event_type","listener","eventOn","eventRemoveListener","isJsonPatch","patch","every","op","isPlainObject","to","showHelpPopup","callGenericPopup","POPUP_TYPE","TEXT","allowVerticalScrolling","leftAlign","wide","normalizeBaseURL","api_url","trim","replace","endsWith","Vue","z","OldSettings","number","top_p","legacy","auto_cleanup","internal","transform","NewSettings","decode","prefault","clamp","top_k","Math","max","Settings","catch","parse","Runtimes","unsupported_warnings","is_during_extra_analysis","is_function_call_enabled","debug","useDataStore","settings","ref","extensionSettings","watch","new_settings","set","toRaw","saveSettingsDebounced","deep","runtimes","new_value","insertOrAssignVariables","extra_analysis","immediate","versions","sillytavern","tavernhelper","resetRuntimes","_wait_init","async","fetch","then","res","json","pkgVersion","getTavernHelperVersion","correctlyMerge","lhs","rhs","mergeWith","_lhs","uuidv4","c","random","literalYamlify","YAML","blockQuote","parseString","json_first","trimStart","parseDocument","merge","toJS","yaml_error1","json5_error","json_error","yaml_error2","toError","stack","message","String","__WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_mathjs_esm_aec644b1__","trimQuotesAndBackslashes","str","isString","applyTemplate","strict_array_cast","array_merge_concat","value_is_object","value_is_array","template_is_array","parseCommandValue","valStr","trimmed","e","startsWith","result","Function","err","scope","math","parseFloat","toPrecision","extractCommands","inputText","results","matchAll","match","string","flatMap","translated_commands","substring","full_match","args","reason","pathParts","lastPart","containerPath","keyOrIndexArg","from","extractJsonPatch","command","$index","setMatch","commandType","setStart","openParen","closeParen","findMatchingCloseParen","endPos","comment","potentialComment","fullMatch","params","parseParameters","isValid","sortBy","omit","startPos","parenCount","inQuote","quoteChar","char","prevChar","paramsString","currentParam","bracketCount","braceCount","pathFix","_match","rawInner","inner","wasQuoted","first","last","isPureDigits","hasWhitespace","prefix","_quote","name","hasSpecial","escaped","isNullOrWhiteSpace","updateVariables","current_message_content","variables_before_update","out_status","delta_status","commands","substitudeMacros","error_info","current_command","display_data","delta_data","eventEmit","outError","title","warn","strict_template","concat_template_array","strict_set","cmd","_unused_data","pathFixPass","reason_str","display_str","oldValue","newValue","at","Date","toISOString","isPathVWD","Number","oldValueCopy","finalNewValue","info","targetPath","existingValue","targetSchema","newKey","successful","valueToAssign","collection","keyOrIndex","isArrayElementPath","container","indexToRemove","parseInt","originalArray","keyOrIndexToRemove","pop","containerSchema","keyString","targetToRemove","itemRemoved","unset","isEqual","keys","keyToRemove","initialValue","valueToAdd","isVWD","potentialDate","parsedDate","isNaN","getTime","delta","newDate","finalValueToSet","is_modified","toastr","warning","timeOut","handleVariablesInMessage","getChatMessages","message_content","role","has_variable_modified","context","updater","initialized_lorebooks","updateVariablesWith","replaceAll","setChatMessages","refresh","initCheck","$","getLastMessageId","oldArray","newObject","lorebookName","is_updated","loadInitVarData","isEmpty","generated_schema","assign","last_msg","include_swipes","swipes_data","Promise","all","swipes","swipe","vanilla_variable_data","current_data","matched_init","is_initvar_applied","overrided_initvar","init_content","char_lorebook","getCharWorldbookNames","primary","replaceVariables","entries","escapeHtml","_e","dst_setting","scan_depth","context_percentage","budget_cap","min_activations","max_depth","max_recursion_steps","insertion_strategy","include_names","recursive","case_sensitive","match_whole_words","use_group_scoring","overflow_alert","getLorebookSettings","setLorebookSettings","updateLorebookSettings","mvu_data","lorebook_list","enabled_lorebook_list","selected_global_lorebooks","getCurrentCharPrimaryLorebook","getEnabledLorebookList","current_lorebook","init_entries","getLorebookEntries","merged_data","entry","xml_match","codeblock_match","parsedData","parseError","isExtraModelSupported","lorebook_name","some","isFunctionCallingSupported","ToolManager","isToolCallingSupported","chatCompletionSettings","function_calling","MVU_FUNCTION_NAME","onVariableUpdatedCall","trimEnd","analysis","overrideToolRequest","generate_data","store","tools","size","tool_choice","toolcall_result","vanilla_parseToolCalls","debug_extra_request_counter","generateRandomHeader","times","setExtraAnalysisStates","parseToolCalls","vanilla_bound","tool_calls","parsed","extracted","tool_call","mvu_call","findLast","fn","function","json_patch_match","extractFromToolCall","unsetExtraAnalysisStates","unregisterMacro","is_analysis_in_progress","invokeExtraModel","generation_id","batch_id","direct_reply","config","user_input","max_chat_history","should_stream","unset_if_equal","expected","custom_api","apiurl","model","max_tokens","temperature","frequency_penalty","presence_penalty","task","decoded_extra_model_task","registerMacro","generate","injects","position","depth","should_scan","is_gemini","getChatCompletionModel","generateRaw","ordered_prompts","decoded_gemini_head","decoded_claude_head","decoded_gemini_tail","decoded_claude_tail","requestReply","tag","start_index","lastIndexOf","end_index","update_block","fn_call_match","percent","atob","split","charCodeAt","decodeURIComponent","onMessageReceived","force","current_chatmsg","recordedInvoke","safeInvoke","is_manual_canceled","concurrentInvoke","uuids","any","forEach","stopGenerationById","invokeExtraModelWithStrategy","updateDescriptions","_init_path","init_data","msg_data","target_data","current_path","msgValue","targetObj","description","msg_array","current_target","description_path","buttons","is_legacy","latest_init_data","latest_msg_data","setChatMessage","success","INPUT","range","snapshot","fnd_message","result2","recur_intial_message_id","recur_variable_data","getVariables","counter","mes","current_chat_content","begin_pos","end_pos","filtered_string","last_valid_msg","last_variable_data","snapshot_interval","cleanupMessageVariables","start_message_id","snap_interval","msg_index","chat_flag","restoreVariables","last_message_id","last_10th_message_id","last_not_has_variable_message_id","last_20th_message_id","snapshot_message_id","snapshot_chat_message","is_valid_message","initCleanup","CONFIRM","okButton","cancelButton","customButtons","POPUP_RESULT","CANCELLED","NEGATIVE","CUSTOM1","body","is_group","avatar_url","characters","characterId","avatar","file","getCurrentChatId","exportfilename","format","response","method","headers","getRequestHeaders","ok","serialized","blob","Blob","url","URL","createObjectURL","link","href","download","click","revokeObjectURL","checkAndCleanupLegacyChat","stop_list","tavern_events","MESSAGE_DELETED","MESSAGE_RECEIVED","old_message_id","stop","createMvu","events","getMvuData","replaceMvuData","parseMessage","old_data","getCurrentMvuData","getCurrentMessageId","replaceCurrentMvuData","reloadInitVar","setMvuVariable","is_recursive","$internal","currentValue","stringNewValue","updateVariable","getMvuVariable","category","default_value","isValueWithDescription","getRecordFromMvuData","isDuringExtraAnalysis","notify","filterEntries","lores","supported_worlds","Set","remove_and_check","lore","is_update_regex","is_plot_regex","world","characterLore","globalLore","chatLore","personaLore","process_unsupported_worlds","removed_entries","removed_worlds","sort","sortedUniq","filterPrompts","messages","text_messages","initRequest","registerFunctionTool","mvu_update_schema","freeze","$schema","additionalProperties","minLength","displayName","stealth","parameters","shouldRegister","action","formatMessage","unregisterFunctionTool","registerFunction","CHAT_COMPLETION_SETTINGS_READY","_hoisted_1","class","_hoisted_2","_hoisted_3","__name","label","setup","__props","_ctx","_cache","$slots","visible_buttons","computed","button","Section","tabindex","onClick","emits","$event","Checkbox","modelValue","Detail","Field","min","step","placeholder","help","HelpIcon","option","Select","update_method","disabled","onInput","event","isFinite","RangeNumber","_hoisted_4","_hoisted_5","_hoisted_6","loading","models","selected","base_url","reverse_proxy","proxy_password","chat_completion_source","cache","flush","autocomplete","additional_extra_configuration_supported","ModelSelect","Method","Prompt","Request","Source","Version","Notification","Update","Button","Cleanup","Compatibility","initPanel","app","createApp","Panel","use","$app","attr","getScriptId","append","mount","destroy","destroyStyle","append_to","$div","clone","appendTo","teleportStyle","unmount","initChatLevel","GENERATION_STARTED","MESSAGE_SENT","initInitvar","throttle","initResponse","checkMinimumVersion","appendInexistentScriptButtons","visible","getButtonEvent","mvu","window","parent","deleteVariable","initGlobals","chat_level_stop_list","current_chat_id","CHAT_CHANGED","chat_id","initNotification","on"],"sourceRoot":""}