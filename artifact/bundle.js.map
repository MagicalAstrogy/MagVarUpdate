{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://tavern_helper_template/src/panel/component/RangeNumber.vue?b4cd","webpack://tavern_helper_template/src/panel/component/Section.vue?78e5","webpack://tavern_helper_template/src/panel/Cleanup.vue?d31a","src://tavern_helper_template/node_modules/vue-loader/dist/exportHelper.js","src://tavern_helper_template/node_modules/css-loader/dist/runtime/api.js","webpack://tavern_helper_template/src/panel/component/ModelSelect.vue?403d","webpack://tavern_helper_template/src/panel/Update.vue?86f1","src://tavern_helper_template/node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://tavern_helper_template/src/panel/component/Field.vue?5c0e","webpack://tavern_helper_template/src/panel/Cleanup.vue?10e0","webpack://tavern_helper_template/src/panel/component/RangeNumber.vue?062d","webpack://tavern_helper_template/src/panel/component/Field.vue?25b5","webpack://tavern_helper_template/src/panel/Button.vue?1d14","src://tavern_helper_template/node_modules/vue-style-loader/lib/listToStyles.js","src://tavern_helper_template/node_modules/vue-style-loader/lib/addStylesClient.js","webpack://tavern_helper_template/src/panel/Update.vue?3cd9","webpack://tavern_helper_template/src/panel/Button.vue?88c4","webpack://tavern_helper_template/src/panel/component/Section.vue?5b39","webpack://tavern_helper_template/src/panel/component/HelpIcon.vue?09ff","webpack://tavern_helper_template/src/panel/component/ModelSelect.vue?2a77","webpack://tavern_helper_template/src/panel/Panel.vue?d9c4","webpack://tavern_helper_template/src/panel/component/HelpIcon.vue?9a3a","webpack://tavern_helper_template/src/panel/Panel.vue?643b","src://tavern_helper_template/webpack/bootstrap","src://tavern_helper_template/src/variable_def.ts","src://tavern_helper_template/webpack/runtime/compat get default export","src://tavern_helper_template/webpack/runtime/define property getters","src://tavern_helper_template/webpack/runtime/hasOwnProperty shorthand","src://tavern_helper_template/webpack/runtime/make namespace object","src://tavern_helper_template/src/schema.ts","src://tavern_helper_template/src/util.ts","src://tavern_helper_template/external var \"Vue\"","src://tavern_helper_template/external var \"z\"","src://tavern_helper_template/src/settings.ts","src://tavern_helper_template/external module \"https://testingcf.jsdelivr.net/npm/mathjs/+esm\"","src://tavern_helper_template/src/function.ts","src://tavern_helper_template/src/update_descriptions.ts","src://tavern_helper_template/src/variable_init.ts","src://tavern_helper_template/src/prompt_filter.ts","src://tavern_helper_template/src/button.ts","src://tavern_helper_template/src/export_globals.ts","src://tavern_helper_template/src/function_call.ts","src://tavern_helper_template/src/panel/component/Section.vue","webpack://tavern_helper_template/src/panel/component/Section.vue?151f","webpack://tavern_helper_template/src/panel/Button.vue","src://tavern_helper_template/src/panel/Button.vue","webpack://tavern_helper_template/src/panel/Button.vue?290f","webpack://tavern_helper_template/src/panel/component/Checkbox.vue","webpack://tavern_helper_template/src/panel/component/Checkbox.vue?f22c","src://tavern_helper_template/src/panel/component/Checkbox.vue","webpack://tavern_helper_template/src/panel/component/Field.vue","src://tavern_helper_template/src/panel/component/Field.vue","webpack://tavern_helper_template/src/panel/component/Field.vue?7230","webpack://tavern_helper_template/src/panel/Cleanup.vue","src://tavern_helper_template/src/panel/Cleanup.vue","webpack://tavern_helper_template/src/panel/Cleanup.vue?2b48","webpack://tavern_helper_template/src/panel/component/HelpIcon.vue","src://tavern_helper_template/src/panel/component/HelpIcon.vue","webpack://tavern_helper_template/src/panel/component/HelpIcon.vue?a59a","webpack://tavern_helper_template/src/panel/help/chat_variable.md?1df3","webpack://tavern_helper_template/src/panel/Compatibility.vue?a71e","webpack://tavern_helper_template/src/panel/Compatibility.vue","src://tavern_helper_template/src/panel/Compatibility.vue","webpack://tavern_helper_template/src/panel/Notification.vue?f0e0","webpack://tavern_helper_template/src/panel/Notification.vue","src://tavern_helper_template/src/panel/Notification.vue","webpack://tavern_helper_template/src/panel/component/ModelSelect.vue","src://tavern_helper_template/src/panel/component/ModelSelect.vue","webpack://tavern_helper_template/src/panel/component/ModelSelect.vue?3344","webpack://tavern_helper_template/src/panel/component/RangeNumber.vue","src://tavern_helper_template/src/panel/component/RangeNumber.vue","webpack://tavern_helper_template/src/panel/component/RangeNumber.vue?5356","webpack://tavern_helper_template/src/panel/component/Select.vue","webpack://tavern_helper_template/src/panel/component/Select.vue?9d2f","src://tavern_helper_template/src/panel/component/Select.vue","webpack://tavern_helper_template/src/panel/help/update_method.md?6ae1","webpack://tavern_helper_template/src/panel/Update.vue","src://tavern_helper_template/src/panel/Update.vue","webpack://tavern_helper_template/src/panel/help/extra_mode.md?33af","webpack://tavern_helper_template/src/panel/help/auto_analyze.md?d62b","webpack://tavern_helper_template/src/panel/Update.vue?17a6","webpack://tavern_helper_template/src/panel/Panel.vue","src://tavern_helper_template/src/panel/Panel.vue","webpack://tavern_helper_template/src/panel/Panel.vue?f649","src://tavern_helper_template/src/main.ts","src://tavern_helper_template/src/notifications.ts","src://tavern_helper_template/src/panel/index.ts"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.mvu-range-number[data-v-48562df7]{display:grid;grid-template-columns:1fr 7.5rem;gap:0.5rem;align-items:center}.mvu-range-number__range[data-v-48562df7]{width:100%}.mvu-range-number__number[data-v-48562df7]{text-align:left;padding-top:0.3rem;padding-bottom:0.3rem;background-color:color-mix(in srgb,var(--SmartThemeBlurTintColor,rgba(31,31,31,1)) 33%,transparent)}@media (max-width:420px){.mvu-range-number[data-v-48562df7]{grid-template-columns:1fr 6.5rem}}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/panel/component/RangeNumber.vue\"],\"names\":[],\"mappings\":\"AA2CA,mCACI,YAAa,CACb,gCAAiC,CACjC,UAAW,CACX,kBACJ,CAEA,0CACI,UACJ,CAEA,2CACI,eAAgB,CAChB,kBAAmB,CACnB,qBAAsB,CACtB,mGAKJ,CAEA,yBACI,mCACI,gCACJ,CACJ\",\"sourcesContent\":[\"<template>\\n    <div class=\\\"mvu-range-number\\\">\\n        <template v-for=\\\"type in ['range', 'number']\\\" :key=\\\"type\\\">\\n            <input\\n                :class=\\\"[\\n                    `mvu-range-number__${type}`,\\n                    type === 'number' ? 'text_pole' : '',\\n                ]\\\"\\n                :type=\\\"type\\\"\\n                :min=\\\"min\\\"\\n                :max=\\\"max\\\"\\n                :step=\\\"step\\\"\\n                :disabled=\\\"disabled\\\"\\n                :value=\\\"model\\\"\\n                @input=\\\"onInput\\\"\\n            />\\n        </template>\\n    </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nconst model = defineModel<number>({ required: true });\\nconst props = defineProps<{\\n    min: number;\\n    max: number;\\n    step: number;\\n    disabled?: boolean;\\n}>();\\n\\nfunction clamp(value: number) {\\n    return _.clamp(value, props.min, props.max);\\n}\\n\\nfunction onInput(event: Event) {\\n    const target = event.target as HTMLInputElement | null;\\n    const value = Number(target?.value);\\n    if (Number.isFinite(value)) {\\n        model.value = clamp(value);\\n    }\\n}\\n</script>\\n\\n<style scoped>\\n.mvu-range-number {\\n    display: grid;\\n    grid-template-columns: 1fr 7.5rem;\\n    gap: 0.5rem;\\n    align-items: center;\\n}\\n\\n.mvu-range-number__range {\\n    width: 100%;\\n}\\n\\n.mvu-range-number__number {\\n    text-align: left;\\n    padding-top: 0.3rem;\\n    padding-bottom: 0.3rem;\\n    background-color: color-mix(\\n        in srgb,\\n        var(--SmartThemeBlurTintColor, rgba(31, 31, 31, 1)) 33%,\\n        transparent\\n    );\\n}\\n\\n@media (max-width: 420px) {\\n    .mvu-range-number {\\n        grid-template-columns: 1fr 6.5rem;\\n    }\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[4].use[0]!./Section.vue?vue&type=style&index=0&id=657aff5e&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"1104fd9f\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[4].use[0]!./Section.vue?vue&type=style&index=0&id=657aff5e&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[4].use[0]!./Section.vue?vue&type=style&index=0&id=657aff5e&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.mvu-details[data-v-7f69e7ca]{border:1px dashed var(--SmartThemeBorderColor,rgba(45,45,45,1));border-radius:10px;padding:0.5rem 0.7rem;background-color:color-mix(in srgb,var(--SmartThemeBlurTintColor,rgba(31,31,31,1)) 70%,transparent)}.mvu-details__summary[data-v-7f69e7ca]{cursor:pointer;-webkit-user-select:none;user-select:none;font-weight:600;opacity:0.95}.mvu-details__content[data-v-7f69e7ca]{margin-top:0.5rem;display:flex;flex-direction:column;gap:0.5rem}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/panel/Cleanup.vue\"],\"names\":[],\"mappings\":\"AA8DA,8BACI,+DAAoE,CACpE,kBAAmB,CACnB,qBAAsB,CACtB,mGAKJ,CAEA,uCACI,cAAe,CACf,wBAAiB,CAAjB,gBAAiB,CACjB,eAAgB,CAChB,YACJ,CAEA,uCACI,iBAAkB,CAClB,YAAa,CACb,qBAAsB,CACtB,UACJ\",\"sourcesContent\":[\"<template>\\n    <Section>\\n        <template #title></template>\\n        <template #content>\\n            <Checkbox v-model=\\\"store.settings.auto_cleanup.\\\">\\n                <span></span>\\n            </Checkbox>\\n\\n            <details class=\\\"mvu-details\\\">\\n                <summary class=\\\"mvu-details__summary\\\"></summary>\\n                <div class=\\\"mvu-details__content\\\">\\n                    <Field id=\\\"mvu_snapshot_keep_interval\\\" label=\\\"\\\">\\n                        <input\\n                            id=\\\"mvu_snapshot_keep_interval\\\"\\n                            v-model.number=\\\"store.settings.\\\"\\n                            type=\\\"number\\\"\\n                            min=\\\"1\\\"\\n                            step=\\\"1\\\"\\n                            class=\\\"text_pole\\\"\\n                            placeholder=\\\"50\\\"\\n                        />\\n                    </Field>\\n\\n                    <Field id=\\\"mvu_keep_recent_floors\\\" label=\\\"\\\">\\n                        <input\\n                            id=\\\"mvu_keep_recent_floors\\\"\\n                            v-model.number=\\\"store.settings.auto_cleanup.\\\"\\n                            type=\\\"number\\\"\\n                            min=\\\"1\\\"\\n                            step=\\\"1\\\"\\n                            class=\\\"text_pole\\\"\\n                            placeholder=\\\"20\\\"\\n                        />\\n                    </Field>\\n\\n                    <Field id=\\\"mvu_restore_recent_floors\\\" label=\\\"\\\">\\n                        <input\\n                            id=\\\"mvu_restore_recent_floors\\\"\\n                            v-model.number=\\\"store.settings.auto_cleanup.\\\"\\n                            type=\\\"number\\\"\\n                            min=\\\"1\\\"\\n                            step=\\\"1\\\"\\n                            class=\\\"text_pole\\\"\\n                            placeholder=\\\"10\\\"\\n                        />\\n                    </Field>\\n                </div>\\n            </details>\\n        </template>\\n    </Section>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport Checkbox from '@/panel/component/Checkbox.vue';\\nimport Field from '@/panel/component/Field.vue';\\nimport Section from '@/panel/component/Section.vue';\\nimport { useSettingsStore } from '@/settings';\\n\\nconst store = useSettingsStore();\\n</script>\\n\\n<style scoped>\\n.mvu-details {\\n    border: 1px dashed var(--SmartThemeBorderColor, rgba(45, 45, 45, 1));\\n    border-radius: 10px;\\n    padding: 0.5rem 0.7rem;\\n    background-color: color-mix(\\n        in srgb,\\n        var(--SmartThemeBlurTintColor, rgba(31, 31, 31, 1)) 70%,\\n        transparent\\n    );\\n}\\n\\n.mvu-details__summary {\\n    cursor: pointer;\\n    user-select: none;\\n    font-weight: 600;\\n    opacity: 0.95;\\n}\\n\\n.mvu-details__content {\\n    margin-top: 0.5rem;\\n    display: flex;\\n    flex-direction: column;\\n    gap: 0.5rem;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[4].use[0]!./ModelSelect.vue?vue&type=style&index=0&id=52f29fd7&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"935120a2\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[4].use[0]!./ModelSelect.vue?vue&type=style&index=0&id=52f29fd7&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[4].use[0]!./ModelSelect.vue?vue&type=style&index=0&id=52f29fd7&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.mvu-subtitle[data-v-4cb38b1c]{display:flex;align-items:center;gap:0.35rem;font-weight:600;opacity:0.9}.mvu-field-grid[data-v-4cb38b1c]{display:flex;flex-direction:column;gap:0.5rem}.mvu-details[data-v-4cb38b1c]{border:1px dashed var(--SmartThemeBorderColor,rgba(45,45,45,1));border-radius:10px;padding:0.5rem 0.7rem;background-color:rgba(0,0,0,0.06);background-color:color-mix(in srgb,var(--SmartThemeBlurTintColor,rgba(31,31,31,1)) 70%,transparent)}.mvu-details__summary[data-v-4cb38b1c]{cursor:pointer;-webkit-user-select:none;user-select:none;font-weight:600;opacity:0.95}.mvu-details__content[data-v-4cb38b1c]{margin-top:0.5rem;display:flex;flex-direction:column;gap:0.5rem}.mvu-note[data-v-4cb38b1c]{opacity:0.85;color:var(--SmartThemeEmColor,inherit)}.mvu-warning[data-v-4cb38b1c]{margin-top:0.5rem;padding:0.55rem 0.7rem;border:1px solid color-mix(in srgb,var(--SmartThemeEmColor,#d39e00) 35%,transparent);border-radius:10px;background-color:color-mix(in srgb,var(--SmartThemeEmColor,#fff3cd) 15%,transparent);color:var(--SmartThemeEmColor,#856404);display:grid;grid-template-columns:auto 1fr;-moz-column-gap:0.5rem;column-gap:0.5rem;align-items:center}.mvu-warning__icon[data-v-4cb38b1c]{line-height:1}.mvu-warning__text[data-v-4cb38b1c]{word-break:break-word}.mvu-advanced-grid[data-v-4cb38b1c]{display:flex;flex-direction:column;gap:0.6rem}@media (max-width:420px){.mvu-option-grid[data-v-4cb38b1c]{grid-template-columns:1fr}}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/panel/Update.vue\"],\"names\":[],\"mappings\":\"AAkNA,+BACI,YAAa,CACb,kBAAmB,CACnB,WAAY,CACZ,eAAgB,CAChB,WACJ,CAEA,iCACI,YAAa,CACb,qBAAsB,CACtB,UACJ,CAEA,8BACI,+DAAoE,CACpE,kBAAmB,CACnB,qBAAsB,CACtB,iCAAqC,CACrC,mGAKJ,CAEA,uCACI,cAAe,CACf,wBAAiB,CAAjB,gBAAiB,CACjB,eAAgB,CAChB,YACJ,CAEA,uCACI,iBAAkB,CAClB,YAAa,CACb,qBAAsB,CACtB,UACJ,CAEA,2BACI,YAAa,CACb,sCACJ,CAEA,8BACI,iBAAkB,CAClB,sBAAuB,CACvB,oFAAwF,CACxF,kBAAmB,CACnB,oFAAwF,CACxF,sCAAwC,CACxC,YAAa,CACb,8BAA+B,CAC/B,sBAAkB,CAAlB,iBAAkB,CAClB,kBACJ,CAEA,oCACI,aACJ,CAEA,oCACI,qBACJ,CAEA,oCACI,YAAa,CACb,qBAAsB,CACtB,UACJ,CAEA,yBACI,kCACI,yBACJ,CACJ\",\"sourcesContent\":[\"<template>\\n    <Section>\\n        <template #title>\\n            \\n            <HelpIcon :help=\\\"panel_method_help\\\" />\\n        </template>\\n        <template #content>\\n            <Field label=\\\"\\\">\\n                <Select v-model=\\\"store.settings.\\\" :options=\\\"['AI', '']\\\" />\\n            </Field>\\n\\n            <template\\n                v-if=\\\"\\n                    temp_contents.unsupported_warnings !== '' &&\\n                    store.settings. === ''\\n                \\\"\\n            >\\n                <div class=\\\"mvu-warning\\\">\\n                    <span class=\\\"mvu-warning__icon\\\"></span>\\n                    <span class=\\\"mvu-warning__text\\\">\\n                         [{{ temp_contents.unsupported_warnings }}]\\n                         [mvu_update]\\n                        \\n                    </span>\\n                </div>\\n            </template>\\n\\n            <template v-if=\\\"store.settings. === ''\\\">\\n                <div class=\\\"mvu-subtitle\\\">\\n                    <span></span>\\n                    <HelpIcon :help=\\\"panel_extra_mode_help\\\" />\\n                </div>\\n\\n                <Checkbox v-model=\\\"store.settings..\\\">\\n                    <span></span>\\n                </Checkbox>\\n\\n                <Checkbox v-model=\\\"store.settings..\\\">\\n                    <span></span>\\n                </Checkbox>\\n\\n                <Checkbox v-model=\\\"store.settings.\\\">\\n                    <span></span>\\n                    <HelpIcon :help=\\\"auto_analyze_help\\\" />\\n                </Checkbox>\\n\\n                <Field label=\\\"\\\">\\n                    <Select\\n                        v-model=\\\"store.settings..\\\"\\n                        :options=\\\"['', '']\\\"\\n                    />\\n                </Field>\\n\\n                <template v-if=\\\"store.settings.. === ''\\\">\\n                    <div class=\\\"mvu-subtitle\\\"> API</div>\\n\\n                    <div class=\\\"mvu-field-grid\\\">\\n                        <Field label=\\\"API \\\">\\n                            <input\\n                                v-model=\\\"store.settings..api\\\"\\n                                type=\\\"text\\\"\\n                                class=\\\"text_pole\\\"\\n                                placeholder=\\\"http://localhost:1234/v1\\\"\\n                            />\\n                        </Field>\\n\\n                        <Field label=\\\"API \\\">\\n                            <input\\n                                v-model=\\\"store.settings..\\\"\\n                                type=\\\"password\\\"\\n                                class=\\\"text_pole\\\"\\n                                placeholder=\\\"\\\"\\n                            />\\n                        </Field>\\n\\n                        <Field label=\\\"\\\">\\n                            <ModelSelect />\\n                        </Field>\\n                    </div>\\n\\n                    <details class=\\\"mvu-details\\\">\\n                        <summary class=\\\"mvu-details__summary\\\"></summary>\\n                        <div class=\\\"mvu-details__content\\\">\\n                            <div v-if=\\\"!additional_extra_configuration_supported\\\" class=\\\"mvu-note\\\">\\n                                \\n                            </div>\\n\\n                            <div class=\\\"mvu-advanced-grid\\\">\\n                                <Field label=\\\" token\\\">\\n                                    <input\\n                                        v-model.number=\\\"\\n                                            store.settings..token\\n                                        \\\"\\n                                        :disabled=\\\"!additional_extra_configuration_supported\\\"\\n                                        type=\\\"number\\\"\\n                                        class=\\\"text_pole\\\"\\n                                        min=\\\"0\\\"\\n                                        step=\\\"128\\\"\\n                                        placeholder=\\\"4096\\\"\\n                                    />\\n                                </Field>\\n\\n                                <Field label=\\\"\\\">\\n                                    <RangeNumber\\n                                        v-model=\\\"store.settings..\\\"\\n                                        :disabled=\\\"!additional_extra_configuration_supported\\\"\\n                                        :min=\\\"0\\\"\\n                                        :max=\\\"2\\\"\\n                                        :step=\\\"0.01\\\"\\n                                    />\\n                                </Field>\\n\\n                                <Field label=\\\"Top P\\\">\\n                                    <RangeNumber\\n                                        v-model=\\\"store.settings..top_p\\\"\\n                                        :disabled=\\\"!additional_extra_configuration_supported\\\"\\n                                        :min=\\\"0\\\"\\n                                        :max=\\\"1\\\"\\n                                        :step=\\\"0.01\\\"\\n                                    />\\n                                </Field>\\n\\n                                <Field label=\\\"\\\">\\n                                    <RangeNumber\\n                                        v-model=\\\"store.settings..\\\"\\n                                        :disabled=\\\"!additional_extra_configuration_supported\\\"\\n                                        :min=\\\"-2\\\"\\n                                        :max=\\\"2\\\"\\n                                        :step=\\\"0.01\\\"\\n                                    />\\n                                </Field>\\n\\n                                <Field label=\\\"\\\">\\n                                    <RangeNumber\\n                                        v-model=\\\"store.settings..\\\"\\n                                        :disabled=\\\"!additional_extra_configuration_supported\\\"\\n                                        :min=\\\"-2\\\"\\n                                        :max=\\\"2\\\"\\n                                        :step=\\\"0.01\\\"\\n                                    />\\n                                </Field>\\n                            </div>\\n                        </div>\\n                    </details>\\n                </template>\\n            </template>\\n        </template>\\n    </Section>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport Checkbox from '@/panel/component/Checkbox.vue';\\nimport Field from '@/panel/component/Field.vue';\\nimport HelpIcon from '@/panel/component/HelpIcon.vue';\\nimport ModelSelect from '@/panel/component/ModelSelect.vue';\\nimport RangeNumber from '@/panel/component/RangeNumber.vue';\\nimport Section from '@/panel/component/Section.vue';\\nimport Select from '@/panel/component/Select.vue';\\nimport auto_analyze_help from '@/panel/help/auto_analyze.md';\\nimport panel_extra_mode_help from '@/panel/help/extra_mode.md';\\nimport panel_method_help from '@/panel/help/update_method.md';\\nimport { useSettingsStore, useTempContents } from '@/settings';\\nimport { getSillyTavernVersion, getTavernHelperVersion } from '@/util';\\nimport { compare } from 'compare-versions';\\nimport { watch } from 'vue';\\n\\nconst additional_extra_configuration_supported = compare(getTavernHelperVersion(), '4.0.14', '>=');\\n\\nconst store = useSettingsStore();\\nconst temp_contents = useTempContents().temp_contents;\\n\\nwatch(\\n    () => store.settings.,\\n    value => {\\n        if (value === '' && compare(getSillyTavernVersion(), '1.13.4', '<')) {\\n            toastr.error(\\n                \\\"'' 1.13.4\\\",\\n                \\\"[MVU]''\\\",\\n                { timeOut: 5000 }\\n            );\\n            store.settings. = 'AI';\\n        }\\n    }\\n);\\n\\nwatch(\\n    () => store.settings..,\\n    value => {\\n        if (value === true) {\\n            if (!SillyTavern.ToolManager.isToolCallingSupported()) {\\n                toastr.error(\\n                    \\\" API  () ''\\\",\\n                    \\\"[MVU]''\\\",\\n                    {\\n                        timeOut: 5000,\\n                    }\\n                );\\n            }\\n            if (SillyTavern.chatCompletionSettings.function_calling === false) {\\n                toastr.error(\\\"''\\\", \\\"[MVU]''\\\", {\\n                    timeOut: 5000,\\n                });\\n            }\\n            store.settings.. = true;\\n        }\\n    }\\n);\\n</script>\\n\\n<style scoped>\\n.mvu-subtitle {\\n    display: flex;\\n    align-items: center;\\n    gap: 0.35rem;\\n    font-weight: 600;\\n    opacity: 0.9;\\n}\\n\\n.mvu-field-grid {\\n    display: flex;\\n    flex-direction: column;\\n    gap: 0.5rem;\\n}\\n\\n.mvu-details {\\n    border: 1px dashed var(--SmartThemeBorderColor, rgba(45, 45, 45, 1));\\n    border-radius: 10px;\\n    padding: 0.5rem 0.7rem;\\n    background-color: rgba(0, 0, 0, 0.06);\\n    background-color: color-mix(\\n        in srgb,\\n        var(--SmartThemeBlurTintColor, rgba(31, 31, 31, 1)) 70%,\\n        transparent\\n    );\\n}\\n\\n.mvu-details__summary {\\n    cursor: pointer;\\n    user-select: none;\\n    font-weight: 600;\\n    opacity: 0.95;\\n}\\n\\n.mvu-details__content {\\n    margin-top: 0.5rem;\\n    display: flex;\\n    flex-direction: column;\\n    gap: 0.5rem;\\n}\\n\\n.mvu-note {\\n    opacity: 0.85;\\n    color: var(--SmartThemeEmColor, inherit);\\n}\\n\\n.mvu-warning {\\n    margin-top: 0.5rem;\\n    padding: 0.55rem 0.7rem;\\n    border: 1px solid color-mix(in srgb, var(--SmartThemeEmColor, #d39e00) 35%, transparent);\\n    border-radius: 10px;\\n    background-color: color-mix(in srgb, var(--SmartThemeEmColor, #fff3cd) 15%, transparent);\\n    color: var(--SmartThemeEmColor, #856404);\\n    display: grid;\\n    grid-template-columns: auto 1fr;\\n    column-gap: 0.5rem;\\n    align-items: center;\\n}\\n\\n.mvu-warning__icon {\\n    line-height: 1;\\n}\\n\\n.mvu-warning__text {\\n    word-break: break-word;\\n}\\n\\n.mvu-advanced-grid {\\n    display: flex;\\n    flex-direction: column;\\n    gap: 0.6rem;\\n}\\n\\n@media (max-width: 420px) {\\n    .mvu-option-grid {\\n        grid-template-columns: 1fr;\\n    }\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n  if (!cssMapping) {\n    return content;\n  }\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    return [content].concat([sourceMapping]).join(\"\\n\");\n  }\n  return [content].join(\"\\n\");\n};","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.mvu-field[data-v-f69a3438]{gap:0.25rem}.mvu-field__label[data-v-f69a3438]{display:inline-flex;align-items:center;gap:0.35rem}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/panel/component/Field.vue\"],\"names\":[],\"mappings\":\"AAeA,4BACI,WACJ,CAEA,mCACI,mBAAoB,CACpB,kBAAmB,CACnB,WACJ\",\"sourcesContent\":[\"<template>\\n    <div class=\\\"mvu-field flex-container flexFlowColumn\\\">\\n        <label class=\\\"mvu-field__label\\\">\\n            <span>{{ label }}</span>\\n            <slot name=\\\"label-suffix\\\" />\\n        </label>\\n        <slot />\\n    </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\ndefineProps<{ label: string }>();\\n</script>\\n\\n<style scoped>\\n.mvu-field {\\n    gap: 0.25rem;\\n}\\n\\n.mvu-field__label {\\n    display: inline-flex;\\n    align-items: center;\\n    gap: 0.35rem;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!../../node_modules/vue-loader/dist/stylePostLoader.js!../../node_modules/postcss-loader/dist/cjs.js!../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[4].use[0]!./Cleanup.vue?vue&type=style&index=0&id=7f69e7ca&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"fb8d2b3c\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!../../node_modules/vue-loader/dist/stylePostLoader.js!../../node_modules/postcss-loader/dist/cjs.js!../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[4].use[0]!./Cleanup.vue?vue&type=style&index=0&id=7f69e7ca&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!../../node_modules/vue-loader/dist/stylePostLoader.js!../../node_modules/postcss-loader/dist/cjs.js!../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[4].use[0]!./Cleanup.vue?vue&type=style&index=0&id=7f69e7ca&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[4].use[0]!./RangeNumber.vue?vue&type=style&index=0&id=48562df7&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"9bf05e1c\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[4].use[0]!./RangeNumber.vue?vue&type=style&index=0&id=48562df7&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[4].use[0]!./RangeNumber.vue?vue&type=style&index=0&id=48562df7&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[4].use[0]!./Field.vue?vue&type=style&index=0&id=f69a3438&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"6f2ecae4\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[4].use[0]!./Field.vue?vue&type=style&index=0&id=f69a3438&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[4].use[0]!./Field.vue?vue&type=style&index=0&id=f69a3438&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!../../node_modules/vue-loader/dist/stylePostLoader.js!../../node_modules/postcss-loader/dist/cjs.js!../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[4].use[0]!./Button.vue?vue&type=style&index=0&id=b3b1183a&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"4d15d377\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!../../node_modules/vue-loader/dist/stylePostLoader.js!../../node_modules/postcss-loader/dist/cjs.js!../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[4].use[0]!./Button.vue?vue&type=style&index=0&id=b3b1183a&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!../../node_modules/vue-loader/dist/stylePostLoader.js!../../node_modules/postcss-loader/dist/cjs.js!../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[4].use[0]!./Button.vue?vue&type=style&index=0&id=b3b1183a&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","/**\n * Translates the list format produced by css-loader into something\n * easier to manipulate.\n */\nexport default function listToStyles (parentId, list) {\n  var styles = []\n  var newStyles = {}\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i]\n    var id = item[0]\n    var css = item[1]\n    var media = item[2]\n    var sourceMap = item[3]\n    var part = {\n      id: parentId + ':' + i,\n      css: css,\n      media: media,\n      sourceMap: sourceMap\n    }\n    if (!newStyles[id]) {\n      styles.push(newStyles[id] = { id: id, parts: [part] })\n    } else {\n      newStyles[id].parts.push(part)\n    }\n  }\n  return styles\n}\n","/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n  Modified by Evan You @yyx990803\n*/\n\nimport listToStyles from './listToStyles'\n\nvar hasDocument = typeof document !== 'undefined'\n\nif (typeof DEBUG !== 'undefined' && DEBUG) {\n  if (!hasDocument) {\n    throw new Error(\n    'vue-style-loader cannot be used in a non-browser environment. ' +\n    \"Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.\"\n  ) }\n}\n\n/*\ntype StyleObject = {\n  id: number;\n  parts: Array<StyleObjectPart>\n}\n\ntype StyleObjectPart = {\n  css: string;\n  media: string;\n  sourceMap: ?string\n}\n*/\n\nvar stylesInDom = {/*\n  [id: number]: {\n    id: number,\n    refs: number,\n    parts: Array<(obj?: StyleObjectPart) => void>\n  }\n*/}\n\nvar head = hasDocument && (document.head || document.getElementsByTagName('head')[0])\nvar singletonElement = null\nvar singletonCounter = 0\nvar isProduction = false\nvar noop = function () {}\nvar options = null\nvar ssrIdKey = 'data-vue-ssr-id'\n\n// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n// tags it will allow on a page\nvar isOldIE = typeof navigator !== 'undefined' && /msie [6-9]\\b/.test(navigator.userAgent.toLowerCase())\n\nexport default function addStylesClient (parentId, list, _isProduction, _options) {\n  isProduction = _isProduction\n\n  options = _options || {}\n\n  var styles = listToStyles(parentId, list)\n  addStylesToDom(styles)\n\n  return function update (newList) {\n    var mayRemove = []\n    for (var i = 0; i < styles.length; i++) {\n      var item = styles[i]\n      var domStyle = stylesInDom[item.id]\n      domStyle.refs--\n      mayRemove.push(domStyle)\n    }\n    if (newList) {\n      styles = listToStyles(parentId, newList)\n      addStylesToDom(styles)\n    } else {\n      styles = []\n    }\n    for (var i = 0; i < mayRemove.length; i++) {\n      var domStyle = mayRemove[i]\n      if (domStyle.refs === 0) {\n        for (var j = 0; j < domStyle.parts.length; j++) {\n          domStyle.parts[j]()\n        }\n        delete stylesInDom[domStyle.id]\n      }\n    }\n  }\n}\n\nfunction addStylesToDom (styles /* Array<StyleObject> */) {\n  for (var i = 0; i < styles.length; i++) {\n    var item = styles[i]\n    var domStyle = stylesInDom[item.id]\n    if (domStyle) {\n      domStyle.refs++\n      for (var j = 0; j < domStyle.parts.length; j++) {\n        domStyle.parts[j](item.parts[j])\n      }\n      for (; j < item.parts.length; j++) {\n        domStyle.parts.push(addStyle(item.parts[j]))\n      }\n      if (domStyle.parts.length > item.parts.length) {\n        domStyle.parts.length = item.parts.length\n      }\n    } else {\n      var parts = []\n      for (var j = 0; j < item.parts.length; j++) {\n        parts.push(addStyle(item.parts[j]))\n      }\n      stylesInDom[item.id] = { id: item.id, refs: 1, parts: parts }\n    }\n  }\n}\n\nfunction createStyleElement () {\n  var styleElement = document.createElement('style')\n  styleElement.type = 'text/css'\n  head.appendChild(styleElement)\n  return styleElement\n}\n\nfunction addStyle (obj /* StyleObjectPart */) {\n  var update, remove\n  var styleElement = document.querySelector('style[' + ssrIdKey + '~=\"' + obj.id + '\"]')\n\n  if (styleElement) {\n    if (isProduction) {\n      // has SSR styles and in production mode.\n      // simply do nothing.\n      return noop\n    } else {\n      // has SSR styles but in dev mode.\n      // for some reason Chrome can't handle source map in server-rendered\n      // style tags - source maps in <style> only works if the style tag is\n      // created and inserted dynamically. So we remove the server rendered\n      // styles and inject new ones.\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  if (isOldIE) {\n    // use singleton mode for IE9.\n    var styleIndex = singletonCounter++\n    styleElement = singletonElement || (singletonElement = createStyleElement())\n    update = applyToSingletonTag.bind(null, styleElement, styleIndex, false)\n    remove = applyToSingletonTag.bind(null, styleElement, styleIndex, true)\n  } else {\n    // use multi-style-tag mode in all other cases\n    styleElement = createStyleElement()\n    update = applyToTag.bind(null, styleElement)\n    remove = function () {\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  update(obj)\n\n  return function updateStyle (newObj /* StyleObjectPart */) {\n    if (newObj) {\n      if (newObj.css === obj.css &&\n          newObj.media === obj.media &&\n          newObj.sourceMap === obj.sourceMap) {\n        return\n      }\n      update(obj = newObj)\n    } else {\n      remove()\n    }\n  }\n}\n\nvar replaceText = (function () {\n  var textStore = []\n\n  return function (index, replacement) {\n    textStore[index] = replacement\n    return textStore.filter(Boolean).join('\\n')\n  }\n})()\n\nfunction applyToSingletonTag (styleElement, index, remove, obj) {\n  var css = remove ? '' : obj.css\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = replaceText(index, css)\n  } else {\n    var cssNode = document.createTextNode(css)\n    var childNodes = styleElement.childNodes\n    if (childNodes[index]) styleElement.removeChild(childNodes[index])\n    if (childNodes.length) {\n      styleElement.insertBefore(cssNode, childNodes[index])\n    } else {\n      styleElement.appendChild(cssNode)\n    }\n  }\n}\n\nfunction applyToTag (styleElement, obj) {\n  var css = obj.css\n  var media = obj.media\n  var sourceMap = obj.sourceMap\n\n  if (media) {\n    styleElement.setAttribute('media', media)\n  }\n  if (options.ssrId) {\n    styleElement.setAttribute(ssrIdKey, obj.id)\n  }\n\n  if (sourceMap) {\n    // https://developer.chrome.com/devtools/docs/javascript-debugging\n    // this makes source maps inside style tags work properly in Chrome\n    css += '\\n/*# sourceURL=' + sourceMap.sources[0] + ' */'\n    // http://stackoverflow.com/a/26603875\n    css += '\\n/*# sourceMappingURL=data:application/json;base64,' + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + ' */'\n  }\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild)\n    }\n    styleElement.appendChild(document.createTextNode(css))\n  }\n}\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!../../node_modules/vue-loader/dist/stylePostLoader.js!../../node_modules/postcss-loader/dist/cjs.js!../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[4].use[0]!./Update.vue?vue&type=style&index=0&id=4cb38b1c&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"4f13e984\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!../../node_modules/vue-loader/dist/stylePostLoader.js!../../node_modules/postcss-loader/dist/cjs.js!../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[4].use[0]!./Update.vue?vue&type=style&index=0&id=4cb38b1c&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!../../node_modules/vue-loader/dist/stylePostLoader.js!../../node_modules/postcss-loader/dist/cjs.js!../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[4].use[0]!./Update.vue?vue&type=style&index=0&id=4cb38b1c&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.mvu-button-wrap[data-v-b3b1183a]{display:flex;flex-wrap:wrap;gap:0.5rem 0.6rem;align-items:center}.mvu-button-wrap[data-v-b3b1183a] .menu_button{box-sizing:border-box;text-align:left;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;justify-content:flex-start;padding:0.35rem 0.6rem;min-height:unset;height:2.05rem;line-height:1.1}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/panel/Button.vue\"],\"names\":[],\"mappings\":\"AAiCA,kCACI,YAAa,CACb,cAAe,CACf,iBAAkB,CAClB,kBACJ,CAEA,+CACI,qBAAsB,CACtB,eAAgB,CAChB,kBAAmB,CACnB,eAAgB,CAChB,sBAAuB,CACvB,0BAA2B,CAC3B,sBAAuB,CACvB,gBAAiB,CACjB,cAAe,CACf,eACJ\",\"sourcesContent\":[\"<template>\\n    <Section>\\n        <template #title></template>\\n        <template #content>\\n            <div class=\\\"mvu-button-wrap\\\">\\n                <div\\n                    v-for=\\\"button in visibleButtons\\\"\\n                    :key=\\\"button.name\\\"\\n                    class=\\\"menu_button menu_button_icon interactable\\\"\\n                    tabindex=\\\"0\\\"\\n                    role=\\\"button\\\"\\n                    @click=\\\"button.function\\\"\\n                >\\n                    {{ button.name }}\\n                </div>\\n            </div>\\n        </template>\\n    </Section>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { buttons } from '@/button';\\nimport Section from '@/panel/component/Section.vue';\\nimport { useSettingsStore } from '@/settings';\\nimport { computed } from 'vue';\\n\\nconst store = useSettingsStore();\\nconst visibleButtons = computed(() =>\\n    buttons.filter(button => !(button.is_legacy ?? false) || store.settings.legacy. === true)\\n);\\n</script>\\n\\n<style scoped>\\n.mvu-button-wrap {\\n    display: flex;\\n    flex-wrap: wrap;\\n    gap: 0.5rem 0.6rem;\\n    align-items: center;\\n}\\n\\n.mvu-button-wrap :deep(.menu_button) {\\n    box-sizing: border-box;\\n    text-align: left;\\n    white-space: nowrap;\\n    overflow: hidden;\\n    text-overflow: ellipsis;\\n    justify-content: flex-start;\\n    padding: 0.35rem 0.6rem;\\n    min-height: unset;\\n    height: 2.05rem;\\n    line-height: 1.1;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.mvu-section[data-v-657aff5e]{border:1px solid var(--SmartThemeBorderColor,rgba(45,45,45,1));border-radius:10px;padding:0.6rem 0.75rem;gap:0.45rem;background-color:rgba(0,0,0,0.08);background-color:color-mix(in srgb,var(--SmartThemeBlurTintColor,rgba(31,31,31,1)) 75%,transparent)}.mvu-section__content[data-v-657aff5e]{gap:0.5rem}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/panel/component/Section.vue\"],\"names\":[],\"mappings\":\"AAYA,8BACI,8DAAmE,CACnE,kBAAmB,CACnB,sBAAuB,CACvB,WAAY,CACZ,iCAAqC,CACrC,mGAKJ,CAEA,uCACI,UACJ\",\"sourcesContent\":[\"<template>\\n    <div class=\\\"mvu-section flex-container flexFlowColumn\\\">\\n        <div class=\\\"mvu-section__title\\\">\\n            <strong><slot name=\\\"title\\\" /></strong>\\n        </div>\\n        <div class=\\\"mvu-section__content flex-container flexFlowColumn\\\">\\n            <slot name=\\\"content\\\" />\\n        </div>\\n    </div>\\n</template>\\n\\n<style scoped>\\n.mvu-section {\\n    border: 1px solid var(--SmartThemeBorderColor, rgba(45, 45, 45, 1));\\n    border-radius: 10px;\\n    padding: 0.6rem 0.75rem;\\n    gap: 0.45rem;\\n    background-color: rgba(0, 0, 0, 0.08);\\n    background-color: color-mix(\\n        in srgb,\\n        var(--SmartThemeBlurTintColor, rgba(31, 31, 31, 1)) 75%,\\n        transparent\\n    );\\n}\\n\\n.mvu-section__content {\\n    gap: 0.5rem;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[4].use[0]!./HelpIcon.vue?vue&type=style&index=0&id=2eeacd15&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"51e320ec\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[4].use[0]!./HelpIcon.vue?vue&type=style&index=0&id=2eeacd15&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[4].use[0]!./HelpIcon.vue?vue&type=style&index=0&id=2eeacd15&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.mvu-model-select[data-v-52f29fd7]{display:flex;flex-direction:column;gap:0.5rem}.mvu-model-select__row[data-v-52f29fd7]{width:100%}.mvu-model-select__row--controls[data-v-52f29fd7]{display:grid;grid-template-columns:1fr auto;gap:0.5rem;align-items:center}.mvu-model-select__btn[data-v-52f29fd7]{white-space:nowrap;text-align:left;padding:0.35rem 0.6rem;min-height:unset;height:2.05rem;line-height:1.1}@media (max-width:520px){.mvu-model-select__row--controls[data-v-52f29fd7]{grid-template-columns:1fr}}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/panel/component/ModelSelect.vue\"],\"names\":[],\"mappings\":\"AAuIA,mCACI,YAAa,CACb,qBAAsB,CACtB,UACJ,CAEA,wCACI,UACJ,CAEA,kDACI,YAAa,CACb,8BAA+B,CAC/B,UAAW,CACX,kBACJ,CAEA,wCACI,kBAAmB,CACnB,eAAgB,CAChB,sBAAuB,CACvB,gBAAiB,CACjB,cAAe,CACf,eACJ,CAEA,yBACI,kDACI,yBACJ,CACJ\",\"sourcesContent\":[\"<template>\\n    <div class=\\\"mvu-model-select\\\">\\n        <div class=\\\"mvu-model-select__row\\\">\\n            <input\\n                v-model=\\\"store.settings..\\\"\\n                type=\\\"text\\\"\\n                class=\\\"text_pole\\\"\\n                autocomplete=\\\"off\\\"\\n            />\\n        </div>\\n\\n        <div class=\\\"mvu-model-select__row mvu-model-select__row--controls\\\">\\n            <select\\n                ref=\\\"select\\\"\\n                v-model=\\\"selected\\\"\\n                class=\\\"text_pole\\\"\\n                :disabled=\\\"models.length === 0\\\"\\n                aria-label=\\\"\\\"\\n            >\\n                <option value=\\\"\\\"></option>\\n                <option v-for=\\\"model in models\\\" :key=\\\"model\\\" :value=\\\"model\\\">{{ model }}</option>\\n            </select>\\n\\n            <input\\n                class=\\\"mvu-model-select__btn menu_button menu_button_icon interactable\\\"\\n                type=\\\"button\\\"\\n                :value=\\\"loading ? '' : ''\\\"\\n                :disabled=\\\"loading\\\"\\n                @click=\\\"refresh\\\"\\n            />\\n        </div>\\n    </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { useSettingsStore } from '@/settings';\\nimport { ref, watch } from 'vue';\\n\\nconst store = useSettingsStore();\\n\\nconst loading = ref(false);\\nconst models = ref<string[]>([]);\\nconst selected = ref('');\\n\\nfunction normalizeBaseURL(api_url: string): string {\\n    api_url = api_url.trim().replace(/\\\\/+$/, '');\\n    if (!api_url) {\\n        return '';\\n    }\\n    if (api_url.endsWith('/v1')) {\\n        return api_url;\\n    }\\n    if (api_url.endsWith('/models')) {\\n        return api_url.replace(/\\\\/models$/, '');\\n    }\\n    return `${api_url}/v1`;\\n}\\n\\nasync function refresh() {\\n    if (loading.value) {\\n        return;\\n    }\\n\\n    const base_url = normalizeBaseURL(store.settings..api);\\n    if (!base_url) {\\n        return;\\n    }\\n\\n    loading.value = true;\\n    try {\\n        const response = await fetch('/api/backends/chat-completions/status', {\\n            method: 'POST',\\n            headers: SillyTavern.getRequestHeaders(),\\n            body: JSON.stringify({\\n                reverse_proxy: base_url,\\n                custom_url: base_url,\\n                proxy_password: store.settings..,\\n                chat_completion_source: 'custom',\\n            }),\\n            cache: 'no-cache',\\n        });\\n\\n        const json = await response.json();\\n\\n        models.value = _(json?.data ?? [])\\n            .map((model: any) => String(model?.id ?? model?.name ?? '').trim())\\n            .filter(Boolean)\\n            .sort()\\n            .sortedUniq()\\n            .value();\\n        selected.value = models.value.includes(store.settings..)\\n            ? store.settings..\\n            : '';\\n\\n        if (models.value.length === 0) {\\n            toastr.warning('', '[MVU]');\\n        }\\n    } catch (error) {\\n        toastr.error(String((error as Error)?.message ?? error), '[MVU]');\\n    } finally {\\n        loading.value = false;\\n    }\\n}\\n\\nwatch(\\n    selected,\\n    value => {\\n        if (!value) return;\\n        store.settings.. = value;\\n    },\\n    { flush: 'sync' }\\n);\\n\\nwatch(\\n    () => store.settings..,\\n    value => {\\n        if (!value) {\\n            selected.value = '';\\n            return;\\n        }\\n        selected.value = models.value.includes(value) ? value : '';\\n    },\\n    { flush: 'sync' }\\n);\\n\\nwatch(\\n    () => [store.settings..api, store.settings..] as const,\\n    () => {\\n        models.value = [];\\n        selected.value = '';\\n    }\\n);\\n</script>\\n\\n<style scoped>\\n.mvu-model-select {\\n    display: flex;\\n    flex-direction: column;\\n    gap: 0.5rem;\\n}\\n\\n.mvu-model-select__row {\\n    width: 100%;\\n}\\n\\n.mvu-model-select__row--controls {\\n    display: grid;\\n    grid-template-columns: 1fr auto;\\n    gap: 0.5rem;\\n    align-items: center;\\n}\\n\\n.mvu-model-select__btn {\\n    white-space: nowrap;\\n    text-align: left;\\n    padding: 0.35rem 0.6rem;\\n    min-height: unset;\\n    height: 2.05rem;\\n    line-height: 1.1;\\n}\\n\\n@media (max-width: 520px) {\\n    .mvu-model-select__row--controls {\\n        grid-template-columns: 1fr;\\n    }\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.inline-drawer-content[data-v-40549470]{flex-direction:column;gap:0.75rem;padding-top:0.5rem}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/panel/Panel.vue\"],\"names\":[],\"mappings\":\"AA0BA,wCACI,qBAAsB,CACtB,WAAY,CACZ,kBACJ\",\"sourcesContent\":[\"<template>\\n    <div class=\\\"inline-drawer\\\">\\n        <div class=\\\"inline-drawer-toggle inline-drawer-header\\\">\\n            <b>MVU </b>\\n            <div class=\\\"inline-drawer-icon fa-solid fa-circle-chevron-down down\\\"></div>\\n        </div>\\n\\n        <div class=\\\"inline-drawer-content\\\">\\n            <Notification />\\n            <Update />\\n            <Button />\\n            <Cleanup />\\n            <Compatibility />\\n        </div>\\n    </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport Button from '@/panel/Button.vue';\\nimport Cleanup from '@/panel/Cleanup.vue';\\nimport Compatibility from '@/panel/Compatibility.vue';\\nimport Notification from '@/panel/Notification.vue';\\nimport Update from '@/panel/Update.vue';\\n</script>\\n\\n<style scoped>\\n.inline-drawer-content {\\n    flex-direction: column;\\n    gap: 0.75rem;\\n    padding-top: 0.5rem;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.mvu-help-icon[data-v-2eeacd15]{cursor:pointer}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/panel/component/HelpIcon.vue\"],\"names\":[],\"mappings\":\"AAiBA,gCACI,cACJ\",\"sourcesContent\":[\"<template>\\n    <i\\n        class=\\\"fa-solid fa-circle-question fa-sm note-link-span mvu-help-icon\\\"\\n        role=\\\"button\\\"\\n        tabindex=\\\"0\\\"\\n        aria-label=\\\"\\\"\\n        @click=\\\"showHelpPopup(help)\\\"\\n    />\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { showHelpPopup } from '@/util';\\n\\ndefineProps<{ help: string }>();\\n</script>\\n\\n<style scoped>\\n.mvu-help-icon {\\n    cursor: pointer;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!../../node_modules/vue-loader/dist/stylePostLoader.js!../../node_modules/postcss-loader/dist/cjs.js!../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[4].use[0]!./Panel.vue?vue&type=style&index=0&id=40549470&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"25985a55\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!../../node_modules/vue-loader/dist/stylePostLoader.js!../../node_modules/postcss-loader/dist/cjs.js!../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[4].use[0]!./Panel.vue?vue&type=style&index=0&id=40549470&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-10.use[1]!../../node_modules/vue-loader/dist/stylePostLoader.js!../../node_modules/postcss-loader/dist/cjs.js!../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[4].use[0]!./Panel.vue?vue&type=style&index=0&id=40549470&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// \nexport type TemplateType = StatData | StatData[] | any[];\n\n// StatData \nexport type StatDataMeta = {\n    extensible?: boolean;\n    recursiveExtensible?: boolean;\n    required?: string[];\n    template?: TemplateType; // \n    [key: string]: unknown;\n};\n\nexport type JSONPrimitive = string | number | boolean | null;\n\n// StatData  -  $meta \nexport type StatData = {\n    [key: string]: StatData | JSONPrimitive | (StatData | JSONPrimitive)[];\n} & {\n    $meta?: StatDataMeta;\n    $arrayMeta?: boolean;\n};\n\n// Schema \nexport type SchemaNode = ObjectSchemaNode | ArraySchemaNode | PrimitiveSchemaNode;\n\n//  Schema \nexport type ObjectSchemaNode = {\n    type: 'object';\n    properties: {\n        [key: string]: SchemaNode & { required?: boolean };\n    };\n    extensible?: boolean;\n    template?: TemplateType; // \n    recursiveExtensible?: boolean;\n};\n\n//  Schema \nexport type ArraySchemaNode = {\n    type: 'array';\n    elementType: SchemaNode;\n    extensible?: boolean;\n    template?: TemplateType; // \n    recursiveExtensible?: boolean;\n};\n\n//  Schema \nexport type PrimitiveSchemaNode = {\n    type: 'string' | 'number' | 'boolean' | 'any';\n};\n\n// ValueWithDescription  - \nexport type ValueWithDescription<T> = [T, string];\n\nexport function assertVWD(\n    _flag: boolean,\n    _v: StatData | JSONPrimitive | (StatData | JSONPrimitive)[]\n): asserts _v is ValueWithDescription<StatData | JSONPrimitive> {}\n\nexport function isValueWithDescription(value: unknown): boolean {\n    return Array.isArray(value) && value.length === 2 && typeof value[1] === 'string';\n}\n\nexport function isValueWithDescriptionStatData(\n    value: StatData | JSONPrimitive | (StatData | JSONPrimitive)[]\n): value is ValueWithDescription<StatData | JSONPrimitive> {\n    return Array.isArray(value) && value.length === 2 && typeof value[1] === 'string';\n}\n\n// \nexport function isArraySchema(value: SchemaNode): value is ArraySchemaNode {\n    return value.type === 'array';\n}\n\nexport function isObjectSchema(value: SchemaNode): value is ObjectSchemaNode {\n    return value.type === 'object';\n}\n\nexport function isPrimitiveSchema(value: SchemaNode): value is PrimitiveSchemaNode {\n    return (\n        value.type === 'string' ||\n        value.type === 'number' ||\n        value.type === 'boolean' ||\n        value.type === 'any'\n    );\n}\n\nexport type RootAdditionalProps = {\n    strictTemplate?: boolean;\n    concatTemplateArray?: boolean;\n    strictSet?: boolean;\n};\n\nexport type RootAdditionalMetaProps = {\n    $meta?: StatDataMeta & RootAdditionalProps;\n};\n\nexport type MvuData = {\n    // initialized_lorebooks \n    // \n    /**  lorebook  */\n    initialized_lorebooks?: Record<string, any[]>;\n\n    /**\n     *  - \n     *  \"player.health\"\n     * $internal  display_data  delta_data \n     *\n     * \n     * 1. \n     * 2. ValueWithDescription \n     * 3. \n     */\n    stat_data: StatData & RootAdditionalMetaProps & { $internal?: InternalData };\n\n    /**\n     *  - \n     * \"{}->{} ({})\"\n     * \"100->80 ()\"\n     *\n     *  stat_data \n     *  stat_data \n     * UI\n     */\n    display_data?: Record<string, any>;\n\n    /**\n     *  - \n     *  display_data \"{}->{} ()\"\n     *\n     * \n     * -  updateVariables \n     * - \n     * -  variables \n     *\n     * /\n     */\n    delta_data?: Record<string, any>;\n    // \n    schema?: ObjectSchemaNode & Partial<RootAdditionalProps>;\n};\n\nexport interface VariableData {\n    old_variables: MvuData;\n    /**\n     *  newVariables\n     */\n    new_variables?: MvuData;\n}\n\nexport const variable_events = {\n    VARIABLE_INITIALIZED: 'mag_variable_initialized',\n    SINGLE_VARIABLE_UPDATED: 'mag_variable_updated',\n    VARIABLE_UPDATE_ENDED: 'mag_variable_update_ended',\n    VARIABLE_UPDATE_STARTED: 'mag_variable_update_started',\n    COMMAND_PARSED: 'mag_command_parsed',\n    BEFORE_MESSAGE_UPDATE: 'mag_before_message_update',\n} as const;\nexport const exported_events = {\n    INVOKE_MVU_PROCESS: 'mag_invoke_mvu',\n    UPDATE_VARIABLE: 'mag_update_variable',\n} as const;\n\nexport type InternalData = {\n    display_data: Record<string, any>;\n    delta_data: Record<string, any>;\n};\n\nexport type UpdateContext = {\n    variables: MvuData;\n    message_content: string;\n};\n\nexport type ExtendedListenerType = {\n    [variable_events.SINGLE_VARIABLE_UPDATED]: (\n        stat_data: Record<string, any>,\n        path: string,\n        _oldValue: any,\n        _newValue: any\n    ) => void;\n    [variable_events.VARIABLE_UPDATE_STARTED]: (\n        variables: MvuData,\n        out_is_updated: boolean\n    ) => void;\n    [variable_events.VARIABLE_UPDATE_ENDED]: (\n        variables: MvuData,\n        variables_before_update: MvuData\n    ) => void;\n    [variable_events.VARIABLE_INITIALIZED]: (variables: MvuData, swipe_id: number) => void;\n    [variable_events.COMMAND_PARSED]: (\n        variables: MvuData,\n        commands: any,\n        message_content: string\n    ) => void;\n    [variable_events.BEFORE_MESSAGE_UPDATE]: (context: UpdateContext) => void;\n    [exported_events.INVOKE_MVU_PROCESS]: (\n        message_content: string,\n        variable_info: VariableData\n    ) => void;\n    [exported_events.UPDATE_VARIABLE]: (\n        stat_data: Record<string, any>,\n        path: string,\n        newValue: any,\n        reason: string,\n        isRecursive: boolean\n    ) => void;\n};\n\nexport type InitVarType = StatData & RootAdditionalMetaProps;\n\nexport type DataCategory = 'stat' | 'display' | 'delta';\n\nexport function extractRecord(category: 'stat' | 'display' | 'delta', game_data: MvuData) {\n    let data: Record<string, any> | undefined = undefined;\n    switch (category) {\n        case 'stat':\n            data = game_data.stat_data;\n            break;\n        case 'display':\n            data = game_data.display_data!;\n            break;\n        case 'delta':\n            data = game_data.delta_data!;\n            break;\n    }\n    return data;\n}\n\nexport const ExtraLLMRequestContent: string = `---\n<must>\n:\n  description: \n  reference: \\`<past_observe>\\`\n  rule: \n  format: |-\n    <UpdateVariable>$(<UpdateVariable>)\n    ...\n    </UpdateVariable>\n</must>`;\n\n/**\n * \n */\nlet duringExtraCall = false;\n\nexport function isDuringExtraAnalysis(): boolean {\n    return duringExtraCall;\n}\n\nexport function setDuringExtraAnalysis(value: boolean) {\n    duringExtraCall = value;\n}\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import {\n    ArraySchemaNode,\n    isArraySchema,\n    isObjectSchema,\n    MvuData,\n    ObjectSchemaNode,\n    RootAdditionalProps,\n    SchemaNode,\n    StatData,\n    TemplateType,\n} from '@/variable_def';\nimport { klona } from 'klona';\n\n// \nexport const EXTENSIBLE_MARKER = '$__META_EXTENSIBLE__$';\n\n// \n/**\n * \n * @param data -  (stat_data)\n * @param oldSchemaNode - ()  Schema \n * @param parentRecursiveExtensible - ()  recursiveExtensible  false\n * @returns - \n */\nexport function generateSchema(\n    data: any,\n    oldSchemaNode?: SchemaNode,\n    parentRecursiveExtensible: boolean = false\n): SchemaNode {\n    // @ts-expect-error hack for mvu zod\n    if (oldSchemaNode === '') {\n        return { type: 'any' };\n    }\n\n    if (Array.isArray(data)) {\n        let isExtensible = false;\n        let isRecursiveExtensible = parentRecursiveExtensible;\n        let oldElementType: SchemaNode | undefined;\n        let template: TemplateType | undefined;\n\n        //  oldSchemaNode  ArraySchemaNode\n        if (oldSchemaNode) {\n            if (isArraySchema(oldSchemaNode)) {\n                isExtensible = oldSchemaNode.extensible === true;\n                isRecursiveExtensible =\n                    oldSchemaNode.recursiveExtensible === true || parentRecursiveExtensible;\n                oldElementType = oldSchemaNode.elementType;\n                template = oldSchemaNode.template;\n            } else {\n                console.error(\n                    `Type mismatch: expected array schema but got ${oldSchemaNode.type} at path`\n                );\n            }\n        }\n\n        //  $meta \n        const metaElementIndex = data.findIndex(\n            item =>\n                _.isObject(item) &&\n                !_.isDate(item) &&\n                '$arrayMeta' in item &&\n                '$meta' in item &&\n                item['$arrayMeta'] === true\n        );\n\n        if (metaElementIndex !== -1) {\n            const metaElement = data[metaElementIndex] as { $meta: any };\n            //  $meta \n            if (metaElement.$meta.extensible !== undefined) {\n                isExtensible = metaElement.$meta.extensible;\n            }\n            if (metaElement.$meta.template !== undefined) {\n                template = metaElement.$meta.template;\n            }\n            // \n            data.splice(metaElementIndex, 1);\n            console.log(`Array metadata element found and processed.`);\n        }\n\n        // \n        const markerIndex = data.indexOf(EXTENSIBLE_MARKER);\n        if (markerIndex > -1) {\n            isExtensible = true;\n            // \n            data.splice(markerIndex, 1);\n            console.log(`Extensible marker found and removed from an array.`);\n        }\n\n        const schema_node: ArraySchemaNode = {\n            type: 'array',\n            extensible: isExtensible || parentRecursiveExtensible,\n            recursiveExtensible: isRecursiveExtensible,\n            elementType:\n                data.length > 0\n                    ? generateSchema(data[0], oldElementType, isRecursiveExtensible)\n                    : { type: 'any' },\n        };\n\n        if (template !== undefined) {\n            schema_node.template = template;\n        }\n\n        return schema_node;\n    }\n    if (_.isObject(data) && !_.isDate(data)) {\n        const typedData = data as StatData; // \n\n        //  oldSchemaNode  ObjectSchemaNode\n        let oldExtensible = false;\n        let oldRecursiveExtensible = parentRecursiveExtensible;\n        let oldProperties: ObjectSchemaNode['properties'] | undefined;\n\n        if (oldSchemaNode) {\n            if (isObjectSchema(oldSchemaNode)) {\n                oldExtensible = oldSchemaNode.extensible === true;\n                oldRecursiveExtensible =\n                    oldSchemaNode.recursiveExtensible === true || parentRecursiveExtensible;\n                oldProperties = oldSchemaNode.properties;\n            } else {\n                console.error(\n                    `Type mismatch: expected object schema but got ${oldSchemaNode.type} at path`\n                );\n            }\n        }\n\n        const schemaNode: ObjectSchemaNode = {\n            type: 'object',\n            properties: {},\n            //  schema$meta.extensible  parentRecursiveExtensible\n            extensible:\n                oldExtensible ||\n                typedData.$meta?.extensible === true ||\n                typedData.$meta?.recursiveExtensible === true ||\n                parentRecursiveExtensible,\n            recursiveExtensible:\n                oldRecursiveExtensible || typedData.$meta?.recursiveExtensible === true,\n        };\n\n        //  template\n        if (typedData.$meta?.template !== undefined) {\n            schemaNode.template = typedData.$meta.template;\n        } else if (oldSchemaNode && isObjectSchema(oldSchemaNode) && oldSchemaNode.template) {\n            schemaNode.template = oldSchemaNode.template;\n        }\n\n        //  $meta\n        const parentMeta = typedData.$meta;\n\n        //  $meta \n        if (typedData.$meta) {\n            delete typedData.$meta;\n        }\n\n        for (const key in data) {\n            const oldChildNode = oldProperties?.[key];\n            //  recursiveExtensible recursiveExtensible\n            //  extensible: false, \n            const childRecursiveExtensible =\n                schemaNode.extensible !== false && schemaNode.recursiveExtensible;\n            const childSchema = generateSchema(\n                typedData[key],\n                oldChildNode,\n                childRecursiveExtensible\n            );\n\n            // \n\n            // 1. : \n            let isRequired = !schemaNode.extensible;\n\n            // 2. :  'required' \n            //     $meta.required  key \n            //    \n            if (Array.isArray(parentMeta?.required) && parentMeta.required.includes(key)) {\n                isRequired = true;\n            }\n\n            // 3.  schema \n            if (oldChildNode?.required === false) {\n                //  schema \n                isRequired = false;\n            } else if (oldChildNode?.required === true) {\n                isRequired = true;\n            }\n\n            schemaNode.properties[key] = {\n                ...childSchema,\n                required: isRequired,\n            };\n        }\n        return schemaNode;\n    }\n    // \n    const dataType = typeof data;\n    if (dataType === 'string' || dataType === 'number' || dataType === 'boolean') {\n        return { type: dataType };\n    }\n    // function, symbol, bigint, undefined  'any'\n    return { type: 'any' };\n}\n\n/**\n *  Schema \n *  .elementType  Schema\n * @param schema -  Schema \n * @param path - \n * @returns  Schema  null\n */\nexport function getSchemaForPath(\n    schema: SchemaNode | null | undefined,\n    path: string\n): SchemaNode | null {\n    if (!path || !schema) {\n        return schema || null;\n    }\n    //  lodash  'a.b[0].c' -> ['a', 'b', '0', 'c']\n    const pathSegments = _.toPath(path);\n    let currentSchema: SchemaNode | null = schema;\n\n    for (const segment of pathSegments) {\n        if (!currentSchema) return null;\n\n        //  segment  elementType\n        if (/^\\d+$/.test(segment)) {\n            if (isArraySchema(currentSchema)) {\n                currentSchema = currentSchema.elementType;\n            } else {\n                return null; //  elementType  schema\n            }\n        } else if (isObjectSchema(currentSchema) && currentSchema.properties[segment]) {\n            // \n            const property = currentSchema.properties[segment];\n            currentSchema = property as SchemaNode;\n        } else {\n            return null; //  schema \n        }\n    }\n    return currentSchema;\n}\n\n/**\n *  Schema Schema\n * @param variables -  stat_data  schema \n */\nexport function reconcileAndApplySchema(variables: MvuData) {\n    console.log('Reconciling schema with current data state...');\n\n    // 1.  generateSchema  $meta\n    const currentDataClone = klona(variables.stat_data);\n\n    // 2.  generateSchema  Schema\n    //     Schema \n    const newSchema = generateSchema(currentDataClone, variables.schema);\n\n    // 3.  Schema  Schema\n    // stat_data  schema  ObjectSchemaNode\n    if (!isObjectSchema(newSchema)) {\n        return;\n    }\n\n    //  RootAdditionalProps\n    const newSchemaWithProps = newSchema as ObjectSchemaNode & RootAdditionalProps;\n    if (variables.schema?.strictTemplate !== undefined) {\n        newSchemaWithProps.strictTemplate = variables.schema.strictTemplate;\n    }\n    if (variables.schema?.strictSet !== undefined) {\n        newSchemaWithProps.strictSet = variables.schema.strictSet;\n    }\n    if (variables.schema?.concatTemplateArray !== undefined) {\n        newSchemaWithProps.concatTemplateArray = variables.schema.concatTemplateArray;\n    }\n    if (_.has(variables.stat_data, '$meta.strictTemplate'))\n        newSchemaWithProps.strictTemplate = variables.stat_data['$meta']?.strictTemplate as boolean;\n    if (_.has(variables.stat_data, '$meta.strictSet'))\n        newSchemaWithProps.strictSet = variables.stat_data['$meta']?.strictSet as boolean;\n    if (_.has(variables.stat_data, '$meta.concatTemplateArray'))\n        newSchemaWithProps.concatTemplateArray = variables.stat_data['$meta']\n            ?.concatTemplateArray as boolean;\n\n    variables.schema = newSchemaWithProps;\n\n    console.log('Schema reconciliation complete.');\n}\n\nfunction isMetaCarrier(value: unknown): value is Record<string, unknown> & { $meta?: unknown } {\n    return _.isObject(value) && !_.isDate(value);\n}\n\n/**\n * \n * -  EXTENSIBLE_MARKER\n * -  $meta \n * @param data \n */\nexport function cleanUpMetadata(data: any): void {\n    //  $meta \n    if (Array.isArray(data)) {\n        let i = data.length;\n        while (i--) {\n            if (data[i] === EXTENSIBLE_MARKER) {\n                data.splice(i, 1);\n            } else if (\n                _.isObject(data[i]) &&\n                !_.isDate(data[i]) &&\n                '$arrayMeta' in data[i] &&\n                '$meta' in data[i] &&\n                data[i]['$arrayMeta'] === true\n            ) {\n                //  $meta & $arrayMeta \n                data.splice(i, 1);\n            } else {\n                // \n                cleanUpMetadata(data[i]);\n            }\n        }\n    }\n    //  $meta \n    else if (isMetaCarrier(data)) {\n        //  $meta\n        delete data.$meta;\n\n        // \n        for (const key in data) {\n            cleanUpMetadata(data[key]);\n        }\n    }\n}\n","import JSON5 from 'json5';\nimport TOML from 'toml';\nimport TavernHelper = globalThis.TavernHelper;\n\nlet sillytavern_version: string = '1.0.0';\nexport async function initSillyTavernVersion(): Promise<void> {\n    sillytavern_version = await fetch('/version')\n        .then(res => res.json())\n        .then(data => data.pkgVersion)\n        .catch(() => '1.0.0');\n}\nexport function getSillyTavernVersion(): string {\n    return sillytavern_version;\n}\n\nlet tavernhelper_version: string = '1.0.0';\nexport async function initTavernHelperVersion(): Promise<void> {\n    tavernhelper_version = await TavernHelper.getTavernHelperVersion();\n}\nexport function getTavernHelperVersion(): string {\n    return tavernhelper_version;\n}\n\nexport function isFunctionCallingSupported() {\n    if (!SillyTavern.ToolManager.isToolCallingSupported()) {\n        return false;\n    }\n    if (SillyTavern.chatCompletionSettings.function_calling === false) {\n        return false;\n    }\n    return true;\n}\n\ndeclare const jest: any;\ndeclare const process: any;\n\nexport const is_jest_environment =\n    typeof jest !== 'undefined' ||\n    (typeof process !== 'undefined' && process.env?.NODE_ENV === 'test');\n\nexport const saveChatDebounced = _.debounce(SillyTavern.saveChat, 1000);\n\n/**\n * \n * @param end_message_id ()\n */\nexport function findLastValidMessage(end_message_id: number) {\n    return _(SillyTavern.chat)\n        .slice(0, end_message_id) // \n        .findLastIndex(chat_message => {\n            return (\n                _.get(chat_message, ['variables', chat_message.swipe_id ?? 0, 'stat_data']) !==\n                    undefined &&\n                _.get(chat_message, ['variables', chat_message.swipe_id ?? 0, 'schema']) !==\n                    undefined\n            ); // schema  stat_data\n        });\n}\n\n//  4.1.6 , , \nconst stop_lists: Array<() => void> = [];\nexport function scopedEventOn<T extends EventType>(event_type: T, listener: ListenerType[T]) {\n    eventOn(event_type, listener);\n    stop_lists.push(() => eventRemoveListener(event_type, listener));\n}\nexport function clearScopedEvent() {\n    stop_lists.forEach(stop => stop());\n}\n\nexport function parseString(content: string) {\n    // Try YAML first (which also handles JSON)\n    try {\n        return YAML.parseDocument(content, { merge: true }).toJS();\n    } catch (e) {\n        // Try JSON5\n        try {\n            // eslint-disable-next-line import-x/no-named-as-default-member\n            return JSON5.parse(content);\n        } catch (e2) {\n            // Try TOML\n            try {\n                return TOML.parse(content);\n            } catch (e3) {\n                throw new Error(`initvar  YAML/JSON/JSON5/TOML : ${e3}`);\n            }\n        }\n    }\n}\n\n//  _.merge , [1, 2, 3]  [4, 5]  [4, 5]  [4, 5, 3]\nexport function correctlyMerge<TObject, TSource>(lhs: TObject, rhs: TSource): TObject & TSource {\n    return _.mergeWith(lhs, rhs, (_lhs, rhs) => (_.isArray(rhs) ? rhs : undefined));\n}\n\nexport function showHelpPopup(content: string) {\n    SillyTavern.callGenericPopup(content, SillyTavern.POPUP_TYPE.TEXT, '', {\n        allowVerticalScrolling: true,\n        leftAlign: true,\n        wide: true,\n    });\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = Vue;","const __WEBPACK_NAMESPACE_OBJECT__ = z;","import { is_jest_environment } from '@/util';\nimport { defineStore } from 'pinia';\nimport { ref, toRaw, watch } from 'vue';\nimport * as z from 'zod';\n\nconst Settings = z\n    .object({\n        : z.enum(['AI', '']).default('AI'),\n        : z.boolean().default(true),\n        : z\n            .object({\n                : z.boolean().default(true),\n                : z.boolean().default(false),\n                : z.enum(['', '']).default(''),\n                api: z.string().default('http://localhost:1234/v1'),\n                : z.string().default(''),\n                : z.string().default('gemini-2.5-flash'),\n                : z.coerce\n                    .number()\n                    .default(1)\n                    .transform(value => _.clamp(value, 0, 2)),\n                : z.coerce\n                    .number()\n                    .default(0.0)\n                    .transform(value => _.clamp(value, -2, 2)),\n                : z.coerce\n                    .number()\n                    .default(0.0)\n                    .transform(value => _.clamp(value, -2, 2)),\n                top_p: z.coerce\n                    .number()\n                    .default(1)\n                    .transform(value => _.clamp(value, 0, 1)),\n                token: z.coerce\n                    .number()\n                    .default(4096)\n                    .transform(value => Math.max(0, value)),\n            })\n            .prefault({}),\n        : z\n            .object({\n                : z.boolean().default(false),\n                : z.boolean().default(true),\n            })\n            .prefault({}),\n        : z.number().default(50),\n        : z.boolean().default(false),\n        legacy: z\n            .object({\n                : z.boolean().default(false),\n            })\n            .prefault({}),\n        auto_cleanup: z\n            .object({\n                : z.boolean().default(false),\n                : z.number().default(20),\n                : z.number().default(10),\n            })\n            .prefault({}),\n        internal: z\n            .object({\n                : z.boolean().default(false),\n                : z.boolean().default(false),\n                API: z.boolean().default(false),\n                : z.boolean().default(false),\n            })\n            .prefault({}),\n    })\n    .prefault({});\n\n// ref \nconst TempContentsDef = z\n    .object({\n        unsupported_warnings: z.string().default(''),\n    })\n    .prefault({});\n\nexport const useSettingsStore = defineStore('settings', () => {\n    const settings = ref(Settings.parse(_.get(SillyTavern.extensionSettings, 'mvu_settings', {})));\n    watch(\n        settings,\n        new_settings => {\n            _.set(SillyTavern.extensionSettings, 'mvu_settings', toRaw(new_settings));\n            if (!is_jest_environment) SillyTavern.saveSettingsDebounced();\n        },\n        { deep: true }\n    );\n\n    return { settings };\n});\n\nexport const useTempContents = defineStore('temp_contents', () => {\n    const temp_contents = ref(TempContentsDef.parse({}));\n    return { temp_contents };\n});\n","const __WEBPACK_NAMESPACE_OBJECT__ = __WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_mathjs_esm_aec644b1__;","import {\n    cleanUpMetadata,\n    generateSchema,\n    getSchemaForPath,\n    reconcileAndApplySchema,\n} from '@/schema';\nimport { useSettingsStore } from '@/settings';\nimport { parseString, saveChatDebounced } from '@/util';\nimport {\n    assertVWD,\n    isArraySchema,\n    isObjectSchema,\n    isValueWithDescriptionStatData,\n    MvuData,\n    TemplateType,\n    UpdateContext,\n    variable_events,\n    VariableData,\n} from '@/variable_def';\nimport * as jsonpatch from 'fast-json-patch';\nimport { klona } from 'klona';\nimport * as math from 'mathjs';\n\nfunction isJsonPatch(patch: any): patch is jsonpatch.Operation[] {\n    if (!Array.isArray(patch)) {\n        return false;\n    }\n    // An empty array is a valid patch.\n    if (patch.length === 0) {\n        return true;\n    }\n    // Check if all operations have 'op' and 'path'.\n    return patch.every(\n        op =>\n            typeof op === 'object' &&\n            op !== null &&\n            typeof op.op === 'string' &&\n            typeof op.path === 'string'\n    );\n}\n\nexport function trimQuotesAndBackslashes(str: string): string {\n    if (!_.isString(str)) return str;\n    // Regular expression to match backslashes and quotes (including backticks) at the beginning and end\n    return str.replace(/^[\\\\\"'` ]*(.*?)[\\\\\"'` ]*$/, '$1');\n}\n\n/**\n * \n * @param value \n * @param template  (TemplateType | undefined)\n * @param strict_array_cast  primitive type -> [primitive type] \n * @param array_merge_concat      \n * @returns \n */\nexport function applyTemplate(\n    value: any,\n    template: TemplateType | undefined,\n    strict_array_cast: boolean = false,\n    array_merge_concat: boolean = true\n): any {\n    // \n    if (!template) {\n        return value;\n    }\n\n    // \n    const value_is_object = _.isObject(value) && !Array.isArray(value) && !_.isDate(value);\n    const value_is_array = Array.isArray(value);\n    const template_is_array = Array.isArray(template);\n\n    if (value_is_object && !template_is_array) {\n        // value template  StatData\n        // \n        return _.merge({}, template, value);\n    } else if (value_is_array && template_is_array) {\n        // \n        if (array_merge_concat) return _.concat(value, template);\n        return _.merge([], template, value);\n    } else if (\n        ((value_is_object || value_is_array) && template_is_array !== value_is_array) ||\n        (!value_is_object && !value_is_array && _.isObject(template) && !Array.isArray(template))\n    ) {\n        // \n        console.error(\n            `Template type mismatch: template is ${template_is_array ? 'array' : 'object'}, but value is ${value_is_array ? 'array' : 'object'}. Skipping template merge.`\n        );\n        return value;\n    } else if (!value_is_object && !value_is_array && template_is_array) {\n        // \n        //  [value] \n        if (strict_array_cast)\n            // primitive type -> [primitive type] \n            return value;\n        if (array_merge_concat) return _.concat([value], template);\n        return _.merge([], template, [value]);\n    } else {\n        // \n        return value;\n    }\n}\n\n// \n//  JSON, , null, , \nexport function parseCommandValue(valStr: string): any {\n    if (typeof valStr !== 'string') return valStr;\n    const trimmed = valStr.trim();\n\n    // /null/undefined\n    if (trimmed === 'true') return true;\n    if (trimmed === 'false') return false;\n    if (trimmed === 'null') return null;\n    if (trimmed === 'undefined') return undefined;\n\n    try {\n        //  JSON.parse \n        return JSON.parse(trimmed);\n    } catch (e) {\n        // Handle JavaScript array or object literals\n        if (\n            (trimmed.startsWith('{') && trimmed.endsWith('}')) ||\n            (trimmed.startsWith('[') && trimmed.endsWith(']'))\n        ) {\n            try {\n                // Safely evaluate literals using a function constructor\n                const result = new Function(`return ${trimmed};`)();\n                if (_.isObject(result) || Array.isArray(result)) {\n                    return result;\n                }\n            } catch (err) {\n                // \n            }\n        }\n    }\n\n    //  trimmed \n    // 'hello_world', '10 + 2', 'sqrt(16)'\n\n    try {\n        //  scope / mathjs \n        // \n        const scope = {\n            //  JavaScript  Math  (e.g., Math.sqrt(), Math.PI)\n            Math: Math,\n            //  Python  math  (e.g., math.sqrt(), math.pi)\n            //  LLM \n            // 'math'  mathjs \n            math: math,\n        };\n        //  mathjs \n        // math.evaluate \n        const result = math.evaluate(trimmed, scope);\n        //  mathjs \n        if (math.isComplex(result) || math.isMatrix(result)) {\n            return result.toString();\n        }\n        // mathjs undefined \n        if (result === undefined && !/^[a-zA-Z_]+$/.test(trimmed)) {\n            return trimmed; //  undefined \n        }\n        if (result !== undefined) {\n            //  toPrecision \n            return parseFloat(result.toPrecision(12));\n        }\n    } catch (err) {\n        //  math.evaluate \n        // \n    }\n\n    // \n    // _.add `_.add('', 10 * 60 * 1000);`\n    //  \"2024-01-01T12:00:00Z\"\n    // `isNaN(Number(trimmed))` \"12345\"\n    /*\n    if (isNaN(Number(trimmed))) {\n        const potentialDate = new Date(trimQuotesAndBackslashes(trimmed));\n        if (!isNaN(potentialDate.getTime())) {\n            return potentialDate;\n        }\n    }\n    */\n\n    try {\n        //  YAML.parse\n        return YAML.parse(trimmed);\n    } catch (e) {\n        /* empty */\n    }\n\n    // \n    return trimQuotesAndBackslashes(valStr);\n}\n\n/**\n * Type definition for CommandNames representing a set of valid command strings.\n *\n * This type is used to define a finite and specific set of command string values\n * that may be used in operations or functions requiring predefined command names.\n *\n * The allowed command names are:\n * - 'set': Represents a command to set a value.\n * - 'insert': Alias of 'assign'\n * - 'assign': Represents a command to assign a value or reference.\n * - 'remove': Represents a command to remove an item or data.\n * - 'add': Represents a command to add an item or data.\n */\ntype CommandNames = 'set' | 'insert' | 'assign' | 'remove' | 'unset' | 'delete' | 'add';\n\n/**\n *  .set(${path}, ${new_value});//${reason} \n * \n */\n// \n// Command  SetCommand \ninterface Command {\n    type: CommandNames;\n    full_match: string;\n    args: string[];\n    reason: string;\n}\n\nfunction extractJsonPatch(patch: any): Command[] {\n    const translated_commands: Command[] = [];\n\n    for (const op of patch) {\n        const path = op.path.substring(1).replace(/\\//g, '.');\n        switch (op.op) {\n            case 'replace':\n                translated_commands.push({\n                    type: 'set',\n                    full_match: JSON.stringify(op),\n                    args: [path, JSON.stringify((op as any).value)],\n                    reason: 'json_patch',\n                });\n                break;\n            case 'delta': {\n                translated_commands.push({\n                    type: 'add',\n                    full_match: JSON.stringify(op),\n                    args: [path, JSON.stringify((op as any).value)],\n                    reason: 'json_patch',\n                });\n                break;\n            }\n            case 'insert':\n            case 'add': {\n                const pathParts = _.toPath(path);\n                const lastPart = pathParts[pathParts.length - 1];\n                const containerPath = pathParts.slice(0, -1).join('.');\n                const keyOrIndexArg = /^\\d+$/.test(lastPart) ? lastPart : `'${lastPart}'`;\n                translated_commands.push({\n                    type: 'insert',\n                    full_match: JSON.stringify(op),\n                    args: [containerPath, keyOrIndexArg, JSON.stringify((op as any).value)],\n                    reason: 'json_patch',\n                });\n                break;\n            }\n            case 'remove':\n                translated_commands.push({\n                    type: 'delete',\n                    full_match: JSON.stringify(op),\n                    args: [path],\n                    reason: 'json_patch',\n                });\n                break;\n        }\n    }\n    return translated_commands;\n}\n\n/**\n *  _.set() \n *\n * \n *  /_\\.set\\(([\\s\\S]*?)\\);/ \n *  ); \n * _.set('path', [\"text with _.set('inner',null);//comment\"], []);\n *  \"comment\") \n *\n * \n *  _.set() \n */\n//  extractSetCommands  extractCommands \nexport function extractCommands(inputText: string): Command[] {\n    // TODO:  json_patch \n    const results: (Command & { $index: number })[] = _.concat(\n        [\n            ...inputText.matchAll(\n                /<(json_?patch)>(?:\\s*```.*)?((?:(?!<json_?patch>)[\\s\\S])*?)(?:```\\s*)?<\\/\\1>/gim\n            ),\n        ]\n            .map(match => ({\n                index: match.index ?? 0,\n                string: match[2].trim(),\n            }))\n            .flatMap(({ index, string }): (Command & { $index: number })[] => {\n                try {\n                    const patch = parseString(string);\n                    {\n                        if (isJsonPatch(patch)) {\n                            return extractJsonPatch(patch).map(command => ({\n                                $index: index,\n                                ...command,\n                            }));\n                        }\n                    }\n                } catch {\n                    /* ignore */\n                }\n                return [];\n            })\n    );\n\n    let i = 0;\n    while (i < inputText.length) {\n        // \n        //  _.set(_.assign(_.remove(  _.add(\n        const setMatch = inputText\n            .substring(i)\n            .match(/_\\.(set|insert|assign|remove|unset|delete|add)\\(/);\n        if (!setMatch || setMatch.index === undefined) {\n            // \n            break;\n        }\n\n        // setassignremove  add\n        const commandType = setMatch[1] as CommandNames;\n        const setStart = i + setMatch.index;\n        // \n        const openParen = setStart + setMatch[0].length;\n\n        //  findMatchingCloseParen  _.set('path', ['inner);'])\n        const closeParen = findMatchingCloseParen(inputText, openParen);\n        if (closeParen === -1) {\n            // \n            // \n            i = openParen; // \n            continue; //  while \n        }\n\n        // \n        let endPos = closeParen + 1;\n        if (endPos >= inputText.length || inputText[endPos] !== ';') {\n            // \n            i = closeParen + 1;\n            continue;\n        }\n        endPos++; // \n\n        // //  reason\n        let comment = '';\n        const potentialComment = inputText.substring(endPos).match(/^\\s*\\/\\/(.*)/);\n        if (potentialComment) {\n            // \n            comment = potentialComment[1].trim();\n            endPos += potentialComment[0].length;\n        }\n\n        //  fullMatch \n        const fullMatch = inputText.substring(setStart, endPos);\n        // \n        const paramsString = inputText.substring(openParen, closeParen);\n        //  parseParameters \n        const params = parseParameters(paramsString);\n\n        // \n        let isValid = false;\n        if (commandType === 'set' && params.length >= 2)\n            isValid = true; // _.set \n        else if (commandType === 'assign' && params.length >= 2)\n            isValid = true; // _.assign \n        else if (commandType === 'insert' && params.length >= 2)\n            isValid = true; // _.insert \n        else if (commandType === 'remove' && params.length >= 1)\n            isValid = true; // _.remove \n        else if (commandType === 'unset' && params.length >= 1)\n            isValid = true; // _.unset \n        else if (commandType === 'delete' && params.length >= 1)\n            isValid = true; // _.delete \n        else if (commandType === 'add' && /*params.length === 1 || */ params.length === 2)\n            isValid = true; // _.add 12\n\n        if (isValid) {\n            // \n            results.push({\n                $index: setStart,\n                type: commandType,\n                full_match: fullMatch,\n                args: params,\n                reason: comment,\n            });\n        }\n\n        // \n        i = endPos;\n    }\n\n    // \n    return _(results)\n        .sortBy('$index')\n        .map(command => _.omit(command, '$index'))\n        .value();\n}\n\n/**\n * \n *\n * \n * 1.  ( 1 ) 1\n * 2. \n * 3. \n *\n * @param str \n * @param startPos \n * @returns  -1\n */\nfunction findMatchingCloseParen(str: string, startPos: number): number {\n    let parenCount = 1; // 1\n    let inQuote = false;\n    let quoteChar = '';\n\n    for (let i = startPos; i < str.length; i++) {\n        const char = str[i];\n        const prevChar = i > 0 ? str[i - 1] : '';\n\n        // \n        // \n        // \n        if ((char === '\"' || char === \"'\" || char === '`') && prevChar !== '\\\\') {\n            if (!inQuote) {\n                inQuote = true;\n                quoteChar = char;\n            } else if (char === quoteChar) {\n                inQuote = false;\n            }\n        }\n\n        // \n        //  \"text with )\" \n        if (!inQuote) {\n            if (char === '(') {\n                parenCount++;\n            } else if (char === ')') {\n                parenCount--;\n                if (parenCount === 0) {\n                    return i;\n                }\n            }\n        }\n    }\n\n    return -1; // \n}\n\n// \n// \nexport function parseParameters(paramsString: string): string[] {\n    const params: string[] = [];\n    let currentParam = '';\n    let inQuote = false;\n    let quoteChar = '';\n    let bracketCount = 0;\n    let braceCount = 0;\n    let parenCount = 0;\n\n    for (let i = 0; i < paramsString.length; i++) {\n        const char = paramsString[i];\n\n        // \n        if (\n            (char === '\"' || char === \"'\" || char === '`') &&\n            (i === 0 || paramsString[i - 1] !== '\\\\')\n        ) {\n            if (!inQuote) {\n                inQuote = true;\n                quoteChar = char;\n            } else if (char === quoteChar) {\n                inQuote = false;\n            }\n        }\n\n        if (!inQuote) {\n            //  ()\n            if (char === '(') parenCount++;\n            if (char === ')') parenCount--;\n\n            //  ()\n            if (char === '[') bracketCount++;\n            if (char === ']') bracketCount--;\n\n            //  ()\n            if (char === '{') braceCount++;\n            if (char === '}') braceCount--;\n        }\n        // \n        // \n        if (\n            char === ',' &&\n            !inQuote &&\n            parenCount === 0 &&\n            bracketCount === 0 &&\n            braceCount === 0\n        ) {\n            params.push(currentParam.trim());\n            currentParam = '';\n            continue;\n        }\n\n        currentParam += char;\n    }\n\n    // \n    if (currentParam.trim()) {\n        params.push(currentParam.trim());\n    }\n\n    return params;\n}\n\nexport async function getLastValidVariable(message_id: number): Promise<MvuData> {\n    return (klona(\n        _(SillyTavern.chat)\n            .slice(0, message_id + 1)\n            .map(chat_message => _.get(chat_message, ['variables', chat_message.swipe_id ?? 0]))\n            .findLast(variables => _.has(variables, 'stat_data'))\n    ) ?? getVariables({ type: 'message' })) as MvuData;\n}\n\nexport function pathFix(path: string): string {\n    if (!path) return path;\n\n    // 1.  []  /  key\n    const fixedBrackets = path.replace(/\\[([^\\]]*)\\]/g, (_match, rawInner: string) => {\n        let inner = rawInner.trim();\n        if (!inner) {\n            return '[]';\n        }\n\n        let wasQuoted = false;\n        const first = inner[0];\n        const last = inner[inner.length - 1];\n\n        if (inner.length >= 2 && (first === '\"' || first === \"'\") && first === last) {\n            wasQuoted = true;\n            inner = inner.slice(1, -1);\n        }\n\n        const isPureDigits = /^\\d+$/.test(inner);\n        const hasWhitespace = /\\s/.test(inner);\n\n        // \n        if (isPureDigits) {\n            if (!wasQuoted) {\n                //   \n                return `[${inner}]`;\n            } else {\n                //    key\n                const escaped = inner.replace(/\"/g, '\\\\\"');\n                return `[\"${escaped}\"]`;\n            }\n        }\n\n        //    key\n        if (hasWhitespace) {\n            const escaped = inner.replace(/\"/g, '\\\\\"');\n            return `[\"${escaped}\"]`;\n        } else {\n            return `[${inner}]`;\n        }\n    });\n\n    // 2. \n    //\n    // \n    //   -  / . / []   [\"\"]  []\n    //   -    bracket\n    //       foo.\"a b\".c     foo[\"a b\"].c\n    //       root.' '.  root[\" \"].\n    //       foo[.].c      foo[\".\"].c\n    const fixedDots = fixedBrackets.replace(\n        /(^|\\.)([\"'])([^\"']*)\\2(?=\\.|\\[|$)/g,\n        (_match, prefix: string, _quote: string, name: string) => {\n            const hasWhitespace = /\\s/.test(name);\n            const hasSpecial = /[.[\\]]/.test(name);\n\n            if (!hasWhitespace && !hasSpecial) {\n                // \n                //  foo.\"\"  foo.\n                return prefix + name;\n            } else {\n                //  bracket \n                const escaped = name.replace(/\"/g, '\\\\\"');\n                if (prefix === '.') {\n                    // foo.\"a b\"  foo[\"a b\"]\n                    return `[\"${escaped}\"]`;\n                } else {\n                    // \" \".  [\" \"].\n                    return `${prefix}[\"${escaped}\"]`;\n                }\n            }\n        }\n    );\n\n    return fixedDots;\n}\n\n/**\n * MVU  display_data/delta_data\n * @param stat_data  mag_variable_updated  stat_data display_data \n * @param path \n * @param new_value \n * @param reason \n * @param is_recursive  mag_variable_updated \n */\nexport async function updateVariable(\n    stat_data: Record<string, any>,\n    path: string,\n    new_value: any,\n    reason: string = '',\n    is_recursive: boolean = false\n): Promise<boolean> {\n    const display_data = stat_data.$internal?.display_data;\n    const delta_data = stat_data.$internal?.delta_data;\n    if (_.has(stat_data, path)) {\n        const currentValue = _.get(stat_data, path);\n        if (Array.isArray(currentValue) && currentValue.length === 2) {\n            //VWD \n            const oldValue = klona(currentValue[0]);\n            currentValue[0] = new_value;\n            _.set(stat_data, path, currentValue);\n            const reason_str = reason ? `(${reason})` : '';\n            const display_str = `${trimQuotesAndBackslashes(JSON.stringify(oldValue))}->${trimQuotesAndBackslashes(JSON.stringify(new_value))} ${reason_str}`;\n            if (display_data) _.set(display_data, path, display_str);\n            if (delta_data) _.set(delta_data, path, display_str);\n            console.info(\n                `Set '${path}' to '${trimQuotesAndBackslashes(JSON.stringify(new_value))}' ${reason_str}`\n            );\n            if (is_recursive)\n                await eventEmit(\n                    variable_events.SINGLE_VARIABLE_UPDATED,\n                    stat_data,\n                    path,\n                    oldValue,\n                    new_value\n                );\n            return true;\n        } else {\n            const oldValue = klona(currentValue);\n            _.set(stat_data, path, new_value);\n            const reason_str = reason ? `(${reason})` : '';\n            const stringNewValue = trimQuotesAndBackslashes(JSON.stringify(new_value));\n            const display_str = `${trimQuotesAndBackslashes(JSON.stringify(oldValue))}->${stringNewValue} ${reason_str}`;\n            if (display_data) _.set(display_data, path, display_str);\n            if (delta_data) _.set(delta_data, path, display_str);\n            console.info(`Set '${path}' to '${stringNewValue}' ${reason_str}`);\n            if (is_recursive)\n                await eventEmit(\n                    variable_events.SINGLE_VARIABLE_UPDATED,\n                    stat_data,\n                    path,\n                    oldValue,\n                    new_value\n                );\n            return true;\n        }\n    }\n    return false;\n}\n\ntype ErrorInfo = {\n    error_last: string;\n    error_command: Command;\n};\n\nexport function pathFixPass(\n    _unused_data: MvuData,\n    commands: Command[],\n    _unused_content: string\n): void {\n    for (const command of commands) {\n        command.args[0] = pathFix(trimQuotesAndBackslashes(command.args[0]));\n    }\n}\n\nfunction isNullOrWhiteSpace(str: string): boolean {\n    return str == null || str.trim().length === 0;\n}\n\n//  updateVariables \nexport async function updateVariables(\n    current_message_content: string,\n    variables: MvuData\n): Promise<boolean> {\n    //  variable_ended\n    const variables_before_update: MvuData = klona(variables);\n    // \n    const out_status: MvuData = klona(variables);\n    // \n    const delta_status: Partial<MvuData> = { stat_data: {} };\n\n    //  ${variable}\n    const processed_message_content = substitudeMacros(current_message_content);\n\n    //  extractCommands \n    const commands = extractCommands(processed_message_content);\n\n    // \n    _.set(variables.stat_data, '$internal', {\n        display_data: out_status.stat_data,\n        delta_data: delta_status.stat_data || {},\n    });\n    //@ts-expect-error variables\n    await eventEmit(variable_events.VARIABLE_UPDATE_STARTED, variables);\n\n    let error_info: ErrorInfo | undefined;\n    let current_command: Command | undefined;\n    const outError = function (message: string) {\n        console.warn(message);\n        error_info = {\n            error_last: message,\n            error_command: current_command!,\n        };\n    };\n\n    const schema = variables.schema; //  schema undefined\n    const strict_template = schema?.strictTemplate ?? false;\n    const concat_template_array = schema?.concatTemplateArray ?? true;\n    const strict_set = schema?.strictSet ?? false;\n\n    //\n    for (const cmd of commands) {\n        if (cmd.type === 'remove') {\n            cmd.type = 'delete';\n        } else if (cmd.type === 'assign') {\n            cmd.type = 'insert';\n        } else if (cmd.type === 'unset') {\n            cmd.type = 'delete';\n        }\n    }\n\n    //@ts-expect-error old fn\n    await eventEmit(variable_events.COMMAND_PARSED, variables, commands, current_message_content);\n    // MVU zod  COMMAND_PARSED \n    await eventEmit(\n        variable_events.COMMAND_PARSED + '_for_zod',\n        variables,\n        commands,\n        current_message_content\n    );\n\n    pathFixPass(variables, commands, current_message_content);\n\n    for (const command of commands) {\n        // \n        // \n        const path = command.args[0];\n        // \n        const reason_str = command.reason ? `(${command.reason})` : '';\n        let display_str = ''; // \n        current_command = command;\n\n        switch (\n            command.type // \n        ) {\n            case 'set': {\n                // _.has \n                if (path !== '' && !_.has(variables.stat_data, path)) {\n                    outError(\n                        `Path '${path}' does not exist in stat_data, skipping set command ${reason_str}`\n                    );\n                    continue;\n                }\n\n                //  undefined\n                let oldValue =\n                    path === '' ? klona(variables.stat_data) : _.get(variables.stat_data, path);\n\n                // _.set(path, newValue)  _.set(path, oldValue, newValue)\n                //   JSON \n                let newValue = parseCommandValue(command.args.at(-1)!);\n\n                //  Date  ISO \n                if (newValue instanceof Date) {\n                    newValue = newValue.toISOString();\n                }\n                let isPathVWD = false;\n\n                if (\n                    !strict_set &&\n                    Array.isArray(oldValue) &&\n                    oldValue.length === 2 &&\n                    typeof oldValue[1] === 'string' &&\n                    !Array.isArray(oldValue[0])\n                ) {\n                    //  ValueWithDescription<T> \n                    //  null \n                    //  null ( null)\n                    const oldValueCopy = klona(oldValue[0]);\n                    oldValue[0] =\n                        typeof oldValue[0] === 'number' && newValue !== null\n                            ? Number(newValue)\n                            : newValue;\n                    oldValue = oldValueCopy;\n                    isPathVWD = true;\n                } else if (\n                    typeof oldValue === 'number' &&\n                    newValue !== null &&\n                    typeof newValue === 'string'\n                ) {\n                    _.set(variables.stat_data, path, Number(newValue));\n                } else if (path) {\n                    _.set(variables.stat_data, path, newValue);\n                } else {\n                    variables.stat_data = newValue;\n                }\n\n                // \n                let finalNewValue =\n                    path === '' ? variables.stat_data : _.get(variables.stat_data, path);\n\n                assertVWD(isPathVWD, finalNewValue);\n\n                if (isPathVWD) {\n                    finalNewValue = finalNewValue[0];\n                }\n\n                //  ValueWithDescription \n                const isStrict = !strict_set;\n\n                if (\n                    isStrict &&\n                    isValueWithDescriptionStatData(oldValue) &&\n                    Array.isArray(finalNewValue)\n                ) {\n                    //  ValueWithDescription\n                    display_str = `${trimQuotesAndBackslashes(JSON.stringify(oldValue[0]))}->${trimQuotesAndBackslashes(JSON.stringify(finalNewValue[0]))} ${reason_str}`;\n                } else {\n                    // \n                    display_str = `${trimQuotesAndBackslashes(JSON.stringify(oldValue))}->${trimQuotesAndBackslashes(JSON.stringify(finalNewValue))} ${reason_str}`;\n                }\n\n                // \n                console.info(`Set '${path}' to '${JSON.stringify(finalNewValue)}' ${reason_str}`);\n\n                // \n                await eventEmit(\n                    variable_events.SINGLE_VARIABLE_UPDATED,\n                    variables.stat_data,\n                    path,\n                    oldValue,\n                    finalNewValue\n                );\n                break;\n            }\n\n            case 'insert':\n            case 'assign': {\n                // \n                // \n                const targetPath = path;\n                // Schema\n                const existingValue =\n                    targetPath === ''\n                        ? variables.stat_data\n                        : _.get(variables.stat_data, targetPath);\n                const targetSchema = getSchemaForPath(schema, targetPath);\n\n                // 1\n                if (\n                    existingValue !== null &&\n                    !Array.isArray(existingValue) &&\n                    !_.isObject(existingValue)\n                ) {\n                    outError(\n                        `Cannot assign into path '${targetPath}' because it holds a primitive value (${typeof existingValue}). Operation skipped. ${reason_str}`\n                    );\n                    continue;\n                }\n\n                // 2Schema \n                if (targetSchema) {\n                    if (targetSchema.type === 'object' && targetSchema.extensible === false) {\n                        if (command.args.length === 2) {\n                            // \n                            outError(\n                                `SCHEMA VIOLATION: Cannot merge data into non-extensible object at path '${targetPath}'. ${reason_str}`\n                            );\n                            continue;\n                        }\n                        if (command.args.length >= 3) {\n                            // \n                            const newKey = String(parseCommandValue(command.args[1]));\n                            if (!_.has(targetSchema.properties, newKey)) {\n                                outError(\n                                    `SCHEMA VIOLATION: Cannot assign new key '${newKey}' into non-extensible object at path '${targetPath}'. ${reason_str}`\n                                );\n                                continue;\n                            }\n                        }\n                    } else if (\n                        targetSchema.type === 'array' &&\n                        (targetSchema.extensible === false || targetSchema.extensible === undefined)\n                    ) {\n                        outError(\n                            `SCHEMA VIOLATION: Cannot assign elements into non-extensible array at path '${targetPath}'. ${reason_str}`\n                        );\n                        continue;\n                    }\n                } else if (\n                    //  targetPath !== '' \n                    targetPath !== '' &&\n                    !_.get(variables.stat_data, _.toPath(targetPath).slice(0, -1).join('.'))\n                ) {\n                    // 3\n                    outError(\n                        `Cannot assign into non-existent path '${targetPath}' without an extensible parent. ${reason_str}`\n                    );\n                    continue;\n                }\n                // ---  ---\n\n                // \n                const oldValue = klona(existingValue);\n                let successful = false; // \n\n                if (command.args.length === 2) {\n                    // _.assign('path.to.array', value)\n                    // \n                    let valueToAssign = parseCommandValue(command.args[1]);\n\n                    //  Date Date\n                    if (valueToAssign instanceof Date) {\n                        valueToAssign = valueToAssign.toISOString();\n                    } else if (Array.isArray(valueToAssign)) {\n                        valueToAssign = valueToAssign.map(item =>\n                            item instanceof Date ? item.toISOString() : item\n                        );\n                    }\n\n                    // \n                    let collection =\n                        targetPath === '' ? variables.stat_data : _.get(variables.stat_data, path);\n\n                    // \n                    if (!Array.isArray(collection) && !_.isObject(collection)) {\n                        collection = Array.isArray(valueToAssign) ? [] : {};\n                        _.set(variables.stat_data, path, collection);\n                    }\n\n                    if (Array.isArray(collection)) {\n                        // \n                        // \n                        const template =\n                            targetSchema && isArraySchema(targetSchema)\n                                ? targetSchema.template\n                                : undefined;\n                        valueToAssign = applyTemplate(\n                            valueToAssign,\n                            template,\n                            strict_template,\n                            concat_template_array\n                        );\n                        collection.push(valueToAssign);\n                        display_str = `ASSIGNED ${JSON.stringify(valueToAssign)} into array '${path}' ${reason_str}`;\n                        successful = true;\n                    } else if (_.isObject(collection)) {\n                        // \n                        // \n                        //  assign\n                        if (_.isObject(valueToAssign) && !Array.isArray(valueToAssign)) {\n                            _.merge(collection, valueToAssign);\n                            display_str = `MERGED object ${JSON.stringify(valueToAssign)} into object '${path}' ${reason_str}`;\n                            successful = true;\n                        } else {\n                            // \n                            outError(\n                                `Cannot merge ${Array.isArray(valueToAssign) ? 'array' : 'non-object'} into object at '${path}'`\n                            );\n                            continue;\n                        }\n                    }\n                } else if (command.args.length >= 3) {\n                    // _.assign('path', key/index, value)\n                    // /\n                    let valueToAssign = parseCommandValue(command.args[2]);\n                    const keyOrIndex = parseCommandValue(command.args[1]);\n\n                    //  Date Date\n                    if (valueToAssign instanceof Date) {\n                        valueToAssign = valueToAssign.toISOString();\n                    } else if (Array.isArray(valueToAssign)) {\n                        valueToAssign = valueToAssign.map(item =>\n                            item instanceof Date ? item.toISOString() : item\n                        );\n                    }\n\n                    let collection =\n                        targetPath === '' ? variables.stat_data : _.get(variables.stat_data, path);\n\n                    // \n                    const template =\n                        targetSchema &&\n                        (isArraySchema(targetSchema) || isObjectSchema(targetSchema))\n                            ? targetSchema.template\n                            : undefined;\n\n                    if (Array.isArray(collection) && typeof keyOrIndex === 'number') {\n                        // \n                        valueToAssign = applyTemplate(\n                            valueToAssign,\n                            template,\n                            strict_template,\n                            concat_template_array\n                        );\n                        collection.splice(keyOrIndex, 0, valueToAssign);\n                        display_str = `ASSIGNED ${JSON.stringify(valueToAssign)} into '${path}' at index ${keyOrIndex} ${reason_str}`;\n                        successful = true;\n                    } else if (_.isObject(collection)) {\n                        // \n                        // _.set(collection, String(keyOrIndex), valueToAssign);\n                        // \n                        valueToAssign = applyTemplate(\n                            valueToAssign,\n                            template,\n                            strict_template,\n                            concat_template_array\n                        );\n                        (collection as Record<string, unknown>)[String(keyOrIndex)] = valueToAssign;\n                        display_str = `ASSIGNED key '${keyOrIndex}' with value ${JSON.stringify(valueToAssign)} into object '${path}' ${reason_str}`;\n                        successful = true;\n                    } else {\n                        // \n                        collection = {};\n                        _.set(variables.stat_data, path, collection);\n                        /*\n                        _.set(\n                            collection as Record<string, unknown>,\n                            String(keyOrIndex),\n                            valueToAssign\n                        );\n                        */\n                        // \n                        valueToAssign = applyTemplate(\n                            valueToAssign,\n                            template,\n                            strict_template,\n                            concat_template_array\n                        );\n                        (collection as Record<string, unknown>)[String(keyOrIndex)] = valueToAssign;\n                        display_str = `CREATED object at '${path}' and ASSIGNED key '${keyOrIndex}' ${reason_str}`;\n                        successful = true;\n                    }\n                }\n\n                if (successful) {\n                    // \n                    const newValue = isNullOrWhiteSpace(path)\n                        ? variables.stat_data\n                        : _.get(variables.stat_data, path);\n                    console.info(display_str);\n                    await eventEmit(\n                        variable_events.SINGLE_VARIABLE_UPDATED,\n                        variables.stat_data,\n                        path,\n                        oldValue,\n                        newValue\n                    );\n                    try {\n                        // template \n                        const currentDataClone = klona(newValue);\n\n                        const newSchema = generateSchema(currentDataClone, targetSchema!);\n                        _.merge(targetSchema, newSchema);\n                        cleanUpMetadata(newValue);\n                    } catch (error) {\n                        // \n                        if (error instanceof Error) {\n                            outError(\n                                `Failed to resolve template meta at '${path}', '${error.message}'`\n                            );\n                        } else {\n                            outError(`Failed to resolve template meta at '${path}', '${error}'`);\n                        }\n                    }\n                } else {\n                    // \n                    outError(`Invalid arguments for _.assign on path '${path}'`);\n                    continue;\n                }\n                break;\n            }\n\n            case 'unset':\n            case 'delete':\n            case 'remove': {\n                // --- handle array element removal correctly ---\n                const pathParts = _.toPath(path);\n                const lastPart = pathParts[pathParts.length - 1];\n                const isArrayElementPath = /^\\d+$/.test(lastPart);\n\n                if (command.args.length === 1 && isArrayElementPath) {\n                    const containerPath = pathParts.slice(0, -1).join('.');\n                    // isArray \n                    const container = _.get(variables.stat_data, containerPath);\n                    const indexToRemove = parseInt(lastPart, 10);\n\n                    if (Array.isArray(container) && indexToRemove < container.length) {\n                        const originalArray = klona(container);\n                        container.splice(indexToRemove, 1);\n                        display_str = `REMOVED item from '${containerPath}' at index ${indexToRemove} ${reason_str}`;\n                        console.info(display_str);\n                        await eventEmit(\n                            variable_events.SINGLE_VARIABLE_UPDATED,\n                            variables.stat_data,\n                            containerPath,\n                            originalArray,\n                            container\n                        );\n                        continue; // Skip to next command\n                    }\n                }\n\n                // \n                //  _.remove('', 'val');\n                if (!_.has(variables.stat_data, path)) {\n                    outError(`undefined Path: ${path} in _.remove command`);\n                    continue;\n                }\n\n                // ---  ---\n                let containerPath = path;\n                let keyOrIndexToRemove: string | number | undefined;\n\n                if (command.args.length > 1) {\n                    // _.remove('path', key_or_index)\n                    keyOrIndexToRemove = parseCommandValue(command.args[1]);\n                    //  key \n                    if (typeof keyOrIndexToRemove === 'string') {\n                        keyOrIndexToRemove = trimQuotesAndBackslashes(keyOrIndexToRemove);\n                    }\n                } else {\n                    // _.remove('path.to.key[index]')\n                    const pathParts = _.toPath(path);\n                    const lastPart = pathParts.pop();\n                    if (lastPart) {\n                        keyOrIndexToRemove = /^\\d+$/.test(lastPart) ? Number(lastPart) : lastPart;\n                        containerPath = pathParts.join('.');\n                    }\n                }\n\n                if (keyOrIndexToRemove === undefined) {\n                    outError(\n                        `Could not determine target for deletion for command on path '${path}' ${reason_str}`\n                    );\n                    continue;\n                }\n                // \n                if (containerPath !== '' && !_.has(variables.stat_data, containerPath)) {\n                    outError(\n                        `Cannot remove from non-existent path '${containerPath}'. ${reason_str}`\n                    );\n                    continue;\n                }\n\n                const containerSchema = getSchemaForPath(schema, containerPath);\n\n                if (containerSchema) {\n                    if (containerSchema.type === 'array') {\n                        if (containerSchema.extensible !== true) {\n                            outError(\n                                `SCHEMA VIOLATION: Cannot remove element from non-extensible array at path '${containerPath}'. ${reason_str}`\n                            );\n                            continue;\n                        }\n                    } else if (containerSchema.type === 'object') {\n                        const keyString = String(keyOrIndexToRemove);\n                        if (\n                            _.has(containerSchema.properties, keyString) &&\n                            containerSchema.properties[keyString].required === true\n                        ) {\n                            outError(\n                                `SCHEMA VIOLATION: Cannot remove required key '${keyString}' from path '${containerPath}'. ${reason_str}`\n                            );\n                            continue;\n                        }\n                    }\n                }\n\n                // ---  ---\n\n                // \n                const targetToRemove =\n                    command.args.length > 1 ? parseCommandValue(command.args[1]) : undefined;\n                let itemRemoved = false; // \n\n                if (targetToRemove === undefined) {\n                    // _.remove('path.to.key')\n                    // \n                    const oldValue = _.get(variables.stat_data, path);\n                    _.unset(variables.stat_data, path);\n                    display_str = `REMOVED path '${path}' ${reason_str}`;\n                    itemRemoved = true;\n                    await eventEmit(\n                        variable_events.SINGLE_VARIABLE_UPDATED,\n                        variables.stat_data,\n                        path,\n                        oldValue,\n                        undefined\n                    );\n                } else {\n                    // _.remove('path.to.array', value_or_index)\n                    const collection = _.get(variables.stat_data, path);\n\n                    // \n                    // \n                    if (!Array.isArray(collection) && !_.isObject(collection)) {\n                        outError(\n                            `Cannot remove from path '${path}' because it is not an array or object. Skipping command. ${reason_str}`\n                        );\n                        continue;\n                    }\n\n                    if (Array.isArray(collection)) {\n                        // \n                        const originalArray = klona(collection);\n                        let indexToRemove = -1;\n                        if (typeof targetToRemove === 'number') {\n                            indexToRemove = targetToRemove;\n                        } else {\n                            indexToRemove = collection.findIndex(item =>\n                                _.isEqual(item, targetToRemove)\n                            );\n                        }\n\n                        if (indexToRemove >= 0 && indexToRemove < collection.length) {\n                            collection.splice(indexToRemove, 1);\n                            itemRemoved = true;\n                            display_str = `REMOVED item from '${path}' ${reason_str}`;\n                            await eventEmit(\n                                variable_events.SINGLE_VARIABLE_UPDATED,\n                                variables.stat_data,\n                                path,\n                                originalArray,\n                                collection\n                            );\n                        }\n                    } else if (_.isObject(collection)) {\n                        if (typeof targetToRemove === 'number') {\n                            // \n                            const keys = Object.keys(collection);\n                            const index = targetToRemove;\n                            if (index >= 0 && index < keys.length) {\n                                const keyToRemove = keys[index];\n                                _.unset(collection, keyToRemove);\n                                itemRemoved = true;\n                                display_str = `REMOVED ${index + 1}th entry ('${keyToRemove}') from object '${path}' ${reason_str}`;\n                            }\n                        } else {\n                            // \n                            const keyToRemove = String(targetToRemove);\n                            if (_.has(collection, keyToRemove)) {\n                                // _.unset(collection, keyToRemove);\n                                delete (collection as Record<string, unknown>)[keyToRemove];\n                                itemRemoved = true;\n                                display_str = `REMOVED key '${keyToRemove}' from object '${path}' ${reason_str}`;\n                            }\n                        }\n                    }\n                }\n\n                if (itemRemoved) {\n                    // \n                    console.info(display_str);\n                } else {\n                    // \n                    outError(`Failed to execute remove on '${path}'`);\n                    continue;\n                }\n                break;\n            }\n\n            case 'add': {\n                // \n                if (!_.has(variables.stat_data, path)) {\n                    outError(\n                        `Path '${path}' does not exist in stat_data, skipping add command ${reason_str}`\n                    );\n                    continue;\n                }\n                // \n                const initialValue = klona(_.get(variables.stat_data, path));\n                const oldValue = _.get(variables.stat_data, path);\n                let valueToAdd = oldValue;\n                const isVWD =\n                    isValueWithDescriptionStatData(oldValue) && typeof oldValue[0] !== 'object';\n\n                if (isVWD) {\n                    assertVWD(isVWD, oldValue);\n                    valueToAdd = oldValue[0]; //  ValueWithDescription \n                }\n                // console.warn(valueToAdd);\n\n                //  Date  Date \n                let potentialDate: Date | null = null;\n                if (valueToAdd instanceof Date) {\n                    potentialDate = valueToAdd;\n                } else if (typeof valueToAdd === 'string') {\n                    const parsedDate = new Date(valueToAdd);\n                    //  `new Date` \n                    if (!isNaN(parsedDate.getTime()) && isNaN(Number(valueToAdd))) {\n                        potentialDate = parsedDate;\n                    }\n                }\n\n                if (command.args.length === 2) {\n                    // \n                    const delta = parseCommandValue(command.args[1]);\n\n                    //  Date \n                    if (potentialDate) {\n                        if (typeof delta !== 'number') {\n                            outError(\n                                `Delta '${command.args[1]}' for Date operation is not a number, skipping add command ${reason_str}`\n                            );\n                            continue;\n                        }\n                        // delta \n                        const newDate = new Date(potentialDate.getTime() + delta);\n                        //  Date  ISO \n                        const finalValueToSet = newDate.toISOString();\n\n                        if (isVWD) {\n                            assertVWD(isVWD, oldValue);\n                            oldValue[0] = finalValueToSet;\n                            _.set(variables.stat_data, path, oldValue);\n                        } else {\n                            _.set(variables.stat_data, path, finalValueToSet);\n                        }\n\n                        const finalNewValue = _.get(variables.stat_data, path);\n                        if (isVWD) {\n                            display_str = `${JSON.stringify((initialValue as any[])[0])}->${JSON.stringify((finalNewValue as any[])[0])} ${reason_str}`;\n                        } else {\n                            display_str = `${JSON.stringify(initialValue)}->${JSON.stringify(finalNewValue)} ${reason_str}`;\n                        }\n                        console.info(\n                            `ADDED date '${path}' from '${potentialDate.toISOString()}' to '${newDate.toISOString()}' by delta '${delta}'ms ${reason_str}`\n                        );\n                        await eventEmit(\n                            variable_events.SINGLE_VARIABLE_UPDATED,\n                            variables.stat_data,\n                            path,\n                            initialValue,\n                            finalNewValue\n                        );\n                    } else if (typeof valueToAdd === 'number') {\n                        //  number \n                        if (typeof delta !== 'number') {\n                            outError(\n                                `Delta '${command.args[1]}' is not a number, skipping add command ${reason_str}`\n                            );\n                            continue;\n                        }\n                        let newValue = valueToAdd + delta;\n                        newValue = parseFloat(newValue.toPrecision(12)); // \n                        if (isVWD) {\n                            oldValue[0] = newValue; // Update the first element\n                            _.set(variables.stat_data, path, oldValue);\n                        } else {\n                            _.set(variables.stat_data, path, newValue);\n                        }\n                        const finalNewValue = _.get(variables.stat_data, path);\n                        if (isVWD) {\n                            display_str = `${JSON.stringify((initialValue as any[])[0])}->${JSON.stringify((finalNewValue as any[])[0])} ${reason_str}`;\n                        } else {\n                            display_str = `${JSON.stringify(initialValue)}->${JSON.stringify(finalNewValue)} ${reason_str}`;\n                        }\n                        console.info(\n                            `ADDED number '${path}' from '${valueToAdd}' to '${newValue}' by delta '${delta}' ${reason_str}`\n                        );\n                        await eventEmit(\n                            variable_events.SINGLE_VARIABLE_UPDATED,\n                            variables.stat_data,\n                            path,\n                            initialValue,\n                            finalNewValue\n                        );\n                    } else {\n                        // \n                        outError(\n                            `Path '${path}' value is not a date or number; skipping add command ${reason_str}`\n                        );\n                        continue;\n                    }\n                } else {\n                    outError(\n                        `Invalid number of arguments for _.add on path '${path}' ${reason_str}`\n                    );\n                    continue;\n                }\n                break;\n            }\n        }\n\n        if (display_str) {\n            // \n            _.set(out_status.stat_data, path, display_str);\n            _.set(delta_status.stat_data!, path, display_str);\n        }\n    }\n    // \n    variables.display_data = out_status.stat_data;\n    variables.delta_data = delta_status.stat_data!;\n    // \n    //@ts-expect-error variables\n    await eventEmit(variable_events.VARIABLE_UPDATE_ENDED, variables, variables_before_update);\n    //\n    _.unset(variables.stat_data, '$internal');\n    //  Schema \n    const is_modified = !_.isEqual(variables.stat_data, variables_before_update.stat_data);\n    if (is_modified) {\n        reconcileAndApplySchema(variables);\n    }\n    await eventEmit(\n        variable_events.VARIABLE_UPDATE_ENDED + '_for_zod',\n        variables,\n        variables_before_update\n    );\n    if (error_info && useSettingsStore().settings..) {\n        const base_command: string = error_info.error_command.full_match;\n        if (typeof toastr !== 'undefined')\n            toastr.warning(\n                `: ${error_info.error_last}`,\n                `[MVU]Roll: ${base_command}`,\n                { timeOut: 6000 }\n            );\n    }\n\n    return is_modified;\n}\n\nexport async function handleVariablesInMessage(message_id: number) {\n    const chat_message = getChatMessages(message_id).at(-1);\n    if (!chat_message) {\n        return;\n    }\n\n    let message_content = chat_message.message;\n\n    if (chat_message.role === 'assistant' && message_content.length < 5) {\n        return;\n    }\n    const request_message_id = message_id === 0 ? 0 : message_id - 1;\n    const variables = await getLastValidVariable(request_message_id);\n    const settings = useSettingsStore().settings;\n    if (!_.has(variables, 'stat_data')) {\n        return;\n    }\n\n    const has_variable_modified = await updateVariables(message_content, variables);\n    if (has_variable_modified && chat_message.role !== 'user') {\n        const context: UpdateContext = {\n            variables: variables,\n            message_content: message_content,\n        };\n        //@ts-expect-error \n        await eventEmit(variable_events.BEFORE_MESSAGE_UPDATE, context);\n        message_content = context.message_content;\n    }\n    const updater = (data: Record<string, any>) => {\n        data.initialized_lorebooks = variables.initialized_lorebooks;\n        data.stat_data = variables.stat_data;\n        if (variables.schema !== undefined) {\n            _.set(data, 'schema', variables.schema);\n        } else {\n            _.unset(data, 'schema');\n        }\n        if (variables.display_data !== undefined) {\n            _.set(data, 'display_data', variables.display_data);\n        } else {\n            _.unset(data, 'display_data');\n        }\n        if (variables.delta_data !== undefined) {\n            _.set(data, 'delta_data', variables.delta_data);\n        } else {\n            _.unset(data, 'delta_data');\n        }\n        return data;\n    };\n    if (has_variable_modified && settings.) {\n        await updateVariablesWith(updater, { type: 'chat' });\n    }\n    await updateVariablesWith(updater, { type: 'message', message_id: message_id });\n\n    if (chat_message.role !== 'user') {\n        if (!message_content.includes('<StatusPlaceHolderImpl/>')) {\n            message_content += '\\n\\n<StatusPlaceHolderImpl/>';\n        }\n        await setChatMessages(\n            [\n                {\n                    message_id: message_id,\n                    message: message_content,\n                },\n            ],\n            {\n                refresh: 'affected',\n            }\n        );\n    }\n}\n\nexport async function handleVariablesInCallback(\n    message_content: string,\n    in_out_variable_info: VariableData\n) {\n    if (in_out_variable_info.old_variables === undefined) {\n        return;\n    }\n    in_out_variable_info.new_variables = klona(in_out_variable_info.old_variables);\n    await updateVariables(message_content, in_out_variable_info.new_variables);\n    return in_out_variable_info.new_variables;\n}\n\n/**  `[start_message_id, end_message_id]` ,  `snap_interval`  */\nexport function cleanupVariablesInMessages(\n    start_message_id: number,\n    end_message_id: number,\n    snap_interval: number\n) {\n    let counter = 0;\n    _(SillyTavern.chat)\n        .slice(start_message_id, end_message_id + 1)\n        .forEach((chat_message, msg_index) => {\n            if (chat_message.variables === undefined) {\n                return;\n            }\n            //counter \n            let chat_flag = false;\n            chat_message.variables = _.range(0, chat_message.swipes?.length ?? 1).map(i => {\n                if (chat_message?.variables?.[i] === undefined) {\n                    return {};\n                }\n                if (_.get(chat_message?.variables?.[i], 'snapshot') === true) {\n                    return chat_message.variables[i];\n                }\n                if ((start_message_id + msg_index) % snap_interval === 0) {\n                    //snapshot \n                    // 50-> 70  350 \n                    _.set(chat_message, ['variables', i, 'snapshot'], true);\n                    return chat_message.variables[i];\n                }\n                if (!chat_flag) {\n                    chat_flag = true;\n                    ++counter;\n                }\n                return _.omit(\n                    chat_message.variables[i],\n                    `initialized_lorebooks`,\n                    `stat_data`,\n                    `display_data`,\n                    `delta_data`,\n                    `schema`\n                );\n            });\n        });\n    saveChatDebounced();\n    return counter;\n}\n","/**\n * \n *\n * \n * initData: {\n *   \"\": {\n *     \"value\": 100,\n *     \"description\": \"\"  //  4(a)\n *   },\n *   \"\": [100, \"\"],  //  4(b): ValueWithDescription<number>\n *   \"\": [{\n *     \"name\": \"\",\n *     \"damage\": [50, \"\"],  //  ValueWithDescription\n *     \"description\": \"\"\n *   }],\n *   \"\": {\n *     \"\": [\"\", \"\"],  // ValueWithDescription<string>\n *     \"\": {\n *       \"\": [10, \"\"]\n *     }\n *   }\n * }\n */\nexport function updateDescriptions(\n    _init_path: string,\n    init_data: any,\n    msg_data: any,\n    target_data: any\n) {\n    _.forEach(init_data, (value, key) => {\n        const current_path = key; //init_path ? `${init_path}.${key}` : key;\n\n        if (_.isArray(value)) {\n            //  ValueWithDescription<T>  (2)\n            if (value.length === 2 && _.isString(value[1])) {\n                //  4(b):  ValueWithDescription<T> \n                if (_.isArray(_.get(msg_data, current_path))) {\n                    const msgValue = _.get(msg_data, current_path);\n                    if (msgValue.length === 2) {\n                        // ()\n                        _.set(target_data, `${current_path}[1]`, value[1]);\n\n                        // \n                        if (_.isObject(value[0]) && !_.isArray(value[0])) {\n                            // \n                            const targetObj = _.get(target_data, `${key}[0]`);\n\n                            // description\n                            if (\n                                _.has(value[0], 'description') &&\n                                _.isString(value[0].description)\n                            ) {\n                                if (_.has(msgValue[0], 'description')) {\n                                    _.set(\n                                        target_data,\n                                        `${current_path}[0].description`,\n                                        value[0].description\n                                    );\n                                }\n                            }\n\n                            // \n                            updateDescriptions(\n                                `${current_path}[0]`,\n                                value[0],\n                                msgValue[0],\n                                targetObj\n                            );\n                        } else if (_.isArray(value[0])) {\n                            // \n                            updateDescriptions(\n                                `${current_path}[0]`,\n                                value[0],\n                                msgValue[0],\n                                target_data[0]\n                            );\n                        }\n                    }\n                }\n            } else if (_.isArray(_.get(msg_data, current_path))) {\n                // \n                const msg_array = _.get(msg_data, current_path);\n                value.forEach((item, index) => {\n                    if (index < msg_array.length) {\n                        if (_.isObject(item)) {\n                            const current_target = _.get(target_data, `${current_path}[${index}]`);\n                            // description\n                            if (_.has(item, 'description') && _.isString(item.description)) {\n                                if (_.has(msg_array[index], 'description')) {\n                                    _.set(current_target, `description`, item.description);\n                                }\n                            }\n\n                            updateDescriptions(\n                                `${current_path}[${index}]`,\n                                value[index],\n                                msg_array[index],\n                                current_target\n                            );\n                        }\n                    }\n                });\n            }\n        } else if (_.isObject(value)) {\n            // \n            if (_.has(value, 'description') && _.isString(value.description)) {\n                //  4(a):  description \n                //msg_data  currentPath\n                const description_path = `${key}.description`;\n                if (_.has(msg_data, description_path)) {\n                    _.set(target_data, description_path, value.description);\n                }\n            }\n\n            // \n            if (_.has(msg_data, key) && _.isObject(msg_data[key])) {\n                updateDescriptions(current_path, value, msg_data[key], target_data[key]);\n            }\n        }\n    });\n}\n","// \nimport { getLastValidVariable, updateVariables } from '@/function';\nimport { cleanUpMetadata, EXTENSIBLE_MARKER, generateSchema } from '@/schema';\nimport { useSettingsStore } from '@/settings';\nimport { correctlyMerge, parseString } from '@/util';\nimport {\n    isObjectSchema,\n    MvuData,\n    RootAdditionalProps,\n    SchemaNode,\n    StatData,\n    variable_events,\n} from '@/variable_def';\nimport { klona } from 'klona';\n\ntype LorebookEntry = {\n    content: string;\n    comment?: string;\n};\n\nexport async function initCheck() {\n    let variables: MvuData & Record<string, any>;\n    // dryRun,0\n\n    try {\n        if (SillyTavern.chat.length === 0) {\n            console.error('');\n            toastr.error('', '[MVU]');\n            return;\n        }\n        variables = (await getLastValidVariable(getLastMessageId())) ?? createEmptyGameData();\n    } catch (e) {\n        console.error('');\n        return;\n    }\n\n    // \n    if (variables === undefined) {\n        variables = createEmptyGameData();\n    }\n    if (!_.has(variables, 'initialized_lorebooks')) {\n        variables.initialized_lorebooks = {};\n    }\n    if (Array.isArray(variables.initialized_lorebooks)) {\n        console.warn(\n            'Old \"initialized_lorebooks\" array format detected. Migrating to the new object format.'\n        );\n        const oldArray = variables.initialized_lorebooks as string[];\n        const newObject: Record<string, any[]> = {};\n        for (const lorebookName of oldArray) {\n            newObject[lorebookName] = []; // \n        }\n        variables.initialized_lorebooks = newObject;\n    }\n    if (!variables.stat_data) {\n        variables.stat_data = {};\n    }\n    if (!variables.schema) {\n        variables.schema = { extensible: false, properties: {}, type: 'object' };\n    }\n\n    //  InitVar \n    const is_updated = await loadInitVarData(variables);\n\n    // ---  ---\n    if (is_updated) {\n        //  stat_data\n        const cleanData = (data: any) => {\n            if (Array.isArray(data)) {\n                //  filter \n                const cleanedArray = data.filter(item => item !== EXTENSIBLE_MARKER);\n                // \n                cleanedArray.forEach(cleanData);\n                return cleanedArray;\n            }\n            if (_.isObject(data)) {\n                const newObj: Record<string, any> = {};\n                const typedData = data as Record<string, any>; // \n                for (const key in data) {\n                    // \n                    newObj[key] = cleanData(typedData[key]);\n                }\n                return newObj;\n            }\n            return data;\n        };\n        //  Schema  stat_data\n        //  Schema\n        // \n    }\n\n    //  lorebook \n    if (is_updated || !variables.schema || _.isEmpty(variables.schema)) {\n        // 1.  Schema \n        const dataForSchema = klona(variables.stat_data);\n        // 2. generateSchema  schema\n        //  schema \n        const generated_schema: SchemaNode & RootAdditionalProps = generateSchema(\n            dataForSchema,\n            variables.schema\n        );\n\n        //  schema  ObjectSchemaNode\n        if (isObjectSchema(generated_schema)) {\n            if (_.has(variables.stat_data, '$meta.strictTemplate'))\n                generated_schema.strictTemplate = variables.stat_data['$meta']\n                    ?.strictTemplate as boolean;\n            if (_.has(variables.stat_data, '$meta.concatTemplateArray'))\n                generated_schema.concatTemplateArray = variables.stat_data['$meta']\n                    ?.concatTemplateArray as boolean;\n            if (_.has(variables.stat_data, '$meta.strictSet'))\n                generated_schema.strictSet = variables.stat_data['$meta']?.strictSet as boolean;\n            variables.schema = generated_schema;\n        }\n\n        // 3.  stat_data\n        cleanUpMetadata(variables.stat_data);\n    }\n\n    if (!is_updated) {\n        return;\n    }\n\n    if (useSettingsStore().settings.) {\n        console.info(`Init chat variables.`);\n        await updateVariablesWith(data => _.assign(data, variables), { type: 'chat' });\n    }\n\n    if (getLastMessageId() == 0) {\n        const last_msg = getChatMessages(0, { include_swipes: true })[0];\n        //  swipes\n        await setChatMessages([\n            {\n                // last_msg  message_id\n                message_id: 0,\n                swipes_data: await Promise.all(\n                    last_msg.swipes!.map(async (swipe, index) => {\n                        let vanilla_variable_data: Record<string, any> = klona(\n                            last_msg.swipes_data[index]\n                        );\n                        if (vanilla_variable_data === undefined) {\n                            vanilla_variable_data = {};\n                        }\n                        const current_data = correctlyMerge(\n                            vanilla_variable_data,\n                            klona(variables)\n                        );\n\n                        const matched_init = swipe.matchAll(\n                            /<(initvar)>(?:\\s*```.*)?([\\s\\S]*?)(?:```\\s*)?<\\/\\1>/gim\n                        );\n                        //  <initvar> \n                        //  <initvar>  [initvar] \n                        let is_initvar_applied = false;\n                        const overrided_initvar: StatData = {};\n                        for (const match of matched_init) {\n                            const init_content = match[2];\n                            try {\n                                const init_variables = parseString(substitudeMacros(init_content));\n                                correctlyMerge(overrided_initvar, init_variables);\n                                is_initvar_applied = true;\n                            } catch (e) {\n                                console.error('failed to parse initvar block:' + e);\n                            }\n                        }\n                        if (is_initvar_applied) {\n                            current_data.stat_data = overrided_initvar;\n                            const char_lorebook =\n                                getCharWorldbookNames('current').primary ?? 'unknown';\n                            //  \n                            // <initvar> \n                            current_data.initialized_lorebooks = {};\n                            current_data.initialized_lorebooks[char_lorebook] = [];\n                            //\n                            await loadInitVarData(current_data);\n                        }\n\n                        await eventEmit(variable_events.VARIABLE_INITIALIZED, current_data, index);\n                        //  updateVariables\n                        //  substitudeMacrosupdateVariables \n                        await updateVariables(swipe, current_data);\n                        console.log(``);\n                        return current_data;\n                    })\n                ),\n            },\n        ]);\n    } else {\n        // \n        await replaceVariables(variables, { type: 'message' });\n    }\n    try {\n        // \n        toastr.info(\n            `:<br>${Object.entries(\n                variables.initialized_lorebooks ?? {}\n            )\n                .map(([key, value]) => `- ${key}: ${JSON.stringify(value)}`)\n                .join('<br>')}`,\n            '[MVU]',\n            {\n                escapeHtml: false,\n            }\n        );\n    } catch (_e) {\n        /* empty */\n    }\n\n    //  lorebook \n    await updateLorebookSettings();\n}\n\n/**\n *  lorebook \n */\nexport async function getEnabledLorebookList(): Promise<string[]> {\n    const lorebook_settings = await getLorebookSettings();\n    const enabled_lorebook_list = [...lorebook_settings.selected_global_lorebooks];\n    const char_lorebook = await getCurrentCharPrimaryLorebook();\n    if (char_lorebook !== null) {\n        enabled_lorebook_list.push(char_lorebook);\n    }\n    return enabled_lorebook_list;\n}\n\n/**\n *  lorebook  InitVar  GameData \n */\nexport async function loadInitVarData(\n    mvu_data: MvuData,\n    lorebook_list?: string[]\n): Promise<boolean> {\n    const enabled_lorebook_list = lorebook_list || (await getEnabledLorebookList());\n    let is_updated = false;\n\n    //  initialized_lorebooks \n    if (!mvu_data.initialized_lorebooks || Array.isArray(mvu_data.initialized_lorebooks)) {\n        mvu_data.initialized_lorebooks = {};\n    }\n\n    for (const current_lorebook of enabled_lorebook_list) {\n        //  beta \n        if (_.has(mvu_data.initialized_lorebooks, current_lorebook)) continue;\n        mvu_data.initialized_lorebooks[current_lorebook] = [];\n        try {\n            const init_entries = (await getLorebookEntries(current_lorebook)) as LorebookEntry[];\n\n            const merged_data: Record<string, any> = {};\n            for (const entry of init_entries) {\n                if (entry.comment?.toLowerCase().includes('[initvar]')) {\n                    const codeblock_match = entry.content.trim().match(/```.*\\n([\\s\\S]*)\\n```/m);\n                    if (codeblock_match) {\n                        entry.content = codeblock_match[1];\n                    }\n                    const content = substitudeMacros(entry.content);\n                    let parsedData: any = null;\n                    let parseError: Error | null = null;\n\n                    // Try YAML first (which also handles JSON)\n                    try {\n                        parsedData = parseString(content);\n                    } catch (e) {\n                        parseError = e as Error;\n                    }\n\n                    if (parseError) {\n                        console.error(`'${entry.comment}': ${parseError}`);\n                        toastr.error(\n                            parseError.message,\n                            `[MVU] '${entry.comment}'`,\n                            {\n                                timeOut: 5000,\n                            }\n                        );\n                        throw parseError;\n                    }\n\n                    if (parsedData) {\n                        correctlyMerge(merged_data, parsedData);\n                    }\n                }\n            }\n            mvu_data.stat_data = { ...merged_data, ...mvu_data.stat_data };\n            is_updated = true;\n        } catch (e) {\n            console.error(e);\n        }\n    }\n\n    return is_updated;\n}\n\n/**\n *  GameData \n */\nexport function createEmptyGameData(): MvuData {\n    return {\n        display_data: {},\n        initialized_lorebooks: {}, //  beta \n        stat_data: {},\n        delta_data: {},\n        schema: {\n            type: 'object',\n            properties: {},\n        }, // beta  schema \n    };\n}\n\n/**\n * \n */\nexport async function getLastMessageVariables(): Promise<{\n    message: ChatMessageSwiped;\n    variables: MvuData | undefined;\n}> {\n    let last_chat_msg: ChatMessageSwiped[] = [];\n    try {\n        last_chat_msg = (await getChatMessages(-2, {\n            role: 'assistant',\n            include_swipes: true,\n        })) as ChatMessageSwiped[];\n    } catch (e) {\n        // \n    }\n\n    if (!last_chat_msg || last_chat_msg.length <= 0) {\n        const first_msg = await getChatMessages(0, {\n            include_swipes: true,\n        });\n        if (first_msg && first_msg.length > 0) {\n            last_chat_msg = first_msg;\n        } else {\n            throw new Error('');\n        }\n    }\n\n    const last_msg = last_chat_msg[0];\n    const variables = last_msg.swipes_data[last_msg.swipe_id] as MvuData & Record<string, any>;\n\n    return { message: last_msg, variables };\n}\n\n/**\n *  lorebook \n */\nexport async function updateLorebookSettings(): Promise<void> {\n    /*Ref:https://github.com/lolo-desu/lolocard/blob/master/src/%E6%97%A5%E8%AE%B0%E7%BB%9C%E7%BB%9C/%E8%84%9A%E6%9C%AC/%E8%B0%83%E6%95%B4%E4%B8%96%E7%95%8C%E4%B9%A6%E5%85%A8%E5%B1%80%E8%AE%BE%E7%BD%AE.ts\n     */\n    const dst_setting: Partial<LorebookSettings> = {\n        scan_depth: 2,\n        context_percentage: 100,\n        budget_cap: 0,\n        min_activations: 0,\n        max_depth: 0,\n        max_recursion_steps: 0,\n\n        insertion_strategy: 'character_first',\n\n        include_names: false,\n        recursive: true,\n        case_sensitive: false,\n        match_whole_words: false,\n        use_group_scoring: false,\n        overflow_alert: false,\n    };\n    const settings = getLorebookSettings();\n    if (!_.isEqual(_.merge({}, settings, dst_setting), settings)) {\n        setLorebookSettings(dst_setting);\n    }\n}\n\n//window.initCheck = initCheck;\n","import { useSettingsStore, useTempContents } from '@/settings';\nimport { isFunctionCallingSupported } from '@/util';\nimport { isDuringExtraAnalysis } from '@/variable_def';\n\n/**\n * \n */\nlet isExtraModelSupported = false;\nconst UPDATE_REGEX = /\\[mvu_update\\]/i;\nconst PLOT_REGEX = /\\[mvu_plot\\]/i;\n\nexport function getIsExtraModelSupported() {\n    return isExtraModelSupported;\n}\n\nexport function setIsExtraModelSupported(value: boolean) {\n    isExtraModelSupported = value;\n}\n\nexport async function handlePromptFilter(lores: {\n    globalLore: Record<string, any>[];\n    characterLore: Record<string, any>[];\n    chatLore: Record<string, any>[];\n    personaLore: Record<string, any>[];\n}) {\n    const settings = useSettingsStore().settings;\n    const temp_contents = useTempContents().temp_contents;\n    temp_contents.unsupported_warnings = '';\n\n    //\n    isExtraModelSupported = false;\n\n    //lore [mvu_update] \n    if (settings. === 'AI') {\n        return;\n    }\n    if (settings.. && !isFunctionCallingSupported()) {\n        toastr.warning(\n            '/API  `AI`',\n            '[MVU]',\n            {\n                timeOut: 2000,\n            }\n        );\n        return;\n    }\n\n    const tagged_worlds = new Set<string>();\n    const remove_and_check = (lore: Record<string, any>[]) => {\n        //  [mvu_plot]/[mvu_update]  [mvu_plot]\n        let any_match = false;\n        _.remove(lore, entry => {\n            const is_update_regex = UPDATE_REGEX.test(entry.comment);\n            const is_plot_regex = PLOT_REGEX.test(entry.comment);\n            if (is_update_regex || is_plot_regex) {\n                any_match = true;\n                tagged_worlds.add(entry.world);\n            }\n            return isDuringExtraAnalysis()\n                ? is_plot_regex && !is_update_regex\n                : !is_plot_regex && is_update_regex;\n        });\n        if (any_match) {\n            isExtraModelSupported = true;\n        }\n    };\n    remove_and_check(lores.characterLore);\n    //\n    //\n    //\n    if (!isExtraModelSupported) return;\n    remove_and_check(lores.globalLore);\n    remove_and_check(lores.chatLore);\n    remove_and_check(lores.personaLore);\n\n    // remove_and_check \n    // \n    if (isExtraModelSupported) {\n        const supported_worlds = tagged_worlds;\n        const process_unsupported_worlds = (lore: Record<string, any>[]) => {\n            let removed_entries: Record<string, any>[] = [];\n            if (isDuringExtraAnalysis()) {\n                removed_entries = _.remove(lore, entry => !supported_worlds.has(entry.world));\n            } else {\n                //\n                removed_entries = _.filter(lore, entry => !supported_worlds.has(entry.world));\n            }\n            return _(removed_entries)\n                .map(entry => entry.world)\n                .uniq()\n                .value();\n        };\n        const removed_worlds = _(\n            _.concat(\n                process_unsupported_worlds(lores.globalLore),\n                process_unsupported_worlds(lores.chatLore),\n                process_unsupported_worlds(lores.personaLore)\n            )\n        )\n            .uniq()\n            .sort()\n            .value();\n\n        temp_contents.unsupported_warnings = Array.from(removed_worlds).join(', ');\n    }\n}\n","import { getLastValidVariable, handleVariablesInMessage, updateVariables } from '@/function';\nimport { cleanUpMetadata, reconcileAndApplySchema } from '@/schema';\nimport { useSettingsStore } from '@/settings';\nimport { updateDescriptions } from '@/update_descriptions';\nimport { findLastValidMessage, isFunctionCallingSupported, scopedEventOn } from '@/util';\nimport { MvuData } from '@/variable_def';\nimport { createEmptyGameData, loadInitVarData } from '@/variable_init';\nimport { getIsExtraModelSupported } from '@/prompt_filter';\nimport { klona } from 'klona';\n\ninterface Button {\n    name: string;\n    function: (() => void) | (() => Promise<void>);\n    is_legacy?: boolean;\n}\n\ntype OnMessageReceived = (message_id: number, reason?: any) => Promise<void>;\n\nlet msg_received_callback: OnMessageReceived;\n\nexport function SetReceivedCallbackFn(fn: OnMessageReceived) {\n    msg_received_callback = fn;\n}\n\nasync function EmitVariableAnalysisJob() {\n    const settings = useSettingsStore().settings;\n    if (settings. === 'AI') {\n        toastr.info(``, '[MVU]', {\n            timeOut: 3000,\n        });\n        return;\n    } else if (settings.. && !isFunctionCallingSupported()) {\n        toastr.info(`LLM`, '[MVU]', {\n            timeOut: 3000,\n        });\n        return;\n    } else if (!getIsExtraModelSupported()) {\n        toastr.info(\n            ``,\n            '[MVU]',\n            {\n                timeOut: 3000,\n            }\n        );\n        return;\n    }\n    const last_msg = getLastMessageId();\n    const current_chatmsg = getChatMessages(last_msg).at(-1);\n    const current_chat_content = current_chatmsg?.message ?? '';\n    const begin_pos = current_chat_content.lastIndexOf('<UpdateVariable>');\n    if (begin_pos >= 0) {\n        //\n        const end_pos = current_chat_content.lastIndexOf('</UpdateVariable>');\n        let filtered_string = '';\n        if (end_pos === -1) {\n            //\n            filtered_string = current_chat_content.slice(0, begin_pos);\n        } else {\n            // </UpdateVariable> \n            filtered_string =\n                current_chat_content.slice(0, begin_pos) + current_chat_content.slice(end_pos + 17);\n        }\n        //\n        await setChatMessages(\n            [\n                {\n                    message_id: last_msg,\n                    message: filtered_string,\n                },\n            ],\n            {\n                refresh: 'none',\n            }\n        );\n    }\n    await msg_received_callback(last_msg, 'manual_emit');\n    toastr.info(``, '[MVU]');\n}\n\nasync function RecurVariable() {\n    const result = (await SillyTavern.callGenericPopup(\n        '<h4> required/extensible </h4> ( 10  10 , -1 )<br><strong></strong>',\n        SillyTavern.POPUP_TYPE.INPUT,\n        '-1'\n    )) as string | undefined;\n    if (!result) {\n        return;\n    }\n    let message_id = parseInt(result);\n    if (message_id === -1) {\n        message_id = getLastMessageId();\n    }\n    if (isNaN(message_id) || SillyTavern.chat[message_id] === undefined) {\n        toastr.error(`,  '${result}'`, '[MVU]');\n        return;\n    }\n\n    const fnd_message = findLastValidMessage(message_id);\n    if (fnd_message === -1) {\n        toastr.error(``, '[MVU]');\n        return;\n    }\n    //\n    const result2 = (await SillyTavern.callGenericPopup(\n        ` [${fnd_message}]`,\n        SillyTavern.POPUP_TYPE.INPUT,\n        fnd_message.toString()\n    )) as string | undefined;\n    if (!result2) {\n        return;\n    }\n    const recur_intial_message_id = parseInt(result2);\n    if (isNaN(recur_intial_message_id)) {\n        toastr.error(`,  '${result2}'`, '[MVU]');\n        return;\n    }\n\n    //\n    //\n    const recur_variable_data = klona(\n        getVariables({\n            type: 'message',\n            message_id: recur_intial_message_id,\n        })\n    );\n    if (\n        recur_variable_data === undefined ||\n        !_.has(recur_variable_data, 'stat_data') ||\n        !_.has(recur_variable_data, 'schema')\n    ) {\n        toastr.error(`,  '${result2}'`, '[MVU]');\n        return;\n    }\n    let counter = 0;\n    /**\n     *  (recur_intial_message_id, recur_end_message_id]\n     * @param recur_variable_data (MvuData)\n     * @param recur_intial_message_id id()\n     * @param message_id id()\n     */\n    for (let i = recur_intial_message_id + 1; i <= message_id; i++) {\n        const chat_message = SillyTavern.chat[i];\n        const index = i - (recur_intial_message_id + 1);\n\n        console.log(` ${index},  ${chat_message.mes}`);\n        await updateVariables(chat_message.mes, recur_variable_data);\n\n        counter++;\n        if (counter % 50 === 0) {\n            toastr.info(\n                ` (${counter} / ${message_id - recur_intial_message_id})`,\n                `[MVU]`\n            );\n        }\n    }\n\n    const updater = (data: Record<string, any>) => {\n        data.stat_data = recur_variable_data.stat_data;\n        data.display_data = recur_variable_data.display_data;\n        data.delta_data = recur_variable_data.delta_data;\n        data.initialized_lorebooks = recur_variable_data.initialized_lorebooks;\n        data.schema = recur_variable_data.schema;\n        return data;\n    };\n    await updateVariablesWith(updater, { type: 'message', message_id: message_id });\n\n    SillyTavern.saveChat().then(() =>\n        toastr.success(\n            ` ${message_id}  ${counter} `,\n            '[MVU]'\n        )\n    );\n    await setChatMessages(\n        [\n            {\n                message_id: message_id,\n            },\n        ],\n        {\n            refresh: 'affected',\n        }\n    );\n}\n\nexport const buttons: Button[] = [\n    {\n        name: '',\n        function: async () => {\n            const last_msg = getLastMessageId();\n            if (last_msg < 1) return;\n            if (SillyTavern.chat.length === 0) return;\n            await updateVariablesWith(\n                variables => {\n                    _.unset(variables, `stat_data`);\n                    _.unset(variables, `delta_data`);\n                    _.unset(variables, `display_data`);\n                    _.unset(variables, `schema`);\n                    return variables;\n                },\n                { type: 'message', message_id: last_msg }\n            );\n            //\n            await handleVariablesInMessage(getLastMessageId());\n        },\n    },\n    {\n        name: '',\n        function: async () => {\n            // 1.  GameData  InitVar \n            const latest_init_data = createEmptyGameData();\n\n            try {\n                const hasInitData = await loadInitVarData(latest_init_data);\n                if (!hasInitData) {\n                    console.error(' InitVar ');\n                    toastr.error(' InitVar ', '[MVU]', { timeOut: 3000 });\n                    return;\n                }\n            } catch (e) {\n                console.error(' InitVar :', e);\n                return;\n            }\n            await reconcileAndApplySchema(latest_init_data);\n\n            cleanUpMetadata(latest_init_data.stat_data);\n\n            // 2. \n            const message_id = getLastMessageId();\n            if (message_id < 0) {\n                console.error('');\n                toastr.error('', '[MVU]', { timeOut: 3000 });\n                return;\n            }\n\n            const latest_msg_data = await getLastValidVariable(message_id);\n\n            if (!_.has(latest_msg_data, 'stat_data')) {\n                console.error(' stat_data');\n                toastr.error(' stat_data', '[MVU]', { timeOut: 3000 });\n                return;\n            }\n\n            // 3.  latest_init_data  latest_msg_data \n            // latest_init_data  klona\n            const merged_data: Record<string, any> = { stat_data: undefined, schema: undefined };\n            merged_data.stat_data = _.merge(\n                {},\n                latest_init_data.stat_data,\n                latest_msg_data.stat_data\n            );\n            merged_data.schema = _.merge({}, latest_msg_data.schema, latest_init_data.schema);\n            merged_data.initialized_lorebooks = _.merge(\n                {},\n                latest_init_data.initialized_lorebooks,\n                latest_msg_data.initialized_lorebooks\n            );\n            merged_data.display_data = klona(merged_data.stat_data);\n            merged_data.delta_data = latest_msg_data.delta_data;\n\n            // 4-5. \n            updateDescriptions(\n                '',\n                latest_init_data.stat_data,\n                latest_msg_data.stat_data,\n                merged_data.stat_data\n            );\n\n            //\n            await reconcileAndApplySchema(merged_data as MvuData);\n\n            cleanUpMetadata(merged_data.stat_data);\n\n            // 6. \n            await replaceVariables(merged_data, { type: 'message', message_id: message_id });\n\n            // @ts-expect-error \n            await setChatMessage({}, message_id);\n\n            if (useSettingsStore().settings.) {\n                await replaceVariables(merged_data, { type: 'chat' });\n            }\n\n            console.info('InitVar');\n            toastr.success('InitVar', '[MVU]', { timeOut: 3000 });\n        },\n    },\n    {\n        name: '',\n        function: async () => {\n            const result = (await SillyTavern.callGenericPopup(\n                '<h4></h4> ( 10  10 )<br><strong></strong>',\n                SillyTavern.POPUP_TYPE.INPUT,\n                '10'\n            )) as string | undefined;\n            if (!result) {\n                return;\n            }\n            const message_id = parseInt(result);\n            if (isNaN(message_id)) {\n                toastr.error(`,  '${result}'`, '[MVU]');\n                return;\n            }\n            const chat_message = SillyTavern.chat[message_id];\n            if (chat_message === undefined) {\n                toastr.error(` '${result}'`, '[MVU]');\n                return;\n            }\n            _.range(0, chat_message.swipes?.length ?? 1).forEach(i => {\n                if (chat_message?.variables?.[i] === undefined) {\n                    return;\n                }\n                chat_message.variables[i].snapshot = true;\n            });\n            SillyTavern.saveChat().then(() =>\n                toastr.success(` ${message_id} `, '[MVU]')\n            );\n        },\n        is_legacy: true,\n    },\n    {\n        name: '',\n        function: RecurVariable,\n        is_legacy: true,\n    },\n    {\n        name: '',\n        function: EmitVariableAnalysisJob,\n    },\n    {\n        name: '',\n        function: async () => {\n            const snapshot_interval = useSettingsStore().settings.;\n            const result = (await SillyTavern.callGenericPopup(\n                `<h4></h4> ( 10  10  [${snapshot_interval}] ) <br><strong>: </strong>`,\n                SillyTavern.POPUP_TYPE.INPUT,\n                '10'\n            )) as string | undefined;\n            if (!result) {\n                return;\n            }\n            const depth = parseInt(result);\n            if (isNaN(depth)) {\n                toastr.error(\n                    `,  '${result}'`,\n                    '[MVU]'\n                );\n                return;\n            }\n            SillyTavern.chat.slice(1, -depth - 1).forEach((chat_message, index) => {\n                if (chat_message.variables === undefined) {\n                    return;\n                }\n                chat_message.variables = _.range(0, chat_message.swipes?.length ?? 1).map(i => {\n                    if (chat_message?.variables?.[i] === undefined) {\n                        return {};\n                    }\n                    if (_.get(chat_message.variables[i], 'snapshot') === true)\n                        return chat_message.variables[i];\n                    if ((index + 1) % snapshot_interval === 0) {\n                        chat_message.variables[i].snapshot = true;\n                        console.log(` [${index + 1}] `);\n                        return chat_message.variables[i];\n                    }\n                    return _.omit(\n                        chat_message.variables[i],\n                        `stat_data`,\n                        `display_data`,\n                        `delta_data`,\n                        `schema`\n                    );\n                });\n            });\n            SillyTavern.saveChat().then(() =>\n                toastr.success(\n                    `,  ${depth} `,\n                    '[MVU]'\n                )\n            );\n        },\n    },\n];\n\nexport function registerButtons() {\n    appendInexistentScriptButtons(buttons.map(b => ({ name: b.name, visible: false })));\n    buttons.forEach(b => {\n        scopedEventOn(getButtonEvent(b.name), b.function);\n    });\n}\n","import { handleVariablesInCallback, updateVariable } from '@/function';\nimport {\n    extractRecord,\n    isDuringExtraAnalysis,\n    isValueWithDescription,\n    MvuData,\n    variable_events,\n    VariableData,\n} from '@/variable_def';\nimport { loadInitVarData } from '@/variable_init';\n\ntype CommandNames = 'set' | 'insert' | 'delete' | 'add';\n\n/**\n *  parseMessage / updateVariables \n *\n *  `parseCommandValue` \n */\ntype SetCommandArgs =\n    | [path: string, newValueLiteral: string]\n    | [path: string, expectedOldValueLiteral: string, newValueLiteral: string];\n\n/**\n * `_.assign`  `_.insert` /\n */\ntype AssignCommandArgs =\n    | [path: string, valueLiteral: string]\n    | [path: string, indexOrKeyLiteral: string, valueLiteral: string];\n\n/**\n * /\n */\ntype RemoveCommandArgs = [path: string] | [path: string, indexKeyOrValueLiteral: string];\n\n/**\n * `_.add` \n */\ntype AddCommandArgs = [path: string, deltaOrToggleLiteral: string];\n\ntype CommandArgsMap = {\n    set: SetCommandArgs;\n    insert: AssignCommandArgs;\n    delete: RemoveCommandArgs;\n    add: AddCommandArgs;\n};\n\n/**\n * CommandInfo  Command \n * \n */\nexport type CommandInfo = {\n    [K in CommandNames]: {\n        type: K;\n        full_match: string;\n        args: CommandArgsMap[K];\n        reason: string;\n    };\n}[CommandNames];\n\nexport type UpdateContext = {\n    variables: MvuData;\n    message_content: string;\n};\n\nfunction createMVU() {\n    const mvu = {\n        /**\n         * \n         * \n         *\n         * @property {string} SINGLE_VARIABLE_UPDATED - 'mag_variable_updated'\n         * \n         * - : 'mag_variable_updated'\n         * - : (stat_data: Record<string, any>, path: string, oldValue: any, newValue: any) => void\n         *   - stat_data: \n         *   - path:  'player.health'  'items[0].name'\n         *   - oldValue: \n         *   - newValue: \n         * - :  setMvuVariable / _.set  \n         * - :\n         *   - \n         *   - \n         *\n         * @property {string} VARIABLE_UPDATE_STARTED - 'mag_variable_update_started'\n         * \n         * - : 'mag_variable_update_started'\n         * - : (variables: MvuData, out_is_updated: boolean) => void\n         *   - variables:  stat_datadisplay_datadelta_data \n         *   - out_is_updated: \n         * - : parseMessage  LLM \n         * - :\n         *   - \n         *   - \n         *\n         * @property {string} VARIABLE_UPDATE_ENDED - 'mag_variable_update_ended'\n         * \n         * - : 'mag_variable_update_ended'\n         * - : (variables: MvuData, out_is_updated: boolean) => void\n         *   - variables: \n         *     - variables.stat_data: \n         *     - variables.display_data: \n         *     - variables.delta_data: \n         * - : parseMessage  LLM \n         * - :\n         *   - \n         *   - \n         * @property {string} VARIABLE_INITIALIZED - 'mag_variable_initialized'\n         *  0 \n         * - : 'mag_variable_initialized'\n         * - : (variables: Record<string, any> & MvuData, swipe_id: number) => void\n         *   - variables:  [initvar]  mvu \n         *   - swipe_id:  swipe \n         * - :  0 (swipe) \n         * - :\n         *   -  stat_data \n         *\n         * @property {string} COMMAND_PARSED - 'mag_command_parsed'\n         * \n         * - : 'mag_command_parsed'\n         * - : (variables: MvuData, commands: CommandInfo[], message_content: string) => void\n         *   - variables: \n         *   - commands: \n         *   - message_content: commands\n         * - : \n         * - :\n         *   -  Command \n         *   - llm Gemini  -.  Path \n         *   -    llm  \n         *   -  message_content  JSON Patch  commands \n         * @property {string} BEFORE_MESSAGE_UPDATE - 'mag_before_message_update'\n         *  MVU \n         * - : 'mag_before_message_update'\n         * - : (context: UpdateContext) => void;\n         *   - UpdateContext: \n         *   - UpdateContext.variables: \n         *   - UpdateContext.message_content:  (****)\n         * - :  <StatusPlaceHolderImpl/>  assistant \n         * - :\n         *   -   stat_data.story_misc  summary  story_misc \n         *\n         * @example\n         * // 1.  - \n         * eventOn(Mvu.events.SINGLE_VARIABLE_UPDATED, (stat_data, path, oldValue, newValue) => {\n         *   console.log(`[] ${path}: ${oldValue} -> ${newValue}`);\n         *\n         *   // \n         *   if (path === 'player.level' && newValue > oldValue) {\n         *     const levelUp = newValue - oldValue;\n         *     // 10\n         *     const newMaxHealth = stat_data.player.maxHealth + (levelUp * 10);\n         *     Mvu.setMvuVariable(stat_data, 'player.maxHealth', newMaxHealth, {\n         *       reason: `(+${levelUp})`\n         *     });\n         *   }\n         *\n         *   // 0\n         *   if (path === 'player.health' && newValue <= 0 && oldValue > 0) {\n         *     Mvu.setMvuVariable(mvuData, 'player.status', 'dead', {\n         *       reason: '',\n         *       is_recursive: true  //  events\n         *     });\n         *   }\n         * });\n         *\n         * // 2.  - UI\n         * var value_snapshot = undefined;\n         * eventOn(Mvu.events.VARIABLE_UPDATE_STARTED, (variables, out_is_updated) => {\n         *   console.log('[] ...');\n         *\n         *   // \n         *   value_snapshot = variables.stat_data.;\n         * });\n         *\n         * // 3.  - \n         * eventOn(Mvu.events.VARIABLE_UPDATE_ENDED, (variables, out_is_updated) => {\n         *   console.log('[] :', out_is_updated);\n         *   //llm \n         *   Mvu.setMvuVariable(variables.stat_data, '', value_snapshot);\n         * });\n         *\n         */\n        events: variable_events,\n\n        /**\n         * \n         * @param message -  _.set() \n         * @param old_data -  MvuData \n         * @returns  MvuData undefined\n         * @example\n         * const newData = await Mvu.parseMessage(`\n         *   _.set('player.health', 100, 80);//\n         *   _.set('player.position', \"\", \"\");//\n         * `, currentData);\n         */\n        parseMessage: async function (\n            message: string,\n            old_data: MvuData\n        ): Promise<MvuData | undefined> {\n            const variableData: VariableData = {\n                old_variables: old_data,\n            };\n            await handleVariablesInCallback(message, variableData);\n            return variableData.new_variables;\n        },\n\n        /**\n         *  MvuData\n         * @param options - chat/message/global\n         * @returns MvuData \n         * @example\n         * const chatData = Mvu.getMvuData({ type: 'chat' });\n         * const messageData = Mvu.getMvuData({ type: 'message', message_id: 'latest' });\n         */\n        getMvuData: function (options: VariableOption): MvuData {\n            const result = getVariables(options);\n            return result as MvuData;\n        },\n\n        /**\n         *  MvuData\n         * @param mvu_data -  MvuData\n         * @param options - \n         * @example\n         * await Mvu.replaceMvuData(newData, { type: 'chat' });\n         */\n        replaceMvuData: async function (mvu_data: MvuData, options: VariableOption): Promise<void> {\n            await replaceVariables(mvu_data, options);\n        },\n\n        /**\n         *  MvuData\n         * @returns  MvuData \n         * @example\n         * const currentData = Mvu.getCurrentMvuData();\n         */\n        getCurrentMvuData: function (): MvuData {\n            const variables = getVariables({ type: 'message', message_id: getCurrentMessageId() });\n            return variables as MvuData;\n        },\n\n        /**\n         *  MvuData\n         * @param mvu_data -  MvuData\n         * @example\n         * await Mvu.replaceCurrentMvuData(updatedData);\n         */\n        replaceCurrentMvuData: async function (mvu_data: MvuData): Promise<void> {\n            await replaceVariables(mvu_data, {\n                type: 'message',\n                message_id: getCurrentMessageId(),\n            });\n        },\n\n        /**\n         * \n         * @param mvu_data -  MvuData \n         * @returns \n         * @example\n         * const success = await Mvu.reloadInitVar(mvuData);\n         */\n        reloadInitVar: async function (mvu_data: MvuData): Promise<boolean> {\n            return await loadInitVarData(mvu_data);\n        },\n\n        /**\n         * \n         * @param mvu_data -  MvuData \n         * @param path -  \"player.health\"  \"items[0]\"\n         * @param new_value - \n         * @param options - \n         * @param options.reason -  display_data \n         * @param options.is_recursive -  mag_variable_updated  false\n         * @returns \n         * @example\n         * // \n         * await Mvu.setMvuVariable(data, 'player.health', 80);\n         *\n         * // \n         * await Mvu.setMvuVariable(data, 'player.health', 80, { reason: '' });\n         *\n         * // \n         * await Mvu.setMvuVariable(data, 'player.level', 2, {\n         *   reason: '',\n         *   is_recursive: true\n         * });\n         *\n         */\n        setMvuVariable: async function (\n            mvu_data: MvuData,\n            path: string,\n            new_value: any,\n            { reason = '', is_recursive = false }: { reason?: string; is_recursive?: boolean } = {}\n        ): Promise<boolean> {\n            return await updateVariable(mvu_data.stat_data, path, new_value, reason, is_recursive);\n        },\n\n        /**\n         * \n         * @param mvu_data - MvuData \n         * @param path - \n         * @param options - \n         * @param options.category - 'stat'()/'display'/'delta'\n         * @param options.default_value - \n         * @returns  ValueWithDescription \n         * @example\n         * //  stat_data \n         * const health = Mvu.getMvuVariable(data, 'player.health');\n         *\n         * //  display_data \n         * const healthDisplay = Mvu.getMvuVariable(data, 'player.health', {\n         *   category: 'display'\n         * });\n         *\n         * // \n         * const score = Mvu.getMvuVariable(data, 'player.score', {\n         *   default_value: 0\n         * });\n         */\n        getMvuVariable: function (\n            mvu_data: MvuData,\n            path: string,\n            {\n                category = 'stat',\n                default_value = undefined,\n            }: { category?: 'stat' | 'display' | 'delta'; default_value?: any } = {}\n        ): any {\n            let data: Record<string, any>;\n            switch (category) {\n                case 'stat':\n                    data = mvu_data.stat_data;\n                    break;\n                case 'display':\n                    data = mvu_data.display_data!;\n                    break;\n                case 'delta':\n                    data = mvu_data.delta_data!;\n                    break;\n            }\n\n            const value = _.get(data, path, default_value);\n\n            /*  VWD */\n            if (isValueWithDescription(value)) {\n                return value[0];\n            }\n\n            /*  */\n            return value;\n        },\n\n        /**\n         * \n         * @param mvu_data - MvuData \n         * @param category - 'stat'/'display'/'delta'\n         * @returns \n         * @example\n         * // \n         * const allStatData = Mvu.getRecordFromMvuData(data, 'stat');\n         *\n         * // \n         * const allDisplayData = Mvu.getRecordFromMvuData(data, 'display');\n         *\n         * // \n         * const allDeltaData = Mvu.getRecordFromMvuData(data, 'delta');\n         *\n         * @note  LLM  foreach \n         */\n        getRecordFromMvuData: function (\n            mvu_data: MvuData,\n            category: 'stat' | 'display' | 'delta'\n        ): Record<string, any> {\n            return extractRecord(category, mvu_data);\n        },\n        /**\n         * @brief \n         */\n        isDuringExtraAnalysis: isDuringExtraAnalysis,\n    };\n    return mvu;\n}\n\nexport type MVU = ReturnType<typeof createMVU>;\n\nexport type Mvu = MVU;\n\nexport async function exportGlobals() {\n    const mvu = createMVU();\n    _.set(window, 'Mvu', mvu);\n    _.set(window.parent, 'Mvu', mvu);\n    await eventEmit('global_Mvu_initialized');\n}\n\nexport function unsetGlobals() {\n    updateVariablesWith(\n        variables => {\n            _.unset(variables, 'extra_analysis');\n            return variables;\n        },\n        { type: 'global' }\n    );\n    _.unset(window.parent, 'Mvu');\n}\n","import { getLastValidVariable, updateVariables } from '@/function';\nimport { useSettingsStore } from '@/settings';\n\n/**\n * generate  tool_call \n *  tool_call llm tool callauto/any\n *  tool call required\n *  mvu \n *  generate  required \n */\n\nexport const MVU_FUNCTION_NAME = 'mvu_VariableUpdate';\nconst mvu_update_call_function_name = 'mvu_updateRound';\n\n/*\n    e.g.: [\n    [\n        {\n            \"index\": 0,\n            \"id\": \"tool_0_mvu_VariableUpdate_2lJb8gNNBxCT4Gi4QDkF\",\n            \"type\": \"function\",\n            \"function\": {\n                \"name\": \"mvu_VariableUpdate\",\n                \"arguments\": \"{\\\"delta\\\":\\\"\\\\n_.set('.','19:30');//\\\\n_.set('yukkuri.yukkuri_1.fullness_level',45);\\\\n_.set('yukkuri.yukkuri_1.pickiness_level',40);\\\\n_.set('yukkuri.yukkuri_1.monologue','Q');\\\\n_.set('yukkuri.yukkuri_2.fullness_level',45);\\\\n_.set('yukkuri.yukkuri_2.pickiness_level',40);\\\\n_.set('yukkuri.yukkuri_2.monologue','');\\\\n_.set('yukkuri.yukkuri_3.fullness_level',45);\\\\n_.set('yukkuri.yukkuri_3.pickiness_level',40);\\\\n_.set('yukkuri.yukkuri_3.monologue','');\\\\n_.set('yukkuri.yukkuri_4.fullness_level',30);\\\\n_.set('yukkuri.yukkuri_4.pickiness_level',45);\\\\n_.set('yukkuri.yukkuri_4.monologue','');\\\\n_.set('yukkuri.yukkuri_5.fullness_level',30);\\\\n_.set('yukkuri.yukkuri_5.pickiness_level',45);\\\\n_.set('yukkuri.yukkuri_5.monologue','');\\\\n\\\",\\\"analysis\\\":\\\"\\\\nTime passed: 1 hour. Not a special case, so no dramatic updates.\\\\nVariables to check: ., yukkuri.yukkuri_1.fullness_level, yukkuri.yukkuri_1.pickiness_level, yukkuri.yukkuri_1.monologue, yukkuri.yukkuri_2.fullness_level, yukkuri.yukkuri_2.pickiness_level, yukkuri.yukkuri_2.monologue, yukkuri.yukkuri_3.fullness_level, yukkuri.yukkuri_3.pickiness_level, yukkuri.yukkuri_3.monologue, yukkuri.yukkuri_4.fullness_level, yukkuri.yukkuri_4.pickiness_level, yukkuri.yukkuri_4.monologue, yukkuri.yukkuri_5.fullness_level, yukkuri.yukkuri_5.pickiness_level, yukkuri.yukkuri_5.monologue\\\\n\\\\n.: Y\\\\nyukkuri.yukkuri_1.fullness_level: Y\\\\nyukkuri.yukkuri_1.pickiness_level: Y\\\\nyukkuri.yukkuri_1.monologue: Y\\\\nyukkuri.yukkuri_2.fullness_level: Y\\\\nyukkuri.yukkuri_2.pickiness_level: Y\\\\nyukkuri.yukkuri_2.monologue: Y\\\\nyukkuri.yukkuri_3.fullness_level: Y\\\\nyukkuri.yukkuri_3.pickiness_level: Y\\\\nyukkuri.yukkuri_3.monologue: Y\\\\nyukkuri.yukkuri_4.fullness_level: Y\\\\nyukkuri.yukkuri_4.pickiness_level: Y\\\\nyukkuri.yukkuri_4.monologue: Y\\\\nyukkuri.yukkuri_5.fullness_level: Y\\\\nyukkuri.yukkuri_5.pickiness_level: Y\\\\nyukkuri.yukkuri_5.monologue: Y\\\\n\\\"}\"\n            }\n        }\n    ]\n]\n */\n\n/**  */\nexport interface FunctionCallBody {\n    /**  \"mvu_VariableUpdate\" */\n    name: ToolName;\n    /** ** JSON** */\n    arguments: string;\n}\n\n/** function-calling  */\nexport interface ToolFunctionCall {\n    index: number; //  tool_call \n    id: string; // / ID\n    type: 'function'; //  function\n    function: FunctionCallBody;\n}\n\n/**  */\nexport type ToolCallBatch = ToolFunctionCall[];\n\n/**  */\nexport type ToolCallBatches = ToolCallBatch[];\n\n/**  mvu_VariableUpdate string  */\nexport type ToolName = typeof MVU_FUNCTION_NAME | (string & {});\n\nlet is_function_call_enabled: boolean = false;\n\nexport function setFunctionCallEnabled(enabled: boolean) {\n    is_function_call_enabled = enabled;\n}\n\nexport function unregisterFunction() {\n    SillyTavern.unregisterFunctionTool(MVU_FUNCTION_NAME);\n    SillyTavern.unregisterFunctionTool(mvu_update_call_function_name);\n}\n\n/*\nasync function _onStoryEndCall(_args: any): Promise<string> {\n    const variables = await getLastValidVariable(getLastMessageId());\n    const val = variables.stat_data;\n    let content = ExtraLLMRequestContent;\n    if (val !== undefined) {\n        content = content.replaceAll(\n            \"<%= YAML.stringify(getvar('stat_data'), { blockQuote: 'literal' }) _%>\",\n            YAML.stringify(val, { blockQuote: 'literal' })\n        );\n    }\n    content += `\\nuse \\`${MVUFunctionName}\\` tool to update variables.`;\n    return content;\n}\n*/\n\nasync function onVariableUpdatedCall(args: any): Promise<string> {\n    if (!args?.delta) return '';\n    let message_id = getLastMessageId();\n    let chat_message = getChatMessages(message_id).at(-1);\n    if (chat_message && chat_message.role === 'system') {\n        // mvu \n        message_id -= 1;\n        chat_message = getChatMessages(message_id).at(-1);\n    }\n    if (!chat_message) {\n        return '';\n    }\n\n    let message_content = chat_message.message;\n    const variables = await getLastValidVariable(message_id);\n    if (!_.has(variables, 'stat_data')) {\n        return '';\n    }\n\n    const has_variable_modified = await updateVariables(args.delta, variables);\n    if (has_variable_modified && useSettingsStore().settings.) {\n        await replaceVariables(variables, { type: 'chat' });\n    }\n    await replaceVariables(variables, { type: 'message', message_id: message_id });\n\n    message_content += `<UpdateVariable>\\n<Analysis>${args.analysis}</Analysis></Analysis>${args.delta}\\n</UpdateVariable>`;\n\n    if (chat_message.role !== 'user' && !message_content.includes('<StatusPlaceHolderImpl/>')) {\n        // PlaceHolder\n        await setChatMessages(\n            [\n                {\n                    message_id: message_id,\n                    message: message_content + '\\n\\n<StatusPlaceHolderImpl/>',\n                },\n            ],\n            {\n                refresh: 'affected',\n            }\n        );\n    } else {\n        // UpdateVaraible \n        await setChatMessages(\n            [\n                {\n                    message_id: message_id,\n                    message: message_content,\n                },\n            ],\n            {\n                refresh: 'affected',\n            }\n        );\n    }\n    return JSON.stringify(variables.delta_data);\n}\n\nexport function registerFunction() {\n    const { registerFunctionTool } = SillyTavern;\n    if (!registerFunctionTool) {\n        console.debug('MVU: function tools are not supported');\n        return;\n    }\n\n    const mvu_update_schema = Object.freeze({\n        $schema: 'http://json-schema.org/draft-04/schema#',\n        type: 'object',\n        additionalProperties: false,\n        properties: {\n            analysis: {\n                type: 'string',\n                minLength: 1,\n                description:\n                    'Write in ENGLISH. A compact reasoning summary that includes: (1) calculate time passed; (2) decide whether dramatic updates are allowed (special case or sufficiently long time); (3) list every variable name BEFORE actual variable analysis, without revealing their contents; (4) for each variable, judge whether it satisfies its change conditions and output only Y/N without reasons; (5) only evaluate stories inside <past_observe> block.',\n            },\n            delta: {\n                type: 'string',\n                minLength: 0,\n                description: 'variable update block',\n            },\n        },\n        required: ['delta'],\n    });\n\n    registerFunctionTool({\n        name: MVU_FUNCTION_NAME,\n        displayName: 'MVU update',\n        stealth: true,\n        description: 'use this tool to UpdateVariable.',\n        parameters: mvu_update_schema,\n        shouldRegister: () => {\n            if (!is_function_call_enabled) {\n                return false;\n            }\n            const settings = useSettingsStore().settings;\n            return settings..;\n        },\n        action: onVariableUpdatedCall,\n        formatMessage: () => '',\n    });\n\n    /* () llm \n    const mvuRoundUpdateSchema = Object.freeze({\n        $schema: 'http://json-schema.org/draft-04/schema#',\n        type: 'object',\n        additionalProperties: false,\n\n        properties: {},\n    });\n\n    registerFunctionTool({\n        name: MVUUpdateCallFunctionName,\n        displayName: 'MVU update',\n        stealth: false,\n        description:\n            '**ALWAYS** call this function to end each response. By use this tool, output the `<UpdateVariable>` block is no longer necessary;',\n        parameters: mvuRoundUpdateSchema,\n        shouldRegister: () => {\n            const settings = useSettingsStore().settings;\n            if (settings. === '') {\n                const message_id = getLastMessageId();\n                const chat_message = getChatMessages(message_id).at(-1);\n                if (!chat_message) {\n                    return false;\n                }\n\n                let message_content = chat_message.message;\n                //\n                if (message_content.indexOf(``) != -1)\n                    return false;\n                return true;\n            }\n            return false;\n        },\n        action: onStoryEndCall,\n        formatMessage: () => '',\n    });\n    */\n}\n\nexport function overrideToolRequest(generate_data: any) {\n    const settings = useSettingsStore().settings;\n    if (settings. !== '' || settings.. !== true) {\n        return;\n    }\n    if (!is_function_call_enabled) {\n        return;\n    }\n    if (generate_data.tools !== undefined && _.size(generate_data.tools) > 0) {\n        // v3 required\n        /*\n        const message_id = getLastMessageId();\n        const chat_message = getChatMessages(message_id).at(-1);\n        if (!chat_message) {\n            generate_data.tool_choice = 'auto';\n            return;\n        }\n        const function_info = _.get(chat_message, 'extra.tool_invocations');\n        if (_.isArray(function_info)) {\n            //required prompt\n            generate_data.tool_choice = 'required';\n            return;\n        }\n        */\n        generate_data.tool_choice = 'required';\n    }\n}\n","<template>\n    <div class=\"mvu-section flex-container flexFlowColumn\">\n        <div class=\"mvu-section__title\">\n            <strong><slot name=\"title\" /></strong>\n        </div>\n        <div class=\"mvu-section__content flex-container flexFlowColumn\">\n            <slot name=\"content\" />\n        </div>\n    </div>\n</template>\n\n<style scoped>\n.mvu-section {\n    border: 1px solid var(--SmartThemeBorderColor, rgba(45, 45, 45, 1));\n    border-radius: 10px;\n    padding: 0.6rem 0.75rem;\n    gap: 0.45rem;\n    background-color: rgba(0, 0, 0, 0.08);\n    background-color: color-mix(\n        in srgb,\n        var(--SmartThemeBlurTintColor, rgba(31, 31, 31, 1)) 75%,\n        transparent\n    );\n}\n\n.mvu-section__content {\n    gap: 0.5rem;\n}\n</style>\n","import { render } from \"./Section.vue?vue&type=template&id=657aff5e&scoped=true\"\nconst script = {}\n\nimport \"./Section.vue?vue&type=style&index=0&id=657aff5e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-657aff5e\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, withCtx as _withCtx, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"mvu-button-wrap\" }\nconst _hoisted_2 = [\"onClick\"]\n\nimport { buttons } from '@/button';\nimport Section from '@/panel/component/Section.vue';\nimport { useSettingsStore } from '@/settings';\nimport { computed } from 'vue';\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'Button',\n  setup(__props) {\n\nconst store = useSettingsStore();\nconst visibleButtons = computed(() =>\n    buttons.filter(button => !(button.is_legacy ?? false) || store.settings.legacy. === true)\n);\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createBlock(Section, null, {\n    title: _withCtx(() => [...(_cache[0] || (_cache[0] = [\n      _createTextVNode(\"\", -1 /* CACHED */)\n    ]))]),\n    content: _withCtx(() => [\n      _createElementVNode(\"div\", _hoisted_1, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(visibleButtons.value, (button) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: button.name,\n            class: \"menu_button menu_button_icon interactable\",\n            tabindex: \"0\",\n            role: \"button\",\n            onClick: button.function\n          }, _toDisplayString(button.name), 9 /* TEXT, PROPS */, _hoisted_2))\n        }), 128 /* KEYED_FRAGMENT */))\n      ])\n    ]),\n    _: 1 /* STABLE */\n  }))\n}\n}\n\n})","<template>\n    <Section>\n        <template #title></template>\n        <template #content>\n            <div class=\"mvu-button-wrap\">\n                <div\n                    v-for=\"button in visibleButtons\"\n                    :key=\"button.name\"\n                    class=\"menu_button menu_button_icon interactable\"\n                    tabindex=\"0\"\n                    role=\"button\"\n                    @click=\"button.function\"\n                >\n                    {{ button.name }}\n                </div>\n            </div>\n        </template>\n    </Section>\n</template>\n\n<script setup lang=\"ts\">\nimport { buttons } from '@/button';\nimport Section from '@/panel/component/Section.vue';\nimport { useSettingsStore } from '@/settings';\nimport { computed } from 'vue';\n\nconst store = useSettingsStore();\nconst visibleButtons = computed(() =>\n    buttons.filter(button => !(button.is_legacy ?? false) || store.settings.legacy. === true)\n);\n</script>\n\n<style scoped>\n.mvu-button-wrap {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 0.5rem 0.6rem;\n    align-items: center;\n}\n\n.mvu-button-wrap :deep(.menu_button) {\n    box-sizing: border-box;\n    text-align: left;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    justify-content: flex-start;\n    padding: 0.35rem 0.6rem;\n    min-height: unset;\n    height: 2.05rem;\n    line-height: 1.1;\n}\n</style>\n","import script from \"./Button.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Button.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./Button.vue?vue&type=style&index=0&id=b3b1183a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-b3b1183a\"]])\n\nexport default __exports__","import { useModel as _useModel, defineComponent as _defineComponent } from 'vue'\nimport { vModelCheckbox as _vModelCheckbox, createElementVNode as _createElementVNode, withDirectives as _withDirectives, renderSlot as _renderSlot, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"checkbox_label\" }\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'Checkbox',\n  props: {\n    \"modelValue\": { type: Boolean, ...{ required: true } },\n    \"modelModifiers\": {},\n  },\n  emits: [\"update:modelValue\"],\n  setup(__props) {\n\nconst model = _useModel<boolean>(__props, \"modelValue\");\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"label\", _hoisted_1, [\n    _withDirectives(_createElementVNode(\"input\", {\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((model).value = $event)),\n      type: \"checkbox\"\n    }, null, 512 /* NEED_PATCH */), [\n      [_vModelCheckbox, model.value]\n    ]),\n    _renderSlot(_ctx.$slots, \"default\")\n  ]))\n}\n}\n\n})","import script from \"./Checkbox.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Checkbox.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\n    <label class=\"checkbox_label\">\n        <input v-model=\"model\" type=\"checkbox\" />\n        <slot />\n    </label>\n</template>\n\n<script setup lang=\"ts\">\nconst model = defineModel<boolean>({ required: true });\n</script>\n","import { defineComponent as _defineComponent } from 'vue'\nimport { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, renderSlot as _renderSlot, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"mvu-field flex-container flexFlowColumn\" }\nconst _hoisted_2 = { class: \"mvu-field__label\" }\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'Field',\n  props: {\n    label: {}\n  },\n  setup(__props: any) {\n\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"label\", _hoisted_2, [\n      _createElementVNode(\"span\", null, _toDisplayString(__props.label), 1 /* TEXT */),\n      _renderSlot(_ctx.$slots, \"label-suffix\")\n    ]),\n    _renderSlot(_ctx.$slots, \"default\")\n  ]))\n}\n}\n\n})","<template>\n    <div class=\"mvu-field flex-container flexFlowColumn\">\n        <label class=\"mvu-field__label\">\n            <span>{{ label }}</span>\n            <slot name=\"label-suffix\" />\n        </label>\n        <slot />\n    </div>\n</template>\n\n<script setup lang=\"ts\">\ndefineProps<{ label: string }>();\n</script>\n\n<style scoped>\n.mvu-field {\n    gap: 0.25rem;\n}\n\n.mvu-field__label {\n    display: inline-flex;\n    align-items: center;\n    gap: 0.35rem;\n}\n</style>\n","import script from \"./Field.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Field.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./Field.vue?vue&type=style&index=0&id=f69a3438&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-f69a3438\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createTextVNode as _createTextVNode, unref as _unref, createElementVNode as _createElementVNode, withCtx as _withCtx, createVNode as _createVNode, vModelText as _vModelText, withDirectives as _withDirectives, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"mvu-details\" }\nconst _hoisted_2 = { class: \"mvu-details__content\" }\n\nimport Checkbox from '@/panel/component/Checkbox.vue';\nimport Field from '@/panel/component/Field.vue';\nimport Section from '@/panel/component/Section.vue';\nimport { useSettingsStore } from '@/settings';\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'Cleanup',\n  setup(__props) {\n\nconst store = useSettingsStore();\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createBlock(Section, null, {\n    title: _withCtx(() => [...(_cache[4] || (_cache[4] = [\n      _createTextVNode(\"\", -1 /* CACHED */)\n    ]))]),\n    content: _withCtx(() => [\n      _createVNode(Checkbox, {\n        modelValue: _unref(store).settings.auto_cleanup.,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_unref(store).settings.auto_cleanup.) = $event))\n      }, {\n        default: _withCtx(() => [...(_cache[5] || (_cache[5] = [\n          _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n        ]))]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"modelValue\"]),\n      _createElementVNode(\"details\", _hoisted_1, [\n        _cache[6] || (_cache[6] = _createElementVNode(\"summary\", { class: \"mvu-details__summary\" }, \"\", -1 /* CACHED */)),\n        _createElementVNode(\"div\", _hoisted_2, [\n          _createVNode(Field, {\n            id: \"mvu_snapshot_keep_interval\",\n            label: \"\"\n          }, {\n            default: _withCtx(() => [\n              _withDirectives(_createElementVNode(\"input\", {\n                id: \"mvu_snapshot_keep_interval\",\n                \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((_unref(store).settings.) = $event)),\n                type: \"number\",\n                min: \"1\",\n                step: \"1\",\n                class: \"text_pole\",\n                placeholder: \"50\"\n              }, null, 512 /* NEED_PATCH */), [\n                [\n                  _vModelText,\n                  _unref(store).settings.,\n                  void 0,\n                  { number: true }\n                ]\n              ])\n            ]),\n            _: 1 /* STABLE */\n          }),\n          _createVNode(Field, {\n            id: \"mvu_keep_recent_floors\",\n            label: \"\"\n          }, {\n            default: _withCtx(() => [\n              _withDirectives(_createElementVNode(\"input\", {\n                id: \"mvu_keep_recent_floors\",\n                \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((_unref(store).settings.auto_cleanup.) = $event)),\n                type: \"number\",\n                min: \"1\",\n                step: \"1\",\n                class: \"text_pole\",\n                placeholder: \"20\"\n              }, null, 512 /* NEED_PATCH */), [\n                [\n                  _vModelText,\n                  _unref(store).settings.auto_cleanup.,\n                  void 0,\n                  { number: true }\n                ]\n              ])\n            ]),\n            _: 1 /* STABLE */\n          }),\n          _createVNode(Field, {\n            id: \"mvu_restore_recent_floors\",\n            label: \"\"\n          }, {\n            default: _withCtx(() => [\n              _withDirectives(_createElementVNode(\"input\", {\n                id: \"mvu_restore_recent_floors\",\n                \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((_unref(store).settings.auto_cleanup.) = $event)),\n                type: \"number\",\n                min: \"1\",\n                step: \"1\",\n                class: \"text_pole\",\n                placeholder: \"10\"\n              }, null, 512 /* NEED_PATCH */), [\n                [\n                  _vModelText,\n                  _unref(store).settings.auto_cleanup.,\n                  void 0,\n                  { number: true }\n                ]\n              ])\n            ]),\n            _: 1 /* STABLE */\n          })\n        ])\n      ])\n    ]),\n    _: 1 /* STABLE */\n  }))\n}\n}\n\n})","<template>\n    <Section>\n        <template #title></template>\n        <template #content>\n            <Checkbox v-model=\"store.settings.auto_cleanup.\">\n                <span></span>\n            </Checkbox>\n\n            <details class=\"mvu-details\">\n                <summary class=\"mvu-details__summary\"></summary>\n                <div class=\"mvu-details__content\">\n                    <Field id=\"mvu_snapshot_keep_interval\" label=\"\">\n                        <input\n                            id=\"mvu_snapshot_keep_interval\"\n                            v-model.number=\"store.settings.\"\n                            type=\"number\"\n                            min=\"1\"\n                            step=\"1\"\n                            class=\"text_pole\"\n                            placeholder=\"50\"\n                        />\n                    </Field>\n\n                    <Field id=\"mvu_keep_recent_floors\" label=\"\">\n                        <input\n                            id=\"mvu_keep_recent_floors\"\n                            v-model.number=\"store.settings.auto_cleanup.\"\n                            type=\"number\"\n                            min=\"1\"\n                            step=\"1\"\n                            class=\"text_pole\"\n                            placeholder=\"20\"\n                        />\n                    </Field>\n\n                    <Field id=\"mvu_restore_recent_floors\" label=\"\">\n                        <input\n                            id=\"mvu_restore_recent_floors\"\n                            v-model.number=\"store.settings.auto_cleanup.\"\n                            type=\"number\"\n                            min=\"1\"\n                            step=\"1\"\n                            class=\"text_pole\"\n                            placeholder=\"10\"\n                        />\n                    </Field>\n                </div>\n            </details>\n        </template>\n    </Section>\n</template>\n\n<script setup lang=\"ts\">\nimport Checkbox from '@/panel/component/Checkbox.vue';\nimport Field from '@/panel/component/Field.vue';\nimport Section from '@/panel/component/Section.vue';\nimport { useSettingsStore } from '@/settings';\n\nconst store = useSettingsStore();\n</script>\n\n<style scoped>\n.mvu-details {\n    border: 1px dashed var(--SmartThemeBorderColor, rgba(45, 45, 45, 1));\n    border-radius: 10px;\n    padding: 0.5rem 0.7rem;\n    background-color: color-mix(\n        in srgb,\n        var(--SmartThemeBlurTintColor, rgba(31, 31, 31, 1)) 70%,\n        transparent\n    );\n}\n\n.mvu-details__summary {\n    cursor: pointer;\n    user-select: none;\n    font-weight: 600;\n    opacity: 0.95;\n}\n\n.mvu-details__content {\n    margin-top: 0.5rem;\n    display: flex;\n    flex-direction: column;\n    gap: 0.5rem;\n}\n</style>\n","import script from \"./Cleanup.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Cleanup.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./Cleanup.vue?vue&type=style&index=0&id=7f69e7ca&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-7f69e7ca\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nimport { showHelpPopup } from '@/util';\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'HelpIcon',\n  props: {\n    help: {}\n  },\n  setup(__props: any) {\n\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"i\", {\n    class: \"fa-solid fa-circle-question fa-sm note-link-span mvu-help-icon\",\n    role: \"button\",\n    tabindex: \"0\",\n    \"aria-label\": \"\",\n    onClick: _cache[0] || (_cache[0] = ($event: any) => (_unref(showHelpPopup)(__props.help)))\n  }))\n}\n}\n\n})","<template>\n    <i\n        class=\"fa-solid fa-circle-question fa-sm note-link-span mvu-help-icon\"\n        role=\"button\"\n        tabindex=\"0\"\n        aria-label=\"\"\n        @click=\"showHelpPopup(help)\"\n    />\n</template>\n\n<script setup lang=\"ts\">\nimport { showHelpPopup } from '@/util';\n\ndefineProps<{ help: string }>();\n</script>\n\n<style scoped>\n.mvu-help-icon {\n    cursor: pointer;\n}\n</style>\n","import script from \"./HelpIcon.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./HelpIcon.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./HelpIcon.vue?vue&type=style&index=0&id=2eeacd15&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-2eeacd15\"]])\n\nexport default __exports__","// Module\nvar code = `<p></p> `;\n// Exports\nexport default code;","import script from \"./Compatibility.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Compatibility.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createTextVNode as _createTextVNode, unref as _unref, createElementVNode as _createElementVNode, createVNode as _createVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nimport Checkbox from '@/panel/component/Checkbox.vue';\nimport HelpIcon from '@/panel/component/HelpIcon.vue';\nimport Section from '@/panel/component/Section.vue';\nimport chat_variable_help from '@/panel/help/chat_variable.md';\nimport { useSettingsStore } from '@/settings';\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'Compatibility',\n  setup(__props) {\n\nconst store = useSettingsStore();\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createBlock(Section, null, {\n    title: _withCtx(() => [...(_cache[2] || (_cache[2] = [\n      _createTextVNode(\"\", -1 /* CACHED */)\n    ]))]),\n    content: _withCtx(() => [\n      _createVNode(Checkbox, {\n        modelValue: _unref(store).settings.,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_unref(store).settings.) = $event))\n      }, {\n        default: _withCtx(() => [\n          _cache[3] || (_cache[3] = _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)),\n          _createVNode(HelpIcon, { help: _unref(chat_variable_help) }, null, 8 /* PROPS */, [\"help\"])\n        ]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"modelValue\"]),\n      _createVNode(Checkbox, {\n        modelValue: _unref(store).settings.legacy.,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((_unref(store).settings.legacy.) = $event))\n      }, {\n        default: _withCtx(() => [...(_cache[4] || (_cache[4] = [\n          _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n        ]))]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"modelValue\"])\n    ]),\n    _: 1 /* STABLE */\n  }))\n}\n}\n\n})","<template>\n    <Section>\n        <template #title></template>\n        <template #content>\n            <Checkbox v-model=\"store.settings.\">\n                <span></span>\n                <HelpIcon :help=\"chat_variable_help\" />\n            </Checkbox>\n\n            <Checkbox v-model=\"store.settings.legacy.\">\n                <span></span>\n            </Checkbox>\n        </template>\n    </Section>\n</template>\n\n<script setup lang=\"ts\">\nimport Checkbox from '@/panel/component/Checkbox.vue';\nimport HelpIcon from '@/panel/component/HelpIcon.vue';\nimport Section from '@/panel/component/Section.vue';\nimport chat_variable_help from '@/panel/help/chat_variable.md';\nimport { useSettingsStore } from '@/settings';\n\nconst store = useSettingsStore();\n</script>\n","import script from \"./Notification.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Notification.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createTextVNode as _createTextVNode, unref as _unref, createElementVNode as _createElementVNode, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nimport Checkbox from '@/panel/component/Checkbox.vue';\nimport Section from '@/panel/component/Section.vue';\nimport { useSettingsStore } from '@/settings';\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'Notification',\n  setup(__props) {\n\nconst store = useSettingsStore();\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createBlock(Section, null, {\n    title: _withCtx(() => [...(_cache[2] || (_cache[2] = [\n      _createTextVNode(\"\", -1 /* CACHED */)\n    ]))]),\n    content: _withCtx(() => [\n      _createVNode(Checkbox, {\n        modelValue: _unref(store).settings..,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_unref(store).settings..) = $event))\n      }, {\n        default: _withCtx(() => [...(_cache[3] || (_cache[3] = [\n          _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n        ]))]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"modelValue\"]),\n      _createVNode(Checkbox, {\n        modelValue: _unref(store).settings..,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((_unref(store).settings..) = $event))\n      }, {\n        default: _withCtx(() => [...(_cache[4] || (_cache[4] = [\n          _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n        ]))]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"modelValue\"])\n    ]),\n    _: 1 /* STABLE */\n  }))\n}\n}\n\n})","<template>\n    <Section>\n        <template #title></template>\n        <template #content>\n            <Checkbox v-model=\"store.settings..\">\n                <span></span>\n            </Checkbox>\n            <Checkbox v-model=\"store.settings..\">\n                <span></span>\n            </Checkbox>\n        </template>\n    </Section>\n</template>\n\n<script setup lang=\"ts\">\nimport Checkbox from '@/panel/component/Checkbox.vue';\nimport Section from '@/panel/component/Section.vue';\nimport { useSettingsStore } from '@/settings';\n\nconst store = useSettingsStore();\n</script>\n","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, vModelText as _vModelText, createElementVNode as _createElementVNode, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect } from \"vue\"\n\nconst _hoisted_1 = { class: \"mvu-model-select\" }\nconst _hoisted_2 = { class: \"mvu-model-select__row\" }\nconst _hoisted_3 = { class: \"mvu-model-select__row mvu-model-select__row--controls\" }\nconst _hoisted_4 = [\"disabled\"]\nconst _hoisted_5 = [\"value\"]\nconst _hoisted_6 = [\"value\", \"disabled\"]\n\nimport { useSettingsStore } from '@/settings';\nimport { ref, watch } from 'vue';\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'ModelSelect',\n  setup(__props) {\n\nconst store = useSettingsStore();\n\nconst loading = ref(false);\nconst models = ref<string[]>([]);\nconst selected = ref('');\n\nfunction normalizeBaseURL(api_url: string): string {\n    api_url = api_url.trim().replace(/\\/+$/, '');\n    if (!api_url) {\n        return '';\n    }\n    if (api_url.endsWith('/v1')) {\n        return api_url;\n    }\n    if (api_url.endsWith('/models')) {\n        return api_url.replace(/\\/models$/, '');\n    }\n    return `${api_url}/v1`;\n}\n\nasync function refresh() {\n    if (loading.value) {\n        return;\n    }\n\n    const base_url = normalizeBaseURL(store.settings..api);\n    if (!base_url) {\n        return;\n    }\n\n    loading.value = true;\n    try {\n        const response = await fetch('/api/backends/chat-completions/status', {\n            method: 'POST',\n            headers: SillyTavern.getRequestHeaders(),\n            body: JSON.stringify({\n                reverse_proxy: base_url,\n                custom_url: base_url,\n                proxy_password: store.settings..,\n                chat_completion_source: 'custom',\n            }),\n            cache: 'no-cache',\n        });\n\n        const json = await response.json();\n\n        models.value = _(json?.data ?? [])\n            .map((model: any) => String(model?.id ?? model?.name ?? '').trim())\n            .filter(Boolean)\n            .sort()\n            .sortedUniq()\n            .value();\n        selected.value = models.value.includes(store.settings..)\n            ? store.settings..\n            : '';\n\n        if (models.value.length === 0) {\n            toastr.warning('', '[MVU]');\n        }\n    } catch (error) {\n        toastr.error(String((error as Error)?.message ?? error), '[MVU]');\n    } finally {\n        loading.value = false;\n    }\n}\n\nwatch(\n    selected,\n    value => {\n        if (!value) return;\n        store.settings.. = value;\n    },\n    { flush: 'sync' }\n);\n\nwatch(\n    () => store.settings..,\n    value => {\n        if (!value) {\n            selected.value = '';\n            return;\n        }\n        selected.value = models.value.includes(value) ? value : '';\n    },\n    { flush: 'sync' }\n);\n\nwatch(\n    () => [store.settings..api, store.settings..] as const,\n    () => {\n        models.value = [];\n        selected.value = '';\n    }\n);\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _withDirectives(_createElementVNode(\"input\", {\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_unref(store).settings..) = $event)),\n        type: \"text\",\n        class: \"text_pole\",\n        autocomplete: \"off\"\n      }, null, 512 /* NEED_PATCH */), [\n        [_vModelText, _unref(store).settings..]\n      ])\n    ]),\n    _createElementVNode(\"div\", _hoisted_3, [\n      _withDirectives(_createElementVNode(\"select\", {\n        ref: \"select\",\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((selected).value = $event)),\n        class: \"text_pole\",\n        disabled: models.value.length === 0,\n        \"aria-label\": \"\"\n      }, [\n        _cache[2] || (_cache[2] = _createElementVNode(\"option\", { value: \"\" }, \"\", -1 /* CACHED */)),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(models.value, (model) => {\n          return (_openBlock(), _createElementBlock(\"option\", {\n            key: model,\n            value: model\n          }, _toDisplayString(model), 9 /* TEXT, PROPS */, _hoisted_5))\n        }), 128 /* KEYED_FRAGMENT */))\n      ], 8 /* PROPS */, _hoisted_4), [\n        [_vModelSelect, selected.value]\n      ]),\n      _createElementVNode(\"input\", {\n        class: \"mvu-model-select__btn menu_button menu_button_icon interactable\",\n        type: \"button\",\n        value: loading.value ? '' : '',\n        disabled: loading.value,\n        onClick: refresh\n      }, null, 8 /* PROPS */, _hoisted_6)\n    ])\n  ]))\n}\n}\n\n})","<template>\n    <div class=\"mvu-model-select\">\n        <div class=\"mvu-model-select__row\">\n            <input\n                v-model=\"store.settings..\"\n                type=\"text\"\n                class=\"text_pole\"\n                autocomplete=\"off\"\n            />\n        </div>\n\n        <div class=\"mvu-model-select__row mvu-model-select__row--controls\">\n            <select\n                ref=\"select\"\n                v-model=\"selected\"\n                class=\"text_pole\"\n                :disabled=\"models.length === 0\"\n                aria-label=\"\"\n            >\n                <option value=\"\"></option>\n                <option v-for=\"model in models\" :key=\"model\" :value=\"model\">{{ model }}</option>\n            </select>\n\n            <input\n                class=\"mvu-model-select__btn menu_button menu_button_icon interactable\"\n                type=\"button\"\n                :value=\"loading ? '' : ''\"\n                :disabled=\"loading\"\n                @click=\"refresh\"\n            />\n        </div>\n    </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { useSettingsStore } from '@/settings';\nimport { ref, watch } from 'vue';\n\nconst store = useSettingsStore();\n\nconst loading = ref(false);\nconst models = ref<string[]>([]);\nconst selected = ref('');\n\nfunction normalizeBaseURL(api_url: string): string {\n    api_url = api_url.trim().replace(/\\/+$/, '');\n    if (!api_url) {\n        return '';\n    }\n    if (api_url.endsWith('/v1')) {\n        return api_url;\n    }\n    if (api_url.endsWith('/models')) {\n        return api_url.replace(/\\/models$/, '');\n    }\n    return `${api_url}/v1`;\n}\n\nasync function refresh() {\n    if (loading.value) {\n        return;\n    }\n\n    const base_url = normalizeBaseURL(store.settings..api);\n    if (!base_url) {\n        return;\n    }\n\n    loading.value = true;\n    try {\n        const response = await fetch('/api/backends/chat-completions/status', {\n            method: 'POST',\n            headers: SillyTavern.getRequestHeaders(),\n            body: JSON.stringify({\n                reverse_proxy: base_url,\n                custom_url: base_url,\n                proxy_password: store.settings..,\n                chat_completion_source: 'custom',\n            }),\n            cache: 'no-cache',\n        });\n\n        const json = await response.json();\n\n        models.value = _(json?.data ?? [])\n            .map((model: any) => String(model?.id ?? model?.name ?? '').trim())\n            .filter(Boolean)\n            .sort()\n            .sortedUniq()\n            .value();\n        selected.value = models.value.includes(store.settings..)\n            ? store.settings..\n            : '';\n\n        if (models.value.length === 0) {\n            toastr.warning('', '[MVU]');\n        }\n    } catch (error) {\n        toastr.error(String((error as Error)?.message ?? error), '[MVU]');\n    } finally {\n        loading.value = false;\n    }\n}\n\nwatch(\n    selected,\n    value => {\n        if (!value) return;\n        store.settings.. = value;\n    },\n    { flush: 'sync' }\n);\n\nwatch(\n    () => store.settings..,\n    value => {\n        if (!value) {\n            selected.value = '';\n            return;\n        }\n        selected.value = models.value.includes(value) ? value : '';\n    },\n    { flush: 'sync' }\n);\n\nwatch(\n    () => [store.settings..api, store.settings..] as const,\n    () => {\n        models.value = [];\n        selected.value = '';\n    }\n);\n</script>\n\n<style scoped>\n.mvu-model-select {\n    display: flex;\n    flex-direction: column;\n    gap: 0.5rem;\n}\n\n.mvu-model-select__row {\n    width: 100%;\n}\n\n.mvu-model-select__row--controls {\n    display: grid;\n    grid-template-columns: 1fr auto;\n    gap: 0.5rem;\n    align-items: center;\n}\n\n.mvu-model-select__btn {\n    white-space: nowrap;\n    text-align: left;\n    padding: 0.35rem 0.6rem;\n    min-height: unset;\n    height: 2.05rem;\n    line-height: 1.1;\n}\n\n@media (max-width: 520px) {\n    .mvu-model-select__row--controls {\n        grid-template-columns: 1fr;\n    }\n}\n</style>\n","import script from \"./ModelSelect.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ModelSelect.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ModelSelect.vue?vue&type=style&index=0&id=52f29fd7&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-52f29fd7\"]])\n\nexport default __exports__","import { useModel as _useModel, mergeModels as _mergeModels, defineComponent as _defineComponent } from 'vue'\nimport { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode } from \"vue\"\n\nconst _hoisted_1 = { class: \"mvu-range-number\" }\nconst _hoisted_2 = [\"type\", \"min\", \"max\", \"step\", \"disabled\", \"value\"]\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'RangeNumber',\n  props: /*@__PURE__*/_mergeModels({\n    min: {},\n    max: {},\n    step: {},\n    disabled: { type: Boolean }\n  }, {\n    \"modelValue\": { required: true },\n    \"modelModifiers\": {},\n  }),\n  emits: [\"update:modelValue\"],\n  setup(__props: any) {\n\nconst model = _useModel<number>(__props, \"modelValue\");\nconst props = __props;\n\nfunction clamp(value: number) {\n    return _.clamp(value, props.min, props.max);\n}\n\nfunction onInput(event: Event) {\n    const target = event.target as HTMLInputElement | null;\n    const value = Number(target?.value);\n    if (Number.isFinite(value)) {\n        model.value = clamp(value);\n    }\n}\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    (_openBlock(), _createElementBlock(_Fragment, null, _renderList(['range', 'number'], (type) => {\n      return _createElementVNode(\"input\", {\n        key: type,\n        class: _normalizeClass([\n                    `mvu-range-number__${type}`,\n                    type === 'number' ? 'text_pole' : '',\n                ]),\n        type: type,\n        min: __props.min,\n        max: __props.max,\n        step: __props.step,\n        disabled: __props.disabled,\n        value: model.value,\n        onInput: onInput\n      }, null, 42 /* CLASS, PROPS, NEED_HYDRATION */, _hoisted_2)\n    }), 64 /* STABLE_FRAGMENT */))\n  ]))\n}\n}\n\n})","<template>\n    <div class=\"mvu-range-number\">\n        <template v-for=\"type in ['range', 'number']\" :key=\"type\">\n            <input\n                :class=\"[\n                    `mvu-range-number__${type}`,\n                    type === 'number' ? 'text_pole' : '',\n                ]\"\n                :type=\"type\"\n                :min=\"min\"\n                :max=\"max\"\n                :step=\"step\"\n                :disabled=\"disabled\"\n                :value=\"model\"\n                @input=\"onInput\"\n            />\n        </template>\n    </div>\n</template>\n\n<script setup lang=\"ts\">\nconst model = defineModel<number>({ required: true });\nconst props = defineProps<{\n    min: number;\n    max: number;\n    step: number;\n    disabled?: boolean;\n}>();\n\nfunction clamp(value: number) {\n    return _.clamp(value, props.min, props.max);\n}\n\nfunction onInput(event: Event) {\n    const target = event.target as HTMLInputElement | null;\n    const value = Number(target?.value);\n    if (Number.isFinite(value)) {\n        model.value = clamp(value);\n    }\n}\n</script>\n\n<style scoped>\n.mvu-range-number {\n    display: grid;\n    grid-template-columns: 1fr 7.5rem;\n    gap: 0.5rem;\n    align-items: center;\n}\n\n.mvu-range-number__range {\n    width: 100%;\n}\n\n.mvu-range-number__number {\n    text-align: left;\n    padding-top: 0.3rem;\n    padding-bottom: 0.3rem;\n    background-color: color-mix(\n        in srgb,\n        var(--SmartThemeBlurTintColor, rgba(31, 31, 31, 1)) 33%,\n        transparent\n    );\n}\n\n@media (max-width: 420px) {\n    .mvu-range-number {\n        grid-template-columns: 1fr 6.5rem;\n    }\n}\n</style>\n","import script from \"./RangeNumber.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./RangeNumber.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./RangeNumber.vue?vue&type=style&index=0&id=48562df7&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-48562df7\"]])\n\nexport default __exports__","import { useModel as _useModel, mergeModels as _mergeModels, defineComponent as _defineComponent } from 'vue'\nimport { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, withDirectives as _withDirectives } from \"vue\"\n\nconst _hoisted_1 = [\"value\"]\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'Select',\n  props: /*@__PURE__*/_mergeModels({\n    options: {}\n  }, {\n    \"modelValue\": { required: true },\n    \"modelModifiers\": {},\n  }),\n  emits: [\"update:modelValue\"],\n  setup(__props: any) {\n\nconst model = _useModel<string>(__props, \"modelValue\");\n\n\n\nreturn (_ctx: any,_cache: any) => {\n  return _withDirectives((_openBlock(), _createElementBlock(\"select\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((model).value = $event)),\n    class: \"text_pole\"\n  }, [\n    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.options, (option) => {\n      return (_openBlock(), _createElementBlock(\"option\", {\n        key: option,\n        value: option\n      }, _toDisplayString(option), 9 /* TEXT, PROPS */, _hoisted_1))\n    }), 128 /* KEYED_FRAGMENT */))\n  ], 512 /* NEED_PATCH */)), [\n    [_vModelSelect, model.value]\n  ])\n}\n}\n\n})","import script from \"./Select.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Select.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\n    <select v-model=\"model\" class=\"text_pole\">\n        <template v-for=\"option in options\" :key=\"option\">\n            <option :value=\"option\">{{ option }}</option>\n        </template>\n    </select>\n</template>\n\n<script setup lang=\"ts\">\nconst model = defineModel<string>({ required: true });\n\ndefineProps<{ options: string[] }>();\n</script>\n","// Module\nvar code = `<h1></h1> <p> <a href=\"https://stagedog.github.io/%E7%BB%9C%E7%BB%9C/%E6%95%99%E7%A8%8B/%E6%89%8B%E5%86%99mvu%E5%8F%98%E9%87%8F%E5%8D%A1/\">MVU </a></p> <p></p> <ul> <li><strong>AI</strong> AI AI </li> <li><strong></strong> AI  AI  <ul> <li> <code>[mvu_plot]</code>  AI</li> <li> <code>[mvu_update]</code>  AI</li> <li> <code>[mvu_plot]</code>  <code>[mvu_update]</code>  AI</li> </ul> </li> </ul> <p>AI MVU AI</p> <h2></h2> <p></p> <p>MVU </p> <ul> <li><strong></strong> AI  <code>{{get_message_variable::stat_data}}</code><code>&#x3C;%= getvar('stat_data') _%></code> </li> <li><strong></strong> AI <code>1</code></li> <li><strong></strong> AI  <code>&#x3C;UpdateVariable></code> </li> </ul> <p> <code>[mvu_update]</code></p> <ul> <li><code></code></li> <li><code>[mvu_update]</code></li> <li><code>[mvu_update]</code></li> </ul> <p> AI  <code>[mvu_plot]</code>  AI</p> <ul> <li><code>[mvu_plot]</code></li> </ul> <p>, .</p> `;\n// Exports\nexport default code;","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, createVNode as _createVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, Fragment as _Fragment, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  key: 0,\n  class: \"mvu-warning\"\n}\nconst _hoisted_2 = { class: \"mvu-warning__text\" }\nconst _hoisted_3 = { class: \"mvu-subtitle\" }\nconst _hoisted_4 = { class: \"mvu-field-grid\" }\nconst _hoisted_5 = { class: \"mvu-details\" }\nconst _hoisted_6 = { class: \"mvu-details__content\" }\nconst _hoisted_7 = {\n  key: 0,\n  class: \"mvu-note\"\n}\nconst _hoisted_8 = { class: \"mvu-advanced-grid\" }\nconst _hoisted_9 = [\"disabled\"]\n\nimport Checkbox from '@/panel/component/Checkbox.vue';\nimport Field from '@/panel/component/Field.vue';\nimport HelpIcon from '@/panel/component/HelpIcon.vue';\nimport ModelSelect from '@/panel/component/ModelSelect.vue';\nimport RangeNumber from '@/panel/component/RangeNumber.vue';\nimport Section from '@/panel/component/Section.vue';\nimport Select from '@/panel/component/Select.vue';\nimport auto_analyze_help from '@/panel/help/auto_analyze.md';\nimport panel_extra_mode_help from '@/panel/help/extra_mode.md';\nimport panel_method_help from '@/panel/help/update_method.md';\nimport { useSettingsStore, useTempContents } from '@/settings';\nimport { getSillyTavernVersion, getTavernHelperVersion } from '@/util';\nimport { compare } from 'compare-versions';\nimport { watch } from 'vue';\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'Update',\n  setup(__props) {\n\nconst additional_extra_configuration_supported = compare(getTavernHelperVersion(), '4.0.14', '>=');\n\nconst store = useSettingsStore();\nconst temp_contents = useTempContents().temp_contents;\n\nwatch(\n    () => store.settings.,\n    value => {\n        if (value === '' && compare(getSillyTavernVersion(), '1.13.4', '<')) {\n            toastr.error(\n                \"'' 1.13.4\",\n                \"[MVU]''\",\n                { timeOut: 5000 }\n            );\n            store.settings. = 'AI';\n        }\n    }\n);\n\nwatch(\n    () => store.settings..,\n    value => {\n        if (value === true) {\n            if (!SillyTavern.ToolManager.isToolCallingSupported()) {\n                toastr.error(\n                    \" API  () ''\",\n                    \"[MVU]''\",\n                    {\n                        timeOut: 5000,\n                    }\n                );\n            }\n            if (SillyTavern.chatCompletionSettings.function_calling === false) {\n                toastr.error(\"''\", \"[MVU]''\", {\n                    timeOut: 5000,\n                });\n            }\n            store.settings.. = true;\n        }\n    }\n);\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createBlock(Section, null, {\n    title: _withCtx(() => [\n      _cache[12] || (_cache[12] = _createTextVNode(\"  \", -1 /* CACHED */)),\n      _createVNode(HelpIcon, { help: _unref(panel_method_help) }, null, 8 /* PROPS */, [\"help\"])\n    ]),\n    content: _withCtx(() => [\n      _createVNode(Field, { label: \"\" }, {\n        default: _withCtx(() => [\n          _createVNode(Select, {\n            modelValue: _unref(store).settings.,\n            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_unref(store).settings.) = $event)),\n            options: ['AI', '']\n          }, null, 8 /* PROPS */, [\"modelValue\"])\n        ]),\n        _: 1 /* STABLE */\n      }),\n      (\n                    _unref(temp_contents).unsupported_warnings !== '' &&\n                    _unref(store).settings. === ''\n                )\n        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n            _cache[13] || (_cache[13] = _createElementVNode(\"span\", { class: \"mvu-warning__icon\" }, \"\", -1 /* CACHED */)),\n            _createElementVNode(\"span\", _hoisted_2, \"  [\" + _toDisplayString(_unref(temp_contents).unsupported_warnings) + \"]  [mvu_update]  \", 1 /* TEXT */)\n          ]))\n        : _createCommentVNode(\"v-if\", true),\n      (_unref(store).settings. === '')\n        ? (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n            _createElementVNode(\"div\", _hoisted_3, [\n              _cache[14] || (_cache[14] = _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)),\n              _createVNode(HelpIcon, { help: _unref(panel_extra_mode_help) }, null, 8 /* PROPS */, [\"help\"])\n            ]),\n            _createVNode(Checkbox, {\n              modelValue: _unref(store).settings..,\n              \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((_unref(store).settings..) = $event))\n            }, {\n              default: _withCtx(() => [...(_cache[15] || (_cache[15] = [\n                _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n              ]))]),\n              _: 1 /* STABLE */\n            }, 8 /* PROPS */, [\"modelValue\"]),\n            _createVNode(Checkbox, {\n              modelValue: _unref(store).settings..,\n              \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((_unref(store).settings..) = $event))\n            }, {\n              default: _withCtx(() => [...(_cache[16] || (_cache[16] = [\n                _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n              ]))]),\n              _: 1 /* STABLE */\n            }, 8 /* PROPS */, [\"modelValue\"]),\n            _createVNode(Checkbox, {\n              modelValue: _unref(store).settings.,\n              \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((_unref(store).settings.) = $event))\n            }, {\n              default: _withCtx(() => [\n                _cache[17] || (_cache[17] = _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)),\n                _createVNode(HelpIcon, { help: _unref(auto_analyze_help) }, null, 8 /* PROPS */, [\"help\"])\n              ]),\n              _: 1 /* STABLE */\n            }, 8 /* PROPS */, [\"modelValue\"]),\n            _createVNode(Field, { label: \"\" }, {\n              default: _withCtx(() => [\n                _createVNode(Select, {\n                  modelValue: _unref(store).settings..,\n                  \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((_unref(store).settings..) = $event)),\n                  options: ['', '']\n                }, null, 8 /* PROPS */, [\"modelValue\"])\n              ]),\n              _: 1 /* STABLE */\n            }),\n            (_unref(store).settings.. === '')\n              ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                  _cache[19] || (_cache[19] = _createElementVNode(\"div\", { class: \"mvu-subtitle\" }, \" API\", -1 /* CACHED */)),\n                  _createElementVNode(\"div\", _hoisted_4, [\n                    _createVNode(Field, { label: \"API \" }, {\n                      default: _withCtx(() => [\n                        _withDirectives(_createElementVNode(\"input\", {\n                          \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((_unref(store).settings..api) = $event)),\n                          type: \"text\",\n                          class: \"text_pole\",\n                          placeholder: \"http://localhost:1234/v1\"\n                        }, null, 512 /* NEED_PATCH */), [\n                          [_vModelText, _unref(store).settings..api]\n                        ])\n                      ]),\n                      _: 1 /* STABLE */\n                    }),\n                    _createVNode(Field, { label: \"API \" }, {\n                      default: _withCtx(() => [\n                        _withDirectives(_createElementVNode(\"input\", {\n                          \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event: any) => ((_unref(store).settings..) = $event)),\n                          type: \"password\",\n                          class: \"text_pole\",\n                          placeholder: \"\"\n                        }, null, 512 /* NEED_PATCH */), [\n                          [_vModelText, _unref(store).settings..]\n                        ])\n                      ]),\n                      _: 1 /* STABLE */\n                    }),\n                    _createVNode(Field, { label: \"\" }, {\n                      default: _withCtx(() => [\n                        _createVNode(ModelSelect)\n                      ]),\n                      _: 1 /* STABLE */\n                    })\n                  ]),\n                  _createElementVNode(\"details\", _hoisted_5, [\n                    _cache[18] || (_cache[18] = _createElementVNode(\"summary\", { class: \"mvu-details__summary\" }, \"\", -1 /* CACHED */)),\n                    _createElementVNode(\"div\", _hoisted_6, [\n                      (!_unref(additional_extra_configuration_supported))\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, \"  \"))\n                        : _createCommentVNode(\"v-if\", true),\n                      _createElementVNode(\"div\", _hoisted_8, [\n                        _createVNode(Field, { label: \" token\" }, {\n                          default: _withCtx(() => [\n                            _withDirectives(_createElementVNode(\"input\", {\n                              \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event: any) => ((\n                                            _unref(store).settings..token\n                                        ) = $event)),\n                              disabled: !_unref(additional_extra_configuration_supported),\n                              type: \"number\",\n                              class: \"text_pole\",\n                              min: \"0\",\n                              step: \"128\",\n                              placeholder: \"4096\"\n                            }, null, 8 /* PROPS */, _hoisted_9), [\n                              [\n                                _vModelText,\n                                \n                                            _unref(store).settings..token\n                                        ,\n                                void 0,\n                                { number: true }\n                              ]\n                            ])\n                          ]),\n                          _: 1 /* STABLE */\n                        }),\n                        _createVNode(Field, { label: \"\" }, {\n                          default: _withCtx(() => [\n                            _createVNode(RangeNumber, {\n                              modelValue: _unref(store).settings..,\n                              \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event: any) => ((_unref(store).settings..) = $event)),\n                              disabled: !_unref(additional_extra_configuration_supported),\n                              min: 0,\n                              max: 2,\n                              step: 0.01\n                            }, null, 8 /* PROPS */, [\"modelValue\", \"disabled\"])\n                          ]),\n                          _: 1 /* STABLE */\n                        }),\n                        _createVNode(Field, { label: \"Top P\" }, {\n                          default: _withCtx(() => [\n                            _createVNode(RangeNumber, {\n                              modelValue: _unref(store).settings..top_p,\n                              \"onUpdate:modelValue\": _cache[9] || (_cache[9] = ($event: any) => ((_unref(store).settings..top_p) = $event)),\n                              disabled: !_unref(additional_extra_configuration_supported),\n                              min: 0,\n                              max: 1,\n                              step: 0.01\n                            }, null, 8 /* PROPS */, [\"modelValue\", \"disabled\"])\n                          ]),\n                          _: 1 /* STABLE */\n                        }),\n                        _createVNode(Field, { label: \"\" }, {\n                          default: _withCtx(() => [\n                            _createVNode(RangeNumber, {\n                              modelValue: _unref(store).settings..,\n                              \"onUpdate:modelValue\": _cache[10] || (_cache[10] = ($event: any) => ((_unref(store).settings..) = $event)),\n                              disabled: !_unref(additional_extra_configuration_supported),\n                              min: -2,\n                              max: 2,\n                              step: 0.01\n                            }, null, 8 /* PROPS */, [\"modelValue\", \"disabled\"])\n                          ]),\n                          _: 1 /* STABLE */\n                        }),\n                        _createVNode(Field, { label: \"\" }, {\n                          default: _withCtx(() => [\n                            _createVNode(RangeNumber, {\n                              modelValue: _unref(store).settings..,\n                              \"onUpdate:modelValue\": _cache[11] || (_cache[11] = ($event: any) => ((_unref(store).settings..) = $event)),\n                              disabled: !_unref(additional_extra_configuration_supported),\n                              min: -2,\n                              max: 2,\n                              step: 0.01\n                            }, null, 8 /* PROPS */, [\"modelValue\", \"disabled\"])\n                          ]),\n                          _: 1 /* STABLE */\n                        })\n                      ])\n                    ])\n                  ])\n                ], 64 /* STABLE_FRAGMENT */))\n              : _createCommentVNode(\"v-if\", true)\n          ], 64 /* STABLE_FRAGMENT */))\n        : _createCommentVNode(\"v-if\", true)\n    ]),\n    _: 1 /* STABLE */\n  }))\n}\n}\n\n})","<template>\n    <Section>\n        <template #title>\n            \n            <HelpIcon :help=\"panel_method_help\" />\n        </template>\n        <template #content>\n            <Field label=\"\">\n                <Select v-model=\"store.settings.\" :options=\"['AI', '']\" />\n            </Field>\n\n            <template\n                v-if=\"\n                    temp_contents.unsupported_warnings !== '' &&\n                    store.settings. === ''\n                \"\n            >\n                <div class=\"mvu-warning\">\n                    <span class=\"mvu-warning__icon\"></span>\n                    <span class=\"mvu-warning__text\">\n                         [{{ temp_contents.unsupported_warnings }}]\n                         [mvu_update]\n                        \n                    </span>\n                </div>\n            </template>\n\n            <template v-if=\"store.settings. === ''\">\n                <div class=\"mvu-subtitle\">\n                    <span></span>\n                    <HelpIcon :help=\"panel_extra_mode_help\" />\n                </div>\n\n                <Checkbox v-model=\"store.settings..\">\n                    <span></span>\n                </Checkbox>\n\n                <Checkbox v-model=\"store.settings..\">\n                    <span></span>\n                </Checkbox>\n\n                <Checkbox v-model=\"store.settings.\">\n                    <span></span>\n                    <HelpIcon :help=\"auto_analyze_help\" />\n                </Checkbox>\n\n                <Field label=\"\">\n                    <Select\n                        v-model=\"store.settings..\"\n                        :options=\"['', '']\"\n                    />\n                </Field>\n\n                <template v-if=\"store.settings.. === ''\">\n                    <div class=\"mvu-subtitle\"> API</div>\n\n                    <div class=\"mvu-field-grid\">\n                        <Field label=\"API \">\n                            <input\n                                v-model=\"store.settings..api\"\n                                type=\"text\"\n                                class=\"text_pole\"\n                                placeholder=\"http://localhost:1234/v1\"\n                            />\n                        </Field>\n\n                        <Field label=\"API \">\n                            <input\n                                v-model=\"store.settings..\"\n                                type=\"password\"\n                                class=\"text_pole\"\n                                placeholder=\"\"\n                            />\n                        </Field>\n\n                        <Field label=\"\">\n                            <ModelSelect />\n                        </Field>\n                    </div>\n\n                    <details class=\"mvu-details\">\n                        <summary class=\"mvu-details__summary\"></summary>\n                        <div class=\"mvu-details__content\">\n                            <div v-if=\"!additional_extra_configuration_supported\" class=\"mvu-note\">\n                                \n                            </div>\n\n                            <div class=\"mvu-advanced-grid\">\n                                <Field label=\" token\">\n                                    <input\n                                        v-model.number=\"\n                                            store.settings..token\n                                        \"\n                                        :disabled=\"!additional_extra_configuration_supported\"\n                                        type=\"number\"\n                                        class=\"text_pole\"\n                                        min=\"0\"\n                                        step=\"128\"\n                                        placeholder=\"4096\"\n                                    />\n                                </Field>\n\n                                <Field label=\"\">\n                                    <RangeNumber\n                                        v-model=\"store.settings..\"\n                                        :disabled=\"!additional_extra_configuration_supported\"\n                                        :min=\"0\"\n                                        :max=\"2\"\n                                        :step=\"0.01\"\n                                    />\n                                </Field>\n\n                                <Field label=\"Top P\">\n                                    <RangeNumber\n                                        v-model=\"store.settings..top_p\"\n                                        :disabled=\"!additional_extra_configuration_supported\"\n                                        :min=\"0\"\n                                        :max=\"1\"\n                                        :step=\"0.01\"\n                                    />\n                                </Field>\n\n                                <Field label=\"\">\n                                    <RangeNumber\n                                        v-model=\"store.settings..\"\n                                        :disabled=\"!additional_extra_configuration_supported\"\n                                        :min=\"-2\"\n                                        :max=\"2\"\n                                        :step=\"0.01\"\n                                    />\n                                </Field>\n\n                                <Field label=\"\">\n                                    <RangeNumber\n                                        v-model=\"store.settings..\"\n                                        :disabled=\"!additional_extra_configuration_supported\"\n                                        :min=\"-2\"\n                                        :max=\"2\"\n                                        :step=\"0.01\"\n                                    />\n                                </Field>\n                            </div>\n                        </div>\n                    </details>\n                </template>\n            </template>\n        </template>\n    </Section>\n</template>\n\n<script setup lang=\"ts\">\nimport Checkbox from '@/panel/component/Checkbox.vue';\nimport Field from '@/panel/component/Field.vue';\nimport HelpIcon from '@/panel/component/HelpIcon.vue';\nimport ModelSelect from '@/panel/component/ModelSelect.vue';\nimport RangeNumber from '@/panel/component/RangeNumber.vue';\nimport Section from '@/panel/component/Section.vue';\nimport Select from '@/panel/component/Select.vue';\nimport auto_analyze_help from '@/panel/help/auto_analyze.md';\nimport panel_extra_mode_help from '@/panel/help/extra_mode.md';\nimport panel_method_help from '@/panel/help/update_method.md';\nimport { useSettingsStore, useTempContents } from '@/settings';\nimport { getSillyTavernVersion, getTavernHelperVersion } from '@/util';\nimport { compare } from 'compare-versions';\nimport { watch } from 'vue';\n\nconst additional_extra_configuration_supported = compare(getTavernHelperVersion(), '4.0.14', '>=');\n\nconst store = useSettingsStore();\nconst temp_contents = useTempContents().temp_contents;\n\nwatch(\n    () => store.settings.,\n    value => {\n        if (value === '' && compare(getSillyTavernVersion(), '1.13.4', '<')) {\n            toastr.error(\n                \"'' 1.13.4\",\n                \"[MVU]''\",\n                { timeOut: 5000 }\n            );\n            store.settings. = 'AI';\n        }\n    }\n);\n\nwatch(\n    () => store.settings..,\n    value => {\n        if (value === true) {\n            if (!SillyTavern.ToolManager.isToolCallingSupported()) {\n                toastr.error(\n                    \" API  () ''\",\n                    \"[MVU]''\",\n                    {\n                        timeOut: 5000,\n                    }\n                );\n            }\n            if (SillyTavern.chatCompletionSettings.function_calling === false) {\n                toastr.error(\"''\", \"[MVU]''\", {\n                    timeOut: 5000,\n                });\n            }\n            store.settings.. = true;\n        }\n    }\n);\n</script>\n\n<style scoped>\n.mvu-subtitle {\n    display: flex;\n    align-items: center;\n    gap: 0.35rem;\n    font-weight: 600;\n    opacity: 0.9;\n}\n\n.mvu-field-grid {\n    display: flex;\n    flex-direction: column;\n    gap: 0.5rem;\n}\n\n.mvu-details {\n    border: 1px dashed var(--SmartThemeBorderColor, rgba(45, 45, 45, 1));\n    border-radius: 10px;\n    padding: 0.5rem 0.7rem;\n    background-color: rgba(0, 0, 0, 0.06);\n    background-color: color-mix(\n        in srgb,\n        var(--SmartThemeBlurTintColor, rgba(31, 31, 31, 1)) 70%,\n        transparent\n    );\n}\n\n.mvu-details__summary {\n    cursor: pointer;\n    user-select: none;\n    font-weight: 600;\n    opacity: 0.95;\n}\n\n.mvu-details__content {\n    margin-top: 0.5rem;\n    display: flex;\n    flex-direction: column;\n    gap: 0.5rem;\n}\n\n.mvu-note {\n    opacity: 0.85;\n    color: var(--SmartThemeEmColor, inherit);\n}\n\n.mvu-warning {\n    margin-top: 0.5rem;\n    padding: 0.55rem 0.7rem;\n    border: 1px solid color-mix(in srgb, var(--SmartThemeEmColor, #d39e00) 35%, transparent);\n    border-radius: 10px;\n    background-color: color-mix(in srgb, var(--SmartThemeEmColor, #fff3cd) 15%, transparent);\n    color: var(--SmartThemeEmColor, #856404);\n    display: grid;\n    grid-template-columns: auto 1fr;\n    column-gap: 0.5rem;\n    align-items: center;\n}\n\n.mvu-warning__icon {\n    line-height: 1;\n}\n\n.mvu-warning__text {\n    word-break: break-word;\n}\n\n.mvu-advanced-grid {\n    display: flex;\n    flex-direction: column;\n    gap: 0.6rem;\n}\n\n@media (max-width: 420px) {\n    .mvu-option-grid {\n        grid-template-columns: 1fr;\n    }\n}\n</style>\n","// Module\nvar code = `<h1></h1> <ul> <li> <p></p> <ul> <li>; </li> <li></li> </ul> </li> <li> <p></p> <ul> <li>; </li> <li></li> </ul> </li> </ul> <h2></h2> <p> AI  AI </p> <p> SFW <code></code>;  NSFW <code></code></p> <p><code></code>:</p> <ul> <li>MVU <code></code> <code>required</code></li> <li>//</li> <li> Claude 4+Gemini 2.5 ProDeepseek V3/V3.1 (); </li> </ul> `;\n// Exports\nexport default code;","// Module\nvar code = `<p> LLM   <code></code> </p> <p> <code></code>  <code>&#x3C;StatusPlaceHolderImpl/></code> </p> `;\n// Exports\nexport default code;","import script from \"./Update.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Update.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./Update.vue?vue&type=style&index=0&id=4cb38b1c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-4cb38b1c\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"inline-drawer\" }\nconst _hoisted_2 = { class: \"inline-drawer-content\" }\n\nimport Button from '@/panel/Button.vue';\nimport Cleanup from '@/panel/Cleanup.vue';\nimport Compatibility from '@/panel/Compatibility.vue';\nimport Notification from '@/panel/Notification.vue';\nimport Update from '@/panel/Update.vue';\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'Panel',\n  setup(__props) {\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _cache[0] || (_cache[0] = _createElementVNode(\"div\", { class: \"inline-drawer-toggle inline-drawer-header\" }, [\n      _createElementVNode(\"b\", null, \"MVU \"),\n      _createElementVNode(\"div\", { class: \"inline-drawer-icon fa-solid fa-circle-chevron-down down\" })\n    ], -1 /* CACHED */)),\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createVNode(Notification),\n      _createVNode(Update),\n      _createVNode(Button),\n      _createVNode(Cleanup),\n      _createVNode(Compatibility)\n    ])\n  ]))\n}\n}\n\n})","<template>\n    <div class=\"inline-drawer\">\n        <div class=\"inline-drawer-toggle inline-drawer-header\">\n            <b>MVU </b>\n            <div class=\"inline-drawer-icon fa-solid fa-circle-chevron-down down\"></div>\n        </div>\n\n        <div class=\"inline-drawer-content\">\n            <Notification />\n            <Update />\n            <Button />\n            <Cleanup />\n            <Compatibility />\n        </div>\n    </div>\n</template>\n\n<script setup lang=\"ts\">\nimport Button from '@/panel/Button.vue';\nimport Cleanup from '@/panel/Cleanup.vue';\nimport Compatibility from '@/panel/Compatibility.vue';\nimport Notification from '@/panel/Notification.vue';\nimport Update from '@/panel/Update.vue';\n</script>\n\n<style scoped>\n.inline-drawer-content {\n    flex-direction: column;\n    gap: 0.75rem;\n    padding-top: 0.5rem;\n}\n</style>\n","import script from \"./Panel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Panel.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./Panel.vue?vue&type=style&index=0&id=40549470&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-40549470\"]])\n\nexport default __exports__","import { registerButtons, SetReceivedCallbackFn } from '@/button';\nimport { exportGlobals, unsetGlobals } from '@/export_globals';\nimport {\n    cleanupVariablesInMessages,\n    handleVariablesInCallback,\n    handleVariablesInMessage,\n    updateVariable,\n    updateVariables,\n} from '@/function';\nimport {\n    MVU_FUNCTION_NAME,\n    overrideToolRequest,\n    registerFunction,\n    setFunctionCallEnabled,\n    ToolCallBatches,\n    unregisterFunction,\n} from '@/function_call';\nimport { showNotifications } from '@/notifications';\nimport { initPanel } from '@/panel';\nimport {\n    getIsExtraModelSupported,\n    handlePromptFilter,\n    setIsExtraModelSupported,\n} from '@/prompt_filter';\nimport { useSettingsStore, useTempContents } from '@/settings';\nimport {\n    clearScopedEvent,\n    findLastValidMessage,\n    getSillyTavernVersion,\n    getTavernHelperVersion,\n    initSillyTavernVersion,\n    initTavernHelperVersion,\n    is_jest_environment,\n    isFunctionCallingSupported,\n    parseString,\n    scopedEventOn,\n} from '@/util';\nimport {\n    exported_events,\n    ExtraLLMRequestContent,\n    isDuringExtraAnalysis,\n    MvuData,\n    setDuringExtraAnalysis,\n} from '@/variable_def';\nimport { initCheck } from '@/variable_init';\nimport { compare } from 'compare-versions';\nimport { klona } from 'klona';\n\nlet vanilla_parseToolCalls: any = null;\n\nasync function updateGenState() {\n    updateVariablesWith(\n        variables => {\n            _.set(variables, 'extra_analysis', isDuringExtraAnalysis());\n            return variables;\n        },\n        { type: 'global' }\n    );\n}\n\nasync function onMessageReceived(message_id: number, extra_param?: any) {\n    const current_chatmsg = getChatMessages(message_id).at(-1);\n    if (!current_chatmsg) {\n        return;\n    }\n\n    const message_content = current_chatmsg.message;\n    if (message_content.length < 5) {\n        //MESSAGE_RECEIVED  \"...\" \n        return;\n    }\n\n    const settings = useSettingsStore().settings;\n    setDuringExtraAnalysis(false);\n\n    const extra_model_supported = getIsExtraModelSupported();\n    if (\n        settings. === 'AI' ||\n        (settings.. && !isFunctionCallingSupported()) || //\n        extra_model_supported === false // ,  \"AI\"\n    ) {\n        await handleVariablesInMessage(message_id);\n        return;\n    }\n\n    if (SillyTavern.chat.length <= 1) {\n        console.log('[MVU] ');\n        return;\n    }\n\n    if (settings. === false && extra_param !== 'manual_emit') {\n        console.log('[MVU] ');\n        return;\n    }\n\n    setDuringExtraAnalysis(true);\n    let user_input = ExtraLLMRequestContent;\n    if (settings..) {\n        user_input += `\\n use \\`mvu_VariableUpdate\\` tool to update variables.`;\n    }\n    const generateFn = settings.. === false ? generateRaw : generate;\n\n    let result: string = '';\n    let retries = 0;\n\n    try {\n        updateVariablesWith(\n            variables => {\n                _.set(variables, 'extra_analysis', true);\n                return variables;\n            },\n            { type: 'global' }\n        );\n        setFunctionCallEnabled(true);\n        // {{lastUserMessage}}\n        console.log('Before RegisterMacro');\n        if (compare(getSillyTavernVersion(), '1.13.4', '<=')) {\n            //https://github.com/SillyTavern/SillyTavern/pull/4614\n            //1s dry_run\n            await new Promise(res => setTimeout(res, 1000));\n        }\n        SillyTavern.registerMacro('lastUserMessage', () => {\n            return user_input;\n        });\n        console.log('After RegisterMacro');\n        const promptInjects: InjectionPrompt[] = [\n            {\n                id: '817114514',\n                position: 'in_chat',\n                depth: 0,\n                should_scan: false,\n                role: 'system',\n                content: user_input,\n            },\n            {\n                id: '817114515',\n                position: 'in_chat',\n                depth: 2,\n                should_scan: false,\n                role: 'assistant',\n                content: '<past_observe>',\n            },\n            {\n                id: '817114516',\n                position: 'in_chat',\n                depth: 1,\n                should_scan: false,\n                role: 'assistant',\n                content: '</past_observe>',\n            },\n        ]; // user_input \n\n        let collected_tool_calls: ToolCallBatches | undefined = undefined;\n        if (settings..) {\n            vanilla_parseToolCalls = SillyTavern.ToolManager.parseToolCalls;\n            const vanilla_bound = SillyTavern.ToolManager.parseToolCalls.bind(\n                SillyTavern.ToolManager\n            );\n            SillyTavern.ToolManager.parseToolCalls = (tool_calls: any, parsed: any) => {\n                vanilla_bound(tool_calls, parsed);\n                collected_tool_calls = tool_calls;\n            };\n        }\n\n        for (retries = 0; retries < 3; retries++) {\n            if (settings..) {\n                toastr.info(\n                    `[MVU]...${retries === 0 ? '' : `  ${retries}/3`}`\n                );\n            }\n            collected_tool_calls = undefined;\n            const unset_if_equal = (value: number, expected: number) =>\n                compare(getTavernHelperVersion(), '4.3.9', '>=') && value === expected\n                    ? 'unset'\n                    : value;\n            const current_result = await generateFn(\n                settings.. === ''\n                    ? {\n                          user_input: ` <must> `,\n                          injects: promptInjects,\n                          max_chat_history: 2,\n                          should_stream: settings..,\n                      }\n                    : {\n                          user_input: ` <must> `,\n                          custom_api: {\n                              apiurl: settings..api,\n                              key: settings..,\n                              model: settings..,\n                              max_tokens: settings..token,\n                              temperature: unset_if_equal(settings.., 1),\n                              frequency_penalty: unset_if_equal(\n                                  settings..,\n                                  0\n                              ),\n                              presence_penalty: unset_if_equal(\n                                  settings..,\n                                  0\n                              ),\n                              top_p: unset_if_equal(settings..top_p, 1),\n                          },\n                          injects: promptInjects,\n                          max_chat_history: 2,\n                          should_stream: settings..,\n                      }\n            );\n            if (collected_tool_calls !== undefined) {\n                const content = _.get(collected_tool_calls as ToolCallBatches, '[0]');\n                if (content) {\n                    const mvu_function_call = _(content).findLast(\n                        fn => fn.function.name === MVU_FUNCTION_NAME\n                    );\n                    if (mvu_function_call) {\n                        const mvu_function_call_content = _.get(\n                            mvu_function_call,\n                            'function.arguments'\n                        );\n                        if (mvu_function_call_content) {\n                            try {\n                                const mvu_function_call_json =\n                                    JSON.parse(mvu_function_call_content);\n                                if (\n                                    mvu_function_call_json.delta &&\n                                    mvu_function_call_json.delta.length > 5\n                                ) {\n                                    result += `<UpdateVariable>\\n`;\n                                    result += `<Analyze>\\n${mvu_function_call_json.analysis}\\n</Analyze>\\n`;\n                                    try {\n                                        parseString(\n                                            mvu_function_call_json.delta.replaceAll(/```.*/gm, '')\n                                        );\n                                        result += `<JSONPatch>${mvu_function_call_json.delta}</JSONPatch>\\n`;\n                                    } catch (error) {\n                                        result += `${mvu_function_call_json.delta}\\n`;\n                                    }\n                                    result += `</UpdateVariable>`;\n                                    break;\n                                }\n                            } catch (e) {\n                                console.log(\n                                    `failed to parse function call content,retry: ${mvu_function_call_content}: ${e}`\n                                );\n                            }\n                        }\n                    }\n                }\n            }\n            console.log(`Vanilla Response: ${current_result}`);\n\n            const tag = _([\n                ...current_result.matchAll(/<(update(?:variable)?|variableupdate)>/gi),\n            ]).last()?.[1];\n            if (!tag) {\n                continue;\n            }\n            const start_index = current_result.lastIndexOf(`<${tag}>`);\n            if (start_index === -1) {\n                continue;\n            }\n            const end_index = current_result.indexOf(`</${tag}>`, start_index);\n            const update_block = current_result.slice(\n                start_index + 2 + tag.length,\n                end_index === -1 ? undefined : end_index\n            );\n            if (update_block) {\n                const fn_call_match =\n                    /_\\.(?:set|insert|assign|remove|unset|delete|add)\\s*\\([\\s\\S]*?\\)\\s*;/.test(\n                        update_block\n                    );\n                const json_patch_match = /json_?patch/i.test(update_block);\n                if (fn_call_match || json_patch_match) {\n                    result = `<UpdateVariable>${update_block}</UpdateVariable>`;\n                    break;\n                }\n            }\n        }\n    } catch (e) {\n        console.error(`: ${e}`);\n        await handleVariablesInMessage(message_id);\n        return;\n    } finally {\n        if (vanilla_parseToolCalls !== null) {\n            SillyTavern.ToolManager.parseToolCalls = vanilla_parseToolCalls;\n            vanilla_parseToolCalls = null;\n        }\n        SillyTavern.unregisterMacro('lastUserMessage');\n        updateVariablesWith(\n            variables => {\n                _.set(variables, 'extra_analysis', false);\n                return variables;\n            },\n            { type: 'global' }\n        );\n        setFunctionCallEnabled(false);\n        setDuringExtraAnalysis(false);\n        // generate  false\n        setIsExtraModelSupported(true);\n    }\n\n    if (result !== '') {\n        // QUESTION: ,  tool calling ?\n        const chat_message = getChatMessages(message_id);\n\n        await setChatMessages(\n            [\n                {\n                    message_id,\n                    message: chat_message[0].message + result,\n                },\n            ],\n            {\n                refresh: 'none',\n            }\n        );\n    } else {\n        toastr.error('/', '[MVU]');\n    }\n    await handleVariablesInMessage(message_id);\n}\nasync function removeChatVariables() {\n    updateVariablesWith(\n        variables => {\n            _.unset(variables, 'initialized_lorebooks');\n            _.unset(variables, 'stat_data');\n            _.unset(variables, 'schema');\n            _.unset(variables, 'display_data');\n            _.unset(variables, 'delta_data');\n            return variables;\n        },\n        { type: 'chat' }\n    );\n}\nasync function initialize() {\n    if (compare(getTavernHelperVersion(), '3.4.17', '<')) {\n        toastr.warning(\n            ', ,  3.4.17 ',\n            '[MVU]'\n        );\n    }\n\n    const store = useSettingsStore();\n\n    const temp_contents = useTempContents().temp_contents;\n    temp_contents.unsupported_warnings = '';\n\n    registerButtons();\n\n    if (store.settings. === false) {\n        await removeChatVariables();\n    }\n\n    const { ,  } = store.settings.auto_cleanup;\n    // , \n    if (\n         &&\n        SillyTavern.chat.length >  + 5 &&\n        _.has(SillyTavern.chat, [1, 'variables', 0, 'stat_data']) &&\n        !_.has(SillyTavern.chat, [1, 'variables', 0, 'ignore_cleanup'])\n    ) {\n        const result = await SillyTavern.callGenericPopup(\n            ', ?()',\n            SillyTavern.POPUP_TYPE.CONFIRM,\n            '',\n            {\n                okButton: '',\n                cancelButton: '',\n                customButtons: [''],\n            }\n        );\n        if (\n            result === SillyTavern.POPUP_RESULT.CANCELLED ||\n            result === SillyTavern.POPUP_RESULT.NEGATIVE\n        ) {\n            _.set(SillyTavern.chat, [1, 'variables', 0, 'ignore_cleanup'], true);\n        } else {\n            toastr.info(\n                `${result === SillyTavern.POPUP_RESULT.CUSTOM1 ? '' : ''}...`,\n                '[MVU]'\n            );\n            let is_backup_success = false;\n            if (result === SillyTavern.POPUP_RESULT.CUSTOM1 || result === 2) {\n                try {\n                    const body = {\n                        is_group: false,\n                        avatar_url: SillyTavern.characters[Number(SillyTavern.characterId)]?.avatar,\n                        file: `${SillyTavern.getCurrentChatId()}.jsonl`,\n                        exportfilename: `${SillyTavern.getCurrentChatId()}.jsonl`,\n                        format: 'jsonl',\n                    };\n\n                    const response = await fetch('/api/chats/export', {\n                        method: 'POST',\n                        body: JSON.stringify(body),\n                        headers: SillyTavern.getRequestHeaders(),\n                    });\n                    const data = await response.json();\n                    if (!response.ok) {\n                        toastr.error(\n                            `: ${data.message}`,\n                            '[MVU]'\n                        );\n                    } else {\n                        toastr.success(data.message);\n                        //\n                        const serialized = data.result;\n                        const blob = new Blob([serialized], { type: 'text/plain' });\n                        const url = URL.createObjectURL(blob);\n                        const link = document.createElement('a');\n                        link.href = url;\n                        link.download = body.exportfilename;\n                        link.click();\n                        URL.revokeObjectURL(url);\n                        is_backup_success = true;\n                    }\n                } catch (error) {\n                    // display error message\n                    toastr.error(`: ${error}`, '[MVU]');\n                }\n            }\n            if (result === SillyTavern.POPUP_RESULT.AFFIRMATIVE || is_backup_success) {\n                const counter = cleanupVariablesInMessages(\n                    1, //0 \n                    SillyTavern.chat.length - 1 - ,\n                    store.settings.\n                );\n                if (counter > 0) {\n                    toastr.info(` ${counter} `, '[MVU]', {\n                        timeOut: 1000,\n                    });\n                }\n            }\n        }\n    }\n\n    // \n    scopedEventOn(\n        tavern_events.MESSAGE_DELETED,\n        _.debounce(async () => {\n            //debounce \n            const last_message_id = SillyTavern.chat.length - 1;\n\n            const store = useSettingsStore();\n            const {  } = store.settings.auto_cleanup;\n\n            const last_10th_message_id = Math.max(1, last_message_id - );\n            const last_not_has_variable_message_id = SillyTavern.chat.findLastIndex(\n                chat_message =>\n                    !_.has(chat_message, ['variables', chat_message.swipe_id ?? 0, 'stat_data']) ||\n                    !_.has(chat_message, ['variables', chat_message.swipe_id ?? 0, 'schema'])\n            );\n            if (last_10th_message_id > last_not_has_variable_message_id) {\n                //  10 \n                console.info(` ${} `);\n                return;\n            }\n\n            const last_20th_message_id = Math.max(1, last_message_id - );\n            const snapshot_message_id = findLastValidMessage(last_20th_message_id);\n            if (\n                snapshot_message_id === -1 ||\n                !_.has(SillyTavern.chat, [snapshot_message_id, 'variables', 0, 'stat_data'])\n            ) {\n                // \n                toastr.warning(\n                    ` 0 ~ ${last_20th_message_id} `,\n                    '[MVU]'\n                );\n                return;\n            }\n            const snapshot_chat_message = SillyTavern.chat[snapshot_message_id];\n\n            toastr.info(`...`, '[MVU]', { timeOut: 1000 });\n\n            // start/end  \"10\" \n            let message = SillyTavern.chat[snapshot_message_id + 1].mes;\n            let variables = klona(\n                snapshot_chat_message.variables![snapshot_chat_message.swipe_id ?? 0] as MvuData\n            );\n            for (let i = snapshot_message_id + 1; i <= last_not_has_variable_message_id; i++) {\n                message = SillyTavern.chat[i].mes;\n                //\n                await updateVariables(message, variables);\n                const chat_message = SillyTavern.chat[i];\n                const is_valid_message =\n                    _.has(chat_message, ['variables', chat_message.swipe_id ?? 0, 'stat_data']) &&\n                    _.has(chat_message, ['variables', chat_message.swipe_id ?? 0, 'schema']);\n\n                // message_id \n                //assert\n                //\n                if (i >= last_20th_message_id && !is_valid_message) {\n                    await updateVariablesWith(\n                        data => {\n                            data.initialized_lorebooks = variables.initialized_lorebooks;\n                            data.stat_data = variables.stat_data;\n                            if (variables.schema !== undefined) {\n                                data.schema = variables.schema;\n                            } else {\n                                _.unset(data, 'schema');\n                            }\n                            if (variables.display_data !== undefined) {\n                                _.set(data, 'display_data', variables.display_data);\n                            } else {\n                                _.unset(data, 'display_data');\n                            }\n                            if (variables.delta_data !== undefined) {\n                                _.set(data, 'delta_data', variables.delta_data);\n                            } else {\n                                _.unset(data, 'delta_data');\n                            }\n                            return data;\n                        },\n                        { type: 'message', message_id: i }\n                    );\n                    //variables \n                    variables = klona(variables);\n                }\n                //  update \n            }\n\n            toastr.info(``, '[MVU]', { timeOut: 3000 });\n        }, 2000)\n    );\n\n    await initCheck();\n    scopedEventOn(tavern_events.GENERATION_STARTED, updateGenState);\n    scopedEventOn(tavern_events.GENERATION_STARTED, initCheck);\n    scopedEventOn(tavern_events.MESSAGE_SENT, initCheck);\n    scopedEventOn(tavern_events.MESSAGE_SENT, handleVariablesInMessage);\n\n    // 3.6.5  `tavern_events` , \n    scopedEventOn('worldinfo_entries_loaded', handlePromptFilter);\n\n    scopedEventOn(\n        tavern_events.MESSAGE_RECEIVED,\n        is_jest_environment ? onMessageReceived : _.throttle(onMessageReceived, 3000)\n    );\n\n    SetReceivedCallbackFn(onMessageReceived);\n\n    scopedEventOn(exported_events.INVOKE_MVU_PROCESS, handleVariablesInCallback);\n    scopedEventOn(exported_events.UPDATE_VARIABLE, updateVariable);\n    scopedEventOn(tavern_events.CHAT_COMPLETION_SETTINGS_READY, overrideToolRequest);\n\n    _.set(window.parent, 'handleVariablesInMessage', handleVariablesInMessage);\n    registerFunction();\n\n    // \n    scopedEventOn(tavern_events.MESSAGE_RECEIVED, message_id => {\n        const store = useSettingsStore();\n        const {  } = store.settings.auto_cleanup;\n        if (!) {\n            return;\n        }\n        if (SillyTavern.chat.length % 5 !== 0) {\n            return; //  5 \n        }\n        const old_message_id = message_id - ; //user\n        if (old_message_id > 0) {\n            const counter = cleanupVariablesInMessages(\n                //  user * 2\n                Math.max(1, old_message_id - 2 -  * 2), //  MESSAGE_SENT\n                old_message_id,\n                store.settings.\n            );\n            console.log(`[MVU] ${counter} `);\n        }\n    });\n\n    showNotifications();\n    if (store.settings.internal. === false) {\n        store.settings.internal. = true;\n        store.settings.auto_cleanup. = true;\n    }\n\n    toastr.info(\n        `: ${__BUILD_DATE__ ?? 'Unknown'} (${__COMMIT_ID__ ?? 'Unknown'})`,\n        '[MVU]'\n    );\n}\n\nasync function destroy() {\n    if (vanilla_parseToolCalls !== null) {\n        SillyTavern.ToolManager.parseToolCalls = vanilla_parseToolCalls;\n        vanilla_parseToolCalls = null;\n    }\n    unregisterFunction();\n    clearScopedEvent();\n}\n\n$(async () => {\n    await initSillyTavernVersion();\n    await initTavernHelperVersion();\n    const { destroy: destroyPanel } = initPanel();\n    eventOn(tavern_events.CHAT_CHANGED, reloadScript);\n    await initialize();\n    await exportGlobals();\n\n    $(window).on('pagehide', async () => {\n        destroyPanel();\n        destroy();\n        unsetGlobals();\n    });\n});\n\nlet current_chat_id = SillyTavern.getCurrentChatId();\nfunction reloadScript(chat_id: string) {\n    if (current_chat_id !== chat_id) {\n        current_chat_id = chat_id;\n        destroy();\n        initialize();\n    }\n}\n","import { useSettingsStore } from '@/settings';\n\nexport function showNotifications() {\n    const store = useSettingsStore();\n\n    if (store.settings.internal. === false) {\n        toastr.info(\n            '-, ',\n            '[MVU]'\n        );\n        store.settings.internal. = true;\n    }\n    if (store.settings.internal. === false) {\n        toastr.info(\n            'MVU ;  `` ',\n            '[MVU]'\n        );\n        store.settings.internal. = true;\n    }\n    if (store.settings.internal.API === false) {\n        toastr.info(\n            'MVU  API  token  >= 4.0.14',\n            '[MVU]API'\n        );\n        store.settings.internal.API = true;\n    }\n\n    if (store.settings.internal. === false) {\n        toastr.info(\n            'MVU ',\n            '[MVU]'\n        );\n        // main.ts \n    }\n}\n","import Panel from '@/panel/Panel.vue';\nimport { createPinia } from 'pinia';\nimport { createApp } from 'vue';\n\nexport function initPanel() {\n    const app = createApp(Panel).use(createPinia());\n\n    const $app = $('<div>').attr('script_id', getScriptId());\n    $('#extensions_settings2').append($app);\n    app.mount($app[0]);\n\n    const $style = $(`<div>`)\n        .attr('script_id', getScriptId())\n        .append($(`head > style`, document).clone())\n        .appendTo('head');\n\n    return {\n        destroy: () => {\n            app.unmount();\n            $app.remove();\n            $style.remove();\n        },\n    };\n}\n"],"names":["___CSS_LOADER_EXPORT___","push","module","id","content","__esModule","default","locals","exports","add","sfc","props","target","__vccOpts","key","val","cssWithMappingToString","list","toString","this","map","item","needLayer","concat","length","join","i","modules","media","dedupe","supports","layer","undefined","alreadyImportedModules","k","_k","cssMapping","btoa","base64","unescape","encodeURIComponent","JSON","stringify","data","sourceMapping","listToStyles","parentId","styles","newStyles","part","css","sourceMap","parts","hasDocument","document","DEBUG","Error","stylesInDom","head","getElementsByTagName","singletonElement","singletonCounter","isProduction","noop","options","ssrIdKey","isOldIE","navigator","test","userAgent","toLowerCase","addStylesClient","_isProduction","_options","addStylesToDom","newList","mayRemove","domStyle","refs","j","addStyle","createStyleElement","styleElement","createElement","type","appendChild","obj","update","remove","querySelector","parentNode","removeChild","styleIndex","applyToSingletonTag","bind","applyToTag","newObj","textStore","replaceText","index","replacement","filter","Boolean","styleSheet","cssText","cssNode","createTextNode","childNodes","insertBefore","setAttribute","ssrId","sources","firstChild","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","assertVWD","_flag","_v","isValueWithDescriptionStatData","value","Array","isArray","isArraySchema","isObjectSchema","n","getter","d","a","definition","o","Object","defineProperty","enumerable","get","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","variable_events","VARIABLE_INITIALIZED","SINGLE_VARIABLE_UPDATED","VARIABLE_UPDATE_ENDED","VARIABLE_UPDATE_STARTED","COMMAND_PARSED","BEFORE_MESSAGE_UPDATE","exported_events","duringExtraCall","isDuringExtraAnalysis","setDuringExtraAnalysis","EXTENSIBLE_MARKER","generateSchema","oldSchemaNode","parentRecursiveExtensible","oldElementType","template","isExtensible","isRecursiveExtensible","extensible","recursiveExtensible","elementType","console","error","metaElementIndex","findIndex","_","isObject","isDate","metaElement","$meta","splice","log","markerIndex","indexOf","schema_node","typedData","oldProperties","oldExtensible","oldRecursiveExtensible","properties","schemaNode","parentMeta","oldChildNode","childRecursiveExtensible","childSchema","isRequired","required","includes","dataType","getSchemaForPath","schema","path","pathSegments","toPath","currentSchema","segment","reconcileAndApplySchema","variables","newSchema","klona","stat_data","newSchemaWithProps","strictTemplate","strictSet","concatTemplateArray","has","cleanUpMetadata","TavernHelper","globalThis","sillytavern_version","getSillyTavernVersion","tavernhelper_version","getTavernHelperVersion","isFunctionCallingSupported","SillyTavern","ToolManager","isToolCallingSupported","chatCompletionSettings","function_calling","is_jest_environment","jest","process","saveChatDebounced","debounce","saveChat","findLastValidMessage","end_message_id","chat","slice","findLastIndex","chat_message","swipe_id","stop_lists","scopedEventOn","event_type","listener","eventOn","eventRemoveListener","parseString","YAML","parseDocument","merge","toJS","e","e2","e3","correctlyMerge","lhs","rhs","mergeWith","_lhs","showHelpPopup","callGenericPopup","POPUP_TYPE","TEXT","allowVerticalScrolling","leftAlign","wide","Vue","z","Settings","number","transform","clamp","top_p","Math","max","prefault","legacy","auto_cleanup","internal","TempContentsDef","unsupported_warnings","useSettingsStore","defineStore","settings","ref","parse","extensionSettings","watch","new_settings","set","toRaw","saveSettingsDebounced","deep","useTempContents","temp_contents","__WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_mathjs_esm_aec644b1__","trimQuotesAndBackslashes","str","isString","replace","applyTemplate","strict_array_cast","array_merge_concat","value_is_object","value_is_array","template_is_array","parseCommandValue","valStr","trimmed","trim","startsWith","endsWith","result","Function","err","scope","math","parseFloat","toPrecision","extractCommands","inputText","results","matchAll","match","string","flatMap","patch","every","op","isJsonPatch","translated_commands","substring","full_match","args","reason","pathParts","lastPart","containerPath","keyOrIndexArg","extractJsonPatch","command","$index","setMatch","commandType","setStart","openParen","closeParen","findMatchingCloseParen","endPos","comment","potentialComment","fullMatch","params","parseParameters","isValid","sortBy","omit","startPos","parenCount","inQuote","quoteChar","char","prevChar","paramsString","currentParam","bracketCount","braceCount","async","getLastValidVariable","message_id","findLast","getVariables","pathFix","_match","rawInner","inner","wasQuoted","first","last","isPureDigits","hasWhitespace","prefix","_quote","name","hasSpecial","escaped","updateVariable","new_value","is_recursive","display_data","$internal","delta_data","currentValue","oldValue","reason_str","display_str","info","eventEmit","stringNewValue","isNullOrWhiteSpace","updateVariables","current_message_content","variables_before_update","out_status","delta_status","commands","substitudeMacros","error_info","current_command","outError","message","warn","error_last","error_command","strict_template","concat_template_array","strict_set","cmd","_unused_data","pathFixPass","newValue","at","Date","toISOString","isPathVWD","Number","oldValueCopy","finalNewValue","targetPath","existingValue","targetSchema","newKey","String","successful","valueToAssign","collection","keyOrIndex","isArrayElementPath","container","indexToRemove","parseInt","originalArray","keyOrIndexToRemove","pop","containerSchema","keyString","targetToRemove","itemRemoved","unset","isEqual","keys","keyToRemove","initialValue","valueToAdd","isVWD","potentialDate","parsedDate","isNaN","getTime","delta","newDate","finalValueToSet","is_modified","base_command","toastr","warning","timeOut","handleVariablesInMessage","getChatMessages","message_content","role","request_message_id","has_variable_modified","context","updater","initialized_lorebooks","updateVariablesWith","setChatMessages","refresh","handleVariablesInCallback","in_out_variable_info","old_variables","new_variables","cleanupVariablesInMessages","start_message_id","snap_interval","counter","forEach","msg_index","chat_flag","range","swipes","updateDescriptions","_init_path","init_data","msg_data","target_data","current_path","msgValue","targetObj","description","msg_array","current_target","description_path","initCheck","getLastMessageId","oldArray","newObject","lorebookName","is_updated","loadInitVarData","isEmpty","generated_schema","assign","last_msg","include_swipes","swipes_data","Promise","all","swipe","vanilla_variable_data","current_data","matched_init","is_initvar_applied","overrided_initvar","init_content","char_lorebook","getCharWorldbookNames","primary","replaceVariables","entries","escapeHtml","_e","dst_setting","scan_depth","context_percentage","budget_cap","min_activations","max_depth","max_recursion_steps","insertion_strategy","include_names","recursive","case_sensitive","match_whole_words","use_group_scoring","overflow_alert","getLorebookSettings","setLorebookSettings","updateLorebookSettings","mvu_data","lorebook_list","enabled_lorebook_list","selected_global_lorebooks","getCurrentCharPrimaryLorebook","getEnabledLorebookList","current_lorebook","init_entries","getLorebookEntries","merged_data","entry","codeblock_match","parsedData","parseError","isExtraModelSupported","UPDATE_REGEX","PLOT_REGEX","getIsExtraModelSupported","handlePromptFilter","lores","tagged_worlds","Set","remove_and_check","lore","any_match","is_update_regex","is_plot_regex","world","characterLore","globalLore","chatLore","personaLore","supported_worlds","process_unsupported_worlds","removed_entries","uniq","removed_worlds","sort","from","msg_received_callback","buttons","function","latest_init_data","latest_msg_data","setChatMessage","success","INPUT","snapshot","then","is_legacy","fnd_message","result2","recur_intial_message_id","recur_variable_data","mes","current_chatmsg","current_chat_content","begin_pos","lastIndexOf","end_pos","filtered_string","snapshot_interval","depth","createMVU","events","parseMessage","old_data","variableData","getMvuData","replaceMvuData","getCurrentMvuData","getCurrentMessageId","replaceCurrentMvuData","reloadInitVar","setMvuVariable","getMvuVariable","category","default_value","isValueWithDescription","getRecordFromMvuData","game_data","extractRecord","MVU_FUNCTION_NAME","is_function_call_enabled","setFunctionCallEnabled","enabled","onVariableUpdatedCall","analysis","overrideToolRequest","generate_data","tools","size","tool_choice","class","script","__name","setup","__props","store","visibleButtons","computed","button","_ctx","_cache","title","tabindex","emits","model","$event","label","modelValue","min","step","placeholder","help","_hoisted_4","_hoisted_5","_hoisted_6","loading","models","selected","base_url","api_url","response","fetch","method","headers","getRequestHeaders","body","reverse_proxy","custom_url","proxy_password","chat_completion_source","cache","json","sortedUniq","flush","autocomplete","disabled","onInput","event","isFinite","option","_hoisted_7","_hoisted_8","_hoisted_9","additional_extra_configuration_supported","compare","vanilla_parseToolCalls","updateGenState","onMessageReceived","extra_param","extra_model_supported","user_input","generateFn","generateRaw","generate","retries","res","setTimeout","registerMacro","promptInjects","position","should_scan","collected_tool_calls","parseToolCalls","vanilla_bound","tool_calls","parsed","unset_if_equal","expected","current_result","injects","max_chat_history","should_stream","custom_api","apiurl","max_tokens","temperature","frequency_penalty","presence_penalty","mvu_function_call","fn","mvu_function_call_content","mvu_function_call_json","replaceAll","tag","start_index","end_index","update_block","fn_call_match","json_patch_match","unregisterMacro","initialize","appendInexistentScriptButtons","b","visible","getButtonEvent","removeChatVariables","CONFIRM","okButton","cancelButton","customButtons","POPUP_RESULT","CANCELLED","NEGATIVE","CUSTOM1","is_backup_success","is_group","avatar_url","characters","characterId","avatar","file","getCurrentChatId","exportfilename","format","ok","serialized","blob","Blob","url","URL","createObjectURL","link","href","download","click","revokeObjectURL","AFFIRMATIVE","tavern_events","MESSAGE_DELETED","last_message_id","last_10th_message_id","last_not_has_variable_message_id","last_20th_message_id","snapshot_message_id","snapshot_chat_message","is_valid_message","GENERATION_STARTED","MESSAGE_SENT","MESSAGE_RECEIVED","throttle","CHAT_COMPLETION_SETTINGS_READY","window","parent","registerFunctionTool","debug","mvu_update_schema","freeze","$schema","additionalProperties","minLength","displayName","stealth","parameters","shouldRegister","action","formatMessage","registerFunction","old_message_id","showNotifications","destroy","unregisterFunctionTool","stop","$","pkgVersion","catch","initSillyTavernVersion","initTavernHelperVersion","destroyPanel","app","createApp","Panel","use","createPinia","$app","attr","getScriptId","append","mount","$style","clone","appendTo","unmount","initPanel","CHAT_CHANGED","reloadScript","mvu","exportGlobals","on","current_chat_id","chat_id"],"sourceRoot":""}